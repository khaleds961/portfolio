var zP=Object.defineProperty,GP=Object.defineProperties;var WP=Object.getOwnPropertyDescriptors;var jb=Object.getOwnPropertySymbols;var KP=Object.prototype.hasOwnProperty,QP=Object.prototype.propertyIsEnumerable;var Ub=(t,e,n)=>e in t?zP(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,V=(t,e)=>{for(var n in e||={})KP.call(e,n)&&Ub(t,n,e[n]);if(jb)for(var n of jb(e))QP.call(e,n)&&Ub(t,n,e[n]);return t},Z=(t,e)=>GP(t,WP(e));var $g;function Yl(){return $g}function Yn(t){let e=$g;return $g=t,e}var Bb=Symbol("NotFound");function ps(t){return t===Bb||t?.name==="\u0275NotFound"}function td(t,e){return Object.is(t,e)}var Lt=null,Zl=!1,Hg=1,YP=null,Vt=Symbol("SIGNAL");function J(t){let e=Lt;return Lt=t,e}function nd(){return Lt}var no={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function gs(t){if(Zl)throw new Error("");if(Lt===null)return;Lt.consumerOnSignalRead(t);let e=Lt.producersTail;if(e!==void 0&&e.producer===t)return;let n,r=Lt.recomputing;if(r&&(n=e!==void 0?e.nextProducer:Lt.producers,n!==void 0&&n.producer===t)){Lt.producersTail=n,n.lastReadVersion=t.version;return}let i=t.consumersTail;if(i!==void 0&&i.consumer===Lt&&(!r||JP(i,Lt)))return;let o=vs(Lt),s={producer:t,consumer:Lt,nextProducer:n,prevConsumer:i,lastReadVersion:t.version,nextConsumer:void 0};Lt.producersTail=s,e!==void 0?e.nextProducer=s:Lt.producers=s,o&&zb(t,s)}function $b(){Hg++}function rd(t){if(!(vs(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===Hg)){if(!t.producerMustRecompute(t)&&!ys(t)){ed(t);return}t.producerRecomputeValue(t),ed(t)}}function qg(t){if(t.consumers===void 0)return;let e=Zl;Zl=!0;try{for(let n=t.consumers;n!==void 0;n=n.nextConsumer){let r=n.consumer;r.dirty||ZP(r)}}finally{Zl=e}}function zg(){return Lt?.consumerAllowSignalWrites!==!1}function ZP(t){t.dirty=!0,qg(t),t.consumerMarkedDirty?.(t)}function ed(t){t.dirty=!1,t.lastCleanEpoch=Hg}function ro(t){return t&&Hb(t),J(t)}function Hb(t){t.producersTail=void 0,t.recomputing=!0}function ms(t,e){J(e),t&&qb(t)}function qb(t){t.recomputing=!1;let e=t.producersTail,n=e!==void 0?e.nextProducer:t.producers;if(n!==void 0){if(vs(t))do n=Gg(n);while(n!==void 0);e!==void 0?e.nextProducer=void 0:t.producers=void 0}}function ys(t){for(let e=t.producers;e!==void 0;e=e.nextProducer){let n=e.producer,r=e.lastReadVersion;if(r!==n.version||(rd(n),r!==n.version))return!0}return!1}function io(t){if(vs(t)){let e=t.producers;for(;e!==void 0;)e=Gg(e)}t.producers=void 0,t.producersTail=void 0,t.consumers=void 0,t.consumersTail=void 0}function zb(t,e){let n=t.consumersTail,r=vs(t);if(n!==void 0?(e.nextConsumer=n.nextConsumer,n.nextConsumer=e):(e.nextConsumer=void 0,t.consumers=e),e.prevConsumer=n,t.consumersTail=e,!r)for(let i=t.producers;i!==void 0;i=i.nextProducer)zb(i.producer,i)}function Gg(t){let e=t.producer,n=t.nextProducer,r=t.nextConsumer,i=t.prevConsumer;if(t.nextConsumer=void 0,t.prevConsumer=void 0,r!==void 0?r.prevConsumer=i:e.consumersTail=i,i!==void 0)i.nextConsumer=r;else if(e.consumers=r,!vs(e)){let o=e.producers;for(;o!==void 0;)o=Gg(o)}return n}function vs(t){return t.consumerIsAlwaysLive||t.consumers!==void 0}function id(t){YP?.(t)}function JP(t,e){let n=e.producersTail;if(n!==void 0){let r=e.producers;do{if(r===t)return!0;if(r===n)break;r=r.nextProducer}while(r!==void 0)}return!1}function od(t,e){let n=Object.create(XP);n.computation=t,e!==void 0&&(n.equal=e);let r=()=>{if(rd(n),gs(n),n.value===Ec)throw n.error;return n.value};return r[Vt]=n,id(n),r}var Jl=Symbol("UNSET"),Xl=Symbol("COMPUTING"),Ec=Symbol("ERRORED"),XP=Z(V({},no),{value:Jl,dirty:!0,error:null,equal:td,kind:"computed",producerMustRecompute(t){return t.value===Jl||t.value===Xl},producerRecomputeValue(t){if(t.value===Xl)throw new Error("");let e=t.value;t.value=Xl;let n=ro(t),r,i=!1;try{r=t.computation(),J(null),i=e!==Jl&&e!==Ec&&r!==Ec&&t.equal(e,r)}catch(o){r=Ec,t.error=o}finally{ms(t,n)}if(i){t.value=e;return}t.value=r,t.version++}});function eO(){throw new Error}var Gb=eO;function Wb(t){Gb(t)}function Wg(t){Gb=t}var tO=null;function Kg(t,e){let n=Object.create(sd);n.value=t,e!==void 0&&(n.equal=e);let r=()=>Kb(n);return r[Vt]=n,id(n),[r,s=>_s(n,s),s=>Qg(n,s)]}function Kb(t){return gs(t),t.value}function _s(t,e){zg()||Wb(t),t.equal(t.value,e)||(t.value=e,nO(t))}function Qg(t,e){zg()||Wb(t),_s(t,e(t.value))}var sd=Z(V({},no),{equal:td,value:void 0,kind:"signal"});function nO(t){t.version++,$b(),qg(t),tO?.(t)}function re(t){return typeof t=="function"}function Es(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var ad=Es(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function oo(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var He=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(re(r))try{r()}catch(o){e=o instanceof ad?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{Qb(o)}catch(s){e=e??[],s instanceof ad?e=[...e,...s.errors]:e.push(s)}}if(e)throw new ad(e)}}add(e){var n;if(e&&e!==this)if(this.closed)Qb(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&oo(n,e)}remove(e){let{_finalizers:n}=this;n&&oo(n,e),e instanceof t&&e._removeParent(this)}};He.EMPTY=(()=>{let t=new He;return t.closed=!0,t})();var Yg=He.EMPTY;function cd(t){return t instanceof He||t&&"closed"in t&&re(t.remove)&&re(t.add)&&re(t.unsubscribe)}function Qb(t){re(t)?t():t.unsubscribe()}var Cn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Is={setTimeout(t,e,...n){let{delegate:r}=Is;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=Is;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function ud(t){Is.setTimeout(()=>{let{onUnhandledError:e}=Cn;if(e)e(t);else throw t})}function Ic(){}var Yb=Zg("C",void 0,void 0);function Zb(t){return Zg("E",void 0,t)}function Jb(t){return Zg("N",t,void 0)}function Zg(t,e,n){return{kind:t,value:e,error:n}}var so=null;function ws(t){if(Cn.useDeprecatedSynchronousErrorHandling){let e=!so;if(e&&(so={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=so;if(so=null,n)throw r}}else t()}function Xb(t){Cn.useDeprecatedSynchronousErrorHandling&&so&&(so.errorThrown=!0,so.error=t)}var ao=class extends He{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,cd(e)&&e.add(this)):this.destination=oO}static create(e,n,r){return new bs(e,n,r)}next(e){this.isStopped?Xg(Jb(e),this):this._next(e)}error(e){this.isStopped?Xg(Zb(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Xg(Yb,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},rO=Function.prototype.bind;function Jg(t,e){return rO.call(t,e)}var em=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){ld(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){ld(r)}else ld(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){ld(n)}}},bs=class extends ao{constructor(e,n,r){super();let i;if(re(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&Cn.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Jg(e.next,o),error:e.error&&Jg(e.error,o),complete:e.complete&&Jg(e.complete,o)}):i=e}this.destination=new em(i)}};function ld(t){Cn.useDeprecatedSynchronousErrorHandling?Xb(t):ud(t)}function iO(t){throw t}function Xg(t,e){let{onStoppedNotification:n}=Cn;n&&Is.setTimeout(()=>n(t,e))}var oO={closed:!0,next:Ic,error:iO,complete:Ic};var Ds=typeof Symbol=="function"&&Symbol.observable||"@@observable";function on(t){return t}function tm(...t){return nm(t)}function nm(t){return t.length===0?on:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var ce=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let o=aO(n)?n:new bs(n,r,i);return ws(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=eD(r),new r((i,o)=>{let s=new bs({next:a=>{try{n(a)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[Ds](){return this}pipe(...n){return nm(n)(this)}toPromise(n){return n=eD(n),new n((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return t.create=e=>new t(e),t})();function eD(t){var e;return(e=t??Cn.Promise)!==null&&e!==void 0?e:Promise}function sO(t){return t&&re(t.next)&&re(t.error)&&re(t.complete)}function aO(t){return t&&t instanceof ao||sO(t)&&cd(t)}function rm(t){return re(t?.lift)}function _e(t){return e=>{if(rm(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function pe(t,e,n,r,i){return new im(t,e,n,r,i)}var im=class extends ao{constructor(e,n,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Ts(){return _e((t,e)=>{let n=null;t._refCount++;let r=pe(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,o=n;n=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var Cs=class extends ce{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,rm(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new He;let n=this.getSubject();e.add(this.source.subscribe(pe(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=He.EMPTY)}return e}refCount(){return Ts()(this)}};var tD=Es(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var We=(()=>{class t extends ce{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new dd(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new tD}next(n){ws(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){ws(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){ws(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:o}=this;return r||i?Yg:(this.currentObservers=null,o.push(n),new He(()=>{this.currentObservers=null,oo(o,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){let n=new ce;return n.source=this,n}}return t.create=(e,n)=>new dd(e,n),t})(),dd=class extends We{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:Yg}};var Ct=class extends We{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var om={now(){return(om.delegate||Date).now()},delegate:void 0};var hd=class extends He{constructor(e,n){super()}schedule(e,n=0){return this}};var wc={setInterval(t,e,...n){let{delegate:r}=wc;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=wc;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var Ss=class extends hd{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,n),this}requestAsyncId(e,n,r=0){return wc.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&wc.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,oo(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var As=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};As.now=om.now;var Rs=class extends As{constructor(e,n=As.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var sm=new Rs(Ss);var fd=class extends Ss{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}};var pd=class extends Rs{};var am=new pd(fd);var Zt=new ce(t=>t.complete());function nD(t){return t&&re(t.schedule)}function rD(t){return t[t.length-1]}function gd(t){return re(rD(t))?t.pop():void 0}function ui(t){return nD(rD(t))?t.pop():void 0}function md(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function oD(t,e,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(h){try{l(r.next(h))}catch(p){s(p)}}function u(h){try{l(r.throw(h))}catch(p){s(p)}}function l(h){h.done?o(h.value):i(h.value).then(a,u)}l((r=r.apply(t,e||[])).next())})}function iD(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function co(t){return this instanceof co?(this.v=t,this):new co(t)}function sD(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(y){return function(w){return Promise.resolve(w).then(y,p)}}function a(y,w){r[y]&&(i[y]=function(k){return new Promise(function(x,j){o.push([y,k,x,j])>1||u(y,k)})},w&&(i[y]=w(i[y])))}function u(y,w){try{l(r[y](w))}catch(k){g(o[0][3],k)}}function l(y){y.value instanceof co?Promise.resolve(y.value.v).then(h,p):g(o[0][2],y)}function h(y){u("next",y)}function p(y){u("throw",y)}function g(y,w){y(w),o.shift(),o.length&&u(o[0][0],o[0][1])}}function aD(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof iD=="function"?iD(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(s){return new Promise(function(a,u){s=t[o](s),i(a,u,s.done,s.value)})}}function i(o,s,a,u){Promise.resolve(u).then(function(l){o({value:l,done:a})},s)}}var yd=t=>t&&typeof t.length=="number"&&typeof t!="function";function vd(t){return re(t?.then)}function _d(t){return re(t[Ds])}function Ed(t){return Symbol.asyncIterator&&re(t?.[Symbol.asyncIterator])}function Id(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function cO(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var wd=cO();function bd(t){return re(t?.[wd])}function Dd(t){return sD(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield co(n.read());if(i)return yield co(void 0);yield yield co(r)}}finally{n.releaseLock()}})}function Td(t){return re(t?.getReader)}function Je(t){if(t instanceof ce)return t;if(t!=null){if(_d(t))return uO(t);if(yd(t))return lO(t);if(vd(t))return dO(t);if(Ed(t))return cD(t);if(bd(t))return hO(t);if(Td(t))return fO(t)}throw Id(t)}function uO(t){return new ce(e=>{let n=t[Ds]();if(re(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function lO(t){return new ce(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function dO(t){return new ce(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,ud)})}function hO(t){return new ce(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function cD(t){return new ce(e=>{pO(t,e).catch(n=>e.error(n))})}function fO(t){return cD(Dd(t))}function pO(t,e){var n,r,i,o;return oD(this,void 0,void 0,function*(){try{for(n=aD(t);r=yield n.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}e.complete()})}function Jt(t,e,n,r=0,i=!1){let o=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(o),!i)return o}function li(t,e=0){return _e((n,r)=>{n.subscribe(pe(r,i=>Jt(r,t,()=>r.next(i),e),()=>Jt(r,t,()=>r.complete(),e),i=>Jt(r,t,()=>r.error(i),e)))})}function di(t,e=0){return _e((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function uD(t,e){return Je(t).pipe(di(e),li(e))}function lD(t,e){return Je(t).pipe(di(e),li(e))}function dD(t,e){return new ce(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function hD(t,e){return new ce(n=>{let r;return Jt(n,e,()=>{r=t[wd](),Jt(n,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){n.error(s);return}o?n.complete():n.next(i)},0,!0)}),()=>re(r?.return)&&r.return()})}function Cd(t,e){if(!t)throw new Error("Iterable cannot be null");return new ce(n=>{Jt(n,e,()=>{let r=t[Symbol.asyncIterator]();Jt(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function fD(t,e){return Cd(Dd(t),e)}function pD(t,e){if(t!=null){if(_d(t))return uD(t,e);if(yd(t))return dD(t,e);if(vd(t))return lD(t,e);if(Ed(t))return Cd(t,e);if(bd(t))return hD(t,e);if(Td(t))return fD(t,e)}throw Id(t)}function Ue(t,e){return e?pD(t,e):Je(t)}function X(...t){let e=ui(t);return Ue(t,e)}function xs(t,e){let n=re(t)?t:()=>t,r=i=>i.error(n());return new ce(e?i=>e.schedule(r,0,i):r)}function cm(t){return!!t&&(t instanceof ce||re(t.lift)&&re(t.subscribe))}var Ar=Es(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function ge(t,e){return _e((n,r)=>{let i=0;n.subscribe(pe(r,o=>{r.next(t.call(e,o,i++))}))})}var{isArray:gO}=Array;function mO(t,e){return gO(e)?t(...e):t(e)}function Sd(t){return ge(e=>mO(t,e))}var{isArray:yO}=Array,{getPrototypeOf:vO,prototype:_O,keys:EO}=Object;function Ad(t){if(t.length===1){let e=t[0];if(yO(e))return{args:e,keys:null};if(IO(e)){let n=EO(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function IO(t){return t&&typeof t=="object"&&vO(t)===_O}function Rd(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function xd(...t){let e=ui(t),n=gd(t),{args:r,keys:i}=Ad(t);if(r.length===0)return Ue([],e);let o=new ce(wO(r,e,i?s=>Rd(i,s):on));return n?o.pipe(Sd(n)):o}function wO(t,e,n=on){return r=>{gD(e,()=>{let{length:i}=t,o=new Array(i),s=i,a=i;for(let u=0;u<i;u++)gD(e,()=>{let l=Ue(t[u],e),h=!1;l.subscribe(pe(r,p=>{o[u]=p,h||(h=!0,a--),a||r.next(n(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function gD(t,e,n){t?Jt(n,t,e):e()}function mD(t,e,n,r,i,o,s,a){let u=[],l=0,h=0,p=!1,g=()=>{p&&!u.length&&!l&&e.complete()},y=k=>l<r?w(k):u.push(k),w=k=>{o&&e.next(k),l++;let x=!1;Je(n(k,h++)).subscribe(pe(e,j=>{i?.(j),o?y(j):e.next(j)},()=>{x=!0},void 0,()=>{if(x)try{for(l--;u.length&&l<r;){let j=u.shift();s?Jt(e,s,()=>w(j)):w(j)}g()}catch(j){e.error(j)}}))};return t.subscribe(pe(e,y,()=>{p=!0,g()})),()=>{a?.()}}function Xe(t,e,n=1/0){return re(e)?Xe((r,i)=>ge((o,s)=>e(r,o,i,s))(Je(t(r,i))),n):(typeof e=="number"&&(n=e),_e((r,i)=>mD(r,i,t,n)))}function Ns(t=1/0){return Xe(on,t)}function yD(){return Ns(1)}function Ms(...t){return yD()(Ue(t,ui(t)))}function bc(t){return new ce(e=>{Je(t()).subscribe(e)})}function um(...t){let e=gd(t),{args:n,keys:r}=Ad(t),i=new ce(o=>{let{length:s}=n;if(!s){o.complete();return}let a=new Array(s),u=s,l=s;for(let h=0;h<s;h++){let p=!1;Je(n[h]).subscribe(pe(o,g=>{p||(p=!0,l--),a[h]=g},()=>u--,void 0,()=>{(!u||!p)&&(l||o.next(r?Rd(r,a):a),o.complete())}))}});return e?i.pipe(Sd(e)):i}function sn(t,e){return _e((n,r)=>{let i=0;n.subscribe(pe(r,o=>t.call(e,o,i++)&&r.next(o)))})}function Rr(t){return _e((e,n)=>{let r=null,i=!1,o;r=e.subscribe(pe(n,void 0,void 0,s=>{o=Je(t(s,Rr(t)(e))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function vD(t,e,n,r,i){return(o,s)=>{let a=n,u=e,l=0;o.subscribe(pe(s,h=>{let p=l++;u=a?t(u,h,p):(a=!0,h),r&&s.next(u)},i&&(()=>{a&&s.next(u),s.complete()})))}}function uo(t,e){return re(e)?Xe(t,e,1):Xe(t,1)}function hi(t){return _e((e,n)=>{let r=!1;e.subscribe(pe(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function xr(t){return t<=0?()=>Zt:_e((e,n)=>{let r=0;e.subscribe(pe(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function Nd(t=bO){return _e((e,n)=>{let r=!1;e.subscribe(pe(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function bO(){return new Ar}function Dc(t){return _e((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function Nr(t,e){let n=arguments.length>=2;return r=>r.pipe(t?sn((i,o)=>t(i,o,r)):on,xr(1),n?hi(e):Nd(()=>new Ar))}function ks(t){return t<=0?()=>Zt:_e((e,n)=>{let r=[];e.subscribe(pe(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function lm(t,e){let n=arguments.length>=2;return r=>r.pipe(t?sn((i,o)=>t(i,o,r)):on,ks(1),n?hi(e):Nd(()=>new Ar))}function dm(t,e){return _e(vD(t,e,arguments.length>=2,!0))}function hm(...t){let e=ui(t);return _e((n,r)=>{(e?Ms(t,n,e):Ms(t,n)).subscribe(r)})}function Xt(t,e){return _e((n,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();n.subscribe(pe(r,u=>{i?.unsubscribe();let l=0,h=o++;Je(t(u,h)).subscribe(i=pe(r,p=>r.next(e?e(u,p,h,l++):p),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function Md(t){return _e((e,n)=>{Je(t).subscribe(pe(n,()=>n.complete(),Ic)),!n.closed&&e.subscribe(n)})}function ft(t,e,n){let r=re(t)||e||n?{next:t,error:e,complete:n}:t;return r?_e((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(pe(o,u=>{var l;(l=r.next)===null||l===void 0||l.call(r,u),o.next(u)},()=>{var u;a=!1,(u=r.complete)===null||u===void 0||u.call(r),o.complete()},u=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,u),o.error(u)},()=>{var u,l;a&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):on}function _D(t){let e=J(null);try{return t()}finally{J(e)}}var ED=Z(V({},no),{consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!0,dirty:!0,kind:"effect"});function ID(t){if(t.dirty=!1,t.version>0&&!ys(t))return;t.version++;let e=ro(t);try{t.cleanup(),t.fn()}finally{ms(t,e)}}var ho=class{full;major;minor;patch;constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},Dm=new ho("20.3.2");var Fd="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",H=class extends Error{code;constructor(e,n){super(Rc(e,n)),this.code=e}};function DO(t){return`NG0${Math.abs(t)}`}function Rc(t,e){return`${DO(t)}${e?": "+e:""}`}var xc=globalThis;function Te(t){for(let e in t)if(t[e]===Te)return e;throw Error("")}function DD(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function kr(t){if(typeof t=="string")return t;if(Array.isArray(t))return`[${t.map(kr).join(", ")}]`;if(t==null)return""+t;let e=t.overriddenName||t.name;if(e)return`${e}`;let n=t.toString();if(n==null)return""+n;let r=n.indexOf(`
`);return r>=0?n.slice(0,r):n}function Ld(t,e){return t?e?`${t} ${e}`:t:e||""}var TO=Te({__forward_ref__:Te});function Zn(t){return t.__forward_ref__=Zn,t.toString=function(){return kr(this())},t}function St(t){return Tm(t)?t():t}function Tm(t){return typeof t=="function"&&t.hasOwnProperty(TO)&&t.__forward_ref__===Zn}function G(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Pr(t){return{providers:t.providers||[],imports:t.imports||[]}}function Nc(t){return CO(t,Vd)}function Cm(t){return Nc(t)!==null}function CO(t,e){return t.hasOwnProperty(e)&&t[e]||null}function SO(t){let e=t?.[Vd]??null;return e||null}function pm(t){return t&&t.hasOwnProperty(Pd)?t[Pd]:null}var Vd=Te({\u0275prov:Te}),Pd=Te({\u0275inj:Te}),q=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,n){this._desc=e,this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=G({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function Sm(t){return t&&!!t.\u0275providers}var Am=Te({\u0275cmp:Te}),Rm=Te({\u0275dir:Te}),xm=Te({\u0275pipe:Te}),Nm=Te({\u0275mod:Te}),Cc=Te({\u0275fac:Te}),yo=Te({__NG_ELEMENT_ID__:Te}),wD=Te({__NG_ENV_ID__:Te});function Mc(t){return typeof t=="string"?t:t==null?"":String(t)}function TD(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():Mc(t)}var CD=Te({ngErrorCode:Te}),AO=Te({ngErrorMessage:Te}),RO=Te({ngTokenPath:Te});function Mm(t,e){return SD("",-200,e)}function jd(t,e){throw new H(-201,!1)}function SD(t,e,n){let r=new H(e,t);return r[CD]=e,r[AO]=t,n&&(r[RO]=n),r}function xO(t){return t[CD]}var gm;function AD(){return gm}function an(t){let e=gm;return gm=t,e}function km(t,e,n){let r=Nc(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&8)return null;if(e!==void 0)return e;jd(t,"Injector")}var NO={},lo=NO,mm="__NG_DI_FLAG__",ym=class{injector;constructor(e){this.injector=e}retrieve(e,n){let r=fo(n)||0;try{return this.injector.get(e,r&8?null:lo,r)}catch(i){if(ps(i))return i;throw i}}};function MO(t,e=0){let n=Yl();if(n===void 0)throw new H(-203,!1);if(n===null)return km(t,void 0,e);{let r=kO(e),i=n.retrieve(t,r);if(ps(i)){if(r.optional)return null;throw i}return i}}function se(t,e=0){return(AD()||MO)(St(t),e)}function M(t,e){return se(t,fo(e))}function fo(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function kO(t){return{optional:!!(t&8),host:!!(t&1),self:!!(t&2),skipSelf:!!(t&4)}}function vm(t){let e=[];for(let n=0;n<t.length;n++){let r=St(t[n]);if(Array.isArray(r)){if(r.length===0)throw new H(900,!1);let i,o=0;for(let s=0;s<r.length;s++){let a=r[s],u=PO(a);typeof u=="number"?u===-1?i=a.token:o|=u:i=a}e.push(se(i,o))}else e.push(se(r))}return e}function RD(t,e){return t[mm]=e,t.prototype[mm]=e,t}function PO(t){return t[mm]}function po(t,e){let n=t.hasOwnProperty(Cc);return n?t[Cc]:null}function xD(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){let i=t[r],o=e[r];if(n&&(i=n(i),o=n(o)),o!==i)return!1}return!0}function ND(t){return t.flat(Number.POSITIVE_INFINITY)}function Ud(t,e){t.forEach(n=>Array.isArray(n)?Ud(n,e):e(n))}function Pm(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function kc(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function MD(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let o=i-2;t[i]=t[o],i--}t[e]=n,t[e+1]=r}}function Bd(t,e,n){let r=Os(t,e);return r>=0?t[r|1]=n:(r=~r,MD(t,r,e,n)),r}function $d(t,e){let n=Os(t,e);if(n>=0)return t[n|1]}function Os(t,e){return OO(t,e,1)}function OO(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let o=r+(i-r>>1),s=t[o<<n];if(e===s)return o<<n;s>e?i=o:r=o+1}return~(i<<n)}var pi={},qt=[],Or=new q(""),Om=new q("",-1),Fm=new q(""),Sc=class{get(e,n=lo){if(n===lo){let i=SD("",-201);throw i.name="\u0275NotFound",i}return n}};function Lm(t){return t[Nm]||null}function gi(t){return t[Am]||null}function Vm(t){return t[Rm]||null}function kD(t){return t[xm]||null}function zt(t){return{\u0275providers:t}}function PD(t){return zt([{provide:Or,multi:!0,useValue:t}])}function OD(...t){return{\u0275providers:jm(!0,t),\u0275fromNgModule:!0}}function jm(t,...e){let n=[],r=new Set,i,o=s=>{n.push(s)};return Ud(e,s=>{let a=s;Od(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&FD(i,o),n}function FD(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];Um(i,o=>{e(o,r)})}}function Od(t,e,n,r){if(t=St(t),!t)return!1;let i=null,o=pm(t),s=!o&&gi(t);if(!o&&!s){let u=t.ngModule;if(o=pm(u),o)i=u;else return!1}else{if(s&&!s.standalone)return!1;i=t}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let u=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of u)Od(l,e,n,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{Ud(o.imports,h=>{Od(h,e,n,r)&&(l||=[],l.push(h))})}finally{}l!==void 0&&FD(l,e)}if(!a){let l=po(i)||(()=>new i);e({provide:i,useFactory:l,deps:qt},i),e({provide:Fm,useValue:i,multi:!0},i),e({provide:Or,useValue:()=>se(i),multi:!0},i)}let u=o.providers;if(u!=null&&!a){let l=t;Um(u,h=>{e(h,l)})}}else return!1;return i!==t&&t.providers!==void 0}function Um(t,e){for(let n of t)Sm(n)&&(n=n.\u0275providers),Array.isArray(n)?Um(n,e):e(n)}var FO=Te({provide:String,useValue:Te});function LD(t){return t!==null&&typeof t=="object"&&FO in t}function LO(t){return!!(t&&t.useExisting)}function VO(t){return!!(t&&t.useFactory)}function go(t){return typeof t=="function"}function VD(t){return!!t.useClass}var Pc=new q(""),kd={},bD={},fm;function Oc(){return fm===void 0&&(fm=new Sc),fm}var et=class{},mo=class extends et{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,Em(e,s=>this.processProvider(s)),this.records.set(Om,Ps(void 0,this)),i.has("environment")&&this.records.set(et,Ps(void 0,this));let o=this.records.get(Pc);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(Fm,qt,{self:!0}))}retrieve(e,n){let r=fo(n)||0;try{return this.get(e,lo,r)}catch(i){if(ps(i))return i;throw i}}destroy(){Tc(this),this._destroyed=!0;let e=J(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),J(e)}}onDestroy(e){return Tc(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){Tc(this);let n=Yn(this),r=an(void 0),i;try{return e()}finally{Yn(n),an(r)}}get(e,n=lo,r){if(Tc(this),e.hasOwnProperty(wD))return e[wD](this);let i=fo(r),o,s=Yn(this),a=an(void 0);try{if(!(i&4)){let l=this.records.get(e);if(l===void 0){let h=HO(e)&&Nc(e);h&&this.injectableDefInScope(h)?l=Ps(_m(e),kd):l=null,this.records.set(e,l)}if(l!=null)return this.hydrate(e,l,i)}let u=i&2?Oc():this.parent;return n=i&8&&n===lo?null:n,u.get(e,n)}catch(u){let l=xO(u);throw l===-200||l===-201?new H(l,null):u}finally{an(a),Yn(s)}}resolveInjectorInitializers(){let e=J(null),n=Yn(this),r=an(void 0),i;try{let o=this.get(Or,qt,{self:!0});for(let s of o)s()}finally{Yn(n),an(r),J(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(kr(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=St(e);let n=go(e)?e:St(e&&e.provide),r=UO(e);if(!go(e)&&e.multi===!0){let i=this.records.get(n);i||(i=Ps(void 0,kd,!0),i.factory=()=>vm(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n,r){let i=J(null);try{if(n.value===bD)throw Mm(kr(e));return n.value===kd&&(n.value=bD,n.value=n.factory(void 0,r)),typeof n.value=="object"&&n.value&&$O(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{J(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=St(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function _m(t){let e=Nc(t),n=e!==null?e.factory:po(t);if(n!==null)return n;if(t instanceof q)throw new H(204,!1);if(t instanceof Function)return jO(t);throw new H(204,!1)}function jO(t){if(t.length>0)throw new H(204,!1);let n=SO(t);return n!==null?()=>n.factory(t):()=>new t}function UO(t){if(LD(t))return Ps(void 0,t.useValue);{let e=Bm(t);return Ps(e,kd)}}function Bm(t,e,n){let r;if(go(t)){let i=St(t);return po(i)||_m(i)}else if(LD(t))r=()=>St(t.useValue);else if(VO(t))r=()=>t.useFactory(...vm(t.deps||[]));else if(LO(t))r=(i,o)=>se(St(t.useExisting),o!==void 0&&o&8?8:void 0);else{let i=St(t&&(t.useClass||t.provide));if(BO(t))r=()=>new i(...vm(t.deps));else return po(i)||_m(i)}return r}function Tc(t){if(t.destroyed)throw new H(205,!1)}function Ps(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function BO(t){return!!t.deps}function $O(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function HO(t){return typeof t=="function"||typeof t=="object"&&t.ngMetadataName==="InjectionToken"}function Em(t,e){for(let n of t)Array.isArray(n)?Em(n,e):n&&Sm(n)?Em(n.\u0275providers,e):e(n)}function lt(t,e){let n;t instanceof mo?(Tc(t),n=t):n=new ym(t);let r,i=Yn(n),o=an(void 0);try{return e()}finally{Yn(i),an(o)}}function jD(){return AD()!==void 0||Yl()!=null}var Rn=0,Q=1,te=2,ut=3,yn=4,vn=5,Fs=6,Ls=7,Ke=8,Vs=9,Jn=10,Fe=11,js=12,$m=13,vo=14,cn=15,mi=16,_o=17,Xn=18,Fc=19,Hm=20,Mr=21,Hd=22,Fr=23,un=24,qd=25,At=26,Rt=27,UD=1,qm=6,yi=7,Lc=8,Eo=9,tt=10;function er(t){return Array.isArray(t)&&typeof t[UD]=="object"}function xn(t){return Array.isArray(t)&&t[UD]===!0}function zm(t){return(t.flags&4)!==0}function vi(t){return t.componentOffset>-1}function zd(t){return(t.flags&1)===1}function tr(t){return!!t.template}function Us(t){return(t[te]&512)!==0}function Io(t){return(t[te]&256)===256}var Gm="svg",BD="math";function _n(t){for(;Array.isArray(t);)t=t[Rn];return t}function Wm(t,e){return _n(e[t])}function Nn(t,e){return _n(e[t.index])}function Vc(t,e){return t.data[e]}function En(t,e){let n=e[t];return er(n)?n:n[Rn]}function $D(t){return(t[te]&4)===4}function Gd(t){return(t[te]&128)===128}function HD(t){return xn(t[ut])}function nr(t,e){return e==null?null:t[e]}function Km(t){t[_o]=0}function Qm(t){t[te]&1024||(t[te]|=1024,Gd(t)&&wo(t))}function qD(t,e){for(;t>0;)e=e[vo],t--;return e}function jc(t){return!!(t[te]&9216||t[un]?.dirty)}function Wd(t){t[Jn].changeDetectionScheduler?.notify(8),t[te]&64&&(t[te]|=1024),jc(t)&&wo(t)}function wo(t){t[Jn].changeDetectionScheduler?.notify(0);let e=fi(t);for(;e!==null&&!(e[te]&8192||(e[te]|=8192,!Gd(e)));)e=fi(e)}function Ym(t,e){if(Io(t))throw new H(911,!1);t[Mr]===null&&(t[Mr]=[]),t[Mr].push(e)}function zD(t,e){if(t[Mr]===null)return;let n=t[Mr].indexOf(e);n!==-1&&t[Mr].splice(n,1)}function fi(t){let e=t[ut];return xn(e)?e[ut]:e}function Zm(t){return t[Ls]??=[]}function Jm(t){return t.cleanup??=[]}function GD(t,e,n,r){let i=Zm(e);i.push(n),t.firstCreatePass&&Jm(t).push(r,i.length-1)}var ue={lFrame:oT(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var Im=!1;function WD(){return ue.lFrame.elementDepthCount}function KD(){ue.lFrame.elementDepthCount++}function Xm(){ue.lFrame.elementDepthCount--}function QD(){return ue.bindingsEnabled}function YD(){return ue.skipHydrationRootTNode!==null}function ey(t){return ue.skipHydrationRootTNode===t}function ty(){ue.skipHydrationRootTNode=null}function le(){return ue.lFrame.lView}function pt(){return ue.lFrame.tView}function Lr(t){return ue.lFrame.contextLView=t,t[Ke]}function Vr(t){return ue.lFrame.contextLView=null,t}function gt(){let t=ny();for(;t!==null&&t.type===64;)t=t.parent;return t}function ny(){return ue.lFrame.currentTNode}function ZD(){let t=ue.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function Bs(t,e){let n=ue.lFrame;n.currentTNode=t,n.isParent=e}function ry(){return ue.lFrame.isParent}function JD(){ue.lFrame.isParent=!1}function iy(){return Im}function $s(t){let e=Im;return Im=t,e}function oy(){let t=ue.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function XD(t){return ue.lFrame.bindingIndex=t}function bo(){return ue.lFrame.bindingIndex++}function sy(t){let e=ue.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function eT(){return ue.lFrame.inI18n}function tT(t,e){let n=ue.lFrame;n.bindingIndex=n.bindingRootIndex=t,Kd(e)}function nT(){return ue.lFrame.currentDirectiveIndex}function Kd(t){ue.lFrame.currentDirectiveIndex=t}function rT(t){let e=ue.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function ay(){return ue.lFrame.currentQueryIndex}function Qd(t){ue.lFrame.currentQueryIndex=t}function qO(t){let e=t[Q];return e.type===2?e.declTNode:e.type===1?t[vn]:null}function cy(t,e,n){if(n&4){let i=e,o=t;for(;i=i.parent,i===null&&!(n&1);)if(i=qO(o),i===null||(o=o[vo],i.type&10))break;if(i===null)return!1;e=i,t=o}let r=ue.lFrame=iT();return r.currentTNode=e,r.lView=t,!0}function Yd(t){let e=iT(),n=t[Q];ue.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function iT(){let t=ue.lFrame,e=t===null?null:t.child;return e===null?oT(t):e}function oT(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function sT(){let t=ue.lFrame;return ue.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var uy=sT;function Zd(){let t=sT();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function aT(t){return(ue.lFrame.contextLView=qD(t,ue.lFrame.contextLView))[Ke]}function jr(){return ue.lFrame.selectedIndex}function _i(t){ue.lFrame.selectedIndex=t}function Jd(){let t=ue.lFrame;return Vc(t.tView,t.selectedIndex)}function Hs(){ue.lFrame.currentNamespace=Gm}function qs(){zO()}function zO(){ue.lFrame.currentNamespace=null}function cT(){return ue.lFrame.currentNamespace}var uT=!0;function Xd(){return uT}function eh(t){uT=t}function wm(t,e=null,n=null,r){let i=ly(t,e,n,r);return i.resolveInjectorInitializers(),i}function ly(t,e=null,n=null,r,i=new Set){let o=[n||qt,OD(t)];return r=r||(typeof t=="object"?void 0:kr(t)),new mo(o,e||Oc(),r||null,i)}var Be=class t{static THROW_IF_NOT_FOUND=lo;static NULL=new Sc;static create(e,n){if(Array.isArray(e))return wm({name:""},n,e,"");{let r=e.name??"";return wm({name:r},e.parent,e.providers,r)}}static \u0275prov=G({token:t,providedIn:"any",factory:()=>se(Om)});static __NG_ELEMENT_ID__=-1},mt=new q(""),Mn=(()=>{class t{static __NG_ELEMENT_ID__=GO;static __NG_ENV_ID__=n=>n}return t})(),Ac=class extends Mn{_lView;constructor(e){super(),this._lView=e}get destroyed(){return Io(this._lView)}onDestroy(e){let n=this._lView;return Ym(n,e),()=>zD(n,e)}};function GO(){return new Ac(le())}var Sn=class{_console=console;handleError(e){this._console.error("ERROR",e)}},Gt=new q("",{providedIn:"root",factory:()=>{let t=M(et),e;return n=>{t.destroyed&&!e?setTimeout(()=>{throw n}):(e??=t.get(Sn),e.handleError(n))}}}),lT={provide:Or,useValue:()=>void M(Sn),multi:!0},WO=new q("",{providedIn:"root",factory:()=>{let t=M(mt).defaultView;if(!t)return;let e=M(Gt),n=o=>{e(o.reason),o.preventDefault()},r=o=>{o.error?e(o.error):e(new Error(o.message,{cause:o})),o.preventDefault()},i=()=>{t.addEventListener("unhandledrejection",n),t.addEventListener("error",r)};typeof Zone<"u"?Zone.root.run(i):i(),M(Mn).onDestroy(()=>{t.removeEventListener("error",r),t.removeEventListener("unhandledrejection",n)})}});function dy(){return zt([PD(()=>void M(WO))])}function hy(t){return typeof t=="function"&&t[Vt]!==void 0}function Ae(t,e){let[n,r,i]=Kg(t,e?.equal),o=n,s=o[Vt];return o.set=r,o.update=i,o.asReadonly=fy.bind(o),o}function fy(){let t=this[Vt];if(t.readonlyFn===void 0){let e=()=>this();e[Vt]=t,t.readonlyFn=e}return t.readonlyFn}function py(t){return hy(t)&&typeof t.set=="function"}var An=class{},Uc=new q("",{providedIn:"root",factory:()=>!1});var gy=new q(""),th=new q("");var Bc=(()=>{class t{view;node;constructor(n,r){this.view=n,this.node=r}static __NG_ELEMENT_ID__=KO}return t})();function KO(){return new Bc(le(),gt())}var rr=(()=>{class t{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new Ct(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new ce(n=>{n.next(!1),n.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let n=this.taskId++;return this.pendingTasks.add(n),n}has(n){return this.pendingTasks.has(n)}remove(n){this.pendingTasks.delete(n),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=G({token:t,providedIn:"root",factory:()=>new t})}return t})(),Do=(()=>{class t{internalPendingTasks=M(rr);scheduler=M(An);errorHandler=M(Gt);add(){let n=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(n)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(n))}}run(n){let r=this.add();n().catch(this.errorHandler).finally(r)}static \u0275prov=G({token:t,providedIn:"root",factory:()=>new t})}return t})();function To(...t){}var $c=(()=>{class t{static \u0275prov=G({token:t,providedIn:"root",factory:()=>new bm})}return t})(),bm=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let n=e.zone,r=this.queues.get(n);r.has(e)&&(r.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let n=e.zone;this.queues.has(n)||this.queues.set(n,new Set);let r=this.queues.get(n);r.has(e)||r.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[n,r]of this.queues)n===null?e||=this.flushQueue(r):e||=n.run(()=>this.flushQueue(r));e||(this.dirtyEffectCount=0)}}flushQueue(e){let n=!1;for(let r of e)r.dirty&&(this.dirtyEffectCount--,n=!0,r.run());return n}};function Js(t){return{toString:t}.toString()}var nh="__parameters__";function t1(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function n1(t,e,n){return Js(()=>{let r=t1(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(u,l,h){let p=u.hasOwnProperty(nh)?u[nh]:Object.defineProperty(u,nh,{value:[]})[nh];for(;p.length<=h;)p.push(null);return(p[h]=p[h]||[]).push(s),u}}return i.prototype.ngMetadataName=t,i.annotationCls=i,i})}var yt=RD(n1("Optional"),8);function r1(t){return typeof t=="function"}var uh=class{previousValue;currentValue;firstChange;constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function UT(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}var or=(()=>{let t=()=>BT;return t.ngInherit=!0,t})();function BT(t){return t.type.prototype.ngOnChanges&&(t.setInput=o1),i1}function i1(){let t=HT(this),e=t?.current;if(e){let n=t.previous;if(n===pi)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function o1(t,e,n,r,i){let o=this.declaredInputs[r],s=HT(t)||s1(t,{previous:pi,current:null}),a=s.current||(s.current={}),u=s.previous,l=u[o];a[o]=new uh(l&&l.currentValue,n,u===pi),UT(t,e,i,n)}var $T="__ngSimpleChanges__";function HT(t){return t[$T]||null}function s1(t,e){return t[$T]=e}var dT=[];var Re=function(t,e=null,n){for(let r=0;r<dT.length;r++){let i=dT[r];i(t,e,n)}};function a1(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=BT(e);(n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s)}i&&(n.preOrderHooks??=[]).push(0-t,i),o&&((n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o))}function c1(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let o=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:h}=o;s&&(t.contentHooks??=[]).push(-n,s),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),u&&(t.viewHooks??=[]).push(-n,u),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),h!=null&&(t.destroyHooks??=[]).push(n,h)}}function oh(t,e,n){qT(t,e,3,n)}function sh(t,e,n,r){(t[te]&3)===n&&qT(t,e,n,r)}function my(t,e){let n=t[te];(n&3)===e&&(n&=16383,n+=1,t[te]=n)}function qT(t,e,n,r){let i=r!==void 0?t[_o]&65535:0,o=r??-1,s=e.length-1,a=0;for(let u=i;u<s;u++)if(typeof e[u+1]=="number"){if(a=e[u],r!=null&&a>=r)break}else e[u]<0&&(t[_o]+=65536),(a<o||o==-1)&&(u1(t,n,e,u),t[_o]=(t[_o]&4294901760)+u+2),u++}function hT(t,e){Re(4,t,e);let n=J(null);try{e.call(t)}finally{J(n),Re(5,t,e)}}function u1(t,e,n,r){let i=n[r]<0,o=n[r+1],s=i?-n[r]:n[r],a=t[s];i?t[te]>>14<t[_o]>>16&&(t[te]&3)===e&&(t[te]+=16384,hT(a,o)):hT(a,o)}var Gs=-1,So=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,n,r,i){this.factory=e,this.name=i,this.canSeeViewProviders=n,this.injectImpl=r}};function l1(t){return(t.flags&8)!==0}function d1(t){return(t.flags&16)!==0}function h1(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let o=n[r++],s=n[r++],a=n[r++];t.setAttribute(e,s,a,o)}else{let o=i,s=n[++r];f1(o)?t.setProperty(e,o,s):t.setAttribute(e,o,s),r++}}return r}function zT(t){return t===3||t===4||t===6}function f1(t){return t.charCodeAt(0)===64}function Ws(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?fT(t,n,i,null,e[++r]):fT(t,n,i,null,null))}}return t}function fT(t,e,n,r,i){let o=0,s=t.length;if(e===-1)s=-1;else for(;o<t.length;){let a=t[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<t.length;){let a=t[o];if(typeof a=="number")break;if(a===n){i!==null&&(t[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),i!==null&&t.splice(o++,0,i)}function GT(t){return t!==Gs}function lh(t){return t&32767}function p1(t){return t>>16}function dh(t,e){let n=p1(t),r=e;for(;n>0;)r=r[vo],n--;return r}var Sy=!0;function pT(t){let e=Sy;return Sy=t,e}var g1=256,WT=g1-1,KT=5,m1=0,ir={};function y1(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(yo)&&(r=n[yo]),r==null&&(r=n[yo]=m1++);let i=r&WT,o=1<<i;e.data[t+(i>>KT)]|=o}function hh(t,e){let n=QT(t,e);if(n!==-1)return n;let r=e[Q];r.firstCreatePass&&(t.injectorIndex=e.length,yy(r.data,t),yy(e,null),yy(r.blueprint,null));let i=ov(t,e),o=t.injectorIndex;if(GT(i)){let s=lh(i),a=dh(i,e),u=a[Q].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|u[s+l]}return e[o+8]=i,o}function yy(t,e){t.push(0,0,0,0,0,0,0,0,e)}function QT(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function ov(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=eC(i),r===null)return Gs;if(n++,i=i[vo],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return Gs}function Ay(t,e,n){y1(t,e,n)}function v1(t,e){if(e==="class")return t.classes;if(e==="style")return t.styles;let n=t.attrs;if(n){let r=n.length,i=0;for(;i<r;){let o=n[i];if(zT(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof n[i]=="string";)i++;else{if(o===e)return n[i+1];i=i+2}}}return null}function YT(t,e,n){if(n&8||t!==void 0)return t;jd(e,"NodeInjector")}function ZT(t,e,n,r){if(n&8&&r===void 0&&(r=null),(n&3)===0){let i=t[Vs],o=an(void 0);try{return i?i.get(e,r,n&8):km(e,r,n&8)}finally{an(o)}}return YT(r,e,n)}function JT(t,e,n,r=0,i){if(t!==null){if(e[te]&2048&&!(r&2)){let s=w1(t,e,n,r,ir);if(s!==ir)return s}let o=XT(t,e,n,r,ir);if(o!==ir)return o}return ZT(e,n,r,i)}function XT(t,e,n,r,i){let o=E1(n);if(typeof o=="function"){if(!cy(e,t,r))return r&1?YT(i,n,r):ZT(e,n,r,i);try{let s;if(s=o(r),s==null&&!(r&8))jd(n);else return s}finally{uy()}}else if(typeof o=="number"){let s=null,a=QT(t,e),u=Gs,l=r&1?e[cn][vn]:null;for((a===-1||r&4)&&(u=a===-1?ov(t,e):e[a+8],u===Gs||!mT(r,!1)?a=-1:(s=e[Q],a=lh(u),e=dh(u,e)));a!==-1;){let h=e[Q];if(gT(o,a,h.data)){let p=_1(a,e,n,s,r,l);if(p!==ir)return p}u=e[a+8],u!==Gs&&mT(r,e[Q].data[a+8]===l)&&gT(o,a,e)?(s=h,a=lh(u),e=dh(u,e)):a=-1}}return i}function _1(t,e,n,r,i,o){let s=e[Q],a=s.data[t+8],u=r==null?vi(a)&&Sy:r!=s&&(a.type&3)!==0,l=i&1&&o===a,h=ah(a,s,n,u,l);return h!==null?zc(e,s,h,a,i):ir}function ah(t,e,n,r,i){let o=t.providerIndexes,s=e.data,a=o&1048575,u=t.directiveStart,l=t.directiveEnd,h=o>>20,p=r?a:a+h,g=i?a+h:l;for(let y=p;y<g;y++){let w=s[y];if(y<u&&n===w||y>=u&&w.type===n)return y}if(i){let y=s[u];if(y&&tr(y)&&y.type===n)return u}return null}function zc(t,e,n,r,i){let o=t[n],s=e.data;if(o instanceof So){let a=o;if(a.resolving){let y=TD(s[n]);throw Mm(y)}let u=pT(a.canSeeViewProviders);a.resolving=!0;let l=s[n].type||s[n],h,p=a.injectImpl?an(a.injectImpl):null,g=cy(t,r,0);try{o=t[n]=a.factory(void 0,i,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&a1(n,s[n],e)}finally{p!==null&&an(p),pT(u),a.resolving=!1,uy()}}return o}function E1(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(yo)?t[yo]:void 0;return typeof e=="number"?e>=0?e&WT:I1:e}function gT(t,e,n){let r=1<<t;return!!(n[e+(t>>KT)]&r)}function mT(t,e){return!(t&2)&&!(t&1&&e)}var Co=class{_tNode;_lView;constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return JT(this._tNode,this._lView,e,fo(r),n)}};function I1(){return new Co(gt(),le())}function Ii(t){return Js(()=>{let e=t.prototype.constructor,n=e[Cc]||Ry(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let o=i[Cc]||Ry(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function Ry(t){return Tm(t)?()=>{let e=Ry(St(t));return e&&e()}:po(t)}function w1(t,e,n,r,i){let o=t,s=e;for(;o!==null&&s!==null&&s[te]&2048&&!Us(s);){let a=XT(o,s,n,r|2,ir);if(a!==ir)return a;let u=o.parent;if(!u){let l=s[Hm];if(l){let h=l.get(n,ir,r);if(h!==ir)return h}u=eC(s),s=s[vo]}o=u}return i}function eC(t){let e=t[Q],n=e.type;return n===2?e.declTNode:n===1?t[vn]:null}function Jc(t){return v1(gt(),t)}function b1(){return Xs(gt(),le())}function Xs(t,e){return new ln(Nn(t,e))}var ln=(()=>{class t{nativeElement;constructor(n){this.nativeElement=n}static __NG_ELEMENT_ID__=b1}return t})();function D1(t){return t instanceof ln?t.nativeElement:t}function T1(){return this._results[Symbol.iterator]()}var fh=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new We}constructor(e=!1){this._emitDistinctChangesOnly=e}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,n){return this._results.reduce(e,n)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,n){this.dirty=!1;let r=ND(e);(this._changesDetected=!xD(this._results,r,n))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=T1};function tC(t){return(t.flags&128)===128}var sv=(function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t})(sv||{}),nC=new Map,C1=0;function S1(){return C1++}function A1(t){nC.set(t[Fc],t)}function xy(t){nC.delete(t[Fc])}var yT="__ngContext__";function Ks(t,e){er(e)?(t[yT]=e[Fc],A1(e)):t[yT]=e}function rC(t){return oC(t[js])}function iC(t){return oC(t[yn])}function oC(t){for(;t!==null&&!xn(t);)t=t[yn];return t}var Ny;function av(t){Ny=t}function sC(){if(Ny!==void 0)return Ny;if(typeof document<"u")return document;throw new H(210,!1)}var Sh=new q("",{providedIn:"root",factory:()=>R1}),R1="ng",Ah=new q(""),wi=new q("",{providedIn:"platform",factory:()=>"unknown"});var Rh=new q("",{providedIn:"root",factory:()=>sC().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var x1="h",N1="b";var aC="r";var cC="di";var uC=!1,lC=new q("",{providedIn:"root",factory:()=>uC});var M1=(t,e,n,r)=>{};function k1(t,e,n,r){M1(t,e,n,r)}function cv(t){return(t.flags&32)===32}var P1=()=>null;function dC(t,e,n=!1){return P1(t,e,n)}function hC(t,e){let n=t.contentQueries;if(n!==null){let r=J(null);try{for(let i=0;i<n.length;i+=2){let o=n[i],s=n[i+1];if(s!==-1){let a=t.data[s];Qd(o),a.contentQueries(2,e[s],s)}}}finally{J(r)}}}function My(t,e,n){Qd(0);let r=J(null);try{e(t,n)}finally{J(r)}}function fC(t,e,n){if(zm(e)){let r=J(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=t.data[s];if(a.contentQueries){let u=n[s];a.contentQueries(1,u,s)}}}finally{J(r)}}}var Ur=(function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t})(Ur||{});var rh;function O1(){if(rh===void 0&&(rh=null,xc.trustedTypes))try{rh=xc.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return rh}function vT(t){return O1()?.createScriptURL(t)||t}var ph=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Fd})`}};function Xc(t){return t instanceof ph?t.changingThisBreaksApplicationSecurity:t}function uv(t,e){let n=pC(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${Fd})`)}return n===e}function pC(t){return t instanceof ph&&t.getTypeName()||null}var F1=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function gC(t){return t=String(t),t.match(F1)?t:"unsafe:"+t}var xh=(function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t})(xh||{});function en(t){let e=yC();return e?e.sanitize(xh.URL,t)||"":uv(t,"URL")?Xc(t):gC(Mc(t))}function mC(t){let e=yC();if(e)return vT(e.sanitize(xh.RESOURCE_URL,t)||"");if(uv(t,"ResourceURL"))return vT(Xc(t));throw new H(904,!1)}function L1(t,e){return e==="src"&&(t==="embed"||t==="frame"||t==="iframe"||t==="media"||t==="script")||e==="href"&&(t==="base"||t==="link")?mC:en}function lv(t,e,n){return L1(e,n)(t)}function yC(){let t=le();return t&&t[Jn].sanitizer}function vC(t){return t instanceof Function?t():t}function V1(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||t.charCodeAt(i+o)<=32)return i}n=i+1}}var _C="ng-template";function j1(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&V1(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(dv(t))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===n)return!0}return!1}function dv(t){return t.type===4&&t.value!==_C}function U1(t,e,n){let r=t.type===4&&!n?_C:t.value;return e===r}function B1(t,e,n){let r=4,i=t.attrs,o=i!==null?q1(i):0,s=!1;for(let a=0;a<e.length;a++){let u=e[a];if(typeof u=="number"){if(!s&&!kn(r)&&!kn(u))return!1;if(s&&kn(u))continue;s=!1,r=u|r&1;continue}if(!s)if(r&4){if(r=2|r&1,u!==""&&!U1(t,u,n)||u===""&&e.length===1){if(kn(r))return!1;s=!0}}else if(r&8){if(i===null||!j1(t,i,u,n)){if(kn(r))return!1;s=!0}}else{let l=e[++a],h=$1(u,i,dv(t),n);if(h===-1){if(kn(r))return!1;s=!0;continue}if(l!==""){let p;if(h>o?p="":p=i[h+1].toLowerCase(),r&2&&l!==p){if(kn(r))return!1;s=!0}}}}return kn(r)||s}function kn(t){return(t&1)===0}function $1(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let o=!1;for(;i<e.length;){let s=e[i];if(s===t)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return z1(e,t)}function H1(t,e,n=!1){for(let r=0;r<e.length;r++)if(B1(t,e[r],n))return!0;return!1}function q1(t){for(let e=0;e<t.length;e++){let n=t[e];if(zT(n))return e}return t.length}function z1(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function _T(t,e){return t?":not("+e.trim()+")":e}function G1(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if(typeof s=="string")if(r&2){let a=t[++n];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!kn(s)&&(e+=_T(o,i),i=""),r=s,o=o||!kn(r);n++}return i!==""&&(e+=_T(o,i)),e}function W1(t){return t.map(G1).join(",")}function K1(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let o=t[r];if(typeof o=="string")i===2?o!==""&&e.push(o,t[++r]):i===8&&n.push(o);else{if(!kn(i))break;i=o}r++}return n.length&&e.push(1,...n),e}var dn={};function Q1(t,e){return t.createText(e)}function Y1(t,e,n){t.setValue(e,n)}function EC(t,e,n){return t.createElement(e,n)}function gh(t,e,n,r,i){t.insertBefore(e,n,r,i)}function IC(t,e,n){t.appendChild(e,n)}function ET(t,e,n,r,i){r!==null?gh(t,e,n,r,i):IC(t,e,n)}function wC(t,e,n,r){t.removeChild(null,e,n,r)}function Z1(t,e,n){t.setAttribute(e,"style",n)}function J1(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function bC(t,e,n){let{mergedAttrs:r,classes:i,styles:o}=n;r!==null&&h1(t,e,r),i!==null&&J1(t,e,i),o!==null&&Z1(t,e,o)}function hv(t,e,n,r,i,o,s,a,u,l,h){let p=Rt+r,g=p+i,y=X1(p,g),w=typeof l=="function"?l():l;return y[Q]={type:t,blueprint:y,template:n,queries:null,viewQuery:a,declTNode:e,data:y.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:g,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:u,consts:w,incompleteFirstPass:!1,ssrId:h}}function X1(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:dn);return n}function eF(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=hv(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function fv(t,e,n,r,i,o,s,a,u,l,h){let p=e.blueprint.slice();return p[Rn]=i,p[te]=r|4|128|8|64|1024,(l!==null||t&&t[te]&2048)&&(p[te]|=2048),Km(p),p[ut]=p[vo]=t,p[Ke]=n,p[Jn]=s||t&&t[Jn],p[Fe]=a||t&&t[Fe],p[Vs]=u||t&&t[Vs]||null,p[vn]=o,p[Fc]=S1(),p[Fs]=h,p[Hm]=l,p[cn]=e.type==2?t[cn]:p,p}function tF(t,e,n){let r=Nn(e,t),i=eF(n),o=t[Jn].rendererFactory,s=pv(t,fv(t,i,null,DC(n),r,e,null,o.createRenderer(r,n),null,null,null));return t[e.index]=s}function DC(t){let e=16;return t.signals?e=4096:t.onPush&&(e=64),e}function TC(t,e,n,r){if(n===0)return-1;let i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function pv(t,e){return t[js]?t[$m][yn]=e:t[js]=e,t[$m]=e,e}function C(t=1){CC(pt(),le(),jr()+t,!1)}function CC(t,e,n,r){if(!r)if((e[te]&3)===3){let o=t.preOrderCheckHooks;o!==null&&oh(e,o,n)}else{let o=t.preOrderHooks;o!==null&&sh(e,o,0,n)}_i(n)}var Nh=(function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t})(Nh||{});function ky(t,e,n,r){let i=J(null);try{let[o,s,a]=t.inputs[n],u=null;(s&Nh.SignalBased)!==0&&(u=e[o][Vt]),u!==null&&u.transformFn!==void 0?r=u.transformFn(r):a!==null&&(r=a.call(e,r)),t.setInput!==null?t.setInput(e,u,r,n,o):UT(e,u,o,r)}finally{J(i)}}var On=(function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t})(On||{}),nF;function gv(t,e){return nF(t,e)}var Mh=new Set;function zs(t,e,n,r,i,o){if(r!=null){let s,a=!1;xn(r)?s=r:er(r)&&(a=!0,r=r[Rn]);let u=_n(r);t===0&&n!==null?i==null?IC(e,n,u):gh(e,n,u,i||null,!0):t===1&&n!==null?gh(e,n,u,i||null,!0):t===2?IT(o,l=>{wC(e,u,a,l)}):t===3&&IT(o,()=>{e.destroyNode(u)}),s!=null&&gF(e,t,s,n,i)}}function rF(t,e){SC(t,e),e[Rn]=null,e[vn]=null}function iF(t,e,n,r,i,o){r[Rn]=i,r[vn]=e,Ph(t,r,n,1,i,o)}function SC(t,e){e[Jn].changeDetectionScheduler?.notify(9),Ph(t,e,e[Fe],2,null,null)}function oF(t){let e=t[js];if(!e)return vy(t[Q],t);for(;e;){let n=null;if(er(e))n=e[js];else{let r=e[tt];r&&(n=r)}if(!n){for(;e&&!e[yn]&&e!==t;)er(e)&&vy(e[Q],e),e=e[ut];e===null&&(e=t),er(e)&&vy(e[Q],e),n=e&&e[yn]}e=n}}function mv(t,e){let n=t[Eo],r=n.indexOf(e);n.splice(r,1)}function kh(t,e){if(Io(e))return;let n=e[Fe];n.destroyNode&&Ph(t,e,n,3,null,null),oF(e)}function vy(t,e){if(Io(e))return;let n=J(null);try{e[te]&=-129,e[te]|=256,e[un]&&io(e[un]),cF(t,e),aF(t,e),e[Q].type===1&&e[Fe].destroy();let r=e[mi];if(r!==null&&xn(e[ut])){r!==e[ut]&&mv(r,e);let i=e[Xn];i!==null&&i.detachView(t)}xy(e)}finally{J(n)}}function IT(t,e){if(t&&t[At]&&t[At].leave)if(t[At].skipLeaveAnimations)t[At].skipLeaveAnimations=!1;else{let n=t[At].leave,r=[];for(let i=0;i<n.length;i++){let o=n[i];r.push(o())}t[At].running=Promise.allSettled(r),t[At].leave=void 0}sF(t,e)}function sF(t,e){if(t&&t[At]&&t[At].running){t[At].running.then(()=>{t[At]&&t[At].running&&(t[At].running=void 0),Mh.delete(t),e(!0)});return}e(!1)}function aF(t,e){let n=t.cleanup,r=e[Ls];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let a=n[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[n[s+1]];n[s].call(a)}r!==null&&(e[Ls]=null);let i=e[Mr];if(i!==null){e[Mr]=null;for(let s=0;s<i.length;s++){let a=i[s];a()}}let o=e[Fr];if(o!==null){e[Fr]=null;for(let s of o)s.destroy()}}function cF(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof So)){let o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],u=o[s+1];Re(4,a,u);try{u.call(a)}finally{Re(5,a,u)}}else{Re(4,i,o);try{o.call(i)}finally{Re(5,i,o)}}}}}function uF(t,e,n){return lF(t,e.parent,n)}function lF(t,e,n){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return n[Rn];if(vi(r)){let{encapsulation:i}=t.data[r.directiveStart+r.componentOffset];if(i===Ur.None||i===Ur.Emulated)return null}return Nn(r,n)}function dF(t,e,n){return fF(t,e,n)}function hF(t,e,n){return t.type&40?Nn(t,n):null}var fF=hF,wT;function yv(t,e,n,r){let i=uF(t,r,e),o=e[Fe],s=r.parent||e[vn],a=dF(s,r,e);if(i!=null)if(Array.isArray(n))for(let u=0;u<n.length;u++)ET(o,i,n[u],a,!1);else ET(o,i,n,a,!1);wT!==void 0&&wT(o,r,e,n,i)}function Hc(t,e){if(e!==null){let n=e.type;if(n&3)return Nn(e,t);if(n&4)return Py(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return Hc(t,r);{let i=t[e.index];return xn(i)?Py(-1,i):_n(i)}}else{if(n&128)return Hc(t,e.next);if(n&32)return gv(e,t)()||_n(t[e.index]);{let r=AC(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=fi(t[cn]);return Hc(i,r)}else return Hc(t,e.next)}}}return null}function AC(t,e){if(e!==null){let r=t[cn][vn],i=e.projection;return r.projection[i]}return null}function Py(t,e){let n=tt+t+1;if(n<e.length){let r=e[n],i=r[Q].firstChild;if(i!==null)return Hc(r,i)}return e[yi]}function vv(t,e,n,r,i,o,s){for(;n!=null;){if(n.type===128){n=n.next;continue}let a=r[n.index],u=n.type;if(s&&e===0&&(a&&Ks(_n(a),r),n.flags|=2),!cv(n))if(u&8)vv(t,e,n.child,r,i,o,!1),zs(e,t,i,a,o,r);else if(u&32){let l=gv(n,r),h;for(;h=l();)zs(e,t,i,h,o,r);zs(e,t,i,a,o,r)}else u&16?pF(t,e,r,n,i,o):zs(e,t,i,a,o,r);n=s?n.projectionNext:n.next}}function Ph(t,e,n,r,i,o){vv(n,r,t.firstChild,e,i,o,!1)}function pF(t,e,n,r,i,o){let s=n[cn],u=s[vn].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++){let h=u[l];zs(e,t,i,h,o,n)}else{let l=u,h=s[ut];tC(r)&&(l.flags|=128),vv(t,e,l,h,i,o,!0)}}function gF(t,e,n,r,i){let o=n[yi],s=_n(n);o!==s&&zs(e,t,r,o,i);for(let a=tt;a<n.length;a++){let u=n[a];Ph(u[Q],u,t,e,r,o)}}function mF(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let o=r.indexOf("-")===-1?void 0:On.DashCase;i==null?t.removeStyle(n,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=On.Important),t.setStyle(n,r,i,o))}}function RC(t,e,n,r,i){let o=jr(),s=r&2;try{_i(-1),s&&e.length>Rt&&CC(t,e,Rt,!1),Re(s?2:0,i,n),n(r,i)}finally{_i(o),Re(s?3:1,i,n)}}function xC(t,e,n){bF(t,e,n),(n.flags&64)===64&&DF(t,e,n)}function _v(t,e,n=Nn){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?n(e,t):t[s];t[i++]=a}}}function yF(t,e,n,r){let o=r.get(lC,uC)||n===Ur.ShadowDom,s=t.selectRootElement(e,o);return vF(s),s}function vF(t){_F(t)}var _F=()=>null;function EF(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function NC(t,e,n,r,i,o){let s=e[Q];if(Ev(t,s,e,n,r)){vi(t)&&wF(e,t.index);return}t.type&3&&(n=EF(n)),IF(t,e,n,r,i,o)}function IF(t,e,n,r,i,o){if(t.type&3){let s=Nn(t,e);r=o!=null?o(r,t.value||"",n):r,i.setProperty(s,n,r)}else t.type&12}function wF(t,e){let n=En(e,t);n[te]&16||(n[te]|=64)}function bF(t,e,n){let r=n.directiveStart,i=n.directiveEnd;vi(n)&&tF(e,n,t.data[r+n.componentOffset]),t.firstCreatePass||hh(n,e);let o=n.initialInputs;for(let s=r;s<i;s++){let a=t.data[s],u=zc(e,t,s,n);if(Ks(u,e),o!==null&&RF(e,s-r,u,a,n,o),tr(a)){let l=En(n.index,e);l[Ke]=zc(e,t,s,n)}}}function DF(t,e,n){let r=n.directiveStart,i=n.directiveEnd,o=n.index,s=nT();try{_i(o);for(let a=r;a<i;a++){let u=t.data[a],l=e[a];Kd(a),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&TF(u,l)}}finally{_i(-1),Kd(s)}}function TF(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function CF(t,e){let n=t.directiveRegistry,r=null;if(n)for(let i=0;i<n.length;i++){let o=n[i];H1(e,o.selectors,!1)&&(r??=[],tr(o)?r.unshift(o):r.push(o))}return r}function SF(t,e,n,r,i,o){let s=Nn(t,e);AF(e[Fe],s,o,t.value,n,r,i)}function AF(t,e,n,r,i,o,s){if(o==null)t.removeAttribute(e,i,n);else{let a=s==null?Mc(o):s(o,r||"",i);t.setAttribute(e,i,a,n)}}function RF(t,e,n,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;a+=2){let u=s[a],l=s[a+1];ky(r,n,u,l)}}function MC(t,e,n,r,i){let o=Rt+n,s=e[Q],a=i(s,e,t,r,n);e[o]=a,Bs(t,!0);let u=t.type===2;return u?(bC(e[Fe],a,t),(WD()===0||zd(t))&&Ks(a,e),KD()):Ks(a,e),Xd()&&(!u||!cv(t))&&yv(s,e,a,t),t}function kC(t){let e=t;return ry()?JD():(e=e.parent,Bs(e,!1)),e}function xF(t,e){let n=t[Vs];if(!n)return;let r;try{r=n.get(Gt,null)}catch{r=null}r?.(e)}function Ev(t,e,n,r,i){let o=t.inputs?.[r],s=t.hostDirectiveInputs?.[r],a=!1;if(s)for(let u=0;u<s.length;u+=2){let l=s[u],h=s[u+1],p=e.data[l];ky(p,n[l],h,i),a=!0}if(o)for(let u of o){let l=n[u],h=e.data[u];ky(h,l,r,i),a=!0}return a}function NF(t,e){let n=En(e,t),r=n[Q];MF(r,n);let i=n[Rn];i!==null&&n[Fs]===null&&(n[Fs]=dC(i,n[Vs])),Re(18),Iv(r,n,n[Ke]),Re(19,n[Ke])}function MF(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function Iv(t,e,n){Yd(e);try{let r=t.viewQuery;r!==null&&My(1,r,n);let i=t.template;i!==null&&RC(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[Xn]?.finishViewCreation(t),t.staticContentQueries&&hC(t,e),t.staticViewQueries&&My(2,t.viewQuery,n);let o=t.components;o!==null&&kF(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[te]&=-5,Zd()}}function kF(t,e){for(let n=0;n<e.length;n++)NF(t,e[n])}function Oh(t,e,n,r){let i=J(null);try{let o=e.tView,a=t[te]&4096?4096:16,u=fv(t,o,n,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=t[e.index];u[mi]=l;let h=t[Xn];return h!==null&&(u[Xn]=h.createEmbeddedView(o)),Iv(o,u,n),u}finally{J(i)}}function Gc(t,e){return!e||e.firstChild===null||tC(t)}function Wc(t,e,n,r,i=!1){for(;n!==null;){if(n.type===128){n=i?n.projectionNext:n.next;continue}let o=e[n.index];o!==null&&r.push(_n(o)),xn(o)&&PC(o,r);let s=n.type;if(s&8)Wc(t,e,n.child,r);else if(s&32){let a=gv(n,e),u;for(;u=a();)r.push(u)}else if(s&16){let a=AC(e,n);if(Array.isArray(a))r.push(...a);else{let u=fi(e[cn]);Wc(u[Q],u,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function PC(t,e){for(let n=tt;n<t.length;n++){let r=t[n],i=r[Q].firstChild;i!==null&&Wc(r[Q],r,i,e)}t[yi]!==t[Rn]&&e.push(t[yi])}function OC(t){if(t[qd]!==null){for(let e of t[qd])e.impl.addSequence(e);t[qd].length=0}}var FC=[];function PF(t){return t[un]??OF(t)}function OF(t){let e=FC.pop()??Object.create(LF);return e.lView=t,e}function FF(t){t.lView[un]!==t&&(t.lView=null,FC.push(t))}var LF=Z(V({},no),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{wo(t.lView)},consumerOnSignalRead(){this.lView[un]=this}});function VF(t){let e=t[un]??Object.create(jF);return e.lView=t,e}var jF=Z(V({},no),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{let e=fi(t.lView);for(;e&&!LC(e[Q]);)e=fi(e);e&&Qm(e)},consumerOnSignalRead(){this.lView[un]=this}});function LC(t){return t.type!==2}function VC(t){if(t[Fr]===null)return;let e=!0;for(;e;){let n=!1;for(let r of t[Fr])r.dirty&&(n=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=n&&!!(t[te]&8192)}}var UF=100;function jC(t,e=0){let r=t[Jn].rendererFactory,i=!1;i||r.begin?.();try{BF(t,e)}finally{i||r.end?.()}}function BF(t,e){let n=iy();try{$s(!0),Oy(t,e);let r=0;for(;jc(t);){if(r===UF)throw new H(103,!1);r++,Oy(t,1)}}finally{$s(n)}}function $F(t,e,n,r){if(Io(e))return;let i=e[te],o=!1,s=!1;Yd(e);let a=!0,u=null,l=null;o||(LC(t)?(l=PF(e),u=ro(l)):nd()===null?(a=!1,l=VF(e),u=ro(l)):e[un]&&(io(e[un]),e[un]=null));try{Km(e),XD(t.bindingStartIndex),n!==null&&RC(t,e,n,2,r),HF(e);let h=(i&3)===3;if(!o)if(h){let y=t.preOrderCheckHooks;y!==null&&oh(e,y,null)}else{let y=t.preOrderHooks;y!==null&&sh(e,y,0,null),my(e,0)}if(s||qF(e),VC(e),UC(e,0),t.contentQueries!==null&&hC(t,e),!o)if(h){let y=t.contentCheckHooks;y!==null&&oh(e,y)}else{let y=t.contentHooks;y!==null&&sh(e,y,1),my(e,1)}GF(t,e);let p=t.components;p!==null&&$C(e,p,0);let g=t.viewQuery;if(g!==null&&My(2,g,r),!o)if(h){let y=t.viewCheckHooks;y!==null&&oh(e,y)}else{let y=t.viewHooks;y!==null&&sh(e,y,2),my(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[Hd]){for(let y of e[Hd])y();e[Hd]=null}o||(OC(e),e[te]&=-73)}catch(h){throw o||wo(e),h}finally{l!==null&&(ms(l,u),a&&FF(l)),Zd()}}function HF(t){let e=t[At];if(e?.enter){for(let n of e.enter)n();e.enter=void 0}}function UC(t,e){for(let n=rC(t);n!==null;n=iC(n))for(let r=tt;r<n.length;r++){let i=n[r];BC(i,e)}}function qF(t){for(let e=rC(t);e!==null;e=iC(e)){if(!(e[te]&2))continue;let n=e[Eo];for(let r=0;r<n.length;r++){let i=n[r];Qm(i)}}}function zF(t,e,n){Re(18);let r=En(e,t);BC(r,n),Re(19,r[Ke])}function BC(t,e){Gd(t)&&Oy(t,e)}function Oy(t,e){let r=t[Q],i=t[te],o=t[un],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&ys(o)),s||=!1,o&&(o.dirty=!1),t[te]&=-9217,s)$F(r,t,r.template,t[Ke]);else if(i&8192){let a=J(null);try{VC(t),UC(t,1);let u=r.components;u!==null&&$C(t,u,1),OC(t)}finally{J(a)}}}function $C(t,e,n){for(let r=0;r<e.length;r++)zF(t,e[r],n)}function GF(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)_i(~i);else{let o=i,s=n[++r],a=n[++r];tT(s,o);let u=e[o];Re(24,u),a(2,u),Re(25,u)}}}finally{_i(-1)}}function wv(t,e){let n=iy()?64:1088;for(t[Jn].changeDetectionScheduler?.notify(e);t;){t[te]|=n;let r=fi(t);if(Us(t)&&!r)return t;t=r}return null}function HC(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function qC(t,e){let n=tt+e;if(n<t.length)return t[n]}function Fh(t,e,n,r=!0){let i=e[Q];if(WF(i,e,t,n),r){let s=Py(n,t),a=e[Fe],u=a.parentNode(t[yi]);u!==null&&iF(i,t[vn],a,e,u,s)}let o=e[Fs];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function zC(t,e){let n=Kc(t,e);return n!==void 0&&kh(n[Q],n),n}function Kc(t,e){if(t.length<=tt)return;let n=tt+e,r=t[n];if(r){let i=r[mi];i!==null&&i!==t&&mv(i,r),e>0&&(t[n-1][yn]=r[yn]);let o=kc(t,tt+e);rF(r[Q],r);let s=o[Xn];s!==null&&s.detachView(o[Q]),r[ut]=null,r[yn]=null,r[te]&=-129}return r}function WF(t,e,n,r){let i=tt+r,o=n.length;r>0&&(n[i-1][yn]=e),r<o-tt?(e[yn]=n[i],Pm(n,tt+r,e)):(n.push(e),e[yn]=null),e[ut]=n;let s=e[mi];s!==null&&n!==s&&GC(s,e);let a=e[Xn];a!==null&&a.insertView(t),Wd(e),e[te]|=128}function GC(t,e){let n=t[Eo],r=e[ut];if(er(r))t[te]|=2;else{let i=r[ut][cn];e[cn]!==i&&(t[te]|=2)}n===null?t[Eo]=[e]:n.push(e)}var Ei=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,n=e[Q];return Wc(n,e,n.firstChild,[])}constructor(e,n){this._lView=e,this._cdRefInjectingView=n}get context(){return this._lView[Ke]}set context(e){this._lView[Ke]=e}get destroyed(){return Io(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[ut];if(xn(e)){let n=e[Lc],r=n?n.indexOf(this):-1;r>-1&&(Kc(e,r),kc(n,r))}this._attachedToViewContainer=!1}kh(this._lView[Q],this._lView)}onDestroy(e){Ym(this._lView,e)}markForCheck(){wv(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[te]&=-129}reattach(){Wd(this._lView),this._lView[te]|=128}detectChanges(){this._lView[te]|=1024,jC(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new H(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Us(this._lView),n=this._lView[mi];n!==null&&!e&&mv(n,this._lView),SC(this._lView[Q],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new H(902,!1);this._appRef=e;let n=Us(this._lView),r=this._lView[mi];r!==null&&!n&&GC(r,this._lView),Wd(this._lView)}};var Qs=(()=>{class t{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=KF;constructor(n,r,i){this._declarationLView=n,this._declarationTContainer=r,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(n,r){return this.createEmbeddedViewImpl(n,r)}createEmbeddedViewImpl(n,r,i){let o=Oh(this._declarationLView,this._declarationTContainer,n,{embeddedViewInjector:r,dehydratedView:i});return new Ei(o)}}return t})();function KF(){return bv(gt(),le())}function bv(t,e){return t.type&4?new Qs(e,t,Xs(t,e)):null}function Lh(t,e,n,r,i){let o=t.data[e];if(o===null)o=QF(t,e,n,r,i),eT()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=r,o.attrs=i;let s=ZD();o.injectorIndex=s===null?-1:s.injectorIndex}return Bs(o,!0),o}function QF(t,e,n,r,i){let o=ny(),s=ry(),a=s?o:o&&o.parent,u=t.data[e]=ZF(t,a,n,e,r,i);return YF(t,u,o,s),u}function YF(t,e,n,r){t.firstChild===null&&(t.firstChild=e),n!==null&&(r?n.child==null&&e.parent!==null&&(n.child=e):n.next===null&&(n.next=e,e.prev=n))}function ZF(t,e,n,r,i,o){let s=e?e.injectorIndex:-1,a=0;return YD()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var LY=new RegExp(`^(\\d+)*(${N1}|${x1})*(.*)`);function JF(t){let e=t[qm]??[],r=t[ut][Fe],i=[];for(let o of e)o.data[cC]!==void 0?i.push(o):XF(o,r);t[qm]=i}function XF(t,e){let n=0,r=t.firstChild;if(r){let i=t.data[aC];for(;n<i;){let o=r.nextSibling;wC(e,r,!1),r=o,n++}}}var eL=()=>null,tL=()=>null;function Fy(t,e){return eL(t,e)}function WC(t,e,n){return tL(t,e,n)}var KC=class{},Vh=class{},Ly=class{resolveComponentFactory(e){throw new H(917,!1)}},eu=class{static NULL=new Ly},Ao=class{},Br=(()=>{class t{destroyNode=null;static __NG_ELEMENT_ID__=()=>nL()}return t})();function nL(){let t=le(),e=gt(),n=En(e.index,t);return(er(n)?n:t)[Fe]}var QC=(()=>{class t{static \u0275prov=G({token:t,providedIn:"root",factory:()=>null})}return t})();var ch={},Vy=class{injector;parentInjector;constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){let i=this.injector.get(e,ch,r);return i!==ch||n===ch?i:this.parentInjector.get(e,n,r)}};function mh(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=Ld(i,a);else if(o==2){let u=a,l=e[++s];r=Ld(r,u+": "+l+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}function me(t,e=0){let n=le();if(n===null)return se(t,e);let r=gt();return JT(r,n,St(t),e)}function rL(t,e,n,r,i){let o=r===null?null:{"":-1},s=i(t,n);if(s!==null){let a=s,u=null,l=null;for(let h of s)if(h.resolveHostDirectives!==null){[a,u,l]=h.resolveHostDirectives(s);break}sL(t,e,n,a,o,u,l)}o!==null&&r!==null&&iL(n,r,o)}function iL(t,e,n){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let o=n[e[i+1]];if(o==null)throw new H(-301,!1);r.push(e[i],o)}}function oL(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function sL(t,e,n,r,i,o,s){let a=r.length,u=!1;for(let g=0;g<a;g++){let y=r[g];!u&&tr(y)&&(u=!0,oL(t,n,g)),Ay(hh(n,e),t,y.type)}hL(n,t.data.length,a);for(let g=0;g<a;g++){let y=r[g];y.providersResolver&&y.providersResolver(y)}let l=!1,h=!1,p=TC(t,e,a,null);a>0&&(n.directiveToIndex=new Map);for(let g=0;g<a;g++){let y=r[g];if(n.mergedAttrs=Ws(n.mergedAttrs,y.hostAttrs),cL(t,n,e,p,y),dL(p,y,i),s!==null&&s.has(y)){let[k,x]=s.get(y);n.directiveToIndex.set(y.type,[p,k+n.directiveStart,x+n.directiveStart])}else(o===null||!o.has(y))&&n.directiveToIndex.set(y.type,p);y.contentQueries!==null&&(n.flags|=4),(y.hostBindings!==null||y.hostAttrs!==null||y.hostVars!==0)&&(n.flags|=64);let w=y.type.prototype;!l&&(w.ngOnChanges||w.ngOnInit||w.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),l=!0),!h&&(w.ngOnChanges||w.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),h=!0),p++}aL(t,n,o)}function aL(t,e,n){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=t.data[r];if(n===null||!n.has(i))bT(0,e,i,r),bT(1,e,i,r),TT(e,r,!1);else{let o=n.get(i);DT(0,e,o,r),DT(1,e,o,r),TT(e,r,!0)}}}function bT(t,e,n,r){let i=t===0?n.inputs:n.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;t===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(r),YC(e,o)}}function DT(t,e,n,r){let i=t===0?n.inputs:n.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],a;t===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[s]??=[],a[s].push(r,o),YC(e,s)}}function YC(t,e){e==="class"?t.flags|=8:e==="style"&&(t.flags|=16)}function TT(t,e,n){let{attrs:r,inputs:i,hostDirectiveInputs:o}=t;if(r===null||!n&&i===null||n&&o===null||dv(t)){t.initialInputs??=[],t.initialInputs.push(null);return}let s=null,a=0;for(;a<r.length;){let u=r[a];if(u===0){a+=4;continue}else if(u===5){a+=2;continue}else if(typeof u=="number")break;if(!n&&i.hasOwnProperty(u)){let l=i[u];for(let h of l)if(h===e){s??=[],s.push(u,r[a+1]);break}}else if(n&&o.hasOwnProperty(u)){let l=o[u];for(let h=0;h<l.length;h+=2)if(l[h]===e){s??=[],s.push(l[h+1],r[a+1]);break}}a+=2}t.initialInputs??=[],t.initialInputs.push(s)}function cL(t,e,n,r,i){t.data[r]=i;let o=i.factory||(i.factory=po(i.type,!0)),s=new So(o,tr(i),me,null);t.blueprint[r]=s,n[r]=s,uL(t,e,r,TC(t,n,i.hostVars,dn),i)}function uL(t,e,n,r,i){let o=i.hostBindings;if(o){let s=t.hostBindingOpCodes;s===null&&(s=t.hostBindingOpCodes=[]);let a=~e.index;lL(s)!=a&&s.push(a),s.push(n,r,o)}}function lL(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function dL(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;tr(e)&&(n[""]=t)}}function hL(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function ZC(t,e,n,r,i,o,s,a){let u=e[Q],l=u.consts,h=nr(l,s),p=Lh(u,t,n,r,h);return o&&rL(u,e,p,nr(l,a),i),p.mergedAttrs=Ws(p.mergedAttrs,p.attrs),p.attrs!==null&&mh(p,p.attrs,!1),p.mergedAttrs!==null&&mh(p,p.mergedAttrs,!0),u.queries!==null&&u.queries.elementStart(u,p),p}function JC(t,e){c1(t,e),zm(e)&&t.queries.elementEnd(e)}function fL(t,e,n,r,i,o){let s=e.consts,a=nr(s,i),u=Lh(e,t,n,r,a);if(u.mergedAttrs=Ws(u.mergedAttrs,u.attrs),o!=null){let l=nr(s,o);u.localNames=[];for(let h=0;h<l.length;h+=2)u.localNames.push(l[h],-1)}return u.attrs!==null&&mh(u,u.attrs,!1),u.mergedAttrs!==null&&mh(u,u.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,u),u}function Dv(t){return t!==null&&(typeof t=="function"||typeof t=="object")}function XC(t,e,n){return t[e]=n}function pL(t,e){return t[e]}function $r(t,e,n){if(n===dn)return!1;let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function _y(t,e,n){return function r(i){let o=vi(t)?En(t.index,e):e;wv(o,5);let s=e[Ke],a=CT(e,s,n,i),u=r.__ngNextListenerFn__;for(;u;)a=CT(e,s,u,i)&&a,u=u.__ngNextListenerFn__;return a}}function CT(t,e,n,r){let i=J(null);try{return Re(6,e,n),n(r)!==!1}catch(o){return xF(t,o),!1}finally{Re(7,e,n),J(i)}}function gL(t,e,n,r,i,o,s,a){let u=zd(t),l=!1,h=null;if(!r&&u&&(h=yL(e,n,o,t.index)),h!==null){let p=h.__ngLastListenerFn__||h;p.__ngNextListenerFn__=s,h.__ngLastListenerFn__=s,l=!0}else{let p=Nn(t,n),g=r?r(p):p;k1(n,g,o,a);let y=i.listen(g,o,a);if(!mL(o)){let w=r?k=>r(_n(k[t.index])):t.index;eS(w,e,n,o,a,y,!1)}}return l}function mL(t){return t.startsWith("animation")||t.startsWith("transition")}function yL(t,e,n,r){let i=t.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===n&&i[o+1]===r){let a=e[Ls],u=i[o+2];return a&&a.length>u?a[u]:null}typeof s=="string"&&(o+=2)}return null}function eS(t,e,n,r,i,o,s){let a=e.firstCreatePass?Jm(e):null,u=Zm(n),l=u.length;u.push(i,o),a&&a.push(r,t,l,(l+1)*(s?-1:1))}function ST(t,e,n,r,i,o){let s=e[n],a=e[Q],l=a.data[n].outputs[r],p=s[l].subscribe(o);eS(t.index,a,e,i,o,p,!0)}var jy=Symbol("BINDING");var yh=class extends eu{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=gi(e);return new Ys(n,this.ngModule)}};function vL(t){return Object.keys(t).map(e=>{let[n,r,i]=t[e],o={propName:n,templateName:e,isSignal:(r&Nh.SignalBased)!==0};return i&&(o.transform=i),o})}function _L(t){return Object.keys(t).map(e=>({propName:t[e],templateName:e}))}function EL(t,e,n){let r=e instanceof et?e:e?.injector;return r&&t.getStandaloneInjector!==null&&(r=t.getStandaloneInjector(r)||r),r?new Vy(n,r):n}function IL(t){let e=t.get(Ao,null);if(e===null)throw new H(407,!1);let n=t.get(QC,null),r=t.get(An,null);return{rendererFactory:e,sanitizer:n,changeDetectionScheduler:r,ngReflect:!1}}function wL(t,e){let n=tS(t);return EC(e,n,n==="svg"?Gm:n==="math"?BD:null)}function tS(t){return(t.selectors[0][0]||"div").toLowerCase()}var Ys=class extends Vh{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=vL(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=_L(this.componentDef.outputs),this.cachedOutputs}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=W1(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!n}create(e,n,r,i,o,s){Re(22);let a=J(null);try{let u=this.componentDef,l=bL(r,u,s,o),h=EL(u,i||this.ngModule,e),p=IL(h),g=p.rendererFactory.createRenderer(null,u),y=r?yF(g,r,u.encapsulation,h):wL(u,g),w=s?.some(AT)||o?.some(j=>typeof j!="function"&&j.bindings.some(AT)),k=fv(null,l,null,512|DC(u),null,null,p,g,h,null,dC(y,h,!0));k[Rt]=y,Yd(k);let x=null;try{let j=ZC(Rt,k,2,"#host",()=>l.directiveRegistry,!0,0);bC(g,y,j),Ks(y,k),xC(l,k,j),fC(l,j,k),JC(l,j),n!==void 0&&TL(j,this.ngContentSelectors,n),x=En(j.index,k),k[Ke]=x[Ke],Iv(l,k,null)}catch(j){throw x!==null&&xy(x),xy(k),j}finally{Re(23),Zd()}return new vh(this.componentType,k,!!w)}finally{J(a)}}};function bL(t,e,n,r){let i=t?["ng-version","20.3.2"]:K1(e.selectors[0]),o=null,s=null,a=0;if(n)for(let h of n)a+=h[jy].requiredVars,h.create&&(h.targetIdx=0,(o??=[]).push(h)),h.update&&(h.targetIdx=0,(s??=[]).push(h));if(r)for(let h=0;h<r.length;h++){let p=r[h];if(typeof p!="function")for(let g of p.bindings){a+=g[jy].requiredVars;let y=h+1;g.create&&(g.targetIdx=y,(o??=[]).push(g)),g.update&&(g.targetIdx=y,(s??=[]).push(g))}}let u=[e];if(r)for(let h of r){let p=typeof h=="function"?h:h.type,g=Vm(p);u.push(g)}return hv(0,null,DL(o,s),1,a,u,null,null,null,[i],null)}function DL(t,e){return!t&&!e?null:n=>{if(n&1&&t)for(let r of t)r.create();if(n&2&&e)for(let r of e)r.update()}}function AT(t){let e=t[jy].kind;return e==="input"||e==="twoWay"}var vh=class extends KC{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,n,r){super(),this._rootLView=n,this._hasInputBindings=r,this._tNode=Vc(n[Q],Rt),this.location=Xs(this._tNode,n),this.instance=En(this._tNode.index,n)[Ke],this.hostView=this.changeDetectorRef=new Ei(n,void 0),this.componentType=e}setInput(e,n){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let i=this._rootLView,o=Ev(r,i[Q],i,e,n);this.previousInputValues.set(e,n);let s=En(r.index,i);wv(s,1)}get injector(){return new Co(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function TL(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let o=n[i];r.push(o!=null&&o.length?Array.from(o):null)}}var No=(()=>{class t{static __NG_ELEMENT_ID__=CL}return t})();function CL(){let t=gt();return rS(t,le())}var SL=No,nS=class extends SL{_lContainer;_hostTNode;_hostLView;constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return Xs(this._hostTNode,this._hostLView)}get injector(){return new Co(this._hostTNode,this._hostLView)}get parentInjector(){let e=ov(this._hostTNode,this._hostLView);if(GT(e)){let n=dh(e,this._hostLView),r=lh(e),i=n[Q].data[r+8];return new Co(i,n)}else return new Co(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=RT(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-tt}createEmbeddedView(e,n,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=Fy(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},o,s);return this.insertImpl(a,i,Gc(this._hostTNode,s)),a}createComponent(e,n,r,i,o,s,a){let u=e&&!r1(e),l;if(u)l=n;else{let x=n||{};l=x.index,r=x.injector,i=x.projectableNodes,o=x.environmentInjector||x.ngModuleRef,s=x.directives,a=x.bindings}let h=u?e:new Ys(gi(e)),p=r||this.parentInjector;if(!o&&h.ngModule==null){let j=(u?p:this.parentInjector).get(et,null);j&&(o=j)}let g=gi(h.componentType??{}),y=Fy(this._lContainer,g?.id??null),w=y?.firstChild??null,k=h.create(p,i,w,o,s,a);return this.insertImpl(k.hostView,l,Gc(this._hostTNode,y)),k}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(HD(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let u=i[ut],l=new nS(u,u[vn],u[ut]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(n),s=this._lContainer;return Fh(s,i,o,r),e.attachToViewContainerRef(),Pm(Ey(s),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=RT(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=Kc(this._lContainer,n);r&&(kc(Ey(this._lContainer),n),kh(r[Q],r))}detach(e){let n=this._adjustIndex(e,-1),r=Kc(this._lContainer,n);return r&&kc(Ey(this._lContainer),n)!=null?new Ei(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function RT(t){return t[Lc]}function Ey(t){return t[Lc]||(t[Lc]=[])}function rS(t,e){let n,r=e[t.index];return xn(r)?n=r:(n=HC(r,e,null,t),e[t.index]=n,pv(e,n)),RL(n,e,t,r),new nS(n,t,e)}function AL(t,e){let n=t[Fe],r=n.createComment(""),i=Nn(e,t),o=n.parentNode(i);return gh(n,o,r,n.nextSibling(i),!1),r}var RL=ML,xL=()=>!1;function NL(t,e,n){return xL(t,e,n)}function ML(t,e,n,r){if(t[yi])return;let i;n.type&8?i=_n(r):i=AL(e,n),t[yi]=i}var Uy=class t{queryList;matches=null;constructor(e){this.queryList=e}clone(){return new t(this.queryList)}setDirty(){this.queryList.setDirty()}},By=class t{queries;constructor(e=[]){this.queries=e}createEmbeddedView(e){let n=e.queries;if(n!==null){let r=e.contentQueries!==null?e.contentQueries[0]:n.length,i=[];for(let o=0;o<r;o++){let s=n.getByIndex(o),a=this.queries[s.indexInDeclarationView];i.push(a.clone())}return new t(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let n=0;n<this.queries.length;n++)Tv(e,n).matches!==null&&this.queries[n].setDirty()}},$y=class{flags;read;predicate;constructor(e,n,r=null){this.flags=n,this.read=r,typeof e=="string"?this.predicate=UL(e):this.predicate=e}},Hy=class t{queries;constructor(e=[]){this.queries=e}elementStart(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,n)}elementEnd(e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(e)}embeddedTView(e){let n=null;for(let r=0;r<this.length;r++){let i=n!==null?n.length:0,o=this.getByIndex(r).embeddedTView(e,i);o&&(o.indexInDeclarationView=r,n!==null?n.push(o):n=[o])}return n!==null?new t(n):null}template(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,n)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},qy=class t{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(e,n=-1){this.metadata=e,this._declarationNodeIndex=n}elementStart(e,n){this.isApplyingToNode(n)&&this.matchTNode(e,n)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,n){this.elementStart(e,n)}embeddedTView(e,n){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,n),new t(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let n=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==n;)r=r.parent;return n===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,n){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let o=r[i];this.matchTNodeWithReadOption(e,n,kL(n,o)),this.matchTNodeWithReadOption(e,n,ah(n,e,o,!1,!1))}else r===Qs?n.type&4&&this.matchTNodeWithReadOption(e,n,-1):this.matchTNodeWithReadOption(e,n,ah(n,e,r,!1,!1))}matchTNodeWithReadOption(e,n,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===ln||i===No||i===Qs&&n.type&4)this.addMatch(n.index,-2);else{let o=ah(n,e,i,!1,!1);o!==null&&this.addMatch(n.index,o)}else this.addMatch(n.index,r)}}addMatch(e,n){this.matches===null?this.matches=[e,n]:this.matches.push(e,n)}};function kL(t,e){let n=t.localNames;if(n!==null){for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1]}return null}function PL(t,e){return t.type&11?Xs(t,e):t.type&4?bv(t,e):null}function OL(t,e,n,r){return n===-1?PL(e,t):n===-2?FL(t,e,r):zc(t,t[Q],n,e)}function FL(t,e,n){if(n===ln)return Xs(e,t);if(n===Qs)return bv(e,t);if(n===No)return rS(e,t)}function iS(t,e,n,r){let i=e[Xn].queries[r];if(i.matches===null){let o=t.data,s=n.matches,a=[];for(let u=0;s!==null&&u<s.length;u+=2){let l=s[u];if(l<0)a.push(null);else{let h=o[l];a.push(OL(e,h,s[u+1],n.metadata.read))}}i.matches=a}return i.matches}function zy(t,e,n,r){let i=t.queries.getByIndex(n),o=i.matches;if(o!==null){let s=iS(t,e,i,n);for(let a=0;a<o.length;a+=2){let u=o[a];if(u>0)r.push(s[a/2]);else{let l=o[a+1],h=e[-u];for(let p=tt;p<h.length;p++){let g=h[p];g[mi]===g[ut]&&zy(g[Q],g,l,r)}if(h[Eo]!==null){let p=h[Eo];for(let g=0;g<p.length;g++){let y=p[g];zy(y[Q],y,l,r)}}}}}return r}function LL(t,e){return t[Xn].queries[e].queryList}function VL(t,e,n){let r=new fh((n&4)===4);return GD(t,e,r,r.destroy),(e[Xn]??=new By).queries.push(new Uy(r))-1}function jL(t,e,n,r){let i=pt();if(i.firstCreatePass){let o=gt();BL(i,new $y(e,n,r),o.index),$L(i,t),(n&2)===2&&(i.staticContentQueries=!0)}return VL(i,le(),n)}function UL(t){return t.split(",").map(e=>e.trim())}function BL(t,e,n){t.queries===null&&(t.queries=new Hy),t.queries.track(new qy(e,n))}function $L(t,e){let n=t.contentQueries||(t.contentQueries=[]),r=n.length?n[n.length-1]:-1;e!==r&&n.push(t.queries.length-1,e)}function Tv(t,e){return t.queries.getByIndex(e)}function HL(t,e){let n=t[Q],r=Tv(n,e);return r.crossesNgTemplate?zy(n,t,e,[]):iS(n,t,r,e)}var xT=new Set;function bi(t){xT.has(t)||(xT.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}var Ro=class{},jh=class{};var _h=class extends Ro{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new yh(this);constructor(e,n,r,i=!0){super(),this.ngModuleType=e,this._parent=n;let o=Lm(e);this._bootstrapComponents=vC(o.bootstrap),this._r3Injector=ly(e,n,[{provide:Ro,useValue:this},{provide:eu,useValue:this.componentFactoryResolver},...r],kr(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Eh=class extends jh{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new _h(this.moduleType,e,[])}};var Qc=class extends Ro{injector;componentFactoryResolver=new yh(this);instance=null;constructor(e){super();let n=new mo([...e.providers,{provide:Ro,useValue:this},{provide:eu,useValue:this.componentFactoryResolver}],e.parent||Oc(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function tu(t,e,n=null){return new Qc({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var qL=(()=>{class t{_injector;cachedInjectors=new Map;constructor(n){this._injector=n}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){let r=jm(!1,n.type),i=r.length>0?tu([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,i)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=G({token:t,providedIn:"environment",factory:()=>new t(se(et))})}return t})();function dt(t){return Js(()=>{let e=oS(t),n=Z(V({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===sv.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(qL).getOrCreateStandaloneInjector(n):null,getExternalStyles:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||Ur.Emulated,styles:t.styles||qt,_:null,schemas:t.schemas||null,tView:null,id:""});e.standalone&&bi("NgStandalone"),sS(n);let r=t.dependencies;return n.directiveDefs=NT(r,zL),n.pipeDefs=NT(r,kD),n.id=KL(n),n})}function zL(t){return gi(t)||Vm(t)}function Di(t){return Js(()=>({type:t.type,bootstrap:t.bootstrap||qt,declarations:t.declarations||qt,imports:t.imports||qt,exports:t.exports||qt,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function GL(t,e){if(t==null)return pi;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],o,s,a,u;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o,u=i[3]||null):(o=i,s=i,a=Nh.None,u=null),n[o]=[r,a,u],e[o]=s}return n}function WL(t){if(t==null)return pi;let e={};for(let n in t)t.hasOwnProperty(n)&&(e[t[n]]=n);return e}function nt(t){return Js(()=>{let e=oS(t);return sS(e),e})}function oS(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputConfig:t.inputs||pi,exportAs:t.exportAs||null,standalone:t.standalone??!0,signals:t.signals===!0,selectors:t.selectors||qt,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:GL(t.inputs,e),outputs:WL(t.outputs),debugInfo:null}}function sS(t){t.features?.forEach(e=>e(t))}function NT(t,e){return t?()=>{let n=typeof t=="function"?t():t,r=[];for(let i of n){let o=e(i);o!==null&&r.push(o)}return r}:null}function KL(t){let e=0,n=typeof t.consts=="function"?"":t.consts,r=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,n,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function QL(t){return Object.getPrototypeOf(t.prototype).constructor}function Fn(t){let e=QL(t.type),n=!0,r=[t];for(;e;){let i;if(tr(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new H(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);let s=t;s.inputs=Iy(t.inputs),s.declaredInputs=Iy(t.declaredInputs),s.outputs=Iy(t.outputs);let a=i.hostBindings;a&&eV(t,a);let u=i.viewQuery,l=i.contentQueries;if(u&&JL(t,u),l&&XL(t,l),YL(t,i),DD(t.outputs,i.outputs),tr(i)&&i.data.animation){let h=t.data;h.animation=(h.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(t),a===Fn&&(n=!1)}}e=Object.getPrototypeOf(e)}ZL(r)}function YL(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let r=e.inputs[n];r!==void 0&&(t.inputs[n]=r,t.declaredInputs[n]=e.declaredInputs[n])}}function ZL(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){let i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Ws(i.hostAttrs,n=Ws(n,i.hostAttrs))}}function Iy(t){return t===pi?{}:t===qt?[]:t}function JL(t,e){let n=t.viewQuery;n?t.viewQuery=(r,i)=>{e(r,i),n(r,i)}:t.viewQuery=e}function XL(t,e){let n=t.contentQueries;n?t.contentQueries=(r,i,o)=>{e(r,i,o),n(r,i,o)}:t.contentQueries=e}function eV(t,e){let n=t.hostBindings;n?t.hostBindings=(r,i)=>{e(r,i),n(r,i)}:t.hostBindings=e}function tV(t,e,n,r,i,o,s,a){if(n.firstCreatePass){t.mergedAttrs=Ws(t.mergedAttrs,t.attrs);let h=t.tView=hv(2,t,i,o,s,n.directiveRegistry,n.pipeRegistry,null,n.schemas,n.consts,null);n.queries!==null&&(n.queries.template(n,t),h.queries=n.queries.embeddedTView(t))}a&&(t.flags|=a),Bs(t,!1);let u=nV(n,e,t,r);Xd()&&yv(n,e,u,t),Ks(u,e);let l=HC(u,e,u,t);e[r+Rt]=l,pv(e,l),NL(l,t,e)}function Ih(t,e,n,r,i,o,s,a,u,l,h){let p=n+Rt,g;if(e.firstCreatePass){if(g=Lh(e,p,4,s||null,a||null),l!=null){let y=nr(e.consts,l);g.localNames=[];for(let w=0;w<y.length;w+=2)g.localNames.push(y[w],-1)}}else g=e.data[p];return tV(g,t,e,n,r,i,o,u),l!=null&&_v(t,g,h),g}var nV=rV;function rV(t,e,n,r){return eh(!0),e[Fe].createComment("")}var Cv=(function(t){return t[t.CHANGE_DETECTION=0]="CHANGE_DETECTION",t[t.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",t})(Cv||{}),nu=new q(""),aS=!1,Gy=class extends We{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,jD()&&(this.destroyRef=M(Mn,{optional:!0})??void 0,this.pendingTasks=M(rr,{optional:!0})??void 0)}emit(e){let n=J(null);try{super.next(e)}finally{J(n)}}subscribe(e,n,r){let i=e,o=n||(()=>null),s=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof He&&e.add(a),a}wrapInTimeout(e){return n=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(n)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},Qe=Gy;function cS(t){let e,n;function r(){t=To;try{n!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(n),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{t(),r()}),typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(()=>{t(),r()})),()=>r()}function MT(t){return queueMicrotask(()=>t()),()=>{t=To}}var Sv="isAngularZone",wh=Sv+"_ID",iV=0,be=class t{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new Qe(!1);onMicrotaskEmpty=new Qe(!1);onStable=new Qe(!1);onError=new Qe(!1);constructor(e){let{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=aS}=e;if(typeof Zone>"u")throw new H(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,aV(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(Sv)===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new H(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new H(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,oV,To,To);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},oV={};function Av(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function sV(t){if(t.isCheckStableRunning||t.callbackScheduled)return;t.callbackScheduled=!0;function e(){cS(()=>{t.callbackScheduled=!1,Wy(t),t.isCheckStableRunning=!0,Av(t),t.isCheckStableRunning=!1})}t.scheduleInRootZone?Zone.root.run(()=>{e()}):t._outer.run(()=>{e()}),Wy(t)}function aV(t){let e=()=>{sV(t)},n=iV++;t._inner=t._inner.fork({name:"angular",properties:{[Sv]:!0,[wh]:n,[wh+n]:!0},onInvokeTask:(r,i,o,s,a,u)=>{if(cV(u))return r.invokeTask(o,s,a,u);try{return kT(t),r.invokeTask(o,s,a,u)}finally{(t.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),PT(t)}},onInvoke:(r,i,o,s,a,u,l)=>{try{return kT(t),r.invoke(o,s,a,u,l)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!uV(u)&&e(),PT(t)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(t._hasPendingMicrotasks=s.microTask,Wy(t),Av(t)):s.change=="macroTask"&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}function Wy(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.callbackScheduled===!0?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function kT(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function PT(t){t._nesting--,Av(t)}var Yc=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new Qe;onMicrotaskEmpty=new Qe;onStable=new Qe;onError=new Qe;run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}};function cV(t){return uS(t,"__ignore_ng_zone__")}function uV(t){return uS(t,"__scheduler_tick__")}function uS(t,e){return!Array.isArray(t)||t.length!==1?!1:t[0]?.data?.[e]===!0}var lS=(()=>{class t{impl=null;execute(){this.impl?.execute()}static \u0275prov=G({token:t,providedIn:"root",factory:()=>new t})}return t})();var Rv=(()=>{class t{log(n){console.log(n)}warn(n){console.warn(n)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=G({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();var xv=new q("");function Ti(t){return!!t&&typeof t.then=="function"}function Nv(t){return!!t&&typeof t.subscribe=="function"}var dS=new q("");var Mv=(()=>{class t{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r});appInits=M(dS,{optional:!0})??[];injector=M(Be);constructor(){}runInitializers(){if(this.initialized)return;let n=[];for(let i of this.appInits){let o=lt(this.injector,i);if(Ti(o))n.push(o);else if(Nv(o)){let s=new Promise((a,u)=>{o.subscribe({complete:a,error:u})});n.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),n.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||t)};static \u0275prov=G({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Uh=new q("");function hS(){Wg(()=>{let t="";throw new H(600,t)})}function fS(t){return t.isBoundToModule}var lV=10;var Ci=(()=>{class t{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=M(Gt);afterRenderManager=M(lS);zonelessEnabled=M(Uc);rootEffectScheduler=M($c);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new We;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=M(rr);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(ge(n=>!n))}constructor(){M(nu,{optional:!0})}whenStable(){let n;return new Promise(r=>{n=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{n.unsubscribe()})}_injector=M(et);_rendererFactory=null;get injector(){return this._injector}bootstrap(n,r){return this.bootstrapImpl(n,r)}bootstrapImpl(n,r,i=Be.NULL){return this._injector.get(be).run(()=>{Re(10);let s=n instanceof Vh;if(!this._injector.get(Mv).done){let w="";throw new H(405,w)}let u;s?u=n:u=this._injector.get(eu).resolveComponentFactory(n),this.componentTypes.push(u.componentType);let l=fS(u)?void 0:this._injector.get(Ro),h=r||u.selector,p=u.create(i,[],h,l),g=p.location.nativeElement,y=p.injector.get(xv,null);return y?.registerApplication(g),p.onDestroy(()=>{this.detachView(p.hostView),qc(this.components,p),y?.unregisterApplication(g)}),this._loadComponent(p),Re(11,p),p})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){Re(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(Cv.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new H(101,!1);let n=J(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,J(n),this.afterTick.next(),Re(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(Ao,null,{optional:!0}));let n=0;for(;this.dirtyFlags!==0&&n++<lV;)Re(14),this.synchronizeOnce(),Re(15)}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let n=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!jc(i))continue;let o=r&&!this.zonelessEnabled?0:1;jC(i,o),n=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}n||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:n})=>jc(n))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(n){let r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){let r=n;qc(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(n),this._injector.get(Uh,[]).forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>qc(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new H(406,!1);let n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||t)};static \u0275prov=G({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function qc(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function Si(t,e,n,r){let i=le(),o=bo();if($r(i,o,e)){let s=pt(),a=Jd();SF(a,i,t,e,n,r)}return Si}var qY=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";var Ky=class{destroy(e){}updateValue(e,n){}swap(e,n){let r=Math.min(e,n),i=Math.max(e,n),o=this.detach(i);if(i-r>1){let s=this.detach(r);this.attach(r,o),this.attach(i,s)}else this.attach(r,o)}move(e,n){this.attach(n,this.detach(e,!0))}};function wy(t,e,n,r,i){return t===n&&Object.is(e,r)?1:Object.is(i(t,e),i(n,r))?-1:0}function dV(t,e,n){let r,i,o=0,s=t.length-1,a=void 0;if(Array.isArray(e)){let u=e.length-1;for(;o<=s&&o<=u;){let l=t.at(o),h=e[o],p=wy(o,l,o,h,n);if(p!==0){p<0&&t.updateValue(o,h),o++;continue}let g=t.at(s),y=e[u],w=wy(s,g,u,y,n);if(w!==0){w<0&&t.updateValue(s,y),s--,u--;continue}let k=n(o,l),x=n(s,g),j=n(o,h);if(Object.is(j,x)){let z=n(u,y);Object.is(z,k)?(t.swap(o,s),t.updateValue(s,y),u--,s--):t.move(s,o),t.updateValue(o,h),o++;continue}if(r??=new bh,i??=FT(t,o,s,n),Qy(t,r,o,j))t.updateValue(o,h),o++,s++;else if(i.has(j))r.set(k,t.detach(o)),s--;else{let z=t.create(o,e[o]);t.attach(o,z),o++,s++}}for(;o<=u;)OT(t,r,n,o,e[o]),o++}else if(e!=null){let u=e[Symbol.iterator](),l=u.next();for(;!l.done&&o<=s;){let h=t.at(o),p=l.value,g=wy(o,h,o,p,n);if(g!==0)g<0&&t.updateValue(o,p),o++,l=u.next();else{r??=new bh,i??=FT(t,o,s,n);let y=n(o,p);if(Qy(t,r,o,y))t.updateValue(o,p),o++,s++,l=u.next();else if(!i.has(y))t.attach(o,t.create(o,p)),o++,s++,l=u.next();else{let w=n(o,h);r.set(w,t.detach(o)),s--}}}for(;!l.done;)OT(t,r,n,t.length,l.value),l=u.next()}for(;o<=s;)t.destroy(t.detach(s--));r?.forEach(u=>{t.destroy(u)})}function Qy(t,e,n,r){return e!==void 0&&e.has(r)?(t.attach(n,e.get(r)),e.delete(r),!0):!1}function OT(t,e,n,r,i){if(Qy(t,e,r,n(r,i)))t.updateValue(r,i);else{let o=t.create(r,i);t.attach(r,o)}}function FT(t,e,n,r){let i=new Set;for(let o=e;o<=n;o++)i.add(r(o,t.at(o)));return i}var bh=class{kvMap=new Map;_vMap=void 0;has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let n=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(n)?(this.kvMap.set(e,this._vMap.get(n)),this._vMap.delete(n)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,n){if(this.kvMap.has(e)){let r=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let i=this._vMap;for(;i.has(r);)r=i.get(r);i.set(r,n)}else this.kvMap.set(e,n)}forEach(e){for(let[n,r]of this.kvMap)if(e(r,n),this._vMap!==void 0){let i=this._vMap;for(;i.has(r);)r=i.get(r),e(r,n)}}};function Pe(t,e,n,r,i,o,s,a){bi("NgControlFlow");let u=le(),l=pt(),h=nr(l.consts,o);return Ih(u,l,t,e,n,r,i,h,256,s,a),kv}function kv(t,e,n,r,i,o,s,a){bi("NgControlFlow");let u=le(),l=pt(),h=nr(l.consts,o);return Ih(u,l,t,e,n,r,i,h,512,s,a),kv}function Oe(t,e){bi("NgControlFlow");let n=le(),r=bo(),i=n[r]!==dn?n[r]:-1,o=i!==-1?Dh(n,Rt+i):void 0,s=0;if($r(n,r,t)){let a=J(null);try{if(o!==void 0&&zC(o,s),t!==-1){let u=Rt+t,l=Dh(n,u),h=Xy(n[Q],u),p=WC(l,h,n),g=Oh(n,h,e,{dehydratedView:p});Fh(l,g,s,Gc(h,p))}}finally{J(a)}}else if(o!==void 0){let a=qC(o,s);a!==void 0&&(a[Ke]=e)}}var Yy=class{lContainer;$implicit;$index;constructor(e,n,r){this.lContainer=e,this.$implicit=n,this.$index=r}get $count(){return this.lContainer.length-tt}};function ru(t,e){return e}var Zy=class{hasEmptyBlock;trackByFn;liveCollection;constructor(e,n,r){this.hasEmptyBlock=e,this.trackByFn=n,this.liveCollection=r}};function Ln(t,e,n,r,i,o,s,a,u,l,h,p,g){bi("NgControlFlow");let y=le(),w=pt(),k=u!==void 0,x=le(),j=a?s.bind(x[cn][Ke]):s,z=new Zy(k,j);x[Rt+t]=z,Ih(y,w,t+1,e,n,r,i,nr(w.consts,o),256),k&&Ih(y,w,t+2,u,l,h,p,nr(w.consts,g),512)}var Jy=class extends Ky{lContainer;hostLView;templateTNode;operationsCounter=void 0;needsIndexUpdate=!1;constructor(e,n,r){super(),this.lContainer=e,this.hostLView=n,this.templateTNode=r}get length(){return this.lContainer.length-tt}at(e){return this.getLView(e)[Ke].$implicit}attach(e,n){let r=n[Fs];this.needsIndexUpdate||=e!==this.length,Fh(this.lContainer,n,e,Gc(this.templateTNode,r))}detach(e,n){return this.needsIndexUpdate||=e!==this.length-1,n&&hV(this.lContainer,e),fV(this.lContainer,e)}create(e,n){let r=Fy(this.lContainer,this.templateTNode.tView.ssrId),i=Oh(this.hostLView,this.templateTNode,new Yy(this.lContainer,n,e),{dehydratedView:r});return this.operationsCounter?.recordCreate(),i}destroy(e){kh(e[Q],e),this.operationsCounter?.recordDestroy()}updateValue(e,n){this.getLView(e)[Ke].$implicit=n}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[Ke].$index=e}getLView(e){return pV(this.lContainer,e)}};function Vn(t){let e=J(null),n=jr();try{let r=le(),i=r[Q],o=r[n],s=n+1,a=Dh(r,s);if(o.liveCollection===void 0){let l=Xy(i,s);o.liveCollection=new Jy(a,r,l)}else o.liveCollection.reset();let u=o.liveCollection;if(dV(u,t,o.trackByFn),u.updateIndexes(),o.hasEmptyBlock){let l=bo(),h=u.length===0;if($r(r,l,h)){let p=n+2,g=Dh(r,p);if(h){let y=Xy(i,p),w=WC(g,y,r),k=Oh(r,y,void 0,{dehydratedView:w});Fh(g,k,0,Gc(y,w))}else i.firstUpdatePass&&JF(g),zC(g,0)}}}finally{J(e)}}function Dh(t,e){return t[e]}function hV(t,e){if(t.length<=tt)return;let n=tt+e,r=t[n];r&&r[At]&&(r[At].skipLeaveAnimations=!0)}function fV(t,e){return Kc(t,e)}function pV(t,e){return qC(t,e)}function Xy(t,e){return Vc(t,e)}function ye(t,e,n){let r=le(),i=bo();if($r(r,i,e)){let o=pt(),s=Jd();NC(s,r,t,e,r[Fe],n)}return ye}function ev(t,e,n,r,i){Ev(e,t,n,i?"class":"style",r)}function A(t,e,n,r){let i=le(),o=i[Q],s=t+Rt,a=o.firstCreatePass?ZC(s,i,2,e,CF,QD(),n,r):o.data[s];if(MC(a,i,t,e,pS),zd(a)){let u=i[Q];xC(u,i,a),fC(u,a,i)}return r!=null&&_v(i,a),A}function N(){let t=pt(),e=gt(),n=kC(e);return t.firstCreatePass&&JC(t,n),ey(n)&&ty(),Xm(),n.classesWithoutHost!=null&&l1(n)&&ev(t,n,le(),n.classesWithoutHost,!0),n.stylesWithoutHost!=null&&d1(n)&&ev(t,n,le(),n.stylesWithoutHost,!1),N}function qe(t,e,n,r){return A(t,e,n,r),N(),qe}function iu(t,e,n,r){let i=le(),o=i[Q],s=t+Rt,a=o.firstCreatePass?fL(s,o,2,e,n,r):o.data[s];return MC(a,i,t,e,pS),r!=null&&_v(i,a),iu}function ou(){let t=gt(),e=kC(t);return ey(e)&&ty(),Xm(),ou}var pS=(t,e,n,r,i)=>(eh(!0),EC(e[Fe],r,cT()));function Ai(){return le()}var su="en-US";var gV=su;function gS(t){typeof t=="string"&&(gV=t.toLowerCase().replace(/_/g,"-"))}function Ne(t,e,n){let r=le(),i=pt(),o=gt();return mS(i,r,r[Fe],o,t,e,n),Ne}function mS(t,e,n,r,i,o,s){let a=!0,u=null;if((r.type&3||s)&&(u??=_y(r,e,o),gL(r,t,e,s,n,i,o,u)&&(a=!1)),a){let l=r.outputs?.[i],h=r.hostDirectiveOutputs?.[i];if(h&&h.length)for(let p=0;p<h.length;p+=2){let g=h[p],y=h[p+1];u??=_y(r,e,o),ST(r,e,g,y,i,u)}if(l&&l.length)for(let p of l)u??=_y(r,e,o),ST(r,e,p,i,i,u)}}function he(t=1){return aT(t)}function Pv(t,e,n,r){jL(t,e,n,r)}function Ov(t){let e=le(),n=pt(),r=ay();Qd(r+1);let i=Tv(n,r);if(t.dirty&&$D(e)===((i.metadata.flags&2)===2)){if(i.matches===null)t.reset([]);else{let o=HL(e,r);t.reset(o,D1),t.notifyOnChanges()}return!0}return!1}function Fv(){return LL(le(),ay())}function ih(t,e){return t<<17|e<<2}function xo(t){return t>>17&32767}function mV(t){return(t&2)==2}function yV(t,e){return t&131071|e<<17}function tv(t){return t|2}function Zs(t){return(t&131068)>>2}function by(t,e){return t&-131069|e<<2}function vV(t){return(t&1)===1}function nv(t){return t|1}function _V(t,e,n,r,i,o){let s=o?e.classBindings:e.styleBindings,a=xo(s),u=Zs(s);t[r]=n;let l=!1,h;if(Array.isArray(n)){let p=n;h=p[1],(h===null||Os(p,h)>0)&&(l=!0)}else h=n;if(i)if(u!==0){let g=xo(t[a+1]);t[r+1]=ih(g,a),g!==0&&(t[g+1]=by(t[g+1],r)),t[a+1]=yV(t[a+1],r)}else t[r+1]=ih(a,0),a!==0&&(t[a+1]=by(t[a+1],r)),a=r;else t[r+1]=ih(u,0),a===0?a=r:t[u+1]=by(t[u+1],r),u=r;l&&(t[r+1]=tv(t[r+1])),LT(t,h,r,!0),LT(t,h,r,!1),EV(e,h,t,r,o),s=ih(a,u),o?e.classBindings=s:e.styleBindings=s}function EV(t,e,n,r,i){let o=i?t.residualClasses:t.residualStyles;o!=null&&typeof e=="string"&&Os(o,e)>=0&&(n[r+1]=nv(n[r+1]))}function LT(t,e,n,r){let i=t[n+1],o=e===null,s=r?xo(i):Zs(i),a=!1;for(;s!==0&&(a===!1||o);){let u=t[s],l=t[s+1];IV(u,e)&&(a=!0,t[s+1]=r?nv(l):tv(l)),s=r?xo(l):Zs(l)}a&&(t[n+1]=r?tv(i):nv(i))}function IV(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?Os(t,e)>=0:!1}var Pn={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function wV(t){return t.substring(Pn.key,Pn.keyEnd)}function bV(t){return DV(t),yS(t,vS(t,0,Pn.textEnd))}function yS(t,e){let n=Pn.textEnd;return n===e?-1:(e=Pn.keyEnd=TV(t,Pn.key=e,n),vS(t,e,n))}function DV(t){Pn.key=0,Pn.keyEnd=0,Pn.value=0,Pn.valueEnd=0,Pn.textEnd=t.length}function vS(t,e,n){for(;e<n&&t.charCodeAt(e)<=32;)e++;return e}function TV(t,e,n){for(;e<n&&t.charCodeAt(e)>32;)e++;return e}function au(t,e){return SV(t,e,null,!0),au}function P(t){AV(PV,CV,t,!0)}function CV(t,e){for(let n=bV(e);n>=0;n=yS(e,n))Bd(t,wV(e),!0)}function SV(t,e,n,r){let i=le(),o=pt(),s=sy(2);if(o.firstUpdatePass&&ES(o,t,s,r),e!==dn&&$r(i,s,e)){let a=o.data[jr()];IS(o,a,i,i[Fe],t,i[s+1]=FV(e,n),r,s)}}function AV(t,e,n,r){let i=pt(),o=sy(2);i.firstUpdatePass&&ES(i,null,o,r);let s=le();if(n!==dn&&$r(s,o,n)){let a=i.data[jr()];if(wS(a,r)&&!_S(i,o)){let u=r?a.classesWithoutHost:a.stylesWithoutHost;u!==null&&(n=Ld(u,n||"")),ev(i,a,s,n,r)}else OV(i,a,s,s[Fe],s[o+1],s[o+1]=kV(t,e,n),r,o)}}function _S(t,e){return e>=t.expandoStartIndex}function ES(t,e,n,r){let i=t.data;if(i[n+1]===null){let o=i[jr()],s=_S(t,n);wS(o,r)&&e===null&&!s&&(e=!1),e=RV(i,o,e,r),_V(i,o,e,n,s,r)}}function RV(t,e,n,r){let i=rT(t),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=Dy(null,t,e,n,r),n=Zc(n,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||t[s]!==i)if(n=Dy(i,t,e,n,r),o===null){let u=xV(t,e,r);u!==void 0&&Array.isArray(u)&&(u=Dy(null,t,e,u[1],r),u=Zc(u,e.attrs,r),NV(t,e,r,u))}else o=MV(t,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),n}function xV(t,e,n){let r=n?e.classBindings:e.styleBindings;if(Zs(r)!==0)return t[xo(r)]}function NV(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[xo(i)]=r}function MV(t,e,n){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=t[o].hostAttrs;r=Zc(r,s,n)}return Zc(r,e.attrs,n)}function Dy(t,e,n,r,i){let o=null,s=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<s&&(o=e[a],r=Zc(r,o.hostAttrs,i),o!==t);)a++;return t!==null&&(n.directiveStylingLast=a),r}function Zc(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),Bd(t,s,n?!0:e[++o]))}return t===void 0?null:t}function kV(t,e,n){if(n==null||n==="")return qt;let r=[],i=Xc(n);if(Array.isArray(i))for(let o=0;o<i.length;o++)t(r,i[o],!0);else if(typeof i=="object")for(let o in i)i.hasOwnProperty(o)&&t(r,o,i[o]);else typeof i=="string"&&e(r,i);return r}function PV(t,e,n){let r=String(e);r!==""&&!r.includes(" ")&&Bd(t,r,n)}function OV(t,e,n,r,i,o,s,a){i===dn&&(i=qt);let u=0,l=0,h=0<i.length?i[0]:null,p=0<o.length?o[0]:null;for(;h!==null||p!==null;){let g=u<i.length?i[u+1]:void 0,y=l<o.length?o[l+1]:void 0,w=null,k;h===p?(u+=2,l+=2,g!==y&&(w=p,k=y)):p===null||h!==null&&h<p?(u+=2,w=h):(l+=2,w=p,k=y),w!==null&&IS(t,e,n,r,w,k,s,a),h=u<i.length?i[u]:null,p=l<o.length?o[l]:null}}function IS(t,e,n,r,i,o,s,a){if(!(e.type&3))return;let u=t.data,l=u[a+1],h=vV(l)?VT(u,e,n,i,Zs(l),s):void 0;if(!Th(h)){Th(o)||mV(l)&&(o=VT(u,null,n,i,a,s));let p=Wm(jr(),n);mF(r,s,p,i,o)}}function VT(t,e,n,r,i,o){let s=e===null,a;for(;i>0;){let u=t[i],l=Array.isArray(u),h=l?u[1]:u,p=h===null,g=n[i+1];g===dn&&(g=p?qt:void 0);let y=p?$d(g,r):h===r?g:void 0;if(l&&!Th(y)&&(y=$d(u,r)),Th(y)&&(a=y,s))return a;let w=t[i+1];i=s?xo(w):Zs(w)}if(e!==null){let u=o?e.residualClasses:e.residualStyles;u!=null&&(a=$d(u,r))}return a}function Th(t){return t!==void 0}function FV(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=kr(Xc(t)))),t}function wS(t,e){return(t.flags&(e?8:16))!==0}function F(t,e=""){let n=le(),r=pt(),i=t+Rt,o=r.firstCreatePass?Lh(r,i,1,e,null):r.data[i],s=LV(r,n,o,e,t);n[i]=s,Xd()&&yv(r,n,s,o),Bs(o,!1)}var LV=(t,e,n,r,i)=>(eh(!0),Q1(e[Fe],r));function VV(t,e,n,r=""){return $r(t,bo(),n)?e+Mc(n)+r:dn}function ht(t){return In("",t),ht}function In(t,e,n){let r=le(),i=VV(r,t,e,n);return i!==dn&&jV(r,jr(),i),In}function jV(t,e,n){let r=Wm(e,t);Y1(t[Fe],r,n)}function vt(t,e,n){py(e)&&(e=e());let r=le(),i=bo();if($r(r,i,e)){let o=pt(),s=Jd();NC(s,r,t,e,r[Fe],n)}return vt}function xt(t,e){let n=py(t);return n&&t.set(e),n}function _t(t,e){let n=le(),r=pt(),i=gt();return mS(r,n,n[Fe],i,t,e),_t}function UV(t,e,n){let r=pt();if(r.firstCreatePass){let i=tr(t);rv(n,r.data,r.blueprint,i,!0),rv(e,r.data,r.blueprint,i,!1)}}function rv(t,e,n,r,i){if(t=St(t),Array.isArray(t))for(let o=0;o<t.length;o++)rv(t[o],e,n,r,i);else{let o=pt(),s=le(),a=gt(),u=go(t)?t:St(t.provide),l=Bm(t),h=a.providerIndexes&1048575,p=a.directiveStart,g=a.providerIndexes>>20;if(go(t)||!t.multi){let y=new So(l,i,me,null),w=Cy(u,e,i?h:h+g,p);w===-1?(Ay(hh(a,s),o,u),Ty(o,t,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(y),s.push(y)):(n[w]=y,s[w]=y)}else{let y=Cy(u,e,h+g,p),w=Cy(u,e,h,h+g),k=y>=0&&n[y],x=w>=0&&n[w];if(i&&!x||!i&&!k){Ay(hh(a,s),o,u);let j=HV(i?$V:BV,n.length,i,r,l,t);!i&&x&&(n[w].providerFactory=j),Ty(o,t,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(j),s.push(j)}else{let j=bS(n[i?w:y],l,!i&&r);Ty(o,t,y>-1?y:w,j)}!i&&r&&x&&n[w].componentProviders++}}}function Ty(t,e,n,r){let i=go(e),o=VD(e);if(i||o){let u=(o?St(e.useClass):e).prototype.ngOnDestroy;if(u){let l=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){let h=l.indexOf(n);h===-1?l.push(n,[r,u]):l[h+1].push(r,u)}else l.push(n,u)}}}function bS(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function Cy(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function BV(t,e,n,r,i){return iv(this.multi,[])}function $V(t,e,n,r,i){let o=this.multi,s;if(this.providerFactory){let a=this.providerFactory.componentProviders,u=zc(r,r[Q],this.providerFactory.index,i);s=u.slice(0,a),iv(o,s);for(let l=a;l<u.length;l++)s.push(u[l])}else s=[],iv(o,s);return s}function iv(t,e){for(let n=0;n<t.length;n++){let r=t[n];e.push(r())}return e}function HV(t,e,n,r,i,o){let s=new So(t,n,me,null);return s.multi=[],s.index=e,s.componentProviders=0,bS(s,i,r&&!n),s}function Mo(t,e=[]){return n=>{n.providersResolver=(r,i)=>UV(r,i?i(t):t,e)}}function Bh(t,e,n){let r=oy()+t,i=le();return i[r]===dn?XC(i,r,n?e.call(n):e()):pL(i,r)}function cu(t,e,n,r){return zV(le(),oy(),t,e,n,r)}function qV(t,e){let n=t[e];return n===dn?void 0:n}function zV(t,e,n,r,i,o){let s=e+n;return $r(t,s,i)?XC(t,s+1,o?r.call(o,i):r(i)):qV(t,s+1)}var Ch=class{ngModuleFactory;componentFactories;constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},Lv=(()=>{class t{compileModuleSync(n){return new Eh(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){let r=this.compileModuleSync(n),i=Lm(n),o=vC(i.declarations).reduce((s,a)=>{let u=gi(a);return u&&s.push(new Ys(u)),s},[]);return new Ch(r,o)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static \u0275fac=function(r){return new(r||t)};static \u0275prov=G({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var GV=(()=>{class t{zone=M(be);changeDetectionScheduler=M(An);applicationRef=M(Ci);applicationErrorHandler=M(Gt);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{try{this.applicationRef.dirtyFlags|=1,this.applicationRef._tick()}catch(n){this.applicationErrorHandler(n)}})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||t)};static \u0275prov=G({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function DS({ngZoneFactory:t,ignoreChangesOutsideZone:e,scheduleInRootZone:n}){return t??=()=>new be(Z(V({},TS()),{scheduleInRootZone:n})),[{provide:be,useFactory:t},{provide:Or,multi:!0,useFactory:()=>{let r=M(GV,{optional:!0});return()=>r.initialize()}},{provide:Or,multi:!0,useFactory:()=>{let r=M(WV);return()=>{r.initialize()}}},e===!0?{provide:gy,useValue:!0}:[],{provide:th,useValue:n??aS},{provide:Gt,useFactory:()=>{let r=M(be),i=M(et),o;return s=>{r.runOutsideAngular(()=>{i.destroyed&&!o?setTimeout(()=>{throw s}):(o??=i.get(Sn),o.handleError(s))})}}}]}function TS(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var WV=(()=>{class t{subscription=new He;initialized=!1;zone=M(be);pendingTasks=M(rr);initialize(){if(this.initialized)return;this.initialized=!0;let n=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(n=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{be.assertNotInAngularZone(),queueMicrotask(()=>{n!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(n),n=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{be.assertInAngularZone(),n??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||t)};static \u0275prov=G({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var Vv=(()=>{class t{applicationErrorHandler=M(Gt);appRef=M(Ci);taskService=M(rr);ngZone=M(be);zonelessEnabled=M(Uc);tracing=M(nu,{optional:!0});disableScheduling=M(gy,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new He;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(wh):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(M(th,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Yc||!this.zoneIsDefined)}notify(n){if(!this.zonelessEnabled&&n===5)return;let r=!1;switch(n){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{this.appRef.dirtyFlags|=16,r=!0;break}case 13:{this.appRef.dirtyFlags|=2,r=!0;break}case 11:{r=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let i=this.useMicrotaskScheduler?MT:cS;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(n){return!(this.disableScheduling&&!n||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(wh+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let n=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(n),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,MT(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(n)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let n=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(n)}}static \u0275fac=function(r){return new(r||t)};static \u0275prov=G({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function jv(){return bi("NgZoneless"),zt([{provide:An,useExisting:Vv},{provide:be,useClass:Yc},{provide:Uc,useValue:!0},{provide:th,useValue:!1},[]])}function KV(){return typeof $localize<"u"&&$localize.locale||su}var $h=new q("",{providedIn:"root",factory:()=>M($h,{optional:!0,skipSelf:!0})||KV()});function Et(t){return _D(t)}function Wt(t,e){return od(t,e?.equal)}var Uv=class{[Vt];constructor(e){this[Vt]=e}destroy(){this[Vt].destroy()}};function Bv(t,e){let n=e?.injector??M(Be),r=e?.manualCleanup!==!0?n.get(Mn):null,i,o=n.get(Bc,null,{optional:!0}),s=n.get(An);return o!==null?(i=ZV(o.view,s,t),r instanceof Ac&&r._lView===o.view&&(r=null)):i=JV(t,n.get($c),s),i.injector=n,r!==null&&(i.onDestroyFn=r.onDestroy(()=>i.destroy())),new Uv(i)}var CS=Z(V({},ED),{cleanupFns:void 0,zone:null,onDestroyFn:To,run(){let t=$s(!1);try{ID(this)}finally{$s(t)}},cleanup(){if(!this.cleanupFns?.length)return;let t=J(null);try{for(;this.cleanupFns.length;)this.cleanupFns.pop()()}finally{this.cleanupFns=[],J(t)}}}),QV=Z(V({},CS),{consumerMarkedDirty(){this.scheduler.schedule(this),this.notifier.notify(12)},destroy(){io(this),this.onDestroyFn(),this.cleanup(),this.scheduler.remove(this)}}),YV=Z(V({},CS),{consumerMarkedDirty(){this.view[te]|=8192,wo(this.view),this.notifier.notify(13)},destroy(){io(this),this.onDestroyFn(),this.cleanup(),this.view[Fr]?.delete(this)}});function ZV(t,e,n){let r=Object.create(YV);return r.view=t,r.zone=typeof Zone<"u"?Zone.current:null,r.notifier=e,r.fn=SS(r,n),t[Fr]??=new Set,t[Fr].add(r),r.consumerMarkedDirty(r),r}function JV(t,e,n){let r=Object.create(QV);return r.fn=SS(r,t),r.scheduler=e,r.notifier=n,r.zone=typeof Zone<"u"?Zone.current:null,r.scheduler.add(r),r.notifier.notify(12),r}function SS(t,e){return()=>{e(n=>(t.cleanupFns??=[]).push(n))}}var NS=Symbol("InputSignalNode#UNSET"),g2=Z(V({},sd),{transformFn:void 0,applyValueToInputSignal(t,e){_s(t,e)}});function MS(t,e){let n=Object.create(g2);n.value=t,n.transformFn=e?.transform;function r(){if(gs(n),n.value===NS){let i=null;throw new H(-950,i)}return n.value}return r[Vt]=n,r}var qh=class{attributeName;constructor(e){this.attributeName=e}__NG_ELEMENT_ID__=()=>Jc(this.attributeName);toString(){return`HostAttributeToken ${this.attributeName}`}},m2=new q("");m2.__NG_ELEMENT_ID__=t=>{let e=gt();if(e===null)throw new H(204,!1);if(e.type&2)return e.value;if(t&8)return null;throw new H(204,!1)};function AS(t,e){return MS(t,e)}function y2(t){return MS(NS,t)}var kS=(AS.required=y2,AS);var $v=new q(""),v2=new q("");function uu(t){return!t.moduleRef}function _2(t){let e=uu(t)?t.r3Injector:t.moduleRef.injector,n=e.get(be);return n.run(()=>{uu(t)?t.r3Injector.resolveInjectorInitializers():t.moduleRef.resolveInjectorInitializers();let r=e.get(Gt),i;if(n.runOutsideAngular(()=>{i=n.onError.subscribe({next:r})}),uu(t)){let o=()=>e.destroy(),s=t.platformInjector.get($v);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>t.moduleRef.destroy(),s=t.platformInjector.get($v);s.add(o),t.moduleRef.onDestroy(()=>{qc(t.allPlatformModules,t.moduleRef),i.unsubscribe(),s.delete(o)})}return I2(r,n,()=>{let o=e.get(rr),s=o.add(),a=e.get(Mv);return a.runInitializers(),a.donePromise.then(()=>{let u=e.get($h,su);if(gS(u||su),!e.get(v2,!0))return uu(t)?e.get(Ci):(t.allPlatformModules.push(t.moduleRef),t.moduleRef);if(uu(t)){let h=e.get(Ci);return t.rootComponent!==void 0&&h.bootstrap(t.rootComponent),h}else return E2?.(t.moduleRef,t.allPlatformModules),t.moduleRef}).finally(()=>void o.remove(s))})})}var E2;function I2(t,e,n){try{let r=n();return Ti(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t(r)),r}}var Hh=null;function w2(t=[],e){return Be.create({name:e,providers:[{provide:Pc,useValue:"platform"},{provide:$v,useValue:new Set([()=>Hh=null])},...t]})}function b2(t=[]){if(Hh)return Hh;let e=w2(t);return Hh=e,hS(),D2(e),e}function D2(t){let e=t.get(Ah,null);lt(t,()=>{e?.forEach(n=>n())})}function Gv(){return!1}var ko=(()=>{class t{static __NG_ELEMENT_ID__=T2}return t})();function T2(t){return C2(gt(),le(),(t&16)===16)}function C2(t,e,n){if(vi(t)&&!n){let r=En(t.index,e);return new Ei(r,r)}else if(t.type&175){let r=e[cn];return new Ei(r,e)}return null}var Hv=class{constructor(){}supports(e){return e instanceof Map||Dv(e)}create(){return new qv}},qv=class{_records=new Map;_mapHead=null;_appendAfter=null;_previousMapHead=null;_changesHead=null;_changesTail=null;_additionsHead=null;_additionsTail=null;_removalsHead=null;_removalsTail=null;get isDirty(){return this._additionsHead!==null||this._changesHead!==null||this._removalsHead!==null}forEachItem(e){let n;for(n=this._mapHead;n!==null;n=n._next)e(n)}forEachPreviousItem(e){let n;for(n=this._previousMapHead;n!==null;n=n._nextPrevious)e(n)}forEachChangedItem(e){let n;for(n=this._changesHead;n!==null;n=n._nextChanged)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)e(n)}diff(e){if(!e)e=new Map;else if(!(e instanceof Map||Dv(e)))throw new H(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._mapHead;if(this._appendAfter=null,this._forEach(e,(r,i)=>{if(n&&n.key===i)this._maybeAddToChanges(n,r),this._appendAfter=n,n=n._next;else{let o=this._getOrCreateRecordForKey(i,r);n=this._insertBeforeOrAppend(n,o)}}),n){n._prev&&(n._prev._next=null),this._removalsHead=n;for(let r=n;r!==null;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,n){if(e){let r=e._prev;return n._next=e,n._prev=r,e._prev=n,r&&(r._next=n),e===this._mapHead&&(this._mapHead=n),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=n,n._prev=this._appendAfter):this._mapHead=n,this._appendAfter=n,null}_getOrCreateRecordForKey(e,n){if(this._records.has(e)){let i=this._records.get(e);this._maybeAddToChanges(i,n);let o=i._prev,s=i._next;return o&&(o._next=s),s&&(s._prev=o),i._next=null,i._prev=null,i}let r=new zv(e);return this._records.set(e,r),r.currentValue=n,this._addToAdditions(r),r}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;e!==null;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;e!=null;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,n){Object.is(n,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=n,this._addToChanges(e))}_addToAdditions(e){this._additionsHead===null?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){this._changesHead===null?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,n){e instanceof Map?e.forEach(n):Object.keys(e).forEach(r=>n(e[r],r))}},zv=class{key;previousValue=null;currentValue=null;_nextPrevious=null;_next=null;_prev=null;_nextAdded=null;_nextRemoved=null;_nextChanged=null;constructor(e){this.key=e}};function RS(){return new Wv([new Hv])}var Wv=(()=>{class t{static \u0275prov=G({token:t,providedIn:"root",factory:RS});factories;constructor(n){this.factories=n}static create(n,r){if(r){let i=r.factories.slice();n=n.concat(i)}return new t(n)}static extend(n){return{provide:t,useFactory:()=>{let r=M(t,{optional:!0,skipSelf:!0});return t.create(n,r||RS())}}}find(n){let r=this.factories.find(i=>i.supports(n));if(r)return r;throw new H(901,!1)}}return t})();function PS(t){let{rootComponent:e,appProviders:n,platformProviders:r,platformRef:i}=t;Re(8);try{let o=i?.injector??b2(r),s=[DS({}),{provide:An,useExisting:Vv},lT,...n||[]],a=new Qc({providers:s,parent:o,debugName:"",runEnvironmentInitializers:!1});return _2({r3Injector:a.injector,platformInjector:o,rootComponent:e})}catch(o){return Promise.reject(o)}finally{Re(9)}}function Po(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}var LS=null;function wn(){return LS}function Kv(t){LS??=t}var lu=class{},Qv=(()=>{class t{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||t)};static \u0275prov=G({token:t,factory:()=>M(VS),providedIn:"platform"})}return t})();var VS=(()=>{class t extends Qv{_location;_history;_doc=M(mt);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return wn().getBaseHref(this._doc)}onPopState(n){let r=wn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){let r=wn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,i){this._history.pushState(n,r,i)}replaceState(n,r,i){this._history.replaceState(n,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||t)};static \u0275prov=G({token:t,factory:()=>new t,providedIn:"platform"})}return t})();function jS(t,e){return t?e?t.endsWith("/")?e.startsWith("/")?t+e.slice(1):t+e:e.startsWith("/")?t+e:`${t}/${e}`:t:e}function OS(t){let e=t.search(/#|\?|$/);return t[e-1]==="/"?t.slice(0,e-1)+t.slice(e):t}function xi(t){return t&&t[0]!=="?"?`?${t}`:t}var ea=(()=>{class t{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||t)};static \u0275prov=G({token:t,factory:()=>M(BS),providedIn:"root"})}return t})(),US=new q(""),BS=(()=>{class t extends ea{_platformLocation;_baseHref;_removeListenerFns=[];constructor(n,r){super(),this._platformLocation=n,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??M(mt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return jS(this._baseHref,n)}path(n=!1){let r=this._platformLocation.pathname+xi(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,o){let s=this.prepareExternalUrl(i+xi(o));this._platformLocation.pushState(n,r,s)}replaceState(n,r,i,o){let s=this.prepareExternalUrl(i+xi(o));this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static \u0275fac=function(r){return new(r||t)(se(Qv),se(US,8))};static \u0275prov=G({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),ta=(()=>{class t{_subject=new We;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(n){this._locationStrategy=n;let r=this._locationStrategy.getBaseHref();this._basePath=R2(OS(FS(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+xi(r))}normalize(n){return t.stripTrailingSlash(A2(this._basePath,FS(n)))}prepareExternalUrl(n){return n&&n[0]!=="/"&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+xi(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+xi(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=xi;static joinWithSlash=jS;static stripTrailingSlash=OS;static \u0275fac=function(r){return new(r||t)(se(ea))};static \u0275prov=G({token:t,factory:()=>S2(),providedIn:"root"})}return t})();function S2(){return new ta(se(ea))}function A2(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function FS(t){return t.replace(/\/index.html$/,"")}function R2(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}var Yv=(()=>{class t{_ngEl;_differs;_renderer;_ngStyle=null;_differ=null;constructor(n,r,i){this._ngEl=n,this._differs=r,this._renderer=i}set ngStyle(n){this._ngStyle=n,!this._differ&&n&&(this._differ=this._differs.find(n).create())}ngDoCheck(){if(this._differ){let n=this._differ.diff(this._ngStyle);n&&this._applyChanges(n)}}_setStyle(n,r){let[i,o]=n.split("."),s=i.indexOf("-")===-1?void 0:On.DashCase;r!=null?this._renderer.setStyle(this._ngEl.nativeElement,i,o?`${r}${o}`:r,s):this._renderer.removeStyle(this._ngEl.nativeElement,i,s)}_applyChanges(n){n.forEachRemovedItem(r=>this._setStyle(r.key,null)),n.forEachAddedItem(r=>this._setStyle(r.key,r.currentValue)),n.forEachChangedItem(r=>this._setStyle(r.key,r.currentValue))}static \u0275fac=function(r){return new(r||t)(me(ln),me(Wv),me(Br))};static \u0275dir=nt({type:t,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"}})}return t})();function Zv(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,o]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var du=class{};var $S="browser";var Gh=new q(""),n_=(()=>{class t{_zone;_plugins;_eventNameToPlugin=new Map;constructor(n,r){this._zone=r,n.forEach(i=>{i.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,r,i,o){return this._findPluginFor(r).addEventListener(n,r,i,o)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(o=>o.supports(n)),!r)throw new H(5101,!1);return this._eventNameToPlugin.set(n,r),r}static \u0275fac=function(r){return new(r||t)(se(Gh),se(be))};static \u0275prov=G({token:t,factory:t.\u0275fac})}return t})(),hu=class{_doc;constructor(e){this._doc=e}manager},Jv="ng-app-id";function HS(t){for(let e of t)e.remove()}function qS(t,e){let n=e.createElement("style");return n.textContent=t,n}function k2(t,e,n,r){let i=t.head?.querySelectorAll(`style[${Jv}="${e}"],link[${Jv}="${e}"]`);if(i)for(let o of i)o.removeAttribute(Jv),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&n.set(o.textContent,{usage:0,elements:[o]})}function e_(t,e){let n=e.createElement("link");return n.setAttribute("rel","stylesheet"),n.setAttribute("href",t),n}var r_=(()=>{class t{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(n,r,i,o={}){this.doc=n,this.appId=r,this.nonce=i,k2(n,r,this.inline,this.external),this.hosts.add(n.head)}addStyles(n,r){for(let i of n)this.addUsage(i,this.inline,qS);r?.forEach(i=>this.addUsage(i,this.external,e_))}removeStyles(n,r){for(let i of n)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(n,r,i){let o=r.get(n);o?o.usage++:r.set(n,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(n,this.doc)))})}removeUsage(n,r){let i=r.get(n);i&&(i.usage--,i.usage<=0&&(HS(i.elements),r.delete(n)))}ngOnDestroy(){for(let[,{elements:n}]of[...this.inline,...this.external])HS(n);this.hosts.clear()}addHost(n){this.hosts.add(n);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(n,qS(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(n,e_(r,this.doc)))}removeHost(n){this.hosts.delete(n)}addElement(n,r){return this.nonce&&r.setAttribute("nonce",this.nonce),n.appendChild(r)}static \u0275fac=function(r){return new(r||t)(se(mt),se(Sh),se(Rh,8),se(wi))};static \u0275prov=G({token:t,factory:t.\u0275fac})}return t})(),Xv={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},i_=/%COMP%/g;var GS="%COMP%",P2=`_nghost-${GS}`,O2=`_ngcontent-${GS}`,F2=!0,L2=new q("",{providedIn:"root",factory:()=>F2});function V2(t){return O2.replace(i_,t)}function j2(t){return P2.replace(i_,t)}function WS(t,e){return e.map(n=>n.replace(i_,t))}var o_=(()=>{class t{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(n,r,i,o,s,a,u,l=null,h=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=u,this.nonce=l,this.tracingService=h,this.platformIsServer=!1,this.defaultRenderer=new fu(n,s,u,this.platformIsServer,this.tracingService)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(n,r);return i instanceof zh?i.applyToHost(n):i instanceof pu&&i.applyStyles(),i}getOrCreateRenderer(n,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,p=this.platformIsServer,g=this.tracingService;switch(r.encapsulation){case Ur.Emulated:o=new zh(u,l,r,this.appId,h,s,a,p,g);break;case Ur.ShadowDom:return new t_(u,l,n,r,s,a,this.nonce,p,g);default:o=new pu(u,l,r,h,s,a,p,g);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(n){this.rendererByCompId.delete(n)}static \u0275fac=function(r){return new(r||t)(se(n_),se(r_),se(Sh),se(L2),se(mt),se(wi),se(be),se(Rh),se(nu,8))};static \u0275prov=G({token:t,factory:t.\u0275fac})}return t})(),fu=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,n,r,i,o){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.tracingService=o}destroy(){}destroyNode=null;createElement(e,n){return n?this.doc.createElementNS(Xv[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(zS(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(zS(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){n.remove()}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new H(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let o=Xv[i];o?e.setAttributeNS(o,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=Xv[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(On.DashCase|On.Important)?e.style.setProperty(n,r,i&On.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&On.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r,i){if(typeof e=="string"&&(e=wn().getGlobalEventTarget(this.doc,e),!e))throw new H(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,n,o)),this.eventManager.addEventListener(e,n,o,i)}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;e(n)===!1&&n.preventDefault()}}};function zS(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var t_=class extends fu{sharedStylesHost;hostEl;shadowRoot;constructor(e,n,r,i,o,s,a,u,l){super(e,o,s,u,l),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let h=i.styles;h=WS(i.id,h);for(let g of h){let y=document.createElement("style");a&&y.setAttribute("nonce",a),y.textContent=g,this.shadowRoot.appendChild(y)}let p=i.getExternalStyles?.();if(p)for(let g of p){let y=e_(g,o);a&&y.setAttribute("nonce",a),this.shadowRoot.appendChild(y)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(null,n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},pu=class extends fu{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,n,r,i,o,s,a,u,l){super(e,o,s,a,u),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i;let h=r.styles;this.styles=l?WS(l,h):h,this.styleUrls=r.getExternalStyles?.(l)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&Mh.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},zh=class extends pu{contentAttr;hostAttr;constructor(e,n,r,i,o,s,a,u,l){let h=i+"-"+r.id;super(e,n,r,o,s,a,u,l,h),this.contentAttr=V2(h),this.hostAttr=j2(h)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}};var Wh=class t extends lu{supportsDOMEvents=!0;static makeCurrent(){Kv(new t)}onAndCancel(e,n,r,i){return e.addEventListener(n,r,i),()=>{e.removeEventListener(n,r,i)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.remove()}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=U2();return n==null?null:B2(n)}resetBaseElement(){gu=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Zv(document.cookie,e)}},gu=null;function U2(){return gu=gu||document.head.querySelector("base"),gu?gu.getAttribute("href"):null}function B2(t){return new URL(t,document.baseURI).pathname}var $2=(()=>{class t{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||t)};static \u0275prov=G({token:t,factory:t.\u0275fac})}return t})(),QS=(()=>{class t extends hu{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i,o){return n.addEventListener(r,i,o),()=>this.removeEventListener(n,r,i,o)}removeEventListener(n,r,i,o){return n.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||t)(se(mt))};static \u0275prov=G({token:t,factory:t.\u0275fac})}return t})(),KS=["alt","control","meta","shift"],H2={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},q2={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},YS=(()=>{class t extends hu{constructor(n){super(n)}supports(n){return t.parseEventName(n)!=null}addEventListener(n,r,i,o){let s=t.parseEventName(r),a=t.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>wn().onAndCancel(n,s.domEventName,a,o))}static parseEventName(n){let r=n.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=t._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),KS.forEach(l=>{let h=r.indexOf(l);h>-1&&(r.splice(h,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let u={};return u.domEventName=i,u.fullKey=s,u}static matchEventFullKeyCode(n,r){let i=H2[n.key]||n.key,o="";return r.indexOf("code.")>-1&&(i=n.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),KS.forEach(s=>{if(s!==i){let a=q2[s];a(n)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(n,r,i){return o=>{t.matchEventFullKeyCode(o,n)&&i.runGuarded(()=>r(o))}}static _normalizeKey(n){return n==="esc"?"escape":n}static \u0275fac=function(r){return new(r||t)(se(mt))};static \u0275prov=G({token:t,factory:t.\u0275fac})}return t})();function s_(t,e,n){let r=V({rootComponent:t,platformRef:n?.platformRef},z2(e));return PS(r)}function z2(t){return{appProviders:[...Y2,...t?.providers??[]],platformProviders:Q2}}function G2(){Wh.makeCurrent()}function W2(){return new Sn}function K2(){return av(document),document}var Q2=[{provide:wi,useValue:$S},{provide:Ah,useValue:G2,multi:!0},{provide:mt,useFactory:K2}];var Y2=[{provide:Pc,useValue:"root"},{provide:Sn,useFactory:W2},{provide:Gh,useClass:QS,multi:!0,deps:[mt]},{provide:Gh,useClass:YS,multi:!0,deps:[mt]},o_,r_,n_,{provide:Ao,useExisting:o_},{provide:du,useClass:$2},[]];var ZS=(()=>{class t{_doc;constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static \u0275fac=function(r){return new(r||t)(se(mt))};static \u0275prov=G({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var JS=()=>{};var tA=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},J2=function(t){let e=[],n=0,r=0;for(;n<t.length;){let i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=t[n++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=t[n++],s=t[n++],a=t[n++],u=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{let o=t[n++],s=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},Kh={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){let o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,l=u?t[i+2]:0,h=o>>2,p=(o&3)<<4|a>>4,g=(a&15)<<2|l>>6,y=l&63;u||(y=64,s||(g=64)),r.push(n[h],n[p],n[g],n[y])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(tA(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):J2(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){let o=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;let l=i<t.length?n[t.charAt(i)]:64;++i;let p=i<t.length?n[t.charAt(i)]:64;if(++i,o==null||a==null||l==null||p==null)throw new c_;let g=o<<2|a>>4;if(r.push(g),l!==64){let y=a<<4&240|l>>2;if(r.push(y),p!==64){let w=l<<6&192|p;r.push(w)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},c_=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},X2=function(t){let e=tA(t);return Kh.encodeByteArray(e,!0)},yu=function(t){return X2(t).replace(/\./g,"")},Qh=function(t){try{return Kh.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function l_(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var ej=()=>l_().__FIREBASE_DEFAULTS__,tj=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},nj=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&Qh(t[1]);return e&&JSON.parse(e)},Yh=()=>{try{return JS()||ej()||tj()||nj()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},d_=t=>{var e,n;return(n=(e=Yh())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},Zh=t=>{let e=d_(t);if(!e)return;let n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},h_=()=>{var t;return(t=Yh())===null||t===void 0?void 0:t.config},f_=t=>{var e;return(e=Yh())===null||e===void 0?void 0:e[`_${t}`]};var Oo=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};function Un(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function na(t){return(await fetch(t,{credentials:"include"})).ok}function Jh(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[yu(JSON.stringify(n)),yu(JSON.stringify(s)),""].join(".")}var mu={};function rj(){let t={prod:[],emulator:[]};for(let e of Object.keys(mu))mu[e]?t.emulator.push(e):t.prod.push(e);return t}function ij(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}var XS=!1;function ra(t,e){if(typeof window>"u"||typeof document>"u"||!Un(window.location.host)||mu[t]===e||mu[t]||XS)return;mu[t]=e;function n(g){return`__firebase__banner__${g}`}let r="__firebase__banner",o=rj().prod.length>0;function s(){let g=document.getElementById(r);g&&g.remove()}function a(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function u(g,y){g.setAttribute("width","24"),g.setAttribute("id",y),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function l(){let g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{XS=!0,s()},g}function h(g,y){g.setAttribute("id",y),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function p(){let g=ij(r),y=n("text"),w=document.getElementById(y)||document.createElement("span"),k=n("learnmore"),x=document.getElementById(k)||document.createElement("a"),j=n("preprendIcon"),z=document.getElementById(j)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){let W=g.element;a(W),h(x,k);let oe=l();u(z,j),W.append(z,w,x,oe),document.body.appendChild(W)}o?(w.innerText="Preview backend disconnected.",z.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(z.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,w.innerText="Preview backend running in this workspace."),w.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}function It(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function nA(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(It())}function oj(){var t;let e=(t=Yh())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function rA(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function iA(){let t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function oA(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function sA(){let t=It();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function aA(){return!oj()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function vu(){try{return typeof indexedDB=="object"}catch{return!1}}function cA(){return new Promise((t,e)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}var sj="FirebaseError",Kt=class t extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=sj,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,jn.prototype.create)}},jn=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){let r=n[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?aj(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new Kt(i,a,r)}};function aj(t,e){return t.replace(cj,(n,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var cj=/\{\$([^}]+)}/g;function uA(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function sr(t,e){if(t===e)return!0;let n=Object.keys(t),r=Object.keys(e);for(let i of n){if(!r.includes(i))return!1;let o=t[i],s=e[i];if(eA(o)&&eA(s)){if(!sr(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function eA(t){return t!==null&&typeof t=="object"}function ia(t){let e=[];for(let[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function lA(t,e){let n=new u_(t,e);return n.subscribe.bind(n)}var u_=class{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");uj(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=a_),i.error===void 0&&(i.error=a_),i.complete===void 0&&(i.complete=a_);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function uj(t,e){if(typeof t!="object"||t===null)return!1;for(let n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function a_(){}var Coe=14400*1e3;function Me(t){return t&&t._delegate?t._delegate:t}var Nt=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Fo="[DEFAULT]";var p_=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let r=new Oo;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(dj(e))try{this.getOrInitializeService({instanceIdentifier:Fo})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=Fo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){let e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Fo){return this.instances.has(e)}getOptions(e=Fo){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[o,s]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(e,n){var r;let i=this.normalizeInstanceIdentifier(n),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);let s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:lj(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Fo){return this.component?this.component.multipleInstances?e:Fo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function lj(t){return t===Fo?void 0:t}function dj(t){return t.instantiationMode==="EAGER"}var Xh=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new p_(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var hj=[],fe=(function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t})(fe||{}),fj={debug:fe.DEBUG,verbose:fe.VERBOSE,info:fe.INFO,warn:fe.WARN,error:fe.ERROR,silent:fe.SILENT},pj=fe.INFO,gj={[fe.DEBUG]:"log",[fe.VERBOSE]:"log",[fe.INFO]:"info",[fe.WARN]:"warn",[fe.ERROR]:"error"},mj=(t,e,...n)=>{if(e<t.logLevel)return;let r=new Date().toISOString(),i=gj[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},ar=class{constructor(e){this.name=e,this._logLevel=pj,this._logHandler=mj,this._userLogHandler=null,hj.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in fe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?fj[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,fe.DEBUG,...e),this._logHandler(this,fe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,fe.VERBOSE,...e),this._logHandler(this,fe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,fe.INFO,...e),this._logHandler(this,fe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,fe.WARN,...e),this._logHandler(this,fe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,fe.ERROR,...e),this._logHandler(this,fe.ERROR,...e)}};var yj=(t,e)=>e.some(n=>t instanceof n),dA,hA;function vj(){return dA||(dA=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function _j(){return hA||(hA=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var fA=new WeakMap,m_=new WeakMap,pA=new WeakMap,g_=new WeakMap,v_=new WeakMap;function Ej(t){let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",s)},o=()=>{n(cr(t.result)),i()},s=()=>{r(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",s)});return e.then(n=>{n instanceof IDBCursor&&fA.set(n,t)}).catch(()=>{}),v_.set(e,t),e}function Ij(t){if(m_.has(t))return;let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",s),t.removeEventListener("abort",s)},o=()=>{n(),i()},s=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",s),t.addEventListener("abort",s)});m_.set(t,e)}var y_={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return m_.get(t);if(e==="objectStoreNames")return t.objectStoreNames||pA.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return cr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function gA(t){y_=t(y_)}function wj(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let r=t.call(ef(this),e,...n);return pA.set(r,e.sort?e.sort():[e]),cr(r)}:_j().includes(t)?function(...e){return t.apply(ef(this),e),cr(fA.get(this))}:function(...e){return cr(t.apply(ef(this),e))}}function bj(t){return typeof t=="function"?wj(t):(t instanceof IDBTransaction&&Ij(t),yj(t,vj())?new Proxy(t,y_):t)}function cr(t){if(t instanceof IDBRequest)return Ej(t);if(g_.has(t))return g_.get(t);let e=bj(t);return e!==t&&(g_.set(t,e),v_.set(e,t)),e}var ef=t=>v_.get(t);function yA(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(t,e),a=cr(s);return r&&s.addEventListener("upgradeneeded",u=>{r(cr(s.result),u.oldVersion,u.newVersion,cr(s.transaction),u)}),n&&s.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{o&&u.addEventListener("close",()=>o()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var Dj=["get","getKey","getAll","getAllKeys","count"],Tj=["put","add","delete","clear"],__=new Map;function mA(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(__.get(e))return __.get(e);let n=e.replace(/FromIndex$/,""),r=e!==n,i=Tj.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||Dj.includes(n)))return;let o=async function(s,...a){let u=this.transaction(s,i?"readwrite":"readonly"),l=u.store;return r&&(l=l.index(a.shift())),(await Promise.all([l[n](...a),i&&u.done]))[0]};return __.set(e,o),o}gA(t=>Z(V({},t),{get:(e,n,r)=>mA(e,n)||t.get(e,n,r),has:(e,n)=>!!mA(e,n)||t.has(e,n)}));var I_=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Cj(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function Cj(t){let e=t.getComponent();return e?.type==="VERSION"}var w_="@firebase/app",vA="0.13.2";var Hr=new ar("@firebase/app"),Sj="@firebase/app-compat",Aj="@firebase/analytics-compat",Rj="@firebase/analytics",xj="@firebase/app-check-compat",Nj="@firebase/app-check",Mj="@firebase/auth",kj="@firebase/auth-compat",Pj="@firebase/database",Oj="@firebase/data-connect",Fj="@firebase/database-compat",Lj="@firebase/functions",Vj="@firebase/functions-compat",jj="@firebase/installations",Uj="@firebase/installations-compat",Bj="@firebase/messaging",$j="@firebase/messaging-compat",Hj="@firebase/performance",qj="@firebase/performance-compat",zj="@firebase/remote-config",Gj="@firebase/remote-config-compat",Wj="@firebase/storage",Kj="@firebase/storage-compat",Qj="@firebase/firestore",Yj="@firebase/ai",Zj="@firebase/firestore-compat",Jj="firebase",Xj="11.10.0";var b_="[DEFAULT]",eU={[w_]:"fire-core",[Sj]:"fire-core-compat",[Rj]:"fire-analytics",[Aj]:"fire-analytics-compat",[Nj]:"fire-app-check",[xj]:"fire-app-check-compat",[Mj]:"fire-auth",[kj]:"fire-auth-compat",[Pj]:"fire-rtdb",[Oj]:"fire-data-connect",[Fj]:"fire-rtdb-compat",[Lj]:"fire-fn",[Vj]:"fire-fn-compat",[jj]:"fire-iid",[Uj]:"fire-iid-compat",[Bj]:"fire-fcm",[$j]:"fire-fcm-compat",[Hj]:"fire-perf",[qj]:"fire-perf-compat",[zj]:"fire-rc",[Gj]:"fire-rc-compat",[Wj]:"fire-gcs",[Kj]:"fire-gcs-compat",[Qj]:"fire-fst",[Zj]:"fire-fst-compat",[Yj]:"fire-vertex","fire-js":"fire-js",[Jj]:"fire-js-all"};var _u=new Map,tU=new Map,D_=new Map;function _A(t,e){try{t.container.addComponent(e)}catch(n){Hr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function hn(t){let e=t.name;if(D_.has(e))return Hr.debug(`There were multiple attempts to register component ${e}.`),!1;D_.set(e,t);for(let n of _u.values())_A(n,t);for(let n of tU.values())_A(n,t);return!0}function Mi(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Qt(t){return t==null?!1:t.settings!==void 0}var nU={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ni=new jn("app","Firebase",nU);var T_=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Nt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ni.create("app-deleted",{appName:this._name})}};var ur=Xj;function A_(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let r=Object.assign({name:b_,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw Ni.create("bad-app-name",{appName:String(i)});if(n||(n=h_()),!n)throw Ni.create("no-options");let o=_u.get(i);if(o){if(sr(n,o.options)&&sr(r,o.config))return o;throw Ni.create("duplicate-app",{appName:i})}let s=new Xh(i);for(let u of D_.values())s.addComponent(u);let a=new T_(n,r,s);return _u.set(i,a),a}function qr(t=b_){let e=_u.get(t);if(!e&&t===b_&&h_())return A_();if(!e)throw Ni.create("no-app",{appName:t});return e}function tf(){return Array.from(_u.values())}function xe(t,e,n){var r;let i=(r=eU[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);let o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){let a=[`Unable to register library "${i}" with version "${e}":`];o&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Hr.warn(a.join(" "));return}hn(new Nt(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var rU="firebase-heartbeat-database",iU=1,Eu="firebase-heartbeat-store",E_=null;function bA(){return E_||(E_=yA(rU,iU,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Eu)}catch(n){console.warn(n)}}}}).catch(t=>{throw Ni.create("idb-open",{originalErrorMessage:t.message})})),E_}async function oU(t){try{let n=(await bA()).transaction(Eu),r=await n.objectStore(Eu).get(DA(t));return await n.done,r}catch(e){if(e instanceof Kt)Hr.warn(e.message);else{let n=Ni.create("idb-get",{originalErrorMessage:e?.message});Hr.warn(n.message)}}}async function EA(t,e){try{let r=(await bA()).transaction(Eu,"readwrite");await r.objectStore(Eu).put(e,DA(t)),await r.done}catch(n){if(n instanceof Kt)Hr.warn(n.message);else{let r=Ni.create("idb-set",{originalErrorMessage:n?.message});Hr.warn(r.message)}}}function DA(t){return`${t.name}!${t.options.appId}`}var sU=1024,aU=30,C_=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new S_(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=IA();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats.length>aU){let s=uU(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Hr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let n=IA(),{heartbeatsToSend:r,unsentEntries:i}=cU(this._heartbeatsCache.heartbeats),o=yu(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return Hr.warn(n),""}}};function IA(){return new Date().toISOString().substring(0,10)}function cU(t,e=sU){let n=[],r=t.slice();for(let i of t){let o=n.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),wA(n)>e){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),wA(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var S_=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return vu()?cA().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){let n=await oU(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){let i=await this.read();return EA(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){let i=await this.read();return EA(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}};function wA(t){return yu(JSON.stringify({version:2,heartbeats:t})).length}function uU(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}function lU(t){hn(new Nt("platform-logger",e=>new I_(e),"PRIVATE")),hn(new Nt("heartbeat",e=>new C_(e),"PRIVATE")),xe(w_,vA,t),xe(w_,vA,"esm2017"),xe("fire-js","")}lU("");var dU="firebase",hU="11.10.0";xe(dU,hU,"app");function TA(t){t===void 0&&(t=M(Be));let e=t.get(Do);return n=>new ce(r=>{let i=e.add(),o=!1;function s(){o||(i(),o=!0)}let a=n.subscribe({next:u=>{r.next(u),s()},complete:()=>{r.complete(),s()},error:u=>{r.error(u),s()}});return a.add(()=>{r.unsubscribe(),s()}),a})}var lr=new ho("ANGULARFIRE2_VERSION");function Vo(t,e,n){if(e){if(e.length===1)return e[0];let o=e.filter(s=>s.app===n);if(o.length===1)return o[0]}return n.container.getProvider(t).getImmediate({optional:!0})}var ki=(t,e)=>{let n=e?[e]:tf(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},oa=(function(t){return t[t.SILENT=0]="SILENT",t[t.WARN=1]="WARN",t[t.VERBOSE=2]="VERBOSE",t})(oa||{}),CA=Gv()&&typeof Zone<"u"?oa.WARN:oa.SILENT;var nf=class{zone;delegate;constructor(e,n=am){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){let i=this.zone,o=function(s){i?i.runGuarded(()=>{e.apply(this,[s])}):e.apply(this,[s])};return this.delegate.schedule(o,n,r)}},dr=(()=>{class t{outsideAngular;insideAngular;constructor(){let n=M(be);this.outsideAngular=n.runOutsideAngular(()=>new nf(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=n.run(()=>new nf(typeof Zone>"u"?void 0:Zone.current,sm))}static \u0275fac=function(r){return new(r||t)};static \u0275prov=G({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),SA=!1;function fU(t,e){!SA&&(CA>oa.SILENT||Gv())&&(SA=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),CA>=e&&console.warn(`Firebase API called outside injection context: ${t.name}`)}function pU(t){let e=M(be,{optional:!0});return e?e.runOutsideAngular(()=>t()):t()}function Lo(t){let e=M(be,{optional:!0});return e?e.run(()=>t()):t()}var gU=(t,e,n)=>(...r)=>(e&&setTimeout(e,0),lt(n,()=>Lo(()=>t.apply(void 0,r)))),Le=(t,e,n)=>(n||=e?oa.WARN:oa.VERBOSE,function(){let r,i=arguments,o,s,a;try{o=M(dr),s=M(Do),a=M(et)}catch{return fU(t,n),t.apply(this,i)}for(let l=0;l<arguments.length;l++)typeof i[l]=="function"&&(e&&(r||=Lo(()=>s.add())),i[l]=gU(i[l],r,a));let u=pU(()=>t.apply(this,i));return e?u instanceof ce?u.pipe(di(o.outsideAngular),li(o.insideAngular),TA(a)):u instanceof Promise?Lo(()=>{let l=s.add();return new Promise((h,p)=>{u.then(g=>lt(a,()=>Lo(()=>h(g))),g=>lt(a,()=>Lo(()=>p(g)))).finally(l)})}):typeof u=="function"&&r?function(){return setTimeout(r,0),u.apply(this,arguments)}:Lo(()=>u):u instanceof ce?u.pipe(di(o.outsideAngular),li(o.insideAngular)):Lo(()=>u)});var Bn=class{constructor(e){return e}},zr=class{constructor(){return tf()}};function mU(t){return t&&t.length===1?t[0]:new Bn(qr())}var R_=new q("angularfire2._apps"),yU={provide:Bn,useFactory:mU,deps:[[new yt,R_]]},vU={provide:zr,deps:[[new yt,R_]]};function _U(t){return(e,n)=>{let r=n.get(wi);xe("angularfire",lr.full,"core"),xe("angularfire",lr.full,"app"),xe("angular",Dm.full,r.toString());let i=e.runOutsideAngular(()=>t(n));return new Bn(i)}}function AA(t,...e){return zt([yU,vU,{provide:R_,useFactory:_U(t),multi:!0,deps:[be,Be,dr,...e]}])}var RA=Le(A_,!0);var EU=new Map,IU={activated:!1,tokenObservers:[]},wU={initialized:!1,enabled:!1};function $n(t){return EU.get(t)||Object.assign({},IU)}function kA(){return wU}var bU="https://content-firebaseappcheck.googleapis.com/v1";var DU="exchangeDebugToken",xA={OFFSET_DURATION:300*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:960*1e3},Cse=1440*60*1e3;var M_=class{constructor(e,n,r,i,o){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(e){this.stop();try{this.pending=new Oo,this.pending.promise.catch(n=>{}),await TU(this.getNextRun(e)),this.pending.resolve(),await this.pending.promise,this.pending=new Oo,this.pending.promise.catch(n=>{}),await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}};function TU(t){return new Promise(e=>{setTimeout(e,t)})}var CU={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},Pi=new jn("appCheck","AppCheck",CU);function PA(t){if(!$n(t).activated)throw Pi.create("use-before-activation",{appName:t.name})}async function OA({url:t,body:e},n){let r={"Content-Type":"application/json"},i=n.getImmediate({optional:!0});if(i){let p=await i.getHeartbeatsHeader();p&&(r["X-Firebase-Client"]=p)}let o={method:"POST",body:JSON.stringify(e),headers:r},s;try{s=await fetch(t,o)}catch(p){throw Pi.create("fetch-network-error",{originalErrorMessage:p?.message})}if(s.status!==200)throw Pi.create("fetch-status-error",{httpStatus:s.status});let a;try{a=await s.json()}catch(p){throw Pi.create("fetch-parse-error",{originalErrorMessage:p?.message})}let u=a.ttl.match(/^([\d.]+)(s)$/);if(!u||!u[2]||isNaN(Number(u[1])))throw Pi.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});let l=Number(u[1])*1e3,h=Date.now();return{token:a.token,expireTimeMillis:h+l,issuedAtTimeMillis:h}}function FA(t,e){let{projectId:n,appId:r,apiKey:i}=t.options;return{url:`${bU}/projects/${n}/apps/${r}:${DU}?key=${i}`,body:{debug_token:e}}}var SU="firebase-app-check-database",AU=1,k_="firebase-app-check-store";var rf=null;function RU(){return rf||(rf=new Promise((t,e)=>{try{let n=indexedDB.open(SU,AU);n.onsuccess=r=>{t(r.target.result)},n.onerror=r=>{var i;e(Pi.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},n.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(k_,{keyPath:"compositeKey"})}}}catch(n){e(Pi.create("storage-open",{originalErrorMessage:n?.message}))}}),rf)}function xU(t,e){return NU(MU(t),e)}async function NU(t,e){let r=(await RU()).transaction(k_,"readwrite"),o=r.objectStore(k_).put({compositeKey:t,value:e});return new Promise((s,a)=>{o.onsuccess=u=>{s()},r.onerror=u=>{var l;a(Pi.create("storage-set",{originalErrorMessage:(l=u.target.error)===null||l===void 0?void 0:l.message}))}})}function MU(t){return`${t.options.appId}-${t.name}`}var Iu=new ar("@firebase/app-check");function x_(t,e){return vu()?xU(t,e).catch(n=>{Iu.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}function LA(){return kA().enabled}async function VA(){let t=kA();if(t.enabled&&t.token)return t.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)}var kU={error:"UNKNOWN_ERROR"};function PU(t){return Kh.encodeString(JSON.stringify(t),!1)}async function P_(t,e=!1,n=!1){let r=t.app;PA(r);let i=$n(r),o=i.token,s;if(o&&!wu(o)&&(i.token=void 0,o=void 0),!o){let l=await i.cachedTokenPromise;l&&(wu(l)?o=l:await x_(r,void 0))}if(!e&&o&&wu(o))return{token:o.token};let a=!1;if(LA())try{i.exchangeTokenPromise||(i.exchangeTokenPromise=OA(FA(r,await VA()),t.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),a=!0);let l=await i.exchangeTokenPromise;return await x_(r,l),i.token=l,{token:l.token}}catch(l){return l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?Iu.warn(l.message):n&&Iu.error(l),N_(l)}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),a=!0),o=await $n(r).exchangeTokenPromise}catch(l){l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?Iu.warn(l.message):n&&Iu.error(l),s=l}let u;return o?s?wu(o)?u={token:o.token,internalError:s}:u=N_(s):(u={token:o.token},i.token=o,await x_(r,o)):u=N_(s),a&&VU(r,u),u}async function OU(t){let e=t.app;PA(e);let{provider:n}=$n(e);if(LA()){let r=await VA(),{token:i}=await OA(FA(e,r),t.heartbeatServiceProvider);return{token:i}}else{let{token:r}=await n.getToken();return{token:r}}}function FU(t,e,n,r){let{app:i}=t,o=$n(i),s={next:n,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&wu(o.token)){let a=o.token;Promise.resolve().then(()=>{n({token:a.token}),NA(t)}).catch(()=>{})}o.cachedTokenPromise.then(()=>NA(t))}function jA(t,e){let n=$n(t),r=n.tokenObservers.filter(i=>i.next!==e);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function NA(t){let{app:e}=t,n=$n(e),r=n.tokenRefresher;r||(r=LU(t),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function LU(t){let{app:e}=t;return new M_(async()=>{let n=$n(e),r;if(n.token?r=await P_(t,!0):r=await P_(t),r.error)throw r.error;if(r.internalError)throw r.internalError},()=>!0,()=>{let n=$n(e);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5,i=n.token.expireTimeMillis-300*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},xA.RETRIAL_MIN_WAIT,xA.RETRIAL_MAX_WAIT)}function VU(t,e){let n=$n(t).tokenObservers;for(let r of n)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function wu(t){return t.expireTimeMillis-Date.now()>0}function N_(t){return{token:PU(kU),error:t}}var O_=class{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){let{tokenObservers:e}=$n(this.app);for(let n of e)jA(this.app,n.next);return Promise.resolve()}};function jU(t,e){return new O_(t,e)}function UU(t){return{getToken:e=>P_(t,e),getLimitedUseToken:()=>OU(t),addTokenListener:e=>FU(t,"INTERNAL",e),removeTokenListener:e=>jA(t.app,e)}}var BU="@firebase/app-check",$U="0.10.1";var HU="app-check",MA="app-check-internal";function qU(){hn(new Nt(HU,t=>{let e=t.getProvider("app").getImmediate(),n=t.getProvider("heartbeat");return jU(e,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(MA).initialize()})),hn(new Nt(MA,t=>{let e=t.getProvider("app-check").getImmediate();return UU(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),xe(BU,$U)}qU();var zU="app-check";var Oi=class{constructor(){return ki(zU)}};var GU=["localhost","0.0.0.0","127.0.0.1"],Vse=typeof window<"u"&&GU.includes(window.location.hostname);function eR(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var tR=eR,nR=new jn("auth","Firebase",eR());var lf=new ar("@firebase/auth");function WU(t,...e){lf.logLevel<=fe.WARN&&lf.warn(`Auth (${ur}): ${t}`,...e)}function sf(t,...e){lf.logLevel<=fe.ERROR&&lf.error(`Auth (${ur}): ${t}`,...e)}function fr(t,...e){throw X_(t,...e)}function Hn(t,...e){return X_(t,...e)}function J_(t,e,n){let r=Object.assign(Object.assign({},tR()),{[e]:n});return new jn("auth","Firebase",r).create(e,{appName:t.name})}function jo(t){return J_(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function KU(t,e,n){let r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&fr(t,"argument-error"),J_(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function X_(t,...e){if(typeof t!="string"){let n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return nR.create(t,...e)}function ee(t,e,...n){if(!t)throw X_(e,...n)}function Gr(t){let e="INTERNAL ASSERTION FAILED: "+t;throw sf(e),new Error(e)}function Kr(t,e){t||Gr(e)}function V_(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function QU(){return UA()==="http:"||UA()==="https:"}function UA(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}function YU(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(QU()||iA()||"connection"in navigator)?navigator.onLine:!0}function ZU(){if(typeof navigator>"u")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}var Uo=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,Kr(n>e,"Short delay should be less than long delay!"),this.isMobile=nA()||oA()}get(){return YU()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function eE(t,e){Kr(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var df=class{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Gr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Gr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Gr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var JU={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var XU=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],eB=new Uo(3e4,6e4);function tE(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function aa(t,e,n,r,i={}){return rR(t,i,async()=>{let o={},s={};r&&(e==="GET"?s=r:o={body:JSON.stringify(r)});let a=ia(Object.assign({key:t.config.apiKey},s)).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);let l=Object.assign({method:e,headers:u},o);return rA()||(l.referrerPolicy="no-referrer"),t.emulatorConfig&&Un(t.emulatorConfig.host)&&(l.credentials="include"),df.fetch()(await iR(t,t.config.apiHost,n,a),l)})}async function rR(t,e,n){t._canInitEmulator=!1;let r=Object.assign(Object.assign({},JU),e);try{let i=new j_(t),o=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();let s=await o.json();if("needConfirmation"in s)throw of(t,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let a=o.ok?s.errorMessage:s.error.message,[u,l]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw of(t,"credential-already-in-use",s);if(u==="EMAIL_EXISTS")throw of(t,"email-already-in-use",s);if(u==="USER_DISABLED")throw of(t,"user-disabled",s);let h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw J_(t,h,l);fr(t,h)}}catch(i){if(i instanceof Kt)throw i;fr(t,"network-request-failed",{message:String(i)})}}async function tB(t,e,n,r,i={}){let o=await aa(t,e,n,r,i);return"mfaPendingCredential"in o&&fr(t,"multi-factor-auth-required",{_serverResponse:o}),o}async function iR(t,e,n,r){let i=`${e}${n}?${r}`,o=t,s=o.config.emulator?eE(t.config,i):`${t.config.apiScheme}://${i}`;return XU.includes(n)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(s).toString():s}var j_=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Hn(this.auth,"network-request-failed")),eB.get())})}};function of(t,e,n){let r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=Hn(t,e,r);return i.customData._tokenResponse=n,i}async function nB(t,e){return aa(t,"POST","/v1/accounts:delete",e)}async function hf(t,e){return aa(t,"POST","/v1/accounts:lookup",e)}function bu(t){if(t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function nE(t,e=!1){let n=Me(t),r=await n.getIdToken(e),i=rE(r);ee(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:bu(F_(i.auth_time)),issuedAtTime:bu(F_(i.iat)),expirationTime:bu(F_(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}}function F_(t){return Number(t)*1e3}function rE(t){let[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return sf("JWT malformed, contained fewer than 3 sections"),null;try{let i=Qh(n);return i?JSON.parse(i):(sf("Failed to decode base64 JWT payload"),null)}catch(i){return sf("Caught error parsing JWT payload as JSON",i?.toString()),null}}function BA(t){let e=rE(t);return ee(e,"internal-error"),ee(typeof e.exp<"u","internal-error"),ee(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Tu(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Kt&&rB(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function rB({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}var U_=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}};var Cu=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=bu(this.lastLoginAt),this.creationTime=bu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};async function ff(t){var e;let n=t.auth,r=await t.getIdToken(),i=await Tu(t,hf(n,{idToken:r}));ee(i?.users.length,n,"internal-error");let o=i.users[0];t._notifyReloadListener(o);let s=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?oR(o.providerUserInfo):[],a=iB(t.providerData,s),u=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!a?.length,h=u?l:!1,p={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new Cu(o.createdAt,o.lastLoginAt),isAnonymous:h};Object.assign(t,p)}async function iE(t){let e=Me(t);await ff(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function iB(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function oR(t){return t.map(e=>{var{providerId:n}=e,r=md(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}async function oB(t,e){let n=await rR(t,{},async()=>{let r=ia({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=t.config,s=await iR(t,i,"/v1/token",`key=${o}`),a=await t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let u={method:"POST",headers:a,body:r};return t.emulatorConfig&&Un(t.emulatorConfig.host)&&(u.credentials="include"),df.fetch()(s,u)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function sB(t,e){return aa(t,"POST","/v2/accounts:revokeToken",tE(t,e))}var Du=class t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ee(e.idToken,"internal-error"),ee(typeof e.idToken<"u","internal-error"),ee(typeof e.refreshToken<"u","internal-error");let n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):BA(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ee(e.length!==0,"internal-error");let n=BA(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ee(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){let{accessToken:r,refreshToken:i,expiresIn:o}=await oB(e,n);this.updateTokensAndExpiration(r,i,Number(o))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){let{refreshToken:r,accessToken:i,expirationTime:o}=n,s=new t;return r&&(ee(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(ee(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(ee(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new t,this.toJSON())}_performRefresh(){return Gr("not implemented")}};function Fi(t,e){ee(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}var Li=class t{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,o=md(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new U_(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Cu(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){let n=await Tu(this,this.stsTokenManager.getToken(this.auth,e));return ee(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return nE(this,e)}reload(){return iE(this)}_assign(e){this!==e&&(ee(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let n=new t(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ee(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await ff(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Qt(this.auth.app))return Promise.reject(jo(this.auth));let e=await this.getIdToken();return await Tu(this,nB(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,o,s,a,u,l,h;let p=(r=n.displayName)!==null&&r!==void 0?r:void 0,g=(i=n.email)!==null&&i!==void 0?i:void 0,y=(o=n.phoneNumber)!==null&&o!==void 0?o:void 0,w=(s=n.photoURL)!==null&&s!==void 0?s:void 0,k=(a=n.tenantId)!==null&&a!==void 0?a:void 0,x=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,j=(l=n.createdAt)!==null&&l!==void 0?l:void 0,z=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:W,emailVerified:oe,isAnonymous:Ze,providerData:Ie,stsTokenManager:b}=n;ee(W&&b,e,"internal-error");let v=Du.fromJSON(this.name,b);ee(typeof W=="string",e,"internal-error"),Fi(p,e.name),Fi(g,e.name),ee(typeof oe=="boolean",e,"internal-error"),ee(typeof Ze=="boolean",e,"internal-error"),Fi(y,e.name),Fi(w,e.name),Fi(k,e.name),Fi(x,e.name),Fi(j,e.name),Fi(z,e.name);let E=new t({uid:W,auth:e,email:g,emailVerified:oe,displayName:p,isAnonymous:Ze,photoURL:w,phoneNumber:y,tenantId:k,stsTokenManager:v,createdAt:j,lastLoginAt:z});return Ie&&Array.isArray(Ie)&&(E.providerData=Ie.map(I=>Object.assign({},I))),x&&(E._redirectEventId=x),E}static async _fromIdTokenResponse(e,n,r=!1){let i=new Du;i.updateFromServerResponse(n);let o=new t({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await ff(o),o}static async _fromGetAccountInfoResponse(e,n,r){let i=n.users[0];ee(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?oR(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,a=new Du;a.updateFromIdToken(r);let u=new t({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Cu(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(u,l),u}};var $A=new Map;function Wr(t){Kr(t instanceof Function,"Expected a class definition");let e=$A.get(t);return e?(Kr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,$A.set(t,e),e)}var aB=(()=>{class t{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(n,r){this.storage[n]=r}async _get(n){let r=this.storage[n];return r===void 0?null:r}async _remove(n){delete this.storage[n]}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})(),B_=aB;function af(t,e,n){return`firebase:${t}:${e}:${n}`}var pf=class t{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=af(this.userKey,i.apiKey,o),this.fullPersistenceKey=af("persistence",i.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){let e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let n=await hf(this.auth,{idToken:e}).catch(()=>{});return n?Li._fromGetAccountInfoResponse(this.auth,n,e):null}return Li._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;let n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new t(Wr(B_),e,r);let i=(await Promise.all(n.map(async l=>{if(await l._isAvailable())return l}))).filter(l=>l),o=i[0]||Wr(B_),s=af(r,e.config.apiKey,e.name),a=null;for(let l of n)try{let h=await l._get(s);if(h){let p;if(typeof h=="string"){let g=await hf(e,{idToken:h}).catch(()=>{});if(!g)break;p=await Li._fromGetAccountInfoResponse(e,g,h)}else p=Li._fromJSON(e,h);l!==o&&(a=p),o=l;break}}catch{}let u=i.filter(l=>l._shouldAllowMigration);return!o._shouldAllowMigration||!u.length?new t(o,e,r):(o=u[0],a&&await o._set(s,a.toJSON()),await Promise.all(n.map(async l=>{if(l!==o)try{await l._remove(s)}catch{}})),new t(o,e,r))}};function HA(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(uR(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(sR(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(dR(e))return"Blackberry";if(hR(e))return"Webos";if(aR(e))return"Safari";if((e.includes("chrome/")||cR(e))&&!e.includes("edge/"))return"Chrome";if(lR(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function sR(t=It()){return/firefox\//i.test(t)}function aR(t=It()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function cR(t=It()){return/crios\//i.test(t)}function uR(t=It()){return/iemobile/i.test(t)}function lR(t=It()){return/android/i.test(t)}function dR(t=It()){return/blackberry/i.test(t)}function hR(t=It()){return/webos/i.test(t)}function oE(t=It()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function cB(t=It()){var e;return oE(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function uB(){return sA()&&document.documentMode===10}function fR(t=It()){return oE(t)||lR(t)||hR(t)||dR(t)||/windows phone/i.test(t)||uR(t)}function pR(t,e=[]){let n;switch(t){case"Browser":n=HA(It());break;case"Worker":n=`${HA(It())}-${t}`;break;default:n=t}let r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ur}/${r}`}var $_=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){let r=o=>new Promise((s,a)=>{try{let u=e(o);s(u)}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;let n=[];try{for(let r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(let i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}};async function lB(t,e={}){return aa(t,"GET","/v2/passwordPolicy",tE(t,e))}var dB=6,H_=class{constructor(e){var n,r,i,o;let s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=s.minPasswordLength)!==null&&n!==void 0?n:dB,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,o,s,a;let u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(o=u.containsUppercaseLetter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(s=u.containsNumericCharacter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(e,n){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var q_=class{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new gf(this),this.idTokenSubscription=new gf(this),this.beforeStateQueue=new $_(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=nR,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Wr(n)),this._initializationPromise=this.queue(async()=>{var r,i,o;if(!this._deleted&&(this.persistenceManager=await pf.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;let e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{let n=await hf(this,{idToken:e}),r=await Li._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Qt(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(a,a))}):this.directlySetCurrentUser(null)}let r=await this.assertedPersistence.getCurrentUser(),i=r,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();let s=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i?._redirectEventId,u=await this.tryRedirectSignIn(e);(!s||s===a)&&u?.user&&(i=u.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return ee(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await ff(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=ZU()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Qt(this.app))return Promise.reject(jo(this));let n=e?Me(e):null;return n&&ee(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ee(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Qt(this.app)?Promise.reject(jo(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Qt(this.app)?Promise.reject(jo(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Wr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){let e=await lB(this),n=new H_(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new jn("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){let n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await sB(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){let r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){let n=e&&Wr(e)||this._popupRedirectResolver;ee(n,this,"argument-error"),this.redirectPersistenceManager=await pf.create(this,[Wr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};let o=typeof n=="function"?n:n.next.bind(n),s=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(ee(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof n=="function"){let u=e.addObserver(n,r,i);return()=>{s=!0,u()}}else{let u=e.addObserver(n);return()=>{s=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ee(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=pR(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;let n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);let r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);let i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;if(Qt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n?.error&&WU(`Error while retrieving App Check token: ${n.error}`),n?.token}};function bf(t){return Me(t)}var gf=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=lA(n=>this.observer=n)}get next(){return ee(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var sE={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function hB(t){sE=t}function fB(t){return sE.loadJS(t)}function pB(){return sE.gapiScript}function gR(t){return`__${t}${Math.floor(Math.random()*1e6)}`}function aE(t,e){let n=Mi(t,"auth");if(n.isInitialized()){let i=n.getImmediate(),o=n.getOptions();if(sr(o,e??{}))return i;fr(i,"already-initialized")}return n.initialize({options:e})}function gB(t,e){let n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(Wr);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function cE(t,e,n){let r=bf(t);ee(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!n?.disableWarnings,o=mR(e),{host:s,port:a}=mB(e),u=a===null?"":`:${a}`,l={url:`${o}//${s}${u}/`},h=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){ee(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),ee(sr(l,r.config.emulator)&&sr(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=l,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,Un(s)?(na(`${o}//${s}${u}`),ra("Auth",!0)):i||yB()}function mR(t){let e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function mB(t){let e=mR(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};let r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let o=i[1];return{host:o,port:qA(r.substr(o.length+1))}}else{let[o,s]=r.split(":");return{host:o,port:qA(s)}}}function qA(t){if(!t)return null;let e=Number(t);return isNaN(e)?null:e}function yB(){function t(){let e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}var Su=class{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Gr("not implemented")}_getIdTokenResponse(e){return Gr("not implemented")}_linkToIdToken(e,n){return Gr("not implemented")}_getReauthenticationResolver(e){return Gr("not implemented")}};async function sa(t,e){return tB(t,"POST","/v1/accounts:signInWithIdp",tE(t,e))}var vB="http://localhost",mf=class t extends Su{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){let n=new t(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):fr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){let n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,o=md(n,["providerId","signInMethod"]);if(!r||!i)return null;let s=new t(r,i);return s.idToken=o.idToken||void 0,s.accessToken=o.accessToken||void 0,s.secret=o.secret,s.nonce=o.nonce,s.pendingToken=o.pendingToken||null,s}_getIdTokenResponse(e){let n=this.buildRequest();return sa(e,n)}_linkToIdToken(e,n){let r=this.buildRequest();return r.idToken=n,sa(e,r)}_getReauthenticationResolver(e){let n=this.buildRequest();return n.autoCreate=!1,sa(e,n)}buildRequest(){let e={requestUri:vB,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{let n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=ia(n)}return e}};var Au=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var yf=class extends Au{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var uE=(()=>{class t extends yf{constructor(){super("google.com"),this.addScope("profile")}static credential(n,r){return mf._fromParams({providerId:t.PROVIDER_ID,signInMethod:t.GOOGLE_SIGN_IN_METHOD,idToken:n,accessToken:r})}static credentialFromResult(n){return t.credentialFromTaggedObject(n)}static credentialFromError(n){return t.credentialFromTaggedObject(n.customData||{})}static credentialFromTaggedObject({_tokenResponse:n}){if(!n)return null;let{oauthIdToken:r,oauthAccessToken:i}=n;if(!r&&!i)return null;try{return t.credential(r,i)}catch{return null}}}t.GOOGLE_SIGN_IN_METHOD="google.com",t.PROVIDER_ID="google.com";return t})();var Ru=class t{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){let o=await Li._fromIdTokenResponse(e,r,i),s=zA(r);return new t({user:o,providerId:s,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);let i=zA(r);return new t({user:e,providerId:i,_tokenResponse:r,operationType:n})}};function zA(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}var z_=class t extends Kt{constructor(e,n,r,i){var o;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,t.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new t(e,n,r,i)}};function yR(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?z_._fromErrorAndOperation(t,o,e,r):o})}async function _B(t,e,n=!1){let r=await Tu(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Ru._forOperation(t,"link",r)}async function EB(t,e,n=!1){let{auth:r}=t;if(Qt(r.app))return Promise.reject(jo(r));let i="reauthenticate";try{let o=await Tu(t,yR(r,i,e,t),n);ee(o.idToken,r,"internal-error");let s=rE(o.idToken);ee(s,r,"internal-error");let{sub:a}=s;return ee(t.uid===a,r,"user-mismatch"),Ru._forOperation(t,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&fr(r,"user-mismatch"),o}}async function IB(t,e,n=!1){if(Qt(t.app))return Promise.reject(jo(t));let r="signIn",i=await yR(t,r,e),o=await Ru._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(o.user),o}function lE(t,e,n,r){return Me(t).onIdTokenChanged(e,n,r)}function dE(t,e,n){return Me(t).beforeAuthStateChanged(e,n)}function hE(t,e,n,r){return Me(t).onAuthStateChanged(e,n,r)}function fE(t){return Me(t).signOut()}var vf="__sak";var _f=class{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(vf,"1"),this.storage.removeItem(vf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){let n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var wB=1e3,bB=10,DB=(()=>{class t extends _f{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(n,r)=>this.onStorageEvent(n,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=fR(),this._shouldAllowMigration=!0}forAllChangedKeys(n){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),o=this.localCache[r];i!==o&&n(r,o,i)}}onStorageEvent(n,r=!1){if(!n.key){this.forAllChangedKeys((a,u,l)=>{this.notifyListeners(a,l)});return}let i=n.key;r?this.detachListener():this.stopPolling();let o=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);uB()&&s!==n.newValue&&n.newValue!==n.oldValue?setTimeout(o,bB):o()}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((n,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:n,oldValue:r,newValue:i}),!0)})},wB)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(n,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[n]||(this.listeners[n]=new Set,this.localCache[n]=this.storage.getItem(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(n,r){await super._set(n,r),this.localCache[n]=JSON.stringify(r)}async _get(n){let r=await super._get(n);return this.localCache[n]=JSON.stringify(r),r}async _remove(n){await super._remove(n),delete this.localCache[n]}}return t.type="LOCAL",t})(),vR=DB;var TB=(()=>{class t extends _f{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(n,r){}_removeListener(n,r){}}return t.type="SESSION",t})(),pE=TB;function CB(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}var SB=(()=>{class t{constructor(n){this.eventTarget=n,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(n){let r=this.receivers.find(o=>o.isListeningto(n));if(r)return r;let i=new t(n);return this.receivers.push(i),i}isListeningto(n){return this.eventTarget===n}async handleEvent(n){let r=n,{eventId:i,eventType:o,data:s}=r.data,a=this.handlersMap[o];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:o});let u=Array.from(a).map(async h=>h(r.origin,s)),l=await CB(u);r.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:l})}_subscribe(n,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[n]||(this.handlersMap[n]=new Set),this.handlersMap[n].add(r)}_unsubscribe(n,r){this.handlersMap[n]&&r&&this.handlersMap[n].delete(r),(!r||this.handlersMap[n].size===0)&&delete this.handlersMap[n],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}t.receivers=[];return t})();function gE(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}var G_=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((a,u)=>{let l=gE("",20);i.port1.start();let h=setTimeout(()=>{u(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(p){let g=p;if(g.data.eventId===l)switch(g.data.status){case"ack":clearTimeout(h),o=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),a(g.data.response);break;default:clearTimeout(h),clearTimeout(o),u(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:n},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}};function hr(){return window}function AB(t){hr().location.href=t}function _R(){return typeof hr().WorkerGlobalScope<"u"&&typeof hr().importScripts=="function"}async function RB(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function xB(){var t;return((t=navigator?.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function NB(){return _R()?self:null}var ER="firebaseLocalStorageDb",MB=1,Ef="firebaseLocalStorage",IR="fbase_key",Bo=class{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}};function Df(t,e){return t.transaction([Ef],e?"readwrite":"readonly").objectStore(Ef)}function kB(){let t=indexedDB.deleteDatabase(ER);return new Bo(t).toPromise()}function W_(){let t=indexedDB.open(ER,MB);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{let r=t.result;try{r.createObjectStore(Ef,{keyPath:IR})}catch(i){n(i)}}),t.addEventListener("success",async()=>{let r=t.result;r.objectStoreNames.contains(Ef)?e(r):(r.close(),await kB(),e(await W_()))})})}async function GA(t,e,n){let r=Df(t,!0).put({[IR]:e,value:n});return new Bo(r).toPromise()}async function PB(t,e){let n=Df(t,!1).get(e),r=await new Bo(n).toPromise();return r===void 0?null:r.value}function WA(t,e){let n=Df(t,!0).delete(e);return new Bo(n).toPromise()}var OB=800,FB=3,LB=(()=>{class t{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await W_(),this.db)}async _withRetries(n){let r=0;for(;;)try{let i=await this._openDb();return await n(i)}catch(i){if(r++>FB)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return _R()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=SB._getInstance(NB()),this.receiver._subscribe("keyChanged",async(n,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(n,r)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await RB(),!this.activeServiceWorker)return;this.sender=new G_(this.activeServiceWorker);let i=await this.sender._send("ping",{},800);i&&!((n=i[0])===null||n===void 0)&&n.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(n){if(!(!this.sender||!this.activeServiceWorker||xB()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:n},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;let n=await W_();return await GA(n,vf,"1"),await WA(n,vf),!0}catch{}return!1}async _withPendingWrite(n){this.pendingWrites++;try{await n()}finally{this.pendingWrites--}}async _set(n,r){return this._withPendingWrite(async()=>(await this._withRetries(i=>GA(i,n,r)),this.localCache[n]=r,this.notifyServiceWorker(n)))}async _get(n){let r=await this._withRetries(i=>PB(i,n));return this.localCache[n]=r,r}async _remove(n){return this._withPendingWrite(async()=>(await this._withRetries(r=>WA(r,n)),delete this.localCache[n],this.notifyServiceWorker(n)))}async _poll(){let n=await this._withRetries(o=>{let s=Df(o,!1).getAll();return new Bo(s).toPromise()});if(!n)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(n.length!==0)for(let{fbase_key:o,value:s}of n)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(s)&&(this.notifyListeners(o,s),r.push(o));for(let o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),r.push(o));return r}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let o of Array.from(i))o(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),OB)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(n,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[n]||(this.listeners[n]=new Set,this._get(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return t.type="LOCAL",t})(),wR=LB;var Kse=gR("rcb"),Qse=new Uo(3e4,6e4);function bR(t,e){return e?Wr(e):(ee(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}var xu=class extends Su{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return sa(e,this._buildIdpRequest())}_linkToIdToken(e,n){return sa(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return sa(e,this._buildIdpRequest())}_buildIdpRequest(e){let n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}};function VB(t){return IB(t.auth,new xu(t),t.bypassAuthState)}function jB(t){let{auth:e,user:n}=t;return ee(n,e,"internal-error"),EB(n,new xu(t),t.bypassAuthState)}async function UB(t){let{auth:e,user:n}=t;return ee(n,e,"internal-error"),_B(n,new xu(t),t.bypassAuthState)}var If=class{constructor(e,n,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){let{urlResponse:n,sessionId:r,postBody:i,tenantId:o,error:s,type:a}=e;if(s){this.reject(s);return}let u={auth:this.auth,requestUri:n,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(u))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return VB;case"linkViaPopup":case"linkViaRedirect":return UB;case"reauthViaPopup":case"reauthViaRedirect":return jB;default:fr(this.auth,"internal-error")}}resolve(e){Kr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Kr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var BB=new Uo(2e3,1e4);async function mE(t,e,n){if(Qt(t.app))return Promise.reject(Hn(t,"operation-not-supported-in-this-environment"));let r=bf(t);KU(t,e,Au);let i=bR(r,n);return new $B(r,"signInViaPopup",e,i).executeNotNull()}var $B=(()=>{class t extends If{constructor(n,r,i,o,s){super(n,r,o,s),this.provider=i,this.authWindow=null,this.pollId=null,t.currentPopupAction&&t.currentPopupAction.cancel(),t.currentPopupAction=this}async executeNotNull(){let n=await this.execute();return ee(n,this.auth,"internal-error"),n}async onExecution(){Kr(this.filter.length===1,"Popup operations only handle one event");let n=gE();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],n),this.authWindow.associatedEvent=n,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(Hn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var n;return((n=this.authWindow)===null||n===void 0?void 0:n.associatedEvent)||null}cancel(){this.reject(Hn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,t.currentPopupAction=null}pollUserCancellation(){let n=()=>{var r,i;if(!((i=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Hn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(n,BB.get())};n()}}t.currentPopupAction=null;return t})(),HB="pendingRedirect",cf=new Map,K_=class extends If{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=cf.get(this.auth._key());if(!e){try{let r=await qB(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}cf.set(this.auth._key(),e)}return this.bypassAuthState||cf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}};async function qB(t,e){let n=WB(e),r=GB(t);if(!await r._isAvailable())return!1;let i=await r._get(n)==="true";return await r._remove(n),i}function zB(t,e){cf.set(t._key(),e)}function GB(t){return Wr(t._redirectPersistence)}function WB(t){return af(HB,t.config.apiKey,t.name)}async function KB(t,e,n=!1){if(Qt(t.app))return Promise.reject(jo(t));let r=bf(t),i=bR(r,e),s=await new K_(r,i,n).execute();return s&&!n&&(delete s.user._redirectEventId,await r._persistUserIfCurrent(s.user),await r._setRedirectUser(null,e)),s}var QB=600*1e3,Q_=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!YB(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!DR(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Hn(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){let r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=QB&&this.cachedEventUids.clear(),this.cachedEventUids.has(KA(e))}saveEventToCache(e){this.cachedEventUids.add(KA(e)),this.lastProcessedEventTime=Date.now()}};function KA(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function DR({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function YB(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return DR(t);default:return!1}}async function ZB(t,e={}){return aa(t,"GET","/v1/projects",e)}var JB=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,XB=/^https?/;async function e$(t){if(t.config.emulator)return;let{authorizedDomains:e}=await ZB(t);for(let n of e)try{if(t$(n))return}catch{}fr(t,"unauthorized-domain")}function t$(t){let e=V_(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){let s=new URL(t);return s.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&s.hostname===r}if(!XB.test(n))return!1;if(JB.test(t))return r===t;let i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var n$=new Uo(3e4,6e4);function QA(){let t=hr().___jsl;if(t?.H){for(let e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function r$(t){return new Promise((e,n)=>{var r,i,o;function s(){QA(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{QA(),n(Hn(t,"network-request-failed"))},timeout:n$.get()})}if(!((i=(r=hr().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=hr().gapi)===null||o===void 0)&&o.load)s();else{let a=gR("iframefcb");return hr()[a]=()=>{gapi.load?s():n(Hn(t,"network-request-failed"))},fB(`${pB()}?onload=${a}`).catch(u=>n(u))}}).catch(e=>{throw uf=null,e})}var uf=null;function i$(t){return uf=uf||r$(t),uf}var o$=new Uo(5e3,15e3),s$="__/auth/iframe",a$="emulator/auth/iframe",c$={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},u$=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function l$(t){let e=t.config;ee(e.authDomain,t,"auth-domain-config-required");let n=e.emulator?eE(e,a$):`https://${t.config.authDomain}/${s$}`,r={apiKey:e.apiKey,appName:t.name,v:ur},i=u$.get(t.config.apiHost);i&&(r.eid=i);let o=t._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${ia(r).slice(1)}`}async function d$(t){let e=await i$(t),n=hr().gapi;return ee(n,t,"internal-error"),e.open({where:document.body,url:l$(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:c$,dontclear:!0},r=>new Promise(async(i,o)=>{await r.restyle({setHideOnLeave:!1});let s=Hn(t,"network-request-failed"),a=hr().setTimeout(()=>{o(s)},o$.get());function u(){hr().clearTimeout(a),i(r)}r.ping(u).then(u,()=>{o(s)})}))}var h$={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},f$=500,p$=600,g$="_blank",m$="http://localhost",wf=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function y$(t,e,n,r=f$,i=p$){let o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",u=Object.assign(Object.assign({},h$),{width:r.toString(),height:i.toString(),top:o,left:s}),l=It().toLowerCase();n&&(a=cR(l)?g$:n),sR(l)&&(e=e||m$,u.scrollbars="yes");let h=Object.entries(u).reduce((g,[y,w])=>`${g}${y}=${w},`,"");if(cB(l)&&a!=="_self")return v$(e||"",a),new wf(null);let p=window.open(e||"",a,h);ee(p,t,"popup-blocked");try{p.focus()}catch{}return new wf(p)}function v$(t,e){let n=document.createElement("a");n.href=t,n.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var _$="__/auth/handler",E$="emulator/auth/handler",I$=encodeURIComponent("fac");async function YA(t,e,n,r,i,o){ee(t.config.authDomain,t,"auth-domain-config-required"),ee(t.config.apiKey,t,"invalid-api-key");let s={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:ur,eventId:i};if(e instanceof Au){e.setDefaultLanguage(t.languageCode),s.providerId=e.providerId||"",uA(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(let[h,p]of Object.entries(o||{}))s[h]=p}if(e instanceof yf){let h=e.getScopes().filter(p=>p!=="");h.length>0&&(s.scopes=h.join(","))}t.tenantId&&(s.tid=t.tenantId);let a=s;for(let h of Object.keys(a))a[h]===void 0&&delete a[h];let u=await t._getAppCheckToken(),l=u?`#${I$}=${encodeURIComponent(u)}`:"";return`${w$(t)}?${ia(a).slice(1)}${l}`}function w$({config:t}){return t.emulator?eE(t,E$):`https://${t.authDomain}/${_$}`}var L_="webStorageSupport",Y_=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=pE,this._completeRedirectFn=KB,this._overrideRedirectResult=zB}async _openPopup(e,n,r,i){var o;Kr((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");let s=await YA(e,n,r,V_(),i);return y$(e,s,gE())}async _openRedirect(e,n,r,i){await this._originValidation(e);let o=await YA(e,n,r,V_(),i);return AB(o),new Promise(()=>{})}_initialize(e){let n=e._key();if(this.eventManagers[n]){let{manager:i,promise:o}=this.eventManagers[n];return i?Promise.resolve(i):(Kr(o,"If manager is not set, promise should be"),o)}let r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){let n=await d$(e),r=new Q_(e);return n.register("authEvent",i=>(ee(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(L_,{type:L_},i=>{var o;let s=(o=i?.[0])===null||o===void 0?void 0:o[L_];s!==void 0&&n(!!s),fr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=e$(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return fR()||aR()||oE()}},TR=Y_;var ZA="@firebase/auth",JA="1.10.8";var Z_=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ee(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function b$(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function D$(t){hn(new Nt("auth",(e,{options:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;ee(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let u={apiKey:s,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:pR(t)},l=new q_(r,i,o,u);return gB(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),hn(new Nt("auth-internal",e=>{let n=bf(e.getProvider("auth").getImmediate());return(r=>new Z_(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),xe(ZA,JA,b$(t)),xe(ZA,JA,"esm2017")}var T$=300,C$=f_("authIdTokenMaxAge")||T$,XA=null,S$=t=>async e=>{let n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>C$)return;let i=n?.token;XA!==i&&(XA=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function yE(t=qr()){let e=Mi(t,"auth");if(e.isInitialized())return e.getImmediate();let n=aE(t,{popupRedirectResolver:TR,persistence:[wR,vR,pE]}),r=f_("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let o=new URL(r,location.origin);if(location.origin===o.origin){let s=S$(o.toString());dE(n,s,()=>s(n.currentUser)),lE(n,a=>s(a))}}let i=d_("auth");return i&&cE(n,`http://${i}`),n}function A$(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}hB({loadJS(t){return new Promise((e,n)=>{let r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{let o=Hn("internal-error");o.customData=i,n(o)},r.type="text/javascript",r.charset="UTF-8",A$().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});D$("Browser");var CR="auth",$o=class{constructor(e){return e}},Ho=class{constructor(){return ki(CR)}};var vE=new q("angularfire2.auth-instances");function vH(t,e){let n=Vo(CR,t,e);return n&&new $o(n)}function _H(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new $o(r)}}var EH={provide:Ho,deps:[[new yt,vE]]},IH={provide:$o,useFactory:vH,deps:[[new yt,vE],Bn]};function SR(t,...e){return xe("angularfire",lr.full,"auth"),zt([IH,EH,{provide:vE,useFactory:_H(t),multi:!0,deps:[be,Be,dr,zr,[new yt,Oi],...e]}])}var AR=Le(yE,!0);var RR=Le(hE,!0);var xR=Le(mE,!0,2);var NR=Le(fE,!0,2);var MR=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},kR={};var Qr,_E;(function(){var t;function e(b,v){function E(){}E.prototype=v.prototype,b.D=v.prototype,b.prototype=new E,b.prototype.constructor=b,b.C=function(I,D,S){for(var _=Array(arguments.length-2),Tr=2;Tr<arguments.length;Tr++)_[Tr-2]=arguments[Tr];return v.prototype[D].apply(I,_)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(b,v,E){E||(E=0);var I=Array(16);if(typeof v=="string")for(var D=0;16>D;++D)I[D]=v.charCodeAt(E++)|v.charCodeAt(E++)<<8|v.charCodeAt(E++)<<16|v.charCodeAt(E++)<<24;else for(D=0;16>D;++D)I[D]=v[E++]|v[E++]<<8|v[E++]<<16|v[E++]<<24;v=b.g[0],E=b.g[1],D=b.g[2];var S=b.g[3],_=v+(S^E&(D^S))+I[0]+3614090360&4294967295;v=E+(_<<7&4294967295|_>>>25),_=S+(D^v&(E^D))+I[1]+3905402710&4294967295,S=v+(_<<12&4294967295|_>>>20),_=D+(E^S&(v^E))+I[2]+606105819&4294967295,D=S+(_<<17&4294967295|_>>>15),_=E+(v^D&(S^v))+I[3]+3250441966&4294967295,E=D+(_<<22&4294967295|_>>>10),_=v+(S^E&(D^S))+I[4]+4118548399&4294967295,v=E+(_<<7&4294967295|_>>>25),_=S+(D^v&(E^D))+I[5]+1200080426&4294967295,S=v+(_<<12&4294967295|_>>>20),_=D+(E^S&(v^E))+I[6]+2821735955&4294967295,D=S+(_<<17&4294967295|_>>>15),_=E+(v^D&(S^v))+I[7]+4249261313&4294967295,E=D+(_<<22&4294967295|_>>>10),_=v+(S^E&(D^S))+I[8]+1770035416&4294967295,v=E+(_<<7&4294967295|_>>>25),_=S+(D^v&(E^D))+I[9]+2336552879&4294967295,S=v+(_<<12&4294967295|_>>>20),_=D+(E^S&(v^E))+I[10]+4294925233&4294967295,D=S+(_<<17&4294967295|_>>>15),_=E+(v^D&(S^v))+I[11]+2304563134&4294967295,E=D+(_<<22&4294967295|_>>>10),_=v+(S^E&(D^S))+I[12]+1804603682&4294967295,v=E+(_<<7&4294967295|_>>>25),_=S+(D^v&(E^D))+I[13]+4254626195&4294967295,S=v+(_<<12&4294967295|_>>>20),_=D+(E^S&(v^E))+I[14]+2792965006&4294967295,D=S+(_<<17&4294967295|_>>>15),_=E+(v^D&(S^v))+I[15]+1236535329&4294967295,E=D+(_<<22&4294967295|_>>>10),_=v+(D^S&(E^D))+I[1]+4129170786&4294967295,v=E+(_<<5&4294967295|_>>>27),_=S+(E^D&(v^E))+I[6]+3225465664&4294967295,S=v+(_<<9&4294967295|_>>>23),_=D+(v^E&(S^v))+I[11]+643717713&4294967295,D=S+(_<<14&4294967295|_>>>18),_=E+(S^v&(D^S))+I[0]+3921069994&4294967295,E=D+(_<<20&4294967295|_>>>12),_=v+(D^S&(E^D))+I[5]+3593408605&4294967295,v=E+(_<<5&4294967295|_>>>27),_=S+(E^D&(v^E))+I[10]+38016083&4294967295,S=v+(_<<9&4294967295|_>>>23),_=D+(v^E&(S^v))+I[15]+3634488961&4294967295,D=S+(_<<14&4294967295|_>>>18),_=E+(S^v&(D^S))+I[4]+3889429448&4294967295,E=D+(_<<20&4294967295|_>>>12),_=v+(D^S&(E^D))+I[9]+568446438&4294967295,v=E+(_<<5&4294967295|_>>>27),_=S+(E^D&(v^E))+I[14]+3275163606&4294967295,S=v+(_<<9&4294967295|_>>>23),_=D+(v^E&(S^v))+I[3]+4107603335&4294967295,D=S+(_<<14&4294967295|_>>>18),_=E+(S^v&(D^S))+I[8]+1163531501&4294967295,E=D+(_<<20&4294967295|_>>>12),_=v+(D^S&(E^D))+I[13]+2850285829&4294967295,v=E+(_<<5&4294967295|_>>>27),_=S+(E^D&(v^E))+I[2]+4243563512&4294967295,S=v+(_<<9&4294967295|_>>>23),_=D+(v^E&(S^v))+I[7]+1735328473&4294967295,D=S+(_<<14&4294967295|_>>>18),_=E+(S^v&(D^S))+I[12]+2368359562&4294967295,E=D+(_<<20&4294967295|_>>>12),_=v+(E^D^S)+I[5]+4294588738&4294967295,v=E+(_<<4&4294967295|_>>>28),_=S+(v^E^D)+I[8]+2272392833&4294967295,S=v+(_<<11&4294967295|_>>>21),_=D+(S^v^E)+I[11]+1839030562&4294967295,D=S+(_<<16&4294967295|_>>>16),_=E+(D^S^v)+I[14]+4259657740&4294967295,E=D+(_<<23&4294967295|_>>>9),_=v+(E^D^S)+I[1]+2763975236&4294967295,v=E+(_<<4&4294967295|_>>>28),_=S+(v^E^D)+I[4]+1272893353&4294967295,S=v+(_<<11&4294967295|_>>>21),_=D+(S^v^E)+I[7]+4139469664&4294967295,D=S+(_<<16&4294967295|_>>>16),_=E+(D^S^v)+I[10]+3200236656&4294967295,E=D+(_<<23&4294967295|_>>>9),_=v+(E^D^S)+I[13]+681279174&4294967295,v=E+(_<<4&4294967295|_>>>28),_=S+(v^E^D)+I[0]+3936430074&4294967295,S=v+(_<<11&4294967295|_>>>21),_=D+(S^v^E)+I[3]+3572445317&4294967295,D=S+(_<<16&4294967295|_>>>16),_=E+(D^S^v)+I[6]+76029189&4294967295,E=D+(_<<23&4294967295|_>>>9),_=v+(E^D^S)+I[9]+3654602809&4294967295,v=E+(_<<4&4294967295|_>>>28),_=S+(v^E^D)+I[12]+3873151461&4294967295,S=v+(_<<11&4294967295|_>>>21),_=D+(S^v^E)+I[15]+530742520&4294967295,D=S+(_<<16&4294967295|_>>>16),_=E+(D^S^v)+I[2]+3299628645&4294967295,E=D+(_<<23&4294967295|_>>>9),_=v+(D^(E|~S))+I[0]+4096336452&4294967295,v=E+(_<<6&4294967295|_>>>26),_=S+(E^(v|~D))+I[7]+1126891415&4294967295,S=v+(_<<10&4294967295|_>>>22),_=D+(v^(S|~E))+I[14]+2878612391&4294967295,D=S+(_<<15&4294967295|_>>>17),_=E+(S^(D|~v))+I[5]+4237533241&4294967295,E=D+(_<<21&4294967295|_>>>11),_=v+(D^(E|~S))+I[12]+1700485571&4294967295,v=E+(_<<6&4294967295|_>>>26),_=S+(E^(v|~D))+I[3]+2399980690&4294967295,S=v+(_<<10&4294967295|_>>>22),_=D+(v^(S|~E))+I[10]+4293915773&4294967295,D=S+(_<<15&4294967295|_>>>17),_=E+(S^(D|~v))+I[1]+2240044497&4294967295,E=D+(_<<21&4294967295|_>>>11),_=v+(D^(E|~S))+I[8]+1873313359&4294967295,v=E+(_<<6&4294967295|_>>>26),_=S+(E^(v|~D))+I[15]+4264355552&4294967295,S=v+(_<<10&4294967295|_>>>22),_=D+(v^(S|~E))+I[6]+2734768916&4294967295,D=S+(_<<15&4294967295|_>>>17),_=E+(S^(D|~v))+I[13]+1309151649&4294967295,E=D+(_<<21&4294967295|_>>>11),_=v+(D^(E|~S))+I[4]+4149444226&4294967295,v=E+(_<<6&4294967295|_>>>26),_=S+(E^(v|~D))+I[11]+3174756917&4294967295,S=v+(_<<10&4294967295|_>>>22),_=D+(v^(S|~E))+I[2]+718787259&4294967295,D=S+(_<<15&4294967295|_>>>17),_=E+(S^(D|~v))+I[9]+3951481745&4294967295,b.g[0]=b.g[0]+v&4294967295,b.g[1]=b.g[1]+(D+(_<<21&4294967295|_>>>11))&4294967295,b.g[2]=b.g[2]+D&4294967295,b.g[3]=b.g[3]+S&4294967295}r.prototype.u=function(b,v){v===void 0&&(v=b.length);for(var E=v-this.blockSize,I=this.B,D=this.h,S=0;S<v;){if(D==0)for(;S<=E;)i(this,b,S),S+=this.blockSize;if(typeof b=="string"){for(;S<v;)if(I[D++]=b.charCodeAt(S++),D==this.blockSize){i(this,I),D=0;break}}else for(;S<v;)if(I[D++]=b[S++],D==this.blockSize){i(this,I),D=0;break}}this.h=D,this.o+=v},r.prototype.v=function(){var b=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);b[0]=128;for(var v=1;v<b.length-8;++v)b[v]=0;var E=8*this.o;for(v=b.length-8;v<b.length;++v)b[v]=E&255,E/=256;for(this.u(b),b=Array(16),v=E=0;4>v;++v)for(var I=0;32>I;I+=8)b[E++]=this.g[v]>>>I&255;return b};function o(b,v){var E=a;return Object.prototype.hasOwnProperty.call(E,b)?E[b]:E[b]=v(b)}function s(b,v){this.h=v;for(var E=[],I=!0,D=b.length-1;0<=D;D--){var S=b[D]|0;I&&S==v||(E[D]=S,I=!1)}this.g=E}var a={};function u(b){return-128<=b&&128>b?o(b,function(v){return new s([v|0],0>v?-1:0)}):new s([b|0],0>b?-1:0)}function l(b){if(isNaN(b)||!isFinite(b))return p;if(0>b)return x(l(-b));for(var v=[],E=1,I=0;b>=E;I++)v[I]=b/E|0,E*=4294967296;return new s(v,0)}function h(b,v){if(b.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(b.charAt(0)=="-")return x(h(b.substring(1),v));if(0<=b.indexOf("-"))throw Error('number format error: interior "-" character');for(var E=l(Math.pow(v,8)),I=p,D=0;D<b.length;D+=8){var S=Math.min(8,b.length-D),_=parseInt(b.substring(D,D+S),v);8>S?(S=l(Math.pow(v,S)),I=I.j(S).add(l(_))):(I=I.j(E),I=I.add(l(_)))}return I}var p=u(0),g=u(1),y=u(16777216);t=s.prototype,t.m=function(){if(k(this))return-x(this).m();for(var b=0,v=1,E=0;E<this.g.length;E++){var I=this.i(E);b+=(0<=I?I:4294967296+I)*v,v*=4294967296}return b},t.toString=function(b){if(b=b||10,2>b||36<b)throw Error("radix out of range: "+b);if(w(this))return"0";if(k(this))return"-"+x(this).toString(b);for(var v=l(Math.pow(b,6)),E=this,I="";;){var D=oe(E,v).g;E=j(E,D.j(v));var S=((0<E.g.length?E.g[0]:E.h)>>>0).toString(b);if(E=D,w(E))return S+I;for(;6>S.length;)S="0"+S;I=S+I}},t.i=function(b){return 0>b?0:b<this.g.length?this.g[b]:this.h};function w(b){if(b.h!=0)return!1;for(var v=0;v<b.g.length;v++)if(b.g[v]!=0)return!1;return!0}function k(b){return b.h==-1}t.l=function(b){return b=j(this,b),k(b)?-1:w(b)?0:1};function x(b){for(var v=b.g.length,E=[],I=0;I<v;I++)E[I]=~b.g[I];return new s(E,~b.h).add(g)}t.abs=function(){return k(this)?x(this):this},t.add=function(b){for(var v=Math.max(this.g.length,b.g.length),E=[],I=0,D=0;D<=v;D++){var S=I+(this.i(D)&65535)+(b.i(D)&65535),_=(S>>>16)+(this.i(D)>>>16)+(b.i(D)>>>16);I=_>>>16,S&=65535,_&=65535,E[D]=_<<16|S}return new s(E,E[E.length-1]&-2147483648?-1:0)};function j(b,v){return b.add(x(v))}t.j=function(b){if(w(this)||w(b))return p;if(k(this))return k(b)?x(this).j(x(b)):x(x(this).j(b));if(k(b))return x(this.j(x(b)));if(0>this.l(y)&&0>b.l(y))return l(this.m()*b.m());for(var v=this.g.length+b.g.length,E=[],I=0;I<2*v;I++)E[I]=0;for(I=0;I<this.g.length;I++)for(var D=0;D<b.g.length;D++){var S=this.i(I)>>>16,_=this.i(I)&65535,Tr=b.i(D)>>>16,tc=b.i(D)&65535;E[2*I+2*D]+=_*tc,z(E,2*I+2*D),E[2*I+2*D+1]+=S*tc,z(E,2*I+2*D+1),E[2*I+2*D+1]+=_*Tr,z(E,2*I+2*D+1),E[2*I+2*D+2]+=S*Tr,z(E,2*I+2*D+2)}for(I=0;I<v;I++)E[I]=E[2*I+1]<<16|E[2*I];for(I=v;I<2*v;I++)E[I]=0;return new s(E,0)};function z(b,v){for(;(b[v]&65535)!=b[v];)b[v+1]+=b[v]>>>16,b[v]&=65535,v++}function W(b,v){this.g=b,this.h=v}function oe(b,v){if(w(v))throw Error("division by zero");if(w(b))return new W(p,p);if(k(b))return v=oe(x(b),v),new W(x(v.g),x(v.h));if(k(v))return v=oe(b,x(v)),new W(x(v.g),v.h);if(30<b.g.length){if(k(b)||k(v))throw Error("slowDivide_ only works with positive integers.");for(var E=g,I=v;0>=I.l(b);)E=Ze(E),I=Ze(I);var D=Ie(E,1),S=Ie(I,1);for(I=Ie(I,2),E=Ie(E,2);!w(I);){var _=S.add(I);0>=_.l(b)&&(D=D.add(E),S=_),I=Ie(I,1),E=Ie(E,1)}return v=j(b,D.j(v)),new W(D,v)}for(D=p;0<=b.l(v);){for(E=Math.max(1,Math.floor(b.m()/v.m())),I=Math.ceil(Math.log(E)/Math.LN2),I=48>=I?1:Math.pow(2,I-48),S=l(E),_=S.j(v);k(_)||0<_.l(b);)E-=I,S=l(E),_=S.j(v);w(S)&&(S=g),D=D.add(S),b=j(b,_)}return new W(D,b)}t.A=function(b){return oe(this,b).h},t.and=function(b){for(var v=Math.max(this.g.length,b.g.length),E=[],I=0;I<v;I++)E[I]=this.i(I)&b.i(I);return new s(E,this.h&b.h)},t.or=function(b){for(var v=Math.max(this.g.length,b.g.length),E=[],I=0;I<v;I++)E[I]=this.i(I)|b.i(I);return new s(E,this.h|b.h)},t.xor=function(b){for(var v=Math.max(this.g.length,b.g.length),E=[],I=0;I<v;I++)E[I]=this.i(I)^b.i(I);return new s(E,this.h^b.h)};function Ze(b){for(var v=b.g.length+1,E=[],I=0;I<v;I++)E[I]=b.i(I)<<1|b.i(I-1)>>>31;return new s(E,b.h)}function Ie(b,v){var E=v>>5;v%=32;for(var I=b.g.length-E,D=[],S=0;S<I;S++)D[S]=0<v?b.i(S+E)>>>v|b.i(S+E+1)<<32-v:b.i(S+E);return new s(D,b.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,_E=kR.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=h,Qr=kR.Integer=s}).apply(typeof MR<"u"?MR:typeof self<"u"?self:typeof window<"u"?window:{});var Tf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Yr={};var EE,wH,ca,IE,Nu,Cf,wE,bE,DE;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,d,f){return c==Array.prototype||c==Object.prototype||(c[d]=f.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Tf=="object"&&Tf];for(var d=0;d<c.length;++d){var f=c[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function i(c,d){if(d)e:{var f=r;c=c.split(".");for(var m=0;m<c.length-1;m++){var T=c[m];if(!(T in f))break e;f=f[T]}c=c[c.length-1],m=f[c],d=d(m),d!=m&&d!=null&&e(f,c,{configurable:!0,writable:!0,value:d})}}function o(c,d){c instanceof String&&(c+="");var f=0,m=!1,T={next:function(){if(!m&&f<c.length){var R=f++;return{value:d(R,c[R]),done:!1}}return m=!0,{done:!0,value:void 0}}};return T[Symbol.iterator]=function(){return T},T}i("Array.prototype.values",function(c){return c||function(){return o(this,function(d,f){return f})}});var s=s||{},a=this||self;function u(c){var d=typeof c;return d=d!="object"?d:c?Array.isArray(c)?"array":d:"null",d=="array"||d=="object"&&typeof c.length=="number"}function l(c){var d=typeof c;return d=="object"&&c!=null||d=="function"}function h(c,d,f){return c.call.apply(c.bind,arguments)}function p(c,d,f){if(!c)throw Error();if(2<arguments.length){var m=Array.prototype.slice.call(arguments,2);return function(){var T=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(T,m),c.apply(d,T)}}return function(){return c.apply(d,arguments)}}function g(c,d,f){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,g.apply(null,arguments)}function y(c,d){var f=Array.prototype.slice.call(arguments,1);return function(){var m=f.slice();return m.push.apply(m,arguments),c.apply(this,m)}}function w(c,d){function f(){}f.prototype=d.prototype,c.aa=d.prototype,c.prototype=new f,c.prototype.constructor=c,c.Qb=function(m,T,R){for(var U=Array(arguments.length-2),Se=2;Se<arguments.length;Se++)U[Se-2]=arguments[Se];return d.prototype[T].apply(m,U)}}function k(c){let d=c.length;if(0<d){let f=Array(d);for(let m=0;m<d;m++)f[m]=c[m];return f}return[]}function x(c,d){for(let f=1;f<arguments.length;f++){let m=arguments[f];if(u(m)){let T=c.length||0,R=m.length||0;c.length=T+R;for(let U=0;U<R;U++)c[T+U]=m[U]}else c.push(m)}}class j{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function z(c){return/^[\s\xa0]*$/.test(c)}function W(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function oe(c){return oe[" "](c),c}oe[" "]=function(){};var Ze=W().indexOf("Gecko")!=-1&&!(W().toLowerCase().indexOf("webkit")!=-1&&W().indexOf("Edge")==-1)&&!(W().indexOf("Trident")!=-1||W().indexOf("MSIE")!=-1)&&W().indexOf("Edge")==-1;function Ie(c,d,f){for(let m in c)d.call(f,c[m],m,c)}function b(c,d){for(let f in c)d.call(void 0,c[f],f,c)}function v(c){let d={};for(let f in c)d[f]=c[f];return d}let E="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function I(c,d){let f,m;for(let T=1;T<arguments.length;T++){m=arguments[T];for(f in m)c[f]=m[f];for(let R=0;R<E.length;R++)f=E[R],Object.prototype.hasOwnProperty.call(m,f)&&(c[f]=m[f])}}function D(c){var d=1;c=c.split(":");let f=[];for(;0<d&&c.length;)f.push(c.shift()),d--;return c.length&&f.push(c.join(":")),f}function S(c){a.setTimeout(()=>{throw c},0)}function _(){var c=yg;let d=null;return c.g&&(d=c.g,c.g=c.g.next,c.g||(c.h=null),d.next=null),d}class Tr{constructor(){this.h=this.g=null}add(d,f){let m=tc.get();m.set(d,f),this.h?this.h.next=m:this.g=m,this.h=m}}var tc=new j(()=>new dP,c=>c.reset());class dP{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let nc,rc=!1,yg=new Tr,V0=()=>{let c=a.Promise.resolve(void 0);nc=()=>{c.then(hP)}};var hP=()=>{for(var c;c=_();){try{c.h.call(c.g)}catch(f){S(f)}var d=tc;d.j(c),100>d.h&&(d.h++,c.next=d.g,d.g=c)}rc=!1};function oi(){this.s=this.s,this.C=this.C}oi.prototype.s=!1,oi.prototype.ma=function(){this.s||(this.s=!0,this.N())},oi.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function kt(c,d){this.type=c,this.g=this.target=d,this.defaultPrevented=!1}kt.prototype.h=function(){this.defaultPrevented=!0};var fP=(function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,d=Object.defineProperty({},"passive",{get:function(){c=!0}});try{let f=()=>{};a.addEventListener("test",f,d),a.removeEventListener("test",f,d)}catch{}return c})();function ic(c,d){if(kt.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var f=this.type=c.type,m=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=d,d=c.relatedTarget){if(Ze){e:{try{oe(d.nodeName);var T=!0;break e}catch{}T=!1}T||(d=null)}}else f=="mouseover"?d=c.fromElement:f=="mouseout"&&(d=c.toElement);this.relatedTarget=d,m?(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:pP[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&ic.aa.h.call(this)}}w(ic,kt);var pP={2:"touch",3:"pen",4:"mouse"};ic.prototype.h=function(){ic.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var oc="closure_listenable_"+(1e6*Math.random()|0),gP=0;function mP(c,d,f,m,T){this.listener=c,this.proxy=null,this.src=d,this.type=f,this.capture=!!m,this.ha=T,this.key=++gP,this.da=this.fa=!1}function kl(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Pl(c){this.src=c,this.g={},this.h=0}Pl.prototype.add=function(c,d,f,m,T){var R=c.toString();c=this.g[R],c||(c=this.g[R]=[],this.h++);var U=_g(c,d,m,T);return-1<U?(d=c[U],f||(d.fa=!1)):(d=new mP(d,this.src,R,!!m,T),d.fa=f,c.push(d)),d};function vg(c,d){var f=d.type;if(f in c.g){var m=c.g[f],T=Array.prototype.indexOf.call(m,d,void 0),R;(R=0<=T)&&Array.prototype.splice.call(m,T,1),R&&(kl(d),c.g[f].length==0&&(delete c.g[f],c.h--))}}function _g(c,d,f,m){for(var T=0;T<c.length;++T){var R=c[T];if(!R.da&&R.listener==d&&R.capture==!!f&&R.ha==m)return T}return-1}var Eg="closure_lm_"+(1e6*Math.random()|0),Ig={};function j0(c,d,f,m,T){if(m&&m.once)return B0(c,d,f,m,T);if(Array.isArray(d)){for(var R=0;R<d.length;R++)j0(c,d[R],f,m,T);return null}return f=Tg(f),c&&c[oc]?c.K(d,f,l(m)?!!m.capture:!!m,T):U0(c,d,f,!1,m,T)}function U0(c,d,f,m,T,R){if(!d)throw Error("Invalid event type");var U=l(T)?!!T.capture:!!T,Se=bg(c);if(Se||(c[Eg]=Se=new Pl(c)),f=Se.add(d,f,m,U,R),f.proxy)return f;if(m=yP(),f.proxy=m,m.src=c,m.listener=f,c.addEventListener)fP||(T=U),T===void 0&&(T=!1),c.addEventListener(d.toString(),m,T);else if(c.attachEvent)c.attachEvent(H0(d.toString()),m);else if(c.addListener&&c.removeListener)c.addListener(m);else throw Error("addEventListener and attachEvent are unavailable.");return f}function yP(){function c(f){return d.call(c.src,c.listener,f)}let d=vP;return c}function B0(c,d,f,m,T){if(Array.isArray(d)){for(var R=0;R<d.length;R++)B0(c,d[R],f,m,T);return null}return f=Tg(f),c&&c[oc]?c.L(d,f,l(m)?!!m.capture:!!m,T):U0(c,d,f,!0,m,T)}function $0(c,d,f,m,T){if(Array.isArray(d))for(var R=0;R<d.length;R++)$0(c,d[R],f,m,T);else m=l(m)?!!m.capture:!!m,f=Tg(f),c&&c[oc]?(c=c.i,d=String(d).toString(),d in c.g&&(R=c.g[d],f=_g(R,f,m,T),-1<f&&(kl(R[f]),Array.prototype.splice.call(R,f,1),R.length==0&&(delete c.g[d],c.h--)))):c&&(c=bg(c))&&(d=c.g[d.toString()],c=-1,d&&(c=_g(d,f,m,T)),(f=-1<c?d[c]:null)&&wg(f))}function wg(c){if(typeof c!="number"&&c&&!c.da){var d=c.src;if(d&&d[oc])vg(d.i,c);else{var f=c.type,m=c.proxy;d.removeEventListener?d.removeEventListener(f,m,c.capture):d.detachEvent?d.detachEvent(H0(f),m):d.addListener&&d.removeListener&&d.removeListener(m),(f=bg(d))?(vg(f,c),f.h==0&&(f.src=null,d[Eg]=null)):kl(c)}}}function H0(c){return c in Ig?Ig[c]:Ig[c]="on"+c}function vP(c,d){if(c.da)c=!0;else{d=new ic(d,this);var f=c.listener,m=c.ha||c.src;c.fa&&wg(c),c=f.call(m,d)}return c}function bg(c){return c=c[Eg],c instanceof Pl?c:null}var Dg="__closure_events_fn_"+(1e9*Math.random()>>>0);function Tg(c){return typeof c=="function"?c:(c[Dg]||(c[Dg]=function(d){return c.handleEvent(d)}),c[Dg])}function Pt(){oi.call(this),this.i=new Pl(this),this.M=this,this.F=null}w(Pt,oi),Pt.prototype[oc]=!0,Pt.prototype.removeEventListener=function(c,d,f,m){$0(this,c,d,f,m)};function $t(c,d){var f,m=c.F;if(m)for(f=[];m;m=m.F)f.push(m);if(c=c.M,m=d.type||d,typeof d=="string")d=new kt(d,c);else if(d instanceof kt)d.target=d.target||c;else{var T=d;d=new kt(m,c),I(d,T)}if(T=!0,f)for(var R=f.length-1;0<=R;R--){var U=d.g=f[R];T=Ol(U,m,!0,d)&&T}if(U=d.g=c,T=Ol(U,m,!0,d)&&T,T=Ol(U,m,!1,d)&&T,f)for(R=0;R<f.length;R++)U=d.g=f[R],T=Ol(U,m,!1,d)&&T}Pt.prototype.N=function(){if(Pt.aa.N.call(this),this.i){var c=this.i,d;for(d in c.g){for(var f=c.g[d],m=0;m<f.length;m++)kl(f[m]);delete c.g[d],c.h--}}this.F=null},Pt.prototype.K=function(c,d,f,m){return this.i.add(String(c),d,!1,f,m)},Pt.prototype.L=function(c,d,f,m){return this.i.add(String(c),d,!0,f,m)};function Ol(c,d,f,m){if(d=c.i.g[String(d)],!d)return!0;d=d.concat();for(var T=!0,R=0;R<d.length;++R){var U=d[R];if(U&&!U.da&&U.capture==f){var Se=U.listener,Tt=U.ha||U.src;U.fa&&vg(c.i,U),T=Se.call(Tt,m)!==!1&&T}}return T&&!m.defaultPrevented}function q0(c,d,f){if(typeof c=="function")f&&(c=g(c,f));else if(c&&typeof c.handleEvent=="function")c=g(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(c,d||0)}function z0(c){c.g=q0(()=>{c.g=null,c.i&&(c.i=!1,z0(c))},c.l);let d=c.h;c.h=null,c.m.apply(null,d)}class _P extends oi{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:z0(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function sc(c){oi.call(this),this.h=c,this.g={}}w(sc,oi);var G0=[];function W0(c){Ie(c.g,function(d,f){this.g.hasOwnProperty(f)&&wg(d)},c),c.g={}}sc.prototype.N=function(){sc.aa.N.call(this),W0(this)},sc.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Cg=a.JSON.stringify,EP=a.JSON.parse,IP=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function Sg(){}Sg.prototype.h=null;function K0(c){return c.h||(c.h=c.i())}function Q0(){}var ac={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ag(){kt.call(this,"d")}w(Ag,kt);function Rg(){kt.call(this,"c")}w(Rg,kt);var Ji={},Y0=null;function Fl(){return Y0=Y0||new Pt}Ji.La="serverreachability";function Z0(c){kt.call(this,Ji.La,c)}w(Z0,kt);function cc(c){let d=Fl();$t(d,new Z0(d))}Ji.STAT_EVENT="statevent";function J0(c,d){kt.call(this,Ji.STAT_EVENT,c),this.stat=d}w(J0,kt);function Ht(c){let d=Fl();$t(d,new J0(d,c))}Ji.Ma="timingevent";function X0(c,d){kt.call(this,Ji.Ma,c),this.size=d}w(X0,kt);function uc(c,d){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},d)}function lc(){this.g=!0}lc.prototype.xa=function(){this.g=!1};function wP(c,d,f,m,T,R){c.info(function(){if(c.g)if(R)for(var U="",Se=R.split("&"),Tt=0;Tt<Se.length;Tt++){var we=Se[Tt].split("=");if(1<we.length){var Ot=we[0];we=we[1];var Ft=Ot.split("_");U=2<=Ft.length&&Ft[1]=="type"?U+(Ot+"="+we+"&"):U+(Ot+"=redacted&")}}else U=null;else U=R;return"XMLHTTP REQ ("+m+") [attempt "+T+"]: "+d+`
`+f+`
`+U})}function bP(c,d,f,m,T,R,U){c.info(function(){return"XMLHTTP RESP ("+m+") [ attempt "+T+"]: "+d+`
`+f+`
`+R+" "+U})}function ls(c,d,f,m){c.info(function(){return"XMLHTTP TEXT ("+d+"): "+TP(c,f)+(m?" "+m:"")})}function DP(c,d){c.info(function(){return"TIMEOUT: "+d})}lc.prototype.info=function(){};function TP(c,d){if(!c.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(c=0;c<f.length;c++)if(Array.isArray(f[c])){var m=f[c];if(!(2>m.length)){var T=m[1];if(Array.isArray(T)&&!(1>T.length)){var R=T[0];if(R!="noop"&&R!="stop"&&R!="close")for(var U=1;U<T.length;U++)T[U]=""}}}}return Cg(f)}catch{return d}}var Ll={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},eb={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},xg;function Vl(){}w(Vl,Sg),Vl.prototype.g=function(){return new XMLHttpRequest},Vl.prototype.i=function(){return{}},xg=new Vl;function si(c,d,f,m){this.j=c,this.i=d,this.l=f,this.R=m||1,this.U=new sc(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new tb}function tb(){this.i=null,this.g="",this.h=!1}var nb={},Ng={};function Mg(c,d,f){c.L=1,c.v=$l(Cr(d)),c.m=f,c.P=!0,rb(c,null)}function rb(c,d){c.F=Date.now(),jl(c),c.A=Cr(c.v);var f=c.A,m=c.R;Array.isArray(m)||(m=[String(m)]),yb(f.i,"t",m),c.C=0,f=c.j.J,c.h=new tb,c.g=Ob(c.j,f?d:null,!c.m),0<c.O&&(c.M=new _P(g(c.Y,c,c.g),c.O)),d=c.U,f=c.g,m=c.ca;var T="readystatechange";Array.isArray(T)||(T&&(G0[0]=T.toString()),T=G0);for(var R=0;R<T.length;R++){var U=j0(f,T[R],m||d.handleEvent,!1,d.h||d);if(!U)break;d.g[U.key]=U}d=c.H?v(c.H):{},c.m?(c.u||(c.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,d)):(c.u="GET",c.g.ea(c.A,c.u,null,d)),cc(),wP(c.i,c.u,c.A,c.l,c.R,c.m)}si.prototype.ca=function(c){c=c.target;let d=this.M;d&&Sr(c)==3?d.j():this.Y(c)},si.prototype.Y=function(c){try{if(c==this.g)e:{let Ft=Sr(this.g);var d=this.g.Ba();let fs=this.g.Z();if(!(3>Ft)&&(Ft!=3||this.g&&(this.h.h||this.g.oa()||Db(this.g)))){this.J||Ft!=4||d==7||(d==8||0>=fs?cc(3):cc(2)),kg(this);var f=this.g.Z();this.X=f;t:if(ib(this)){var m=Db(this.g);c="";var T=m.length,R=Sr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Xi(this),dc(this);var U="";break t}this.h.i=new a.TextDecoder}for(d=0;d<T;d++)this.h.h=!0,c+=this.h.i.decode(m[d],{stream:!(R&&d==T-1)});m.length=0,this.h.g+=c,this.C=0,U=this.h.g}else U=this.g.oa();if(this.o=f==200,bP(this.i,this.u,this.A,this.l,this.R,Ft,f),this.o){if(this.T&&!this.K){t:{if(this.g){var Se,Tt=this.g;if((Se=Tt.g?Tt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!z(Se)){var we=Se;break t}}we=null}if(f=we)ls(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Pg(this,f);else{this.o=!1,this.s=3,Ht(12),Xi(this),dc(this);break e}}if(this.P){f=!0;let Tn;for(;!this.J&&this.C<U.length;)if(Tn=CP(this,U),Tn==Ng){Ft==4&&(this.s=4,Ht(14),f=!1),ls(this.i,this.l,null,"[Incomplete Response]");break}else if(Tn==nb){this.s=4,Ht(15),ls(this.i,this.l,U,"[Invalid Chunk]"),f=!1;break}else ls(this.i,this.l,Tn,null),Pg(this,Tn);if(ib(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ft!=4||U.length!=0||this.h.h||(this.s=1,Ht(16),f=!1),this.o=this.o&&f,!f)ls(this.i,this.l,U,"[Invalid Chunked Response]"),Xi(this),dc(this);else if(0<U.length&&!this.W){this.W=!0;var Ot=this.j;Ot.g==this&&Ot.ba&&!Ot.M&&(Ot.j.info("Great, no buffering proxy detected. Bytes received: "+U.length),Ug(Ot),Ot.M=!0,Ht(11))}}else ls(this.i,this.l,U,null),Pg(this,U);Ft==4&&Xi(this),this.o&&!this.J&&(Ft==4?Nb(this.j,this):(this.o=!1,jl(this)))}else HP(this.g),f==400&&0<U.indexOf("Unknown SID")?(this.s=3,Ht(12)):(this.s=0,Ht(13)),Xi(this),dc(this)}}}catch{}finally{}};function ib(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function CP(c,d){var f=c.C,m=d.indexOf(`
`,f);return m==-1?Ng:(f=Number(d.substring(f,m)),isNaN(f)?nb:(m+=1,m+f>d.length?Ng:(d=d.slice(m,m+f),c.C=m+f,d)))}si.prototype.cancel=function(){this.J=!0,Xi(this)};function jl(c){c.S=Date.now()+c.I,ob(c,c.I)}function ob(c,d){if(c.B!=null)throw Error("WatchDog timer not null");c.B=uc(g(c.ba,c),d)}function kg(c){c.B&&(a.clearTimeout(c.B),c.B=null)}si.prototype.ba=function(){this.B=null;let c=Date.now();0<=c-this.S?(DP(this.i,this.A),this.L!=2&&(cc(),Ht(17)),Xi(this),this.s=2,dc(this)):ob(this,this.S-c)};function dc(c){c.j.G==0||c.J||Nb(c.j,c)}function Xi(c){kg(c);var d=c.M;d&&typeof d.ma=="function"&&d.ma(),c.M=null,W0(c.U),c.g&&(d=c.g,c.g=null,d.abort(),d.ma())}function Pg(c,d){try{var f=c.j;if(f.G!=0&&(f.g==c||Og(f.h,c))){if(!c.K&&Og(f.h,c)&&f.G==3){try{var m=f.Da.g.parse(d)}catch{m=null}if(Array.isArray(m)&&m.length==3){var T=m;if(T[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<c.F)Wl(f),zl(f);else break e;jg(f),Ht(18)}}else f.za=T[1],0<f.za-f.T&&37500>T[2]&&f.F&&f.v==0&&!f.C&&(f.C=uc(g(f.Za,f),6e3));if(1>=cb(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else to(f,11)}else if((c.K||f.g==c)&&Wl(f),!z(d))for(T=f.Da.g.parse(d),d=0;d<T.length;d++){let we=T[d];if(f.T=we[0],we=we[1],f.G==2)if(we[0]=="c"){f.K=we[1],f.ia=we[2];let Ot=we[3];Ot!=null&&(f.la=Ot,f.j.info("VER="+f.la));let Ft=we[4];Ft!=null&&(f.Aa=Ft,f.j.info("SVER="+f.Aa));let fs=we[5];fs!=null&&typeof fs=="number"&&0<fs&&(m=1.5*fs,f.L=m,f.j.info("backChannelRequestTimeoutMs_="+m)),m=f;let Tn=c.g;if(Tn){let Ql=Tn.g?Tn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ql){var R=m.h;R.g||Ql.indexOf("spdy")==-1&&Ql.indexOf("quic")==-1&&Ql.indexOf("h2")==-1||(R.j=R.l,R.g=new Set,R.h&&(Fg(R,R.h),R.h=null))}if(m.D){let Bg=Tn.g?Tn.g.getResponseHeader("X-HTTP-Session-Id"):null;Bg&&(m.ya=Bg,ke(m.I,m.D,Bg))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-c.F,f.j.info("Handshake RTT: "+f.R+"ms")),m=f;var U=c;if(m.qa=Pb(m,m.J?m.ia:null,m.W),U.K){ub(m.h,U);var Se=U,Tt=m.L;Tt&&(Se.I=Tt),Se.B&&(kg(Se),jl(Se)),m.g=U}else Rb(m);0<f.i.length&&Gl(f)}else we[0]!="stop"&&we[0]!="close"||to(f,7);else f.G==3&&(we[0]=="stop"||we[0]=="close"?we[0]=="stop"?to(f,7):Vg(f):we[0]!="noop"&&f.l&&f.l.ta(we),f.v=0)}}cc(4)}catch{}}var SP=class{constructor(c,d){this.g=c,this.map=d}};function sb(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ab(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function cb(c){return c.h?1:c.g?c.g.size:0}function Og(c,d){return c.h?c.h==d:c.g?c.g.has(d):!1}function Fg(c,d){c.g?c.g.add(d):c.h=d}function ub(c,d){c.h&&c.h==d?c.h=null:c.g&&c.g.has(d)&&c.g.delete(d)}sb.prototype.cancel=function(){if(this.i=lb(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let c of this.g.values())c.cancel();this.g.clear()}};function lb(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let d=c.i;for(let f of c.g.values())d=d.concat(f.D);return d}return k(c.i)}function AP(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(u(c)){for(var d=[],f=c.length,m=0;m<f;m++)d.push(c[m]);return d}d=[],f=0;for(m in c)d[f++]=c[m];return d}function RP(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(u(c)||typeof c=="string"){var d=[];c=c.length;for(var f=0;f<c;f++)d.push(f);return d}d=[],f=0;for(let m in c)d[f++]=m;return d}}}function db(c,d){if(c.forEach&&typeof c.forEach=="function")c.forEach(d,void 0);else if(u(c)||typeof c=="string")Array.prototype.forEach.call(c,d,void 0);else for(var f=RP(c),m=AP(c),T=m.length,R=0;R<T;R++)d.call(void 0,m[R],f&&f[R],c)}var hb=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function xP(c,d){if(c){c=c.split("&");for(var f=0;f<c.length;f++){var m=c[f].indexOf("="),T=null;if(0<=m){var R=c[f].substring(0,m);T=c[f].substring(m+1)}else R=c[f];d(R,T?decodeURIComponent(T.replace(/\+/g," ")):"")}}}function eo(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof eo){this.h=c.h,Ul(this,c.j),this.o=c.o,this.g=c.g,Bl(this,c.s),this.l=c.l;var d=c.i,f=new pc;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),fb(this,f),this.m=c.m}else c&&(d=String(c).match(hb))?(this.h=!1,Ul(this,d[1]||"",!0),this.o=hc(d[2]||""),this.g=hc(d[3]||"",!0),Bl(this,d[4]),this.l=hc(d[5]||"",!0),fb(this,d[6]||"",!0),this.m=hc(d[7]||"")):(this.h=!1,this.i=new pc(null,this.h))}eo.prototype.toString=function(){var c=[],d=this.j;d&&c.push(fc(d,pb,!0),":");var f=this.g;return(f||d=="file")&&(c.push("//"),(d=this.o)&&c.push(fc(d,pb,!0),"@"),c.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&c.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&c.push("/"),c.push(fc(f,f.charAt(0)=="/"?kP:MP,!0))),(f=this.i.toString())&&c.push("?",f),(f=this.m)&&c.push("#",fc(f,OP)),c.join("")};function Cr(c){return new eo(c)}function Ul(c,d,f){c.j=f?hc(d,!0):d,c.j&&(c.j=c.j.replace(/:$/,""))}function Bl(c,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);c.s=d}else c.s=null}function fb(c,d,f){d instanceof pc?(c.i=d,FP(c.i,c.h)):(f||(d=fc(d,PP)),c.i=new pc(d,c.h))}function ke(c,d,f){c.i.set(d,f)}function $l(c){return ke(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function hc(c,d){return c?d?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function fc(c,d,f){return typeof c=="string"?(c=encodeURI(c).replace(d,NP),f&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function NP(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var pb=/[#\/\?@]/g,MP=/[#\?:]/g,kP=/[#\?]/g,PP=/[#\?@]/g,OP=/#/g;function pc(c,d){this.h=this.g=null,this.i=c||null,this.j=!!d}function ai(c){c.g||(c.g=new Map,c.h=0,c.i&&xP(c.i,function(d,f){c.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}t=pc.prototype,t.add=function(c,d){ai(this),this.i=null,c=ds(this,c);var f=this.g.get(c);return f||this.g.set(c,f=[]),f.push(d),this.h+=1,this};function gb(c,d){ai(c),d=ds(c,d),c.g.has(d)&&(c.i=null,c.h-=c.g.get(d).length,c.g.delete(d))}function mb(c,d){return ai(c),d=ds(c,d),c.g.has(d)}t.forEach=function(c,d){ai(this),this.g.forEach(function(f,m){f.forEach(function(T){c.call(d,T,m,this)},this)},this)},t.na=function(){ai(this);let c=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let m=0;m<d.length;m++){let T=c[m];for(let R=0;R<T.length;R++)f.push(d[m])}return f},t.V=function(c){ai(this);let d=[];if(typeof c=="string")mb(this,c)&&(d=d.concat(this.g.get(ds(this,c))));else{c=Array.from(this.g.values());for(let f=0;f<c.length;f++)d=d.concat(c[f])}return d},t.set=function(c,d){return ai(this),this.i=null,c=ds(this,c),mb(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[d]),this.h+=1,this},t.get=function(c,d){return c?(c=this.V(c),0<c.length?String(c[0]):d):d};function yb(c,d,f){gb(c,d),0<f.length&&(c.i=null,c.g.set(ds(c,d),k(f)),c.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";let c=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var m=d[f];let R=encodeURIComponent(String(m)),U=this.V(m);for(m=0;m<U.length;m++){var T=R;U[m]!==""&&(T+="="+encodeURIComponent(String(U[m]))),c.push(T)}}return this.i=c.join("&")};function ds(c,d){return d=String(d),c.j&&(d=d.toLowerCase()),d}function FP(c,d){d&&!c.j&&(ai(c),c.i=null,c.g.forEach(function(f,m){var T=m.toLowerCase();m!=T&&(gb(this,m),yb(this,T,f))},c)),c.j=d}function LP(c,d){let f=new lc;if(a.Image){let m=new Image;m.onload=y(ci,f,"TestLoadImage: loaded",!0,d,m),m.onerror=y(ci,f,"TestLoadImage: error",!1,d,m),m.onabort=y(ci,f,"TestLoadImage: abort",!1,d,m),m.ontimeout=y(ci,f,"TestLoadImage: timeout",!1,d,m),a.setTimeout(function(){m.ontimeout&&m.ontimeout()},1e4),m.src=c}else d(!1)}function VP(c,d){let f=new lc,m=new AbortController,T=setTimeout(()=>{m.abort(),ci(f,"TestPingServer: timeout",!1,d)},1e4);fetch(c,{signal:m.signal}).then(R=>{clearTimeout(T),R.ok?ci(f,"TestPingServer: ok",!0,d):ci(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(T),ci(f,"TestPingServer: error",!1,d)})}function ci(c,d,f,m,T){try{T&&(T.onload=null,T.onerror=null,T.onabort=null,T.ontimeout=null),m(f)}catch{}}function jP(){this.g=new IP}function UP(c,d,f){let m=f||"";try{db(c,function(T,R){let U=T;l(T)&&(U=Cg(T)),d.push(m+R+"="+encodeURIComponent(U))})}catch(T){throw d.push(m+"type="+encodeURIComponent("_badmap")),T}}function gc(c){this.l=c.Ub||null,this.j=c.eb||!1}w(gc,Sg),gc.prototype.g=function(){return new Hl(this.l,this.j)},gc.prototype.i=(function(c){return function(){return c}})({});function Hl(c,d){Pt.call(this),this.D=c,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}w(Hl,Pt),t=Hl.prototype,t.open=function(c,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=d,this.readyState=1,yc(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(d.body=c),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,mc(this)),this.readyState=0},t.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,yc(this)),this.g&&(this.readyState=3,yc(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;vb(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function vb(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}t.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var d=c.value?c.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!c.done}))&&(this.response=this.responseText+=d)}c.done?mc(this):yc(this),this.readyState==3&&vb(this)}},t.Ra=function(c){this.g&&(this.response=this.responseText=c,mc(this))},t.Qa=function(c){this.g&&(this.response=c,mc(this))},t.ga=function(){this.g&&mc(this)};function mc(c){c.readyState=4,c.l=null,c.j=null,c.v=null,yc(c)}t.setRequestHeader=function(c,d){this.u.append(c,d)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";let c=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,c.push(f[0]+": "+f[1]),f=d.next();return c.join(`\r
`)};function yc(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Hl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function _b(c){let d="";return Ie(c,function(f,m){d+=m,d+=":",d+=f,d+=`\r
`}),d}function Lg(c,d,f){e:{for(m in f){var m=!1;break e}m=!0}m||(f=_b(f),typeof c=="string"?f!=null&&encodeURIComponent(String(f)):ke(c,d,f))}function $e(c){Pt.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}w($e,Pt);var BP=/^https?$/i,$P=["POST","PUT"];t=$e.prototype,t.Ha=function(c){this.J=c},t.ea=function(c,d,f,m){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);d=d?d.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():xg.g(),this.v=this.o?K0(this.o):K0(xg),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(d,String(c),!0),this.B=!1}catch(R){Eb(this,R);return}if(c=f||"",f=new Map(this.headers),m)if(Object.getPrototypeOf(m)===Object.prototype)for(var T in m)f.set(T,m[T]);else if(typeof m.keys=="function"&&typeof m.get=="function")for(let R of m.keys())f.set(R,m.get(R));else throw Error("Unknown input type for opt_headers: "+String(m));m=Array.from(f.keys()).find(R=>R.toLowerCase()=="content-type"),T=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call($P,d,void 0))||m||T||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[R,U]of f)this.g.setRequestHeader(R,U);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{bb(this),this.u=!0,this.g.send(c),this.u=!1}catch(R){Eb(this,R)}};function Eb(c,d){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=d,c.m=5,Ib(c),ql(c)}function Ib(c){c.A||(c.A=!0,$t(c,"complete"),$t(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,$t(this,"complete"),$t(this,"abort"),ql(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ql(this,!0)),$e.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?wb(this):this.bb())},t.bb=function(){wb(this)};function wb(c){if(c.h&&typeof s<"u"&&(!c.v[1]||Sr(c)!=4||c.Z()!=2)){if(c.u&&Sr(c)==4)q0(c.Ea,0,c);else if($t(c,"readystatechange"),Sr(c)==4){c.h=!1;try{let U=c.Z();e:switch(U){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var m;if(m=U===0){var T=String(c.D).match(hb)[1]||null;!T&&a.self&&a.self.location&&(T=a.self.location.protocol.slice(0,-1)),m=!BP.test(T?T.toLowerCase():"")}f=m}if(f)$t(c,"complete"),$t(c,"success");else{c.m=6;try{var R=2<Sr(c)?c.g.statusText:""}catch{R=""}c.l=R+" ["+c.Z()+"]",Ib(c)}}finally{ql(c)}}}}function ql(c,d){if(c.g){bb(c);let f=c.g,m=c.v[0]?()=>{}:null;c.g=null,c.v=null,d||$t(c,"ready");try{f.onreadystatechange=m}catch{}}}function bb(c){c.I&&(a.clearTimeout(c.I),c.I=null)}t.isActive=function(){return!!this.g};function Sr(c){return c.g?c.g.readyState:0}t.Z=function(){try{return 2<Sr(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(c){if(this.g){var d=this.g.responseText;return c&&d.indexOf(c)==0&&(d=d.substring(c.length)),EP(d)}};function Db(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function HP(c){let d={};c=(c.g&&2<=Sr(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let m=0;m<c.length;m++){if(z(c[m]))continue;var f=D(c[m]);let T=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let R=d[T]||[];d[T]=R,R.push(f)}b(d,function(m){return m.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function vc(c,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[c]||d}function Tb(c){this.Aa=0,this.i=[],this.j=new lc,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=vc("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=vc("baseRetryDelayMs",5e3,c),this.cb=vc("retryDelaySeedMs",1e4,c),this.Wa=vc("forwardChannelMaxRetries",2,c),this.wa=vc("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new sb(c&&c.concurrentRequestLimit),this.Da=new jP,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Tb.prototype,t.la=8,t.G=1,t.connect=function(c,d,f,m){Ht(0),this.W=c,this.H=d||{},f&&m!==void 0&&(this.H.OSID=f,this.H.OAID=m),this.F=this.X,this.I=Pb(this,null,this.W),Gl(this)};function Vg(c){if(Cb(c),c.G==3){var d=c.U++,f=Cr(c.I);if(ke(f,"SID",c.K),ke(f,"RID",d),ke(f,"TYPE","terminate"),_c(c,f),d=new si(c,c.j,d),d.L=2,d.v=$l(Cr(f)),f=!1,a.navigator&&a.navigator.sendBeacon)try{f=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&a.Image&&(new Image().src=d.v,f=!0),f||(d.g=Ob(d.j,null),d.g.ea(d.v)),d.F=Date.now(),jl(d)}kb(c)}function zl(c){c.g&&(Ug(c),c.g.cancel(),c.g=null)}function Cb(c){zl(c),c.u&&(a.clearTimeout(c.u),c.u=null),Wl(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function Gl(c){if(!ab(c.h)&&!c.s){c.s=!0;var d=c.Ga;nc||V0(),rc||(nc(),rc=!0),yg.add(d,c),c.B=0}}function qP(c,d){return cb(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=d.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=uc(g(c.Ga,c,d),Mb(c,c.B)),c.B++,!0)}t.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;let T=new si(this,this.j,c),R=this.o;if(this.S&&(R?(R=v(R),I(R,this.S)):R=this.S),this.m!==null||this.O||(T.H=R,R=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var m=this.i[f];if("__data__"in m.map&&(m=m.map.__data__,typeof m=="string")){m=m.length;break t}m=void 0}if(m===void 0)break;if(d+=m,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=Ab(this,T,d),f=Cr(this.I),ke(f,"RID",c),ke(f,"CVER",22),this.D&&ke(f,"X-HTTP-Session-Id",this.D),_c(this,f),R&&(this.O?d="headers="+encodeURIComponent(String(_b(R)))+"&"+d:this.m&&Lg(f,this.m,R)),Fg(this.h,T),this.Ua&&ke(f,"TYPE","init"),this.P?(ke(f,"$req",d),ke(f,"SID","null"),T.T=!0,Mg(T,f,null)):Mg(T,f,d),this.G=2}}else this.G==3&&(c?Sb(this,c):this.i.length==0||ab(this.h)||Sb(this))};function Sb(c,d){var f;d?f=d.l:f=c.U++;let m=Cr(c.I);ke(m,"SID",c.K),ke(m,"RID",f),ke(m,"AID",c.T),_c(c,m),c.m&&c.o&&Lg(m,c.m,c.o),f=new si(c,c.j,f,c.B+1),c.m===null&&(f.H=c.o),d&&(c.i=d.D.concat(c.i)),d=Ab(c,f,1e3),f.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),Fg(c.h,f),Mg(f,m,d)}function _c(c,d){c.H&&Ie(c.H,function(f,m){ke(d,m,f)}),c.l&&db({},function(f,m){ke(d,m,f)})}function Ab(c,d,f){f=Math.min(c.i.length,f);var m=c.l?g(c.l.Na,c.l,c):null;e:{var T=c.i;let R=-1;for(;;){let U=["count="+f];R==-1?0<f?(R=T[0].g,U.push("ofs="+R)):R=0:U.push("ofs="+R);let Se=!0;for(let Tt=0;Tt<f;Tt++){let we=T[Tt].g,Ot=T[Tt].map;if(we-=R,0>we)R=Math.max(0,T[Tt].g-100),Se=!1;else try{UP(Ot,U,"req"+we+"_")}catch{m&&m(Ot)}}if(Se){m=U.join("&");break e}}}return c=c.i.splice(0,f),d.D=c,m}function Rb(c){if(!c.g&&!c.u){c.Y=1;var d=c.Fa;nc||V0(),rc||(nc(),rc=!0),yg.add(d,c),c.v=0}}function jg(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=uc(g(c.Fa,c),Mb(c,c.v)),c.v++,!0)}t.Fa=function(){if(this.u=null,xb(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=uc(g(this.ab,this),c)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ht(10),zl(this),xb(this))};function Ug(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function xb(c){c.g=new si(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var d=Cr(c.qa);ke(d,"RID","rpc"),ke(d,"SID",c.K),ke(d,"AID",c.T),ke(d,"CI",c.F?"0":"1"),!c.F&&c.ja&&ke(d,"TO",c.ja),ke(d,"TYPE","xmlhttp"),_c(c,d),c.m&&c.o&&Lg(d,c.m,c.o),c.L&&(c.g.I=c.L);var f=c.g;c=c.ia,f.L=1,f.v=$l(Cr(d)),f.m=null,f.P=!0,rb(f,c)}t.Za=function(){this.C!=null&&(this.C=null,zl(this),jg(this),Ht(19))};function Wl(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function Nb(c,d){var f=null;if(c.g==d){Wl(c),Ug(c),c.g=null;var m=2}else if(Og(c.h,d))f=d.D,ub(c.h,d),m=1;else return;if(c.G!=0){if(d.o)if(m==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var T=c.B;m=Fl(),$t(m,new X0(m,f)),Gl(c)}else Rb(c);else if(T=d.s,T==3||T==0&&0<d.X||!(m==1&&qP(c,d)||m==2&&jg(c)))switch(f&&0<f.length&&(d=c.h,d.i=d.i.concat(f)),T){case 1:to(c,5);break;case 4:to(c,10);break;case 3:to(c,6);break;default:to(c,2)}}}function Mb(c,d){let f=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(f*=2),f*d}function to(c,d){if(c.j.info("Error code "+d),d==2){var f=g(c.fb,c),m=c.Xa;let T=!m;m=new eo(m||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Ul(m,"https"),$l(m),T?LP(m.toString(),f):VP(m.toString(),f)}else Ht(2);c.G=0,c.l&&c.l.sa(d),kb(c),Cb(c)}t.fb=function(c){c?(this.j.info("Successfully pinged google.com"),Ht(2)):(this.j.info("Failed to ping google.com"),Ht(1))};function kb(c){if(c.G=0,c.ka=[],c.l){let d=lb(c.h);(d.length!=0||c.i.length!=0)&&(x(c.ka,d),x(c.ka,c.i),c.h.i.length=0,k(c.i),c.i.length=0),c.l.ra()}}function Pb(c,d,f){var m=f instanceof eo?Cr(f):new eo(f);if(m.g!="")d&&(m.g=d+"."+m.g),Bl(m,m.s);else{var T=a.location;m=T.protocol,d=d?d+"."+T.hostname:T.hostname,T=+T.port;var R=new eo(null);m&&Ul(R,m),d&&(R.g=d),T&&Bl(R,T),f&&(R.l=f),m=R}return f=c.D,d=c.ya,f&&d&&ke(m,f,d),ke(m,"VER",c.la),_c(c,m),m}function Ob(c,d,f){if(d&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=c.Ca&&!c.pa?new $e(new gc({eb:f})):new $e(c.pa),d.Ha(c.J),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Fb(){}t=Fb.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Kl(){}Kl.prototype.g=function(c,d){return new rn(c,d)};function rn(c,d){Pt.call(this),this.g=new Tb(d),this.l=c,this.h=d&&d.messageUrlParams||null,c=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(c?c["X-WebChannel-Content-Type"]=d.messageContentType:c={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(c?c["X-WebChannel-Client-Profile"]=d.va:c={"X-WebChannel-Client-Profile":d.va}),this.g.S=c,(c=d&&d.Sb)&&!z(c)&&(this.g.m=c),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!z(d)&&(this.g.D=d,c=this.h,c!==null&&d in c&&(c=this.h,d in c&&delete c[d])),this.j=new hs(this)}w(rn,Pt),rn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},rn.prototype.close=function(){Vg(this.g)},rn.prototype.o=function(c){var d=this.g;if(typeof c=="string"){var f={};f.__data__=c,c=f}else this.u&&(f={},f.__data__=Cg(c),c=f);d.i.push(new SP(d.Ya++,c)),d.G==3&&Gl(d)},rn.prototype.N=function(){this.g.l=null,delete this.j,Vg(this.g),delete this.g,rn.aa.N.call(this)};function Lb(c){Ag.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var d=c.__sm__;if(d){e:{for(let f in d){c=f;break e}c=void 0}(this.i=c)&&(c=this.i,d=d!==null&&c in d?d[c]:void 0),this.data=d}else this.data=c}w(Lb,Ag);function Vb(){Rg.call(this),this.status=1}w(Vb,Rg);function hs(c){this.g=c}w(hs,Fb),hs.prototype.ua=function(){$t(this.g,"a")},hs.prototype.ta=function(c){$t(this.g,new Lb(c))},hs.prototype.sa=function(c){$t(this.g,new Vb)},hs.prototype.ra=function(){$t(this.g,"b")},Kl.prototype.createWebChannel=Kl.prototype.g,rn.prototype.send=rn.prototype.o,rn.prototype.open=rn.prototype.m,rn.prototype.close=rn.prototype.close,DE=Yr.createWebChannelTransport=function(){return new Kl},bE=Yr.getStatEventTarget=function(){return Fl()},wE=Yr.Event=Ji,Cf=Yr.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ll.NO_ERROR=0,Ll.TIMEOUT=8,Ll.HTTP_ERROR=6,Nu=Yr.ErrorCode=Ll,eb.COMPLETE="complete",IE=Yr.EventType=eb,Q0.EventType=ac,ac.OPEN="a",ac.CLOSE="b",ac.ERROR="c",ac.MESSAGE="d",Pt.prototype.listen=Pt.prototype.K,ca=Yr.WebChannel=Q0,wH=Yr.FetchXmlHttpFactory=gc,$e.prototype.listenOnce=$e.prototype.L,$e.prototype.getLastError=$e.prototype.Ka,$e.prototype.getLastErrorCode=$e.prototype.Ba,$e.prototype.getStatus=$e.prototype.Z,$e.prototype.getResponseJson=$e.prototype.Oa,$e.prototype.getResponseText=$e.prototype.oa,$e.prototype.send=$e.prototype.ea,$e.prototype.setWithCredentials=$e.prototype.Ha,EE=Yr.XhrIo=$e}).apply(typeof Tf<"u"?Tf:typeof self<"u"?self:typeof window<"u"?window:{});var PR="@firebase/firestore",OR="4.8.0";var wt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};wt.UNAUTHENTICATED=new wt(null),wt.GOOGLE_CREDENTIALS=new wt("google-credentials-uid"),wt.FIRST_PARTY=new wt("first-party-uid"),wt.MOCK_USER=new wt("mock-user");var Na="11.10.0";var Go=new ar("@firebase/firestore");function ua(){return Go.logLevel}function $(t,...e){if(Go.logLevel<=fe.DEBUG){let n=e.map(mw);Go.debug(`Firestore (${Na}): ${t}`,...n)}}function Jr(t,...e){if(Go.logLevel<=fe.ERROR){let n=e.map(mw);Go.error(`Firestore (${Na}): ${t}`,...n)}}function $i(t,...e){if(Go.logLevel<=fe.WARN){let n=e.map(mw);Go.warn(`Firestore (${Na}): ${t}`,...n)}}function mw(t){if(typeof t=="string")return t;try{return(function(n){return JSON.stringify(n)})(t)}catch{return t}}function Y(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,Cx(t,r,n)}function Cx(t,e,n){let r=`FIRESTORE (${Na}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Jr(r),new Error(r)}function Ce(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||Cx(e,i,r)}function ne(t,e){return t}var O={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},B=class extends Kt{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var pr=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var kf=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},RE=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(wt.UNAUTHENTICATED))}shutdown(){}},xE=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},NE=class{constructor(e){this.t=e,this.currentUser=wt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ce(this.o===void 0,42304);let r=this.i,i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve(),o=new pr;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new pr,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let u=o;e.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},a=u=>{$("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?a(u):($("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new pr)}},0),s()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?($("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ce(typeof r.accessToken=="string",31837,{l:r}),new kf(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return Ce(e===null||typeof e=="string",2055,{h:e}),new wt(e)}},ME=class{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=wt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},kE=class{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new ME(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(wt.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Pf=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},PE=class{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Qt(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Ce(this.o===void 0,3512);let r=o=>{o.error!=null&&$("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.m;return this.m=o.token,$("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{$("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.V.getImmediate({optional:!0});o?i(o):$("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Pf(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ce(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Pf(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function bH(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}function Sx(){return new TextEncoder}var Lu=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=bH(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+=e.charAt(i[o]%62))}return r}};function de(t,e){return t<e?-1:t>e?1:0}function OE(t,e){let n=0;for(;n<t.length&&n<e.length;){let r=t.codePointAt(n),i=e.codePointAt(n);if(r!==i){if(r<128&&i<128)return de(r,i);{let o=Sx(),s=DH(o.encode(FR(t,n)),o.encode(FR(e,n)));return s!==0?s:de(r,i)}}n+=r>65535?2:1}return de(t.length,e.length)}function FR(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function DH(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return de(t[n],e[n]);return de(t.length,e.length)}function _a(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}var LR="__name__",Of=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&Y(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&Y(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let o=t.compareSegments(e.get(i),n.get(i));if(o!==0)return o}return de(e.length,n.length)}static compareSegments(e,n){let r=t.isNumericId(e),i=t.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?t.extractNumericId(e).compare(t.extractNumericId(n)):OE(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Qr.fromString(e.substring(4,e.length-2))}},je=class t extends Of{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new B(O.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}},TH=/^[_a-zA-Z][_a-zA-Z0-9]*$/,pn=class t extends Of{construct(e,n,r){return new t(e,n,r)}static isValidIdentifier(e){return TH.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===LR}static keyField(){return new t([LR])}static fromServerFormat(e){let n=[],r="",i=0,o=()=>{if(r.length===0)throw new B(O.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new B(O.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new B(O.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new B(O.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var K=class t{constructor(e){this.path=e}static fromPath(e){return new t(je.fromString(e))}static fromName(e){return new t(je.fromString(e).popFirst(5))}static empty(){return new t(je.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&je.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return je.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new je(e.slice()))}};function Ax(t,e,n){if(!n)throw new B(O.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function CH(t,e,n,r){if(e===!0&&r===!0)throw new B(O.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function VR(t){if(!K.isDocumentKey(t))throw new B(O.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function jR(t){if(K.isDocumentKey(t))throw new B(O.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Rx(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function dp(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=(function(r){return r.constructor?r.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Y(12329,{type:typeof t})}function Wo(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new B(O.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=dp(t);throw new B(O.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function at(t,e){let n={typeString:t};return e&&(n.value=e),n}function Qu(t,e){if(!Rx(t))throw new B(O.INVALID_ARGUMENT,"JSON must be an object");let n;for(let r in e)if(e[r]){let i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}let s=t[r];if(i&&typeof s!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&s!==o.value){n=`Expected '${r}' field to equal '${o.value}'`;break}}if(n)throw new B(O.INVALID_ARGUMENT,n);return!0}var UR=-62135596800,BR=1e6,ct=class t{static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*BR);return new t(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new B(O.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new B(O.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<UR)throw new B(O.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new B(O.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/BR}_compareTo(e){return this.seconds===e.seconds?de(this.nanoseconds,e.nanoseconds):de(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:t._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Qu(e,t._jsonSchema))return new t(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-UR;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};ct._jsonSchemaVersion="firestore/timestamp/1.0",ct._jsonSchema={type:at("string",ct._jsonSchemaVersion),seconds:at("number"),nanoseconds:at("number")};var ie=class t{static fromTimestamp(e){return new t(e)}static min(){return new t(new ct(0,0))}static max(){return new t(new ct(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Vu=-1,FE=class{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}};FE.UNKNOWN_ID=-1;function SH(t,e){let n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=ie.fromTimestamp(r===1e9?new ct(n+1,0):new ct(n,r));return new Ko(i,K.empty(),e)}function AH(t){return new Ko(t.readTime,t.key,Vu)}var Ko=class t{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new t(ie.min(),K.empty(),Vu)}static max(){return new t(ie.max(),K.empty(),Vu)}};function RH(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=K.comparator(t.documentKey,e.documentKey),n!==0?n:de(t.largestBatchId,e.largestBatchId))}var xH="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",LE=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};async function Ma(t){if(t.code!==O.FAILED_PRECONDITION||t.message!==xH)throw t;$("LocalStore","Unexpectedly lost primary lease")}var L=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Y(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,r)=>{n(e)})}static reject(e){return new t((n,r)=>{r(e)})}static waitFor(e){return new t((n,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&n()},u=>r(u))}),s=!0,o===i&&n()})}static or(e){let n=t.resolve(!1);for(let r of e)n=n.next(i=>i?t.resolve(i):r());return n}static forEach(e,n){let r=[];return e.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(e,n){return new t((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let u=0;u<o;u++){let l=u;n(e[l]).next(h=>{s[l]=h,++a,a===o&&r(s)},h=>i(h))}})}static doWhile(e,n){return new t((r,i)=>{let o=()=>{e()===!0?n().next(()=>{o()},i):r()};o()})}};function NH(t){let e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function ka(t){return t.name==="IndexedDbTransactionError"}var yw=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this._e(i),this.ae=i=>r.writeSequenceNumber(i))}_e(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.ae&&this.ae(n),n}}t.ue=-1;return t})(),vw=-1;function hp(t){return t==null}function ju(t){return t===0&&1/t==-1/0}function MH(t){return typeof t=="number"&&Number.isInteger(t)&&!ju(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var xx="";function kH(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=$R(e)),e=PH(t.get(n),e);return $R(e)}function PH(t,e){let n=e,r=t.length;for(let i=0;i<r;i++){let o=t.charAt(i);switch(o){case"\0":n+="";break;case xx:n+="";break;default:n+=o}}return n}function $R(t){return t+xx+""}var OH="remoteDocuments",Nx="owner";var Mx="mutationQueues";var kx="mutations";var Px="documentMutations",FH="remoteDocumentsV14";var Ox="remoteDocumentGlobal";var Fx="targets";var Lx="targetDocuments";var Vx="targetGlobal",jx="collectionParents";var Ux="clientMetadata";var Bx="bundles";var $x="namedQueries";var LH="indexConfiguration";var VH="indexState";var jH="indexEntries";var Hx="documentOverlays";var UH="globals";var BH=[Mx,kx,Px,OH,Fx,Nx,Vx,Lx,Ux,Ox,jx,Bx,$x],Qae=[...BH,Hx],$H=[Mx,kx,Px,FH,Fx,Nx,Vx,Lx,Ux,Ox,jx,Bx,$x,Hx],HH=$H,qH=[...HH,LH,VH,jH];var Yae=[...qH,UH];function HR(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Wi(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function qx(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var ze=class t{constructor(e,n){this.comparator=e,this.root=n||gr.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,gr.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,gr.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new fa(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new fa(this.root,e,this.comparator,!1)}getReverseIterator(){return new fa(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new fa(this.root,e,this.comparator,!0)}},fa=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},gr=class t{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=o??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new t(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Y(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Y(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw Y(27949);return e+(this.isRed()?0:1)}};gr.EMPTY=null,gr.RED=!0,gr.BLACK=!1;gr.EMPTY=new class{constructor(){this.size=0}get key(){throw Y(57766)}get value(){throw Y(16141)}get color(){throw Y(16727)}get left(){throw Y(29726)}get right(){throw Y(36894)}copy(e,n,r,i,o){return this}insert(e,n,r){return new gr(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var bt=class t{constructor(e){this.comparator=e,this.data=new ze(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Ff(this.data.getIterator())}getIteratorFrom(e){return new Ff(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},Ff=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Dn=class t{constructor(e){this.fields=e,e.sort(pn.comparator)}static empty(){return new t([])}unionWith(e){let n=new bt(pn.comparator);for(let r of this.fields)n=n.add(r);for(let r of e)n=n.add(r);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return _a(this.fields,e.fields,(n,r)=>n.isEqual(r))}};var Lf=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var Bt=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=(function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Lf("Invalid base64 string: "+o):o}})(e);return new t(n)}static fromUint8Array(e){let n=(function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o})(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return de(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Bt.EMPTY_BYTE_STRING=new Bt("");var zH=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Xr(t){if(Ce(!!t,39018),typeof t=="string"){let e=0,n=zH.exec(t);if(Ce(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ve(t.seconds),nanos:Ve(t.nanos)}}function Ve(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ei(t){return typeof t=="string"?Bt.fromBase64String(t):Bt.fromUint8Array(t)}var zx="server_timestamp",Gx="__type__",Wx="__previous_value__",Kx="__local_write_time__";function _w(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{})[Gx])===null||n===void 0?void 0:n.stringValue)===zx}function fp(t){let e=t.mapValue.fields[Wx];return _w(e)?fp(e):e}function Uu(t){let e=Xr(t.mapValue.fields[Kx].timestampValue);return new ct(e.seconds,e.nanos)}var VE=class{constructor(e,n,r,i,o,s,a,u,l,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l,this.isUsingEmulator=h}},Vf="(default)",jf=class t{constructor(e,n){this.projectId=e,this.database=n||Vf}static empty(){return new t("","")}get isDefaultDatabase(){return this.database===Vf}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var Ew="__type__",Qx="__max__",Sf={mapValue:{fields:{__type__:{stringValue:Qx}}}},Iw="__vector__",Ea="value";function Hi(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?_w(t)?4:Zx(t)?9007199254740991:Yx(t)?10:11:Y(28295,{value:t})}function vr(t,e){if(t===e)return!0;let n=Hi(t);if(n!==Hi(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Uu(t).isEqual(Uu(e));case 3:return(function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=Xr(i.timestampValue),a=Xr(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(i,o){return ei(i.bytesValue).isEqual(ei(o.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(i,o){return Ve(i.geoPointValue.latitude)===Ve(o.geoPointValue.latitude)&&Ve(i.geoPointValue.longitude)===Ve(o.geoPointValue.longitude)})(t,e);case 2:return(function(i,o){if("integerValue"in i&&"integerValue"in o)return Ve(i.integerValue)===Ve(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=Ve(i.doubleValue),a=Ve(o.doubleValue);return s===a?ju(s)===ju(a):isNaN(s)&&isNaN(a)}return!1})(t,e);case 9:return _a(t.arrayValue.values||[],e.arrayValue.values||[],vr);case 10:case 11:return(function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(HR(s)!==HR(a))return!1;for(let u in s)if(s.hasOwnProperty(u)&&(a[u]===void 0||!vr(s[u],a[u])))return!1;return!0})(t,e);default:return Y(52216,{left:t})}}function Bu(t,e){return(t.values||[]).find(n=>vr(n,e))!==void 0}function Ia(t,e){if(t===e)return 0;let n=Hi(t),r=Hi(e);if(n!==r)return de(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return de(t.booleanValue,e.booleanValue);case 2:return(function(o,s){let a=Ve(o.integerValue||o.doubleValue),u=Ve(s.integerValue||s.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1})(t,e);case 3:return qR(t.timestampValue,e.timestampValue);case 4:return qR(Uu(t),Uu(e));case 5:return OE(t.stringValue,e.stringValue);case 6:return(function(o,s){let a=ei(o),u=ei(s);return a.compareTo(u)})(t.bytesValue,e.bytesValue);case 7:return(function(o,s){let a=o.split("/"),u=s.split("/");for(let l=0;l<a.length&&l<u.length;l++){let h=de(a[l],u[l]);if(h!==0)return h}return de(a.length,u.length)})(t.referenceValue,e.referenceValue);case 8:return(function(o,s){let a=de(Ve(o.latitude),Ve(s.latitude));return a!==0?a:de(Ve(o.longitude),Ve(s.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return zR(t.arrayValue,e.arrayValue);case 10:return(function(o,s){var a,u,l,h;let p=o.fields||{},g=s.fields||{},y=(a=p[Ea])===null||a===void 0?void 0:a.arrayValue,w=(u=g[Ea])===null||u===void 0?void 0:u.arrayValue,k=de(((l=y?.values)===null||l===void 0?void 0:l.length)||0,((h=w?.values)===null||h===void 0?void 0:h.length)||0);return k!==0?k:zR(y,w)})(t.mapValue,e.mapValue);case 11:return(function(o,s){if(o===Sf.mapValue&&s===Sf.mapValue)return 0;if(o===Sf.mapValue)return 1;if(s===Sf.mapValue)return-1;let a=o.fields||{},u=Object.keys(a),l=s.fields||{},h=Object.keys(l);u.sort(),h.sort();for(let p=0;p<u.length&&p<h.length;++p){let g=OE(u[p],h[p]);if(g!==0)return g;let y=Ia(a[u[p]],l[h[p]]);if(y!==0)return y}return de(u.length,h.length)})(t.mapValue,e.mapValue);default:throw Y(23264,{le:n})}}function qR(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return de(t,e);let n=Xr(t),r=Xr(e),i=de(n.seconds,r.seconds);return i!==0?i:de(n.nanos,r.nanos)}function zR(t,e){let n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){let o=Ia(n[i],r[i]);if(o)return o}return de(n.length,r.length)}function wa(t){return jE(t)}function jE(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){let r=Xr(n);return`time(${r.seconds},${r.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return ei(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return K.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let r="[",i=!0;for(let o of n.values||[])i?i=!1:r+=",",r+=jE(o);return r+"]"})(t.arrayValue):"mapValue"in t?(function(n){let r=Object.keys(n.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${jE(n.fields[s])}`;return i+"}"})(t.mapValue):Y(61005,{value:t})}function xf(t){switch(Hi(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=fp(t);return e?16+xf(e):16;case 5:return 2*t.stringValue.length;case 6:return ei(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce((i,o)=>i+xf(o),0)})(t.arrayValue);case 10:case 11:return(function(r){let i=0;return Wi(r.fields,(o,s)=>{i+=o.length+xf(s)}),i})(t.mapValue);default:throw Y(13486,{value:t})}}function GR(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function UE(t){return!!t&&"integerValue"in t}function ww(t){return!!t&&"arrayValue"in t}function WR(t){return!!t&&"nullValue"in t}function KR(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Nf(t){return!!t&&"mapValue"in t}function Yx(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{})[Ew])===null||n===void 0?void 0:n.stringValue)===Iw}function ku(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return Wi(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=ku(r)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ku(t.arrayValue.values[n]);return e}return Object.assign({},t)}function Zx(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===Qx}var Jae={mapValue:{fields:{[Ew]:{stringValue:Iw},[Ea]:{arrayValue:{}}}}};var fn=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Nf(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ku(n)}setAll(e){let n=pn.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!n.isImmediateParentOf(a)){let u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}s?r[a.lastSegment()]=ku(s):i.push(a.lastSegment())});let o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){let n=this.field(e.popLast());Nf(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return vr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Nf(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Wi(n,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new t(ku(this.value))}};function Jx(t){let e=[];return Wi(t.fields,(n,r)=>{let i=new pn([n]);if(Nf(r)){let o=Jx(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new Dn(e)}var qn=class t{constructor(e,n,r,i,o,s,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new t(e,0,ie.min(),ie.min(),ie.min(),fn.empty(),0)}static newFoundDocument(e,n,r,i){return new t(e,1,n,ie.min(),r,i,0)}static newNoDocument(e,n){return new t(e,2,n,ie.min(),ie.min(),fn.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,ie.min(),ie.min(),fn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ie.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=fn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=fn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ie.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var ba=class{constructor(e,n){this.position=e,this.inclusive=n}};function QR(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){let o=e[i],s=t.position[i];if(o.field.isKeyField()?r=K.comparator(K.fromName(s.referenceValue),n.key):r=Ia(s,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function YR(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!vr(t.position[n],e.position[n]))return!1;return!0}var Qo=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function GH(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var Uf=class{},st=class t extends Uf{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new $E(e,n,r):n==="array-contains"?new zE(e,r):n==="in"?new GE(e,r):n==="not-in"?new WE(e,r):n==="array-contains-any"?new KE(e,r):new t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new HE(e,r):new qE(e,r)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Ia(n,this.value)):n!==null&&Hi(this.value)===Hi(n)&&this.matchesComparison(Ia(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Y(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},zn=class t extends Uf{constructor(e,n){super(),this.filters=e,this.op=n,this.he=null}static create(e,n){return new t(e,n)}matches(e){return Xx(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}};function Xx(t){return t.op==="and"}function eN(t){return WH(t)&&Xx(t)}function WH(t){for(let e of t.filters)if(e instanceof zn)return!1;return!0}function BE(t){if(t instanceof st)return t.field.canonicalString()+t.op.toString()+wa(t.value);if(eN(t))return t.filters.map(e=>BE(e)).join(",");{let e=t.filters.map(n=>BE(n)).join(",");return`${t.op}(${e})`}}function tN(t,e){return t instanceof st?(function(r,i){return i instanceof st&&r.op===i.op&&r.field.isEqual(i.field)&&vr(r.value,i.value)})(t,e):t instanceof zn?(function(r,i){return i instanceof zn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&tN(s,i.filters[a]),!0):!1})(t,e):void Y(19439)}function nN(t){return t instanceof st?(function(n){return`${n.field.canonicalString()} ${n.op} ${wa(n.value)}`})(t):t instanceof zn?(function(n){return n.op.toString()+" {"+n.getFilters().map(nN).join(" ,")+"}"})(t):"Filter"}var $E=class extends st{constructor(e,n,r){super(e,n,r),this.key=K.fromName(r.referenceValue)}matches(e){let n=K.comparator(e.key,this.key);return this.matchesComparison(n)}},HE=class extends st{constructor(e,n){super(e,"in",n),this.keys=rN("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},qE=class extends st{constructor(e,n){super(e,"not-in",n),this.keys=rN("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function rN(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>K.fromName(r.referenceValue))}var zE=class extends st{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return ww(n)&&Bu(n.arrayValue,this.value)}},GE=class extends st{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&Bu(this.value.arrayValue,n)}},WE=class extends st{constructor(e,n){super(e,"not-in",n)}matches(e){if(Bu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Bu(this.value.arrayValue,n)}},KE=class extends st{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!ww(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Bu(this.value.arrayValue,r))}};var QE=class{constructor(e,n=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.Pe=null}};function ZR(t,e=null,n=[],r=[],i=null,o=null,s=null){return new QE(t,e,n,r,i,o,s)}function bw(t){let e=ne(t);if(e.Pe===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>BE(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>(function(o){return o.field.canonicalString()+o.dir})(r)).join(","),hp(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>wa(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>wa(r)).join(",")),e.Pe=n}return e.Pe}function Dw(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!GH(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!tN(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!YR(t.startAt,e.startAt)&&YR(t.endAt,e.endAt)}function YE(t){return K.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}var qi=class{constructor(e,n=null,r=[],i=[],o=null,s="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=u,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}};function KH(t,e,n,r,i,o,s,a){return new qi(t,e,n,r,i,o,s,a)}function iN(t){return new qi(t)}function JR(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function oN(t){return t.collectionGroup!==null}function Pu(t){let e=ne(t);if(e.Te===null){e.Te=[];let n=new Set;for(let o of e.explicitOrderBy)e.Te.push(o),n.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new bt(pn.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.Te.push(new Qo(o,r))}),n.has(pn.keyField().canonicalString())||e.Te.push(new Qo(pn.keyField(),r))}return e.Te}function mr(t){let e=ne(t);return e.Ie||(e.Ie=QH(e,Pu(t))),e.Ie}function QH(t,e){if(t.limitType==="F")return ZR(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new Qo(i.field,o)});let n=t.endAt?new ba(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new ba(t.startAt.position,t.startAt.inclusive):null;return ZR(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function ZE(t,e){let n=t.filters.concat([e]);return new qi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function JE(t,e,n){return new qi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function pp(t,e){return Dw(mr(t),mr(e))&&t.limitType===e.limitType}function sN(t){return`${bw(mr(t))}|lt:${t.limitType}`}function la(t){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>nN(i)).join(", ")}]`),hp(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>(function(s){return`${s.field.canonicalString()} (${s.dir})`})(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>wa(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>wa(i)).join(",")),`Target(${r})`})(mr(t))}; limitType=${t.limitType})`}function gp(t,e){return e.isFoundDocument()&&(function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):K.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)})(t,e)&&(function(r,i){for(let o of Pu(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0})(t,e)&&(function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0})(t,e)&&(function(r,i){return!(r.startAt&&!(function(s,a,u){let l=QR(s,a,u);return s.inclusive?l<=0:l<0})(r.startAt,Pu(r),i)||r.endAt&&!(function(s,a,u){let l=QR(s,a,u);return s.inclusive?l>=0:l>0})(r.endAt,Pu(r),i))})(t,e)}function YH(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function aN(t){return(e,n)=>{let r=!1;for(let i of Pu(t)){let o=ZH(i,e,n);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function ZH(t,e,n){let r=t.field.isKeyField()?K.comparator(e.key,n.key):(function(o,s,a){let u=s.data.field(o),l=a.data.field(o);return u!==null&&l!==null?Ia(u,l):Y(42886)})(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Y(19790,{direction:t.dir})}}var ti=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Wi(this.inner,(n,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return qx(this.inner)}size(){return this.innerSize}};var JH=new ze(K.comparator);function ni(){return JH}var cN=new ze(K.comparator);function Mu(...t){let e=cN;for(let n of t)e=e.insert(n.key,n);return e}function uN(t){let e=cN;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function qo(){return Ou()}function lN(){return Ou()}function Ou(){return new ti(t=>t.toString(),(t,e)=>t.isEqual(e))}var XH=new ze(K.comparator),e3=new bt(K.comparator);function ve(...t){let e=e3;for(let n of t)e=e.add(n);return e}var t3=new bt(de);function n3(){return t3}function Tw(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ju(e)?"-0":e}}function dN(t){return{integerValue:""+t}}function r3(t,e){return MH(e)?dN(e):Tw(t,e)}var Da=class{constructor(){this._=void 0}};function i3(t,e,n){return t instanceof Ta?(function(i,o){let s={fields:{[Gx]:{stringValue:zx},[Kx]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&_w(o)&&(o=fp(o)),o&&(s.fields[Wx]=o),{mapValue:s}})(n,e):t instanceof Yo?fN(t,e):t instanceof Zo?pN(t,e):(function(i,o){let s=hN(i,o),a=XR(s)+XR(i.Ee);return UE(s)&&UE(i.Ee)?dN(a):Tw(i.serializer,a)})(t,e)}function o3(t,e,n){return t instanceof Yo?fN(t,e):t instanceof Zo?pN(t,e):n}function hN(t,e){return t instanceof Ca?(function(r){return UE(r)||(function(o){return!!o&&"doubleValue"in o})(r)})(e)?e:{integerValue:0}:null}var Ta=class extends Da{},Yo=class extends Da{constructor(e){super(),this.elements=e}};function fN(t,e){let n=gN(e);for(let r of t.elements)n.some(i=>vr(i,r))||n.push(r);return{arrayValue:{values:n}}}var Zo=class extends Da{constructor(e){super(),this.elements=e}};function pN(t,e){let n=gN(e);for(let r of t.elements)n=n.filter(i=>!vr(i,r));return{arrayValue:{values:n}}}var Ca=class extends Da{constructor(e,n){super(),this.serializer=e,this.Ee=n}};function XR(t){return Ve(t.integerValue||t.doubleValue)}function gN(t){return ww(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function s3(t,e){return t.field.isEqual(e.field)&&(function(r,i){return r instanceof Yo&&i instanceof Yo||r instanceof Zo&&i instanceof Zo?_a(r.elements,i.elements,vr):r instanceof Ca&&i instanceof Ca?vr(r.Ee,i.Ee):r instanceof Ta&&i instanceof Ta})(t.transform,e.transform)}var XE=class{constructor(e,n){this.version=e,this.transformResults=n}},Zr=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Mf(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var Sa=class{};function mN(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new $u(t.key,Zr.none()):new Jo(t.key,t.data,Zr.none());{let n=t.data,r=fn.empty(),i=new bt(pn.comparator);for(let o of e.fields)if(!i.has(o)){let s=n.field(o);s===null&&o.length>1&&(o=o.popLast(),s=n.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new _r(t.key,r,new Dn(i.toArray()),Zr.none())}}function a3(t,e,n){t instanceof Jo?(function(i,o,s){let a=i.value.clone(),u=tx(i.fieldTransforms,o,s.transformResults);a.setAll(u),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()})(t,e,n):t instanceof _r?(function(i,o,s){if(!Mf(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=tx(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(yN(i)),u.setAll(a),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()})(t,e,n):(function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()})(0,e,n)}function Fu(t,e,n,r){return t instanceof Jo?(function(o,s,a,u){if(!Mf(o.precondition,s))return a;let l=o.value.clone(),h=nx(o.fieldTransforms,u,s);return l.setAll(h),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null})(t,e,n,r):t instanceof _r?(function(o,s,a,u){if(!Mf(o.precondition,s))return a;let l=nx(o.fieldTransforms,u,s),h=s.data;return h.setAll(yN(o)),h.setAll(l),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))})(t,e,n,r):(function(o,s,a){return Mf(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a})(t,e,n)}function c3(t,e){let n=null;for(let r of t.fieldTransforms){let i=e.data.field(r.field),o=hN(r.transform,i||null);o!=null&&(n===null&&(n=fn.empty()),n.set(r.field,o))}return n||null}function ex(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&_a(r,i,(o,s)=>s3(o,s))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var Jo=class extends Sa{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},_r=class extends Sa{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function yN(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function tx(t,e,n){let r=new Map;Ce(t.length===n.length,32656,{Ae:n.length,Re:t.length});for(let i=0;i<n.length;i++){let o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,o3(s,a,n[i]))}return r}function nx(t,e,n){let r=new Map;for(let i of t){let o=i.transform,s=n.data.field(i.field);r.set(i.field,i3(o,s,e))}return r}var $u=class extends Sa{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},eI=class extends Sa{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var tI=class{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&a3(o,e,r[i])}}applyToLocalView(e,n){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(n=Fu(r,e,n,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(n=Fu(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let r=lN();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=n.has(i.key)?null:a;let u=mN(s,a);u!==null&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(ie.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ve())}isEqual(e){return this.batchId===e.batchId&&_a(this.mutations,e.mutations,(n,r)=>ex(n,r))&&_a(this.baseMutations,e.baseMutations,(n,r)=>ex(n,r))}},nI=class t{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Ce(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let i=(function(){return XH})(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new t(e,n,r,i)}};var rI=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var iI=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var it,Ee;function u3(t){switch(t){case O.OK:return Y(64938);case O.CANCELLED:case O.UNKNOWN:case O.DEADLINE_EXCEEDED:case O.RESOURCE_EXHAUSTED:case O.INTERNAL:case O.UNAVAILABLE:case O.UNAUTHENTICATED:return!1;case O.INVALID_ARGUMENT:case O.NOT_FOUND:case O.ALREADY_EXISTS:case O.PERMISSION_DENIED:case O.FAILED_PRECONDITION:case O.ABORTED:case O.OUT_OF_RANGE:case O.UNIMPLEMENTED:case O.DATA_LOSS:return!0;default:return Y(15467,{code:t})}}function vN(t){if(t===void 0)return Jr("GRPC error has no .code"),O.UNKNOWN;switch(t){case it.OK:return O.OK;case it.CANCELLED:return O.CANCELLED;case it.UNKNOWN:return O.UNKNOWN;case it.DEADLINE_EXCEEDED:return O.DEADLINE_EXCEEDED;case it.RESOURCE_EXHAUSTED:return O.RESOURCE_EXHAUSTED;case it.INTERNAL:return O.INTERNAL;case it.UNAVAILABLE:return O.UNAVAILABLE;case it.UNAUTHENTICATED:return O.UNAUTHENTICATED;case it.INVALID_ARGUMENT:return O.INVALID_ARGUMENT;case it.NOT_FOUND:return O.NOT_FOUND;case it.ALREADY_EXISTS:return O.ALREADY_EXISTS;case it.PERMISSION_DENIED:return O.PERMISSION_DENIED;case it.FAILED_PRECONDITION:return O.FAILED_PRECONDITION;case it.ABORTED:return O.ABORTED;case it.OUT_OF_RANGE:return O.OUT_OF_RANGE;case it.UNIMPLEMENTED:return O.UNIMPLEMENTED;case it.DATA_LOSS:return O.DATA_LOSS;default:return Y(39323,{code:t})}}(Ee=it||(it={}))[Ee.OK=0]="OK",Ee[Ee.CANCELLED=1]="CANCELLED",Ee[Ee.UNKNOWN=2]="UNKNOWN",Ee[Ee.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ee[Ee.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ee[Ee.NOT_FOUND=5]="NOT_FOUND",Ee[Ee.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ee[Ee.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ee[Ee.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ee[Ee.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ee[Ee.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ee[Ee.ABORTED=10]="ABORTED",Ee[Ee.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ee[Ee.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ee[Ee.INTERNAL=13]="INTERNAL",Ee[Ee.UNAVAILABLE=14]="UNAVAILABLE",Ee[Ee.DATA_LOSS=15]="DATA_LOSS";var rx=null;var l3=new Qr([4294967295,4294967295],0);function ix(t){let e=Sx().encode(t),n=new _E;return n.update(e),new Uint8Array(n.digest())}function ox(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Qr([n,r],0),new Qr([i,o],0)]}var oI=class t{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new zo(`Invalid padding: ${n}`);if(r<0)throw new zo(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new zo(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new zo(`Invalid padding when bitmap length is 0: ${n}`);this.fe=8*e.length-n,this.ge=Qr.fromNumber(this.fe)}pe(e,n,r){let i=e.add(n.multiply(Qr.fromNumber(r)));return i.compare(l3)===1&&(i=new Qr([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;let n=ix(e),[r,i]=ox(n);for(let o=0;o<this.hashCount;o++){let s=this.pe(r,i,o);if(!this.ye(s))return!1}return!0}static create(e,n,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new t(o,i,n);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.fe===0)return;let n=ix(e),[r,i]=ox(n);for(let o=0;o<this.hashCount;o++){let s=this.pe(r,i,o);this.we(s)}}we(e){let n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}},zo=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Bf=class t{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){let i=new Map;return i.set(e,Hu.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new t(ie.min(),i,new ze(de),ni(),ve())}},Hu=class t{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new t(r,n,ve(),ve(),ve())}};var ga=class{constructor(e,n,r,i){this.Se=e,this.removedTargetIds=n,this.key=r,this.be=i}},$f=class{constructor(e,n){this.targetId=e,this.De=n}},Hf=class{constructor(e,n,r=Bt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}},qf=class{constructor(){this.ve=0,this.Ce=sx(),this.Fe=Bt.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=ve(),n=ve(),r=ve();return this.Ce.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Y(38017,{changeType:o})}}),new Hu(this.Fe,this.Me,e,n,r)}ke(){this.xe=!1,this.Ce=sx()}qe(e,n){this.xe=!0,this.Ce=this.Ce.insert(e,n)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,Ce(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}},sI=class{constructor(e){this.We=e,this.Ge=new Map,this.ze=ni(),this.je=Af(),this.Je=Af(),this.He=new ze(de)}Ye(e){for(let n of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(n,e.be):this.Xe(n,e.key,e.be);for(let n of e.removedTargetIds)this.Xe(n,e.key,e.be)}et(e){this.forEachTarget(e,n=>{let r=this.tt(n);switch(e.state){case 0:this.nt(n)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(n);break;case 3:this.nt(n)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(n)&&(this.rt(n),r.Be(e.resumeToken));break;default:Y(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ge.forEach((r,i)=>{this.nt(i)&&n(i)})}it(e){let n=e.targetId,r=e.De.count,i=this.st(n);if(i){let o=i.target;if(YE(o))if(r===0){let s=new K(o.path);this.Xe(n,s,qn.newNoDocument(s,ie.min()))}else Ce(r===1,20013,{expectedCount:r});else{let s=this.ot(n);if(s!==r){let a=this._t(e),u=a?this.ut(a,e,s):1;if(u!==0){this.rt(n);let l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(n,l)}rx?.ct((function(h,p,g,y,w){var k,x,j,z,W,oe;let Ze={localCacheCount:h,existenceFilterCount:p.count,databaseId:g.database,projectId:g.projectId},Ie=p.unchangedNames;return Ie&&(Ze.bloomFilter={applied:w===0,hashCount:(k=Ie?.hashCount)!==null&&k!==void 0?k:0,bitmapLength:(z=(j=(x=Ie?.bits)===null||x===void 0?void 0:x.bitmap)===null||j===void 0?void 0:j.length)!==null&&z!==void 0?z:0,padding:(oe=(W=Ie?.bits)===null||W===void 0?void 0:W.padding)!==null&&oe!==void 0?oe:0,mightContain:b=>{var v;return(v=y?.mightContain(b))!==null&&v!==void 0&&v}}),Ze})(s,e.De,this.We.lt(),a,u))}}}}_t(e){let n=e.De.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n,s,a;try{s=ei(r).toUint8Array()}catch(u){if(u instanceof Lf)return $i("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new oI(s,i,o)}catch(u){return $i(u instanceof zo?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.fe===0?null:a}ut(e,n,r){return n.De.count===r-this.ht(e,n.targetId)?0:2}ht(e,n){let r=this.We.getRemoteKeysForTarget(n),i=0;return r.forEach(o=>{let s=this.We.lt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Xe(n,o,null),i++)}),i}Pt(e){let n=new Map;this.Ge.forEach((o,s)=>{let a=this.st(s);if(a){if(o.current&&YE(a.target)){let u=new K(a.target.path);this.Tt(u).has(s)||this.It(s,u)||this.Xe(s,u,qn.newNoDocument(u,e))}o.Ne&&(n.set(s,o.Le()),o.ke())}});let r=ve();this.Je.forEach((o,s)=>{let a=!0;s.forEachWhile(u=>{let l=this.st(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.ze.forEach((o,s)=>s.setReadTime(e));let i=new Bf(e,n,this.He,this.ze,r);return this.ze=ni(),this.je=Af(),this.Je=Af(),this.He=new ze(de),i}Ze(e,n){if(!this.nt(e))return;let r=this.It(e,n.key)?2:0;this.tt(e).qe(n.key,r),this.ze=this.ze.insert(n.key,n),this.je=this.je.insert(n.key,this.Tt(n.key).add(e)),this.Je=this.Je.insert(n.key,this.dt(n.key).add(e))}Xe(e,n,r){if(!this.nt(e))return;let i=this.tt(e);this.It(e,n)?i.qe(n,1):i.Qe(n),this.Je=this.Je.insert(n,this.dt(n).delete(e)),this.Je=this.Je.insert(n,this.dt(n).add(e)),r&&(this.ze=this.ze.insert(n,r))}removeTarget(e){this.Ge.delete(e)}ot(e){let n=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let n=this.Ge.get(e);return n||(n=new qf,this.Ge.set(e,n)),n}dt(e){let n=this.Je.get(e);return n||(n=new bt(de),this.Je=this.Je.insert(e,n)),n}Tt(e){let n=this.je.get(e);return n||(n=new bt(de),this.je=this.je.insert(e,n)),n}nt(e){let n=this.st(e)!==null;return n||$("WatchChangeAggregator","Detected inactive target",e),n}st(e){let n=this.Ge.get(e);return n&&n.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new qf),this.We.getRemoteKeysForTarget(e).forEach(n=>{this.Xe(e,n,null)})}It(e,n){return this.We.getRemoteKeysForTarget(e).has(n)}};function Af(){return new ze(K.comparator)}function sx(){return new ze(K.comparator)}var d3={asc:"ASCENDING",desc:"DESCENDING"},h3={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},f3={and:"AND",or:"OR"},aI=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function cI(t,e){return t.useProto3Json||hp(e)?e:{value:e}}function zf(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function _N(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function p3(t,e){return zf(t,e.toTimestamp())}function yr(t){return Ce(!!t,49232),ie.fromTimestamp((function(n){let r=Xr(n);return new ct(r.seconds,r.nanos)})(t))}function Cw(t,e){return uI(t,e).canonicalString()}function uI(t,e){let n=(function(i){return new je(["projects",i.projectId,"databases",i.database])})(t).child("documents");return e===void 0?n:n.child(e)}function EN(t){let e=je.fromString(t);return Ce(TN(e),10190,{key:e.toString()}),e}function lI(t,e){return Cw(t.databaseId,e.path)}function TE(t,e){let n=EN(e);if(n.get(1)!==t.databaseId.projectId)throw new B(O.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new B(O.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new K(wN(n))}function IN(t,e){return Cw(t.databaseId,e)}function g3(t){let e=EN(t);return e.length===4?je.emptyPath():wN(e)}function dI(t){return new je(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function wN(t){return Ce(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function ax(t,e,n){return{name:lI(t,e),fields:n.value.mapValue.fields}}function m3(t,e){let n;if("targetChange"in e){e.targetChange;let r=(function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:Y(39313,{state:l})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=(function(l,h){return l.useProto3Json?(Ce(h===void 0||typeof h=="string",58123),Bt.fromBase64String(h||"")):(Ce(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),Bt.fromUint8Array(h||new Uint8Array))})(t,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&(function(l){let h=l.code===void 0?O.UNKNOWN:vN(l.code);return new B(h,l.message||"")})(s);n=new Hf(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=TE(t,r.document.name),o=yr(r.document.updateTime),s=r.document.createTime?yr(r.document.createTime):ie.min(),a=new fn({mapValue:{fields:r.document.fields}}),u=qn.newFoundDocument(i,o,s,a),l=r.targetIds||[],h=r.removedTargetIds||[];n=new ga(l,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=TE(t,r.document),o=r.readTime?yr(r.readTime):ie.min(),s=qn.newNoDocument(i,o),a=r.removedTargetIds||[];n=new ga([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=TE(t,r.document),o=r.removedTargetIds||[];n=new ga([],o,i,null)}else{if(!("filter"in e))return Y(11601,{At:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new iI(i,o),a=r.targetId;n=new $f(a,s)}}return n}function y3(t,e){let n;if(e instanceof Jo)n={update:ax(t,e.key,e.value)};else if(e instanceof $u)n={delete:lI(t,e.key)};else if(e instanceof _r)n={update:ax(t,e.key,e.data),updateMask:C3(e.fieldMask)};else{if(!(e instanceof eI))return Y(16599,{Rt:e.type});n={verify:lI(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>(function(o,s){let a=s.transform;if(a instanceof Ta)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Yo)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Zo)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Ca)return{fieldPath:s.field.canonicalString(),increment:a.Ee};throw Y(20930,{transform:s.transform})})(0,r))),e.precondition.isNone||(n.currentDocument=(function(i,o){return o.updateTime!==void 0?{updateTime:p3(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Y(27497)})(t,e.precondition)),n}function v3(t,e){return t&&t.length>0?(Ce(e!==void 0,14353),t.map(n=>(function(i,o){let s=i.updateTime?yr(i.updateTime):yr(o);return s.isEqual(ie.min())&&(s=yr(o)),new XE(s,i.transformResults||[])})(n,e))):[]}function _3(t,e){return{documents:[IN(t,e.path)]}}function E3(t,e){let n={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=IN(t,i);let o=(function(l){if(l.length!==0)return DN(zn.create(l,"and"))})(e.filters);o&&(n.structuredQuery.where=o);let s=(function(l){if(l.length!==0)return l.map(h=>(function(g){return{field:da(g.field),direction:b3(g.dir)}})(h))})(e.orderBy);s&&(n.structuredQuery.orderBy=s);let a=cI(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=(function(l){return{before:l.inclusive,values:l.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(l){return{before:!l.inclusive,values:l.position}})(e.endAt)),{Vt:n,parent:i}}function I3(t){let e=g3(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Ce(r===1,65062);let h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];n.where&&(o=(function(p){let g=bN(p);return g instanceof zn&&eN(g)?g.getFilters():[g]})(n.where));let s=[];n.orderBy&&(s=(function(p){return p.map(g=>(function(w){return new Qo(ha(w.field),(function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(w.direction))})(g))})(n.orderBy));let a=null;n.limit&&(a=(function(p){let g;return g=typeof p=="object"?p.value:p,hp(g)?null:g})(n.limit));let u=null;n.startAt&&(u=(function(p){let g=!!p.before,y=p.values||[];return new ba(y,g)})(n.startAt));let l=null;return n.endAt&&(l=(function(p){let g=!p.before,y=p.values||[];return new ba(y,g)})(n.endAt)),KH(e,i,s,o,a,"F",u,l)}function w3(t,e){let n=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Y(28987,{purpose:i})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function bN(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":let r=ha(n.unaryFilter.field);return st.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=ha(n.unaryFilter.field);return st.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=ha(n.unaryFilter.field);return st.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=ha(n.unaryFilter.field);return st.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Y(61313);default:return Y(60726)}})(t):t.fieldFilter!==void 0?(function(n){return st.create(ha(n.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Y(58110);default:return Y(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return zn.create(n.compositeFilter.filters.map(r=>bN(r)),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Y(1026)}})(n.compositeFilter.op))})(t):Y(30097,{filter:t})}function b3(t){return d3[t]}function D3(t){return h3[t]}function T3(t){return f3[t]}function da(t){return{fieldPath:t.canonicalString()}}function ha(t){return pn.fromServerFormat(t.fieldPath)}function DN(t){return t instanceof st?(function(n){if(n.op==="=="){if(KR(n.value))return{unaryFilter:{field:da(n.field),op:"IS_NAN"}};if(WR(n.value))return{unaryFilter:{field:da(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(KR(n.value))return{unaryFilter:{field:da(n.field),op:"IS_NOT_NAN"}};if(WR(n.value))return{unaryFilter:{field:da(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:da(n.field),op:D3(n.op),value:n.value}}})(t):t instanceof zn?(function(n){let r=n.getFilters().map(i=>DN(i));return r.length===1?r[0]:{compositeFilter:{op:T3(n.op),filters:r}}})(t):Y(54877,{filter:t})}function C3(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function TN(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var qu=class t{constructor(e,n,r,i,o=ie.min(),s=ie.min(),a=Bt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var hI=class{constructor(e){this.gt=e}};function S3(t){let e=I3({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?JE(e,e.limit,"L"):e}var Gf=class{constructor(){}bt(e,n){this.Dt(e,n),n.vt()}Dt(e,n){if("nullValue"in e)this.Ct(n,5);else if("booleanValue"in e)this.Ct(n,10),n.Ft(e.booleanValue?1:0);else if("integerValue"in e)this.Ct(n,15),n.Ft(Ve(e.integerValue));else if("doubleValue"in e){let r=Ve(e.doubleValue);isNaN(r)?this.Ct(n,13):(this.Ct(n,15),ju(r)?n.Ft(0):n.Ft(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ct(n,20),typeof r=="string"&&(r=Xr(r)),n.Mt(`${r.seconds||""}`),n.Ft(r.nanos||0)}else if("stringValue"in e)this.xt(e.stringValue,n),this.Ot(n);else if("bytesValue"in e)this.Ct(n,30),n.Nt(ei(e.bytesValue)),this.Ot(n);else if("referenceValue"in e)this.Bt(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ct(n,45),n.Ft(r.latitude||0),n.Ft(r.longitude||0)}else"mapValue"in e?Zx(e)?this.Ct(n,Number.MAX_SAFE_INTEGER):Yx(e)?this.Lt(e.mapValue,n):(this.kt(e.mapValue,n),this.Ot(n)):"arrayValue"in e?(this.qt(e.arrayValue,n),this.Ot(n)):Y(19022,{Qt:e})}xt(e,n){this.Ct(n,25),this.$t(e,n)}$t(e,n){n.Mt(e)}kt(e,n){let r=e.fields||{};this.Ct(n,55);for(let i of Object.keys(r))this.xt(i,n),this.Dt(r[i],n)}Lt(e,n){var r,i;let o=e.fields||{};this.Ct(n,53);let s=Ea,a=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.Ct(n,15),n.Ft(Ve(a)),this.xt(s,n),this.Dt(o[s],n)}qt(e,n){let r=e.values||[];this.Ct(n,50);for(let i of r)this.Dt(i,n)}Bt(e,n){this.Ct(n,37),K.fromName(e).path.forEach(r=>{this.Ct(n,60),this.$t(r,n)})}Ct(e,n){e.Ft(n)}Ot(e){e.Ft(2)}};Gf.Ut=new Gf;var fI=class{constructor(){this.Dn=new pI}addToCollectionParentIndex(e,n){return this.Dn.add(n),L.resolve()}getCollectionParents(e,n){return L.resolve(this.Dn.getEntries(n))}addFieldIndex(e,n){return L.resolve()}deleteFieldIndex(e,n){return L.resolve()}deleteAllFieldIndexes(e){return L.resolve()}createTargetIndexes(e,n){return L.resolve()}getDocumentsMatchingTarget(e,n){return L.resolve(null)}getIndexType(e,n){return L.resolve(0)}getFieldIndexes(e,n){return L.resolve([])}getNextCollectionGroupToUpdate(e){return L.resolve(null)}getMinOffset(e,n){return L.resolve(Ko.min())}getMinOffsetFromCollectionGroup(e,n){return L.resolve(Ko.min())}updateCollectionGroup(e,n,r){return L.resolve()}updateIndexEntries(e,n){return L.resolve()}},pI=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new bt(je.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new bt(je.comparator)).toArray()}};var Xae=new Uint8Array(0);var cx={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},CN=41943040,bn=class t{static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}};bn.DEFAULT_COLLECTION_PERCENTILE=10,bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,bn.DEFAULT=new bn(CN,bn.DEFAULT_COLLECTION_PERCENTILE,bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),bn.DISABLED=new bn(-1,0,0);var zu=class t{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new t(0)}static ur(){return new t(-1)}};var ux="LruGarbageCollector",A3=1048576;function lx([t,e],[n,r]){let i=de(t,n);return i===0?de(e,r):i}var gI=class{constructor(e){this.Tr=e,this.buffer=new bt(lx),this.Ir=0}dr(){return++this.Ir}Er(e){let n=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(n);else{let r=this.buffer.last();lx(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}},mI=class{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){$(ux,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){ka(n)?$(ux,"Ignoring IndexedDB error during garbage collection: ",n):await Ma(n)}await this.Rr(3e5)})}},yI=class{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.mr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return L.resolve(yw.ue);let r=new gI(n);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.gr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?($("LruGarbageCollector","Garbage collection skipped; disabled"),L.resolve(cx)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?($("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),cx):this.pr(e,n))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,n){let r,i,o,s,a,u,l,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?($("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,s=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,a=Date.now(),this.removeTargets(e,r,n))).next(p=>(o=p,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(l=Date.now(),ua()<=fe.DEBUG&&$("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-h}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(u-a)+`ms
	Removed ${p} documents in `+(l-u)+`ms
Total Duration: ${l-h}ms`),L.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:p})))}};function R3(t,e){return new yI(t,e)}var vI=class{constructor(){this.changes=new ti(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,qn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?L.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var _I=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var EI=class{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Fu(r.mutation,i,Dn.empty(),ct.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ve()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ve()){let i=qo();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(o=>{let s=Mu();return o.forEach((a,u)=>{s=s.insert(a,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,n){let r=qo();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ve()))}populateOverlays(e,n,r){let i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{n.set(s,a)})})}computeViews(e,n,r,i){let o=ni(),s=Ou(),a=(function(){return Ou()})();return n.forEach((u,l)=>{let h=r.get(l.key);i.has(l.key)&&(h===void 0||h.mutation instanceof _r)?o=o.insert(l.key,l):h!==void 0?(s.set(l.key,h.mutation.getFieldMask()),Fu(h.mutation,l,h.mutation.getFieldMask(),ct.now())):s.set(l.key,Dn.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((l,h)=>s.set(l,h)),n.forEach((l,h)=>{var p;return a.set(l,new _I(h,(p=s.get(l))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,n){let r=Ou(),i=new ze((s,a)=>s-a),o=ve();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(s=>{for(let a of s)a.keys().forEach(u=>{let l=n.get(u);if(l===null)return;let h=r.get(u)||Dn.empty();h=a.applyToLocalView(l,h),r.set(u,h);let p=(i.get(a.batchId)||ve()).add(u);i=i.insert(a.batchId,p)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let u=a.getNext(),l=u.key,h=u.value,p=lN();h.forEach(g=>{if(!o.has(g)){let y=mN(n.get(g),r.get(g));y!==null&&p.set(g,y),o=o.add(g)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,p))}return L.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return(function(s){return K.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):oN(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):L.resolve(qo()),a=Vu,u=o;return s.next(l=>L.forEach(l,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),o.get(h)?L.resolve():this.remoteDocumentCache.getEntry(e,h).next(g=>{u=u.insert(h,g)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,u,l,ve())).next(h=>({batchId:a,changes:uN(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new K(n)).next(r=>{let i=Mu();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){let o=n.collectionGroup,s=Mu();return this.indexManager.getCollectionParents(e,o).next(a=>L.forEach(a,u=>{let l=(function(p,g){return new qi(g,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)})(n,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((p,g)=>{s=s.insert(p,g)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i))).next(s=>{o.forEach((u,l)=>{let h=l.getKey();s.get(h)===null&&(s=s.insert(h,qn.newInvalidDocument(h)))});let a=Mu();return s.forEach((u,l)=>{let h=o.get(u);h!==void 0&&Fu(h.mutation,l,Dn.empty(),ct.now()),gp(n,l)&&(a=a.insert(u,l))}),a})}};var II=class{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,n){return L.resolve(this.Br.get(n))}saveBundleMetadata(e,n){return this.Br.set(n.id,(function(i){return{id:i.id,version:i.version,createTime:yr(i.createTime)}})(n)),L.resolve()}getNamedQuery(e,n){return L.resolve(this.Lr.get(n))}saveNamedQuery(e,n){return this.Lr.set(n.name,(function(i){return{name:i.name,query:S3(i.bundledQuery),readTime:yr(i.readTime)}})(n)),L.resolve()}};var wI=class{constructor(){this.overlays=new ze(K.comparator),this.kr=new Map}getOverlay(e,n){return L.resolve(this.overlays.get(n))}getOverlays(e,n){let r=qo();return L.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,o)=>{this.wt(e,n,o)}),L.resolve()}removeOverlaysForBatchId(e,n,r){let i=this.kr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.kr.delete(r)),L.resolve()}getOverlaysForCollection(e,n,r){let i=qo(),o=n.length+1,s=new K(n.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let u=a.getNext().value,l=u.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return L.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new ze((l,h)=>l-h),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let h=o.get(l.largestBatchId);h===null&&(h=qo(),o=o.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}let a=qo(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,h)=>a.set(l,h)),!(a.size()>=i)););return L.resolve(a)}wt(e,n,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.kr.get(i.largestBatchId).delete(r.key);this.kr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new rI(n,r));let o=this.kr.get(n);o===void 0&&(o=ve(),this.kr.set(n,o)),this.kr.set(n,o.add(r.key))}};var bI=class{constructor(){this.sessionToken=Bt.EMPTY_BYTE_STRING}getSessionToken(e){return L.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,L.resolve()}};var Gu=class{constructor(){this.qr=new bt(ot.Qr),this.$r=new bt(ot.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,n){let r=new ot(e,n);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Wr(new ot(e,n))}Gr(e,n){e.forEach(r=>this.removeReference(r,n))}zr(e){let n=new K(new je([])),r=new ot(n,e),i=new ot(n,e+1),o=[];return this.$r.forEachInRange([r,i],s=>{this.Wr(s),o.push(s.key)}),o}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){let n=new K(new je([])),r=new ot(n,e),i=new ot(n,e+1),o=ve();return this.$r.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let n=new ot(e,0),r=this.qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}},ot=class{constructor(e,n){this.key=e,this.Hr=n}static Qr(e,n){return K.comparator(e.key,n.key)||de(e.Hr,n.Hr)}static Ur(e,n){return de(e.Hr,n.Hr)||K.comparator(e.key,n.key)}};var DI=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.er=1,this.Yr=new bt(ot.Qr)}checkEmpty(e){return L.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){let o=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new tI(o,n,r,i);this.mutationQueue.push(s);for(let a of i)this.Yr=this.Yr.add(new ot(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return L.resolve(s)}lookupMutationBatch(e,n){return L.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=this.Xr(r),o=i<0?0:i;return L.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return L.resolve(this.mutationQueue.length===0?vw:this.er-1)}getAllMutationBatches(e){return L.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let r=new ot(n,0),i=new ot(n,Number.POSITIVE_INFINITY),o=[];return this.Yr.forEachInRange([r,i],s=>{let a=this.Zr(s.Hr);o.push(a)}),L.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new bt(de);return n.forEach(i=>{let o=new ot(i,0),s=new ot(i,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([o,s],a=>{r=r.add(a.Hr)})}),L.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,o=r;K.isDocumentKey(o)||(o=o.child(""));let s=new ot(new K(o),0),a=new bt(de);return this.Yr.forEachWhile(u=>{let l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.Hr)),!0)},s),L.resolve(this.ei(a))}ei(e){let n=[];return e.forEach(r=>{let i=this.Zr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Ce(this.ti(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return L.forEach(n.mutations,i=>{let o=new ot(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,n){let r=new ot(n,0),i=this.Yr.firstAfterOrEqual(r);return L.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,L.resolve()}ti(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){let n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var TI=class{constructor(e){this.ni=e,this.docs=(function(){return new ze(K.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let r=n.key,i=this.docs.get(r),o=i?i.size:0,s=this.ni(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let r=this.docs.get(n);return L.resolve(r?r.document.mutableCopy():qn.newInvalidDocument(n))}getEntries(e,n){let r=ni();return n.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():qn.newInvalidDocument(i))}),L.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=ni(),s=n.path,a=new K(s.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){let{key:l,value:{document:h}}=u.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||RH(AH(h),r)<=0||(i.has(h.key)||gp(n,h))&&(o=o.insert(h.key,h.mutableCopy()))}return L.resolve(o)}getAllFromCollectionGroup(e,n,r,i){Y(9500)}ri(e,n){return L.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new CI(this)}getSize(e){return L.resolve(this.size)}},CI=class extends vI{constructor(e){super(),this.Or=e}applyChanges(e){let n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Or.addEntry(e,i)):this.Or.removeEntry(r)}),L.waitFor(n)}getFromCache(e,n){return this.Or.getEntry(e,n)}getAllFromCache(e,n){return this.Or.getEntries(e,n)}};var SI=class{constructor(e){this.persistence=e,this.ii=new ti(n=>bw(n),Dw),this.lastRemoteSnapshotVersion=ie.min(),this.highestTargetId=0,this.si=0,this.oi=new Gu,this.targetCount=0,this._i=zu.ar()}forEachTarget(e,n){return this.ii.forEach((r,i)=>n(i)),L.resolve()}getLastRemoteSnapshotVersion(e){return L.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return L.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),L.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.si&&(this.si=n),L.resolve()}hr(e){this.ii.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this._i=new zu(n),this.highestTargetId=n),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,n){return this.hr(n),this.targetCount+=1,L.resolve()}updateTargetData(e,n){return this.hr(n),L.resolve()}removeTargetData(e,n){return this.ii.delete(n.target),this.oi.zr(n.targetId),this.targetCount-=1,L.resolve()}removeTargets(e,n,r){let i=0,o=[];return this.ii.forEach((s,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.ii.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),L.waitFor(o).next(()=>i)}getTargetCount(e){return L.resolve(this.targetCount)}getTargetData(e,n){let r=this.ii.get(n)||null;return L.resolve(r)}addMatchingKeys(e,n,r){return this.oi.Kr(n,r),L.resolve()}removeMatchingKeys(e,n,r){this.oi.Gr(n,r);let i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),L.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.oi.zr(n),L.resolve()}getMatchingKeysForTargetId(e,n){let r=this.oi.Jr(n);return L.resolve(r)}containsKey(e,n){return L.resolve(this.oi.containsKey(n))}};var Wf=class{constructor(e,n){this.ai={},this.overlays={},this.ui=new yw(0),this.ci=!1,this.ci=!0,this.li=new bI,this.referenceDelegate=e(this),this.hi=new SI(this),this.indexManager=new fI,this.remoteDocumentCache=(function(i){return new TI(i)})(r=>this.referenceDelegate.Pi(r)),this.serializer=new hI(n),this.Ti=new II(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new wI,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ai[e.toKey()];return r||(r=new DI(n,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,n,r){$("MemoryPersistence","Starting transaction:",e);let i=new AI(this.ui.next());return this.referenceDelegate.Ii(),r(i).next(o=>this.referenceDelegate.di(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ei(e,n){return L.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,n)))}},AI=class extends LE{constructor(e){super(),this.currentSequenceNumber=e}},RI=class t{constructor(e){this.persistence=e,this.Ai=new Gu,this.Ri=null}static Vi(e){return new t(e)}get mi(){if(this.Ri)return this.Ri;throw Y(60996)}addReference(e,n,r){return this.Ai.addReference(r,n),this.mi.delete(r.toString()),L.resolve()}removeReference(e,n,r){return this.Ai.removeReference(r,n),this.mi.add(r.toString()),L.resolve()}markPotentiallyOrphaned(e,n){return this.mi.add(n.toString()),L.resolve()}removeTarget(e,n){this.Ai.zr(n.targetId).forEach(i=>this.mi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(o=>this.mi.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}Ii(){this.Ri=new Set}di(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return L.forEach(this.mi,r=>{let i=K.fromPath(r);return this.fi(e,i).next(o=>{o||n.removeEntry(i,ie.min())})}).next(()=>(this.Ri=null,n.apply(e)))}updateLimboDocument(e,n){return this.fi(e,n).next(r=>{r?this.mi.delete(n.toString()):this.mi.add(n.toString())})}Pi(e){return 0}fi(e,n){return L.or([()=>L.resolve(this.Ai.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}},Kf=class t{constructor(e,n){this.persistence=e,this.gi=new ti(r=>kH(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=R3(this,n)}static Vi(e,n){return new t(e,n)}Ii(){}di(e){return L.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}mr(e){let n=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}yr(e){let n=0;return this.gr(e,r=>{n++}).next(()=>n)}gr(e,n){return L.forEach(this.gi,(r,i)=>this.Sr(e,r,i).next(o=>o?L.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ri(e,s=>this.Sr(e,s,n).next(a=>{a||(r++,o.removeEntry(s,ie.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.gi.set(n,e.currentSequenceNumber),L.resolve()}removeTarget(e,n){let r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),L.resolve()}removeReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),L.resolve()}updateLimboDocument(e,n){return this.gi.set(n,e.currentSequenceNumber),L.resolve()}Pi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=xf(e.data.value)),n}Sr(e,n,r){return L.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{let i=this.gi.get(n);return L.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var xI=class t{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Is=r,this.ds=i}static Es(e,n){let r=ve(),i=ve();for(let o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new t(e,n.fromCache,r,i)}};var NI=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var MI=class{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return aA()?8:NH(It())>0?6:4})()}initialize(e,n){this.gs=e,this.indexManager=n,this.As=!0}getDocumentsMatchingQuery(e,n,r,i){let o={result:null};return this.ps(e,n).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ys(e,n,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new NI;return this.ws(e,n,s).next(a=>{if(o.result=a,this.Rs)return this.Ss(e,n,s,a.size)})}).next(()=>o.result)}Ss(e,n,r,i){return r.documentReadCount<this.Vs?(ua()<=fe.DEBUG&&$("QueryEngine","SDK will not create cache indexes for query:",la(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),L.resolve()):(ua()<=fe.DEBUG&&$("QueryEngine","Query:",la(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.fs*i?(ua()<=fe.DEBUG&&$("QueryEngine","The SDK decides to create cache indexes for query:",la(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,mr(n))):L.resolve())}ps(e,n){if(JR(n))return L.resolve(null);let r=mr(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=JE(n,null,"F"),r=mr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=ve(...o);return this.gs.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{let l=this.bs(n,a);return this.Ds(n,l,s,u.readTime)?this.ps(e,JE(n,null,"F")):this.vs(e,l,n,u)}))})))}ys(e,n,r,i){return JR(n)||i.isEqual(ie.min())?L.resolve(null):this.gs.getDocuments(e,r).next(o=>{let s=this.bs(n,o);return this.Ds(n,s,r,i)?L.resolve(null):(ua()<=fe.DEBUG&&$("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),la(n)),this.vs(e,s,n,SH(i,Vu)).next(a=>a))})}bs(e,n){let r=new bt(aN(e));return n.forEach((i,o)=>{gp(e,o)&&(r=r.add(o))}),r}Ds(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;let o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}ws(e,n,r){return ua()<=fe.DEBUG&&$("QueryEngine","Using full collection scan to execute query:",la(n)),this.gs.getDocumentsMatchingQuery(e,n,Ko.min(),r)}vs(e,n,r,i){return this.gs.getDocumentsMatchingQuery(e,r,i).next(o=>(n.forEach(s=>{o=o.insert(s.key,s)}),o))}};var Sw="LocalStore",x3=3e8,kI=class{constructor(e,n,r,i){this.persistence=e,this.Cs=n,this.serializer=i,this.Fs=new ze(de),this.Ms=new ti(o=>bw(o),Dw),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new EI(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Fs))}};function N3(t,e,n,r){return new kI(t,e,n,r)}async function SN(t,e){let n=ne(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n.Ns(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],u=ve();for(let l of i){s.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}for(let l of o){a.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}return n.localDocuments.getDocuments(r,u).next(l=>({Bs:l,removedBatchIds:s,addedBatchIds:a}))})})}function M3(t,e){let n=ne(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=n.Os.newChangeBuffer({trackRemovals:!0});return(function(a,u,l,h){let p=l.batch,g=p.keys(),y=L.resolve();return g.forEach(w=>{y=y.next(()=>h.getEntry(u,w)).next(k=>{let x=l.docVersions.get(w);Ce(x!==null,48541),k.version.compareTo(x)<0&&(p.applyToRemoteDocument(k,l),k.isValidDocument()&&(k.setReadTime(l.commitVersion),h.addEntry(k)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(u,p))})(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(a){let u=ve();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u})(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function AN(t){let e=ne(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.hi.getLastRemoteSnapshotVersion(n))}function k3(t,e){let n=ne(t),r=e.snapshotVersion,i=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=n.Os.newChangeBuffer({trackRemovals:!0});i=n.Fs;let a=[];e.targetChanges.forEach((h,p)=>{let g=i.get(p);if(!g)return;a.push(n.hi.removeMatchingKeys(o,h.removedDocuments,p).next(()=>n.hi.addMatchingKeys(o,h.addedDocuments,p)));let y=g.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?y=y.withResumeToken(Bt.EMPTY_BYTE_STRING,ie.min()).withLastLimboFreeSnapshotVersion(ie.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,r)),i=i.insert(p,y),(function(k,x,j){return k.resumeToken.approximateByteSize()===0||x.snapshotVersion.toMicroseconds()-k.snapshotVersion.toMicroseconds()>=x3?!0:j.addedDocuments.size+j.modifiedDocuments.size+j.removedDocuments.size>0})(g,y,h)&&a.push(n.hi.updateTargetData(o,y))});let u=ni(),l=ve();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(o,h))}),a.push(P3(o,s,e.documentUpdates).next(h=>{u=h.Ls,l=h.ks})),!r.isEqual(ie.min())){let h=n.hi.getLastRemoteSnapshotVersion(o).next(p=>n.hi.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(h)}return L.waitFor(a).next(()=>s.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,u,l)).next(()=>u)}).then(o=>(n.Fs=i,o))}function P3(t,e,n){let r=ve(),i=ve();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let s=ni();return n.forEach((a,u)=>{let l=o.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(ie.min())?(e.removeEntry(a,u.readTime),s=s.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),s=s.insert(a,u)):$(Sw,"Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{Ls:s,ks:i}})}function O3(t,e){let n=ne(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=vw),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function F3(t,e){let n=ne(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.hi.getTargetData(r,e).next(o=>o?(i=o,L.resolve(i)):n.hi.allocateTargetId(r).next(s=>(i=new qu(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.hi.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=n.Fs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(r.targetId,r),n.Ms.set(e,r.targetId)),r})}async function PI(t,e,n){let r=ne(t),i=r.Fs.get(e),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i))}catch(s){if(!ka(s))throw s;$(Sw,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(i.target)}function dx(t,e,n){let r=ne(t),i=ie.min(),o=ve();return r.persistence.runTransaction("Execute query","readwrite",s=>(function(u,l,h){let p=ne(u),g=p.Ms.get(h);return g!==void 0?L.resolve(p.Fs.get(g)):p.hi.getTargetData(l,h)})(r,s,mr(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(s,a.targetId).next(u=>{o=u})}).next(()=>r.Cs.getDocumentsMatchingQuery(s,e,n?i:ie.min(),n?o:ve())).next(a=>(L3(r,YH(e),a),{documents:a,qs:o})))}function L3(t,e,n){let r=t.xs.get(e)||ie.min();n.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.xs.set(e,r)}var Qf=class{constructor(){this.activeTargetIds=n3()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var OI=class{constructor(){this.Fo=new Qf,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,n,r){this.Mo[e]=n}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new Qf,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var FI=class{xo(e){}shutdown(){}};var hx="ConnectivityMonitor",Yf=class{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){$(hx,"Network connectivity changed: AVAILABLE");for(let e of this.ko)e(0)}Lo(){$(hx,"Network connectivity changed: UNAVAILABLE");for(let e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Rf=null;function LI(){return Rf===null?Rf=(function(){return 268435456+Math.round(2147483648*Math.random())})():Rf++,"0x"+Rf.toString(16)}var CE="RestConnection",V3={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},VI=class{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.$o=n+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.Ko=this.databaseId.database===Vf?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,n,r,i,o){let s=LI(),a=this.Go(e,n.toUriEncodedString());$(CE,`Sending RPC '${e}' ${s}:`,a,r);let u={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(u,i,o);let{host:l}=new URL(a),h=Un(l);return this.jo(e,a,u,r,h).then(p=>($(CE,`Received RPC '${e}' ${s}: `,p),p),p=>{throw $i(CE,`RPC '${e}' ${s} failed with error: `,p,"url: ",a,"request:",r),p})}Jo(e,n,r,i,o,s){return this.Wo(e,n,r,i,o)}zo(e,n,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Na})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}Go(e,n){let r=V3[e];return`${this.$o}/v1/${n}:${r}`}terminate(){}};var jI=class{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}};var jt="WebChannelConnection",UI=class extends VI{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,n,r,i,o){let s=LI();return new Promise((a,u)=>{let l=new EE;l.setWithCredentials(!0),l.listenOnce(IE.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Nu.NO_ERROR:let p=l.getResponseJson();$(jt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(p)),a(p);break;case Nu.TIMEOUT:$(jt,`RPC '${e}' ${s} timed out`),u(new B(O.DEADLINE_EXCEEDED,"Request time out"));break;case Nu.HTTP_ERROR:let g=l.getStatus();if($(jt,`RPC '${e}' ${s} failed with status:`,g,"response text:",l.getResponseText()),g>0){let y=l.getResponseJson();Array.isArray(y)&&(y=y[0]);let w=y?.error;if(w&&w.status&&w.message){let k=(function(j){let z=j.toLowerCase().replace(/_/g,"-");return Object.values(O).indexOf(z)>=0?z:O.UNKNOWN})(w.status);u(new B(k,w.message))}else u(new B(O.UNKNOWN,"Server responded with status "+l.getStatus()))}else u(new B(O.UNAVAILABLE,"Connection failed."));break;default:Y(9055,{c_:e,streamId:s,l_:l.getLastErrorCode(),h_:l.getLastError()})}}finally{$(jt,`RPC '${e}' ${s} completed.`)}});let h=JSON.stringify(i);$(jt,`RPC '${e}' ${s} sending request:`,i),l.send(n,"POST",h,r,15)})}P_(e,n,r){let i=LI(),o=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=DE(),a=bE(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.zo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;let h=o.join("");$(jt,`Creating RPC '${e}' stream ${i}: ${h}`,u);let p=s.createWebChannel(h,u);this.T_(p);let g=!1,y=!1,w=new jI({Ho:x=>{y?$(jt,`Not sending because RPC '${e}' stream ${i} is closed:`,x):(g||($(jt,`Opening RPC '${e}' stream ${i} transport.`),p.open(),g=!0),$(jt,`RPC '${e}' stream ${i} sending:`,x),p.send(x))},Yo:()=>p.close()}),k=(x,j,z)=>{x.listen(j,W=>{try{z(W)}catch(oe){setTimeout(()=>{throw oe},0)}})};return k(p,ca.EventType.OPEN,()=>{y||($(jt,`RPC '${e}' stream ${i} transport opened.`),w.s_())}),k(p,ca.EventType.CLOSE,()=>{y||(y=!0,$(jt,`RPC '${e}' stream ${i} transport closed`),w.__(),this.I_(p))}),k(p,ca.EventType.ERROR,x=>{y||(y=!0,$i(jt,`RPC '${e}' stream ${i} transport errored. Name:`,x.name,"Message:",x.message),w.__(new B(O.UNAVAILABLE,"The operation could not be completed")))}),k(p,ca.EventType.MESSAGE,x=>{var j;if(!y){let z=x.data[0];Ce(!!z,16349);let W=z,oe=W?.error||((j=W[0])===null||j===void 0?void 0:j.error);if(oe){$(jt,`RPC '${e}' stream ${i} received error:`,oe);let Ze=oe.status,Ie=(function(E){let I=it[E];if(I!==void 0)return vN(I)})(Ze),b=oe.message;Ie===void 0&&(Ie=O.INTERNAL,b="Unknown error status: "+Ze+" with message "+oe.message),y=!0,w.__(new B(Ie,b)),p.close()}else $(jt,`RPC '${e}' stream ${i} received:`,z),w.a_(z)}}),k(a,wE.STAT_EVENT,x=>{x.stat===Cf.PROXY?$(jt,`RPC '${e}' stream ${i} detected buffering proxy`):x.stat===Cf.NOPROXY&&$(jt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{w.o_()},0),w}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(n=>n===e)}};function SE(){return typeof document<"u"?document:null}function mp(t){return new aI(t,!0)}var Zf=class{constructor(e,n,r=1e3,i=1.5,o=6e4){this.Fi=e,this.timerId=n,this.d_=r,this.E_=i,this.A_=o,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();let n=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,n-r);i>0&&$("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}};var fx="PersistentStream",Jf=class{constructor(e,n,r,i,o,s,a,u){this.Fi=e,this.w_=r,this.S_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new Zf(e,n)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():n&&n.code===O.RESOURCE_EXHAUSTED?(Jr(n.toString()),Jr("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):n&&n.code===O.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(n)}U_(){}auth(){this.state=1;let e=this.K_(this.b_),n=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.b_===n&&this.W_(r,i)},r=>{e(()=>{let i=new B(O.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(i)})})}W_(e,n){let r=this.K_(this.b_);this.stream=this.z_(e,n),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(i=>{r(()=>this.G_(i))}),this.stream.onMessage(i=>{r(()=>++this.C_==1?this.j_(i):this.onNext(i))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return $(fx,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return n=>{this.Fi.enqueueAndForget(()=>this.b_===e?n():($(fx,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},BI=class extends Jf{constructor(e,n,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}z_(e,n){return this.connection.P_("Listen",e,n)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();let n=m3(this.serializer,e),r=(function(o){if(!("targetChange"in o))return ie.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?ie.min():s.readTime?yr(s.readTime):ie.min()})(e);return this.listener.J_(n,r)}H_(e){let n={};n.database=dI(this.serializer),n.addTarget=(function(o,s){let a,u=s.target;if(a=YE(u)?{documents:_3(o,u)}:{query:E3(o,u).Vt},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=_N(o,s.resumeToken);let l=cI(o,s.expectedCount);l!==null&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(ie.min())>0){a.readTime=zf(o,s.snapshotVersion.toTimestamp());let l=cI(o,s.expectedCount);l!==null&&(a.expectedCount=l)}return a})(this.serializer,e);let r=w3(this.serializer,e);r&&(n.labels=r),this.k_(n)}Y_(e){let n={};n.database=dI(this.serializer),n.removeTarget=e,this.k_(n)}},$I=class extends Jf{constructor(e,n,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,n){return this.connection.P_("Write",e,n)}j_(e){return Ce(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ce(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){Ce(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();let n=v3(e.writeResults,e.commitTime),r=yr(e.commitTime);return this.listener.ta(r,n)}na(){let e={};e.database=dI(this.serializer),this.k_(e)}X_(e){let n={streamToken:this.lastStreamToken,writes:e.map(r=>y3(this.serializer,r))};this.k_(n)}};var HI=class{},qI=class extends HI{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ra=!1}ia(){if(this.ra)throw new B(O.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Wo(e,uI(n,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===O.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new B(O.UNKNOWN,o.toString())})}Jo(e,n,r,i,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Jo(e,uI(n,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===O.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new B(O.UNKNOWN,s.toString())})}terminate(){this.ra=!0,this.connection.terminate()}},zI=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Jr(n),this._a=!1):$("OnlineStateTracker",n)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}};var Xo="RemoteStore",GI=class{constructor(e,n,r,i,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=o,this.Ea.xo(s=>{r.enqueueAndForget(async()=>{ns(this)&&($(Xo,"Restarting streams for network reachability change."),await(async function(u){let l=ne(u);l.Ia.add(4),await Yu(l),l.Aa.set("Unknown"),l.Ia.delete(4),await yp(l)})(this))})}),this.Aa=new zI(r,i)}};async function yp(t){if(ns(t))for(let e of t.da)await e(!0)}async function Yu(t){for(let e of t.da)await e(!1)}function RN(t,e){let n=ne(t);n.Ta.has(e.targetId)||(n.Ta.set(e.targetId,e),Nw(n)?xw(n):Pa(n).x_()&&Rw(n,e))}function Aw(t,e){let n=ne(t),r=Pa(n);n.Ta.delete(e),r.x_()&&xN(n,e),n.Ta.size===0&&(r.x_()?r.B_():ns(n)&&n.Aa.set("Unknown"))}function Rw(t,e){if(t.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ie.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Pa(t).H_(e)}function xN(t,e){t.Ra.$e(e),Pa(t).Y_(e)}function xw(t){t.Ra=new sI({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>t.Ta.get(e)||null,lt:()=>t.datastore.serializer.databaseId}),Pa(t).start(),t.Aa.aa()}function Nw(t){return ns(t)&&!Pa(t).M_()&&t.Ta.size>0}function ns(t){return ne(t).Ia.size===0}function NN(t){t.Ra=void 0}async function j3(t){t.Aa.set("Online")}async function U3(t){t.Ta.forEach((e,n)=>{Rw(t,e)})}async function B3(t,e){NN(t),Nw(t)?(t.Aa.la(e),xw(t)):t.Aa.set("Unknown")}async function $3(t,e,n){if(t.Aa.set("Online"),e instanceof Hf&&e.state===2&&e.cause)try{await(async function(i,o){let s=o.cause;for(let a of o.targetIds)i.Ta.has(a)&&(await i.remoteSyncer.rejectListen(a,s),i.Ta.delete(a),i.Ra.removeTarget(a))})(t,e)}catch(r){$(Xo,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Xf(t,r)}else if(e instanceof ga?t.Ra.Ye(e):e instanceof $f?t.Ra.it(e):t.Ra.et(e),!n.isEqual(ie.min()))try{let r=await AN(t.localStore);n.compareTo(r)>=0&&await(function(o,s){let a=o.Ra.Pt(s);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){let h=o.Ta.get(l);h&&o.Ta.set(l,h.withResumeToken(u.resumeToken,s))}}),a.targetMismatches.forEach((u,l)=>{let h=o.Ta.get(u);if(!h)return;o.Ta.set(u,h.withResumeToken(Bt.EMPTY_BYTE_STRING,h.snapshotVersion)),xN(o,u);let p=new qu(h.target,u,l,h.sequenceNumber);Rw(o,p)}),o.remoteSyncer.applyRemoteEvent(a)})(t,n)}catch(r){$(Xo,"Failed to raise snapshot:",r),await Xf(t,r)}}async function Xf(t,e,n){if(!ka(e))throw e;t.Ia.add(1),await Yu(t),t.Aa.set("Offline"),n||(n=()=>AN(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{$(Xo,"Retrying IndexedDB access"),await n(),t.Ia.delete(1),await yp(t)})}function MN(t,e){return e().catch(n=>Xf(t,n,e))}async function vp(t){let e=ne(t),n=zi(e),r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:vw;for(;H3(e);)try{let i=await O3(e.localStore,r);if(i===null){e.Pa.length===0&&n.B_();break}r=i.batchId,q3(e,i)}catch(i){await Xf(e,i)}kN(e)&&PN(e)}function H3(t){return ns(t)&&t.Pa.length<10}function q3(t,e){t.Pa.push(e);let n=zi(t);n.x_()&&n.Z_&&n.X_(e.mutations)}function kN(t){return ns(t)&&!zi(t).M_()&&t.Pa.length>0}function PN(t){zi(t).start()}async function z3(t){zi(t).na()}async function G3(t){let e=zi(t);for(let n of t.Pa)e.X_(n.mutations)}async function W3(t,e,n){let r=t.Pa.shift(),i=nI.from(r,e,n);await MN(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await vp(t)}async function K3(t,e){e&&zi(t).Z_&&await(async function(r,i){if((function(s){return u3(s)&&s!==O.ABORTED})(i.code)){let o=r.Pa.shift();zi(r).N_(),await MN(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),await vp(r)}})(t,e),kN(t)&&PN(t)}async function px(t,e){let n=ne(t);n.asyncQueue.verifyOperationInProgress(),$(Xo,"RemoteStore received new credentials");let r=ns(n);n.Ia.add(3),await Yu(n),r&&n.Aa.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ia.delete(3),await yp(n)}async function Q3(t,e){let n=ne(t);e?(n.Ia.delete(2),await yp(n)):e||(n.Ia.add(2),await Yu(n),n.Aa.set("Unknown"))}function Pa(t){return t.Va||(t.Va=(function(n,r,i){let o=ne(n);return o.ia(),new BI(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(t.datastore,t.asyncQueue,{Zo:j3.bind(null,t),e_:U3.bind(null,t),n_:B3.bind(null,t),J_:$3.bind(null,t)}),t.da.push(async e=>{e?(t.Va.N_(),Nw(t)?xw(t):t.Aa.set("Unknown")):(await t.Va.stop(),NN(t))})),t.Va}function zi(t){return t.ma||(t.ma=(function(n,r,i){let o=ne(n);return o.ia(),new $I(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),e_:z3.bind(null,t),n_:K3.bind(null,t),ea:G3.bind(null,t),ta:W3.bind(null,t)}),t.da.push(async e=>{e?(t.ma.N_(),await vp(t)):(await t.ma.stop(),t.Pa.length>0&&($(Xo,`Stopping write stream with ${t.Pa.length} pending writes`),t.Pa=[]))})),t.ma}var WI=class t{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new pr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){let s=Date.now()+r,a=new t(e,n,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new B(O.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function Mw(t,e){if(Jr("AsyncQueue",`${e}: ${t}`),ka(t))return new B(O.UNAVAILABLE,`${e}: ${t}`);throw t}var ep=class t{static emptySet(e){return new t(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||K.comparator(n.key,r.key):(n,r)=>K.comparator(n.key,r.key),this.keyedMap=Mu(),this.sortedSet=new ze(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}};var tp=class{constructor(){this.fa=new ze(K.comparator)}track(e){let n=e.doc.key,r=this.fa.get(n);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(n,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(n):e.type===1&&r.type===2?this.fa=this.fa.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):Y(63341,{At:e,ga:r}):this.fa=this.fa.insert(n,e)}pa(){let e=[];return this.fa.inorderTraversal((n,r)=>{e.push(r)}),e}},Aa=class t{constructor(e,n,r,i,o,s,a,u,l){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,n,r,i,o){let s=[];return n.forEach(a=>{s.push({type:0,doc:a})}),new t(e,n,ep.emptySet(n),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&pp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}};var KI=class{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}},QI=class{constructor(){this.queries=gx(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(n,r){let i=ne(n),o=i.queries;i.queries=gx(),o.forEach((s,a)=>{for(let u of a.wa)u.onError(r)})})(this,new B(O.ABORTED,"Firestore shutting down"))}};function gx(){return new ti(t=>sN(t),pp)}async function Y3(t,e){let n=ne(t),r=3,i=e.query,o=n.queries.get(i);o?!o.Sa()&&e.ba()&&(r=2):(o=new KI,r=e.ba()?0:1);try{switch(r){case 0:o.ya=await n.onListen(i,!0);break;case 1:o.ya=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(s){let a=Mw(s,`Initialization of query '${la(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,o),o.wa.push(e),e.va(n.onlineState),o.ya&&e.Ca(o.ya)&&kw(n)}async function Z3(t,e){let n=ne(t),r=e.query,i=3,o=n.queries.get(r);if(o){let s=o.wa.indexOf(e);s>=0&&(o.wa.splice(s,1),o.wa.length===0?i=e.ba()?0:1:!o.Sa()&&e.ba()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function J3(t,e){let n=ne(t),r=!1;for(let i of e){let o=i.query,s=n.queries.get(o);if(s){for(let a of s.wa)a.Ca(i)&&(r=!0);s.ya=i}}r&&kw(n)}function X3(t,e,n){let r=ne(t),i=r.queries.get(e);if(i)for(let o of i.wa)o.onError(n);r.queries.delete(e)}function kw(t){t.Da.forEach(e=>{e.next()})}var YI,mx;(mx=YI||(YI={})).Fa="default",mx.Cache="cache";var ZI=class{constructor(e,n,r){this.query=e,this.Ma=n,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Aa(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),n=!0):this.Ba(e,this.onlineState)&&(this.La(e),n=!0),this.Oa=e,n}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let n=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),n=!0),n}Ba(e,n){if(!e.fromCache||!this.ba())return!0;let r=n!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Na(e){if(e.docChanges.length>0)return!0;let n=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}La(e){e=Aa.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==YI.Cache}};var np=class{constructor(e){this.key=e}},rp=class{constructor(e){this.key=e}},JI=class{constructor(e,n){this.query=e,this.Ha=n,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=ve(),this.mutatedKeys=ve(),this.Xa=aN(e),this.eu=new ep(this.Xa)}get tu(){return this.Ha}nu(e,n){let r=n?n.ru:new tp,i=n?n.eu:this.eu,o=n?n.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let g=i.get(h),y=gp(this.query,p)?p:null,w=!!g&&this.mutatedKeys.has(g.key),k=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations),x=!1;g&&y?g.data.isEqual(y.data)?w!==k&&(r.track({type:3,doc:y}),x=!0):this.iu(g,y)||(r.track({type:2,doc:y}),x=!0,(u&&this.Xa(y,u)>0||l&&this.Xa(y,l)<0)&&(a=!0)):!g&&y?(r.track({type:0,doc:y}),x=!0):g&&!y&&(r.track({type:1,doc:g}),x=!0,(u||l)&&(a=!0)),x&&(y?(s=s.add(y),o=k?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let h=this.query.limitType==="F"?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{eu:s,ru:r,Ds:a,mutatedKeys:o}}iu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){let o=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;let s=e.ru.pa();s.sort((h,p)=>(function(y,w){let k=x=>{switch(x){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Y(20277,{At:x})}};return k(y)-k(w)})(h.type,p.type)||this.Xa(h.doc,p.doc)),this.su(r),i=i!=null&&i;let a=n&&!i?this.ou():[],u=this.Za.size===0&&this.current&&!i?1:0,l=u!==this.Ya;return this.Ya=u,s.length!==0||l?{snapshot:new Aa(this.query,e.eu,o,s,e.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:a}:{_u:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new tp,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}ou(){if(!this.current)return[];let e=this.Za;this.Za=ve(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});let n=[];return e.forEach(r=>{this.Za.has(r)||n.push(new rp(r))}),this.Za.forEach(r=>{e.has(r)||n.push(new np(r))}),n}uu(e){this.Ha=e.qs,this.Za=ve();let n=this.nu(e.documents);return this.applyChanges(n,!0)}cu(){return Aa.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}},Pw="SyncEngine",XI=class{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}},ew=class{constructor(e){this.key=e,this.lu=!1}},tw=class{constructor(e,n,r,i,o,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.hu={},this.Pu=new ti(a=>sN(a),pp),this.Tu=new Map,this.Iu=new Set,this.du=new ze(K.comparator),this.Eu=new Map,this.Au=new Gu,this.Ru={},this.Vu=new Map,this.mu=zu.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}};async function e4(t,e,n=!0){let r=UN(t),i,o=r.Pu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.cu()):i=await ON(r,e,n,!0),i}async function t4(t,e){let n=UN(t);await ON(n,e,!0,!1)}async function ON(t,e,n,r){let i=await F3(t.localStore,mr(e)),o=i.targetId,s=t.sharedClientState.addLocalQueryTarget(o,n),a;return r&&(a=await n4(t,e,o,s==="current",i.resumeToken)),t.isPrimaryClient&&n&&RN(t.remoteStore,i),a}async function n4(t,e,n,r,i){t.gu=(p,g,y)=>(async function(k,x,j,z){let W=x.view.nu(j);W.Ds&&(W=await dx(k.localStore,x.query,!1).then(({documents:b})=>x.view.nu(b,W)));let oe=z&&z.targetChanges.get(x.targetId),Ze=z&&z.targetMismatches.get(x.targetId)!=null,Ie=x.view.applyChanges(W,k.isPrimaryClient,oe,Ze);return vx(k,x.targetId,Ie._u),Ie.snapshot})(t,p,g,y);let o=await dx(t.localStore,e,!0),s=new JI(e,o.qs),a=s.nu(o.documents),u=Hu.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),l=s.applyChanges(a,t.isPrimaryClient,u);vx(t,n,l._u);let h=new XI(e,n,s);return t.Pu.set(e,h),t.Tu.has(n)?t.Tu.get(n).push(e):t.Tu.set(n,[e]),l.snapshot}async function r4(t,e,n){let r=ne(t),i=r.Pu.get(e),o=r.Tu.get(i.targetId);if(o.length>1)return r.Tu.set(i.targetId,o.filter(s=>!pp(s,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await PI(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Aw(r.remoteStore,i.targetId),nw(r,i.targetId)}).catch(Ma)):(nw(r,i.targetId),await PI(r.localStore,i.targetId,!0))}async function i4(t,e){let n=ne(t),r=n.Pu.get(e),i=n.Tu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Aw(n.remoteStore,r.targetId))}async function o4(t,e,n){let r=h4(t);try{let i=await(function(s,a){let u=ne(s),l=ct.now(),h=a.reduce((y,w)=>y.add(w.key),ve()),p,g;return u.persistence.runTransaction("Locally write mutations","readwrite",y=>{let w=ni(),k=ve();return u.Os.getEntries(y,h).next(x=>{w=x,w.forEach((j,z)=>{z.isValidDocument()||(k=k.add(j))})}).next(()=>u.localDocuments.getOverlayedDocuments(y,w)).next(x=>{p=x;let j=[];for(let z of a){let W=c3(z,p.get(z.key).overlayedDocument);W!=null&&j.push(new _r(z.key,W,Jx(W.value.mapValue),Zr.exists(!0)))}return u.mutationQueue.addMutationBatch(y,l,j,a)}).next(x=>{g=x;let j=x.applyToLocalDocumentSet(p,k);return u.documentOverlayCache.saveOverlays(y,x.batchId,j)})}).then(()=>({batchId:g.batchId,changes:uN(p)}))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(s,a,u){let l=s.Ru[s.currentUser.toKey()];l||(l=new ze(de)),l=l.insert(a,u),s.Ru[s.currentUser.toKey()]=l})(r,i.batchId,n),await Zu(r,i.changes),await vp(r.remoteStore)}catch(i){let o=Mw(i,"Failed to persist write");n.reject(o)}}async function FN(t,e){let n=ne(t);try{let r=await k3(n.localStore,e);e.targetChanges.forEach((i,o)=>{let s=n.Eu.get(o);s&&(Ce(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.lu=!0:i.modifiedDocuments.size>0?Ce(s.lu,14607):i.removedDocuments.size>0&&(Ce(s.lu,42227),s.lu=!1))}),await Zu(n,r,e)}catch(r){await Ma(r)}}function yx(t,e,n){let r=ne(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.Pu.forEach((o,s)=>{let a=s.view.va(e);a.snapshot&&i.push(a.snapshot)}),(function(s,a){let u=ne(s);u.onlineState=a;let l=!1;u.queries.forEach((h,p)=>{for(let g of p.wa)g.va(a)&&(l=!0)}),l&&kw(u)})(r.eventManager,e),i.length&&r.hu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function s4(t,e,n){let r=ne(t);r.sharedClientState.updateQueryState(e,"rejected",n);let i=r.Eu.get(e),o=i&&i.key;if(o){let s=new ze(K.comparator);s=s.insert(o,qn.newNoDocument(o,ie.min()));let a=ve().add(o),u=new Bf(ie.min(),new Map,new ze(de),s,a);await FN(r,u),r.du=r.du.remove(o),r.Eu.delete(e),Ow(r)}else await PI(r.localStore,e,!1).then(()=>nw(r,e,n)).catch(Ma)}async function a4(t,e){let n=ne(t),r=e.batch.batchId;try{let i=await M3(n.localStore,e);VN(n,r,null),LN(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Zu(n,i)}catch(i){await Ma(i)}}async function c4(t,e,n){let r=ne(t);try{let i=await(function(s,a){let u=ne(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return u.mutationQueue.lookupMutationBatch(l,a).next(p=>(Ce(p!==null,37113),h=p.keys(),u.mutationQueue.removeMutationBatch(l,p))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,h,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>u.localDocuments.getDocuments(l,h))})})(r.localStore,e);VN(r,e,n),LN(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Zu(r,i)}catch(i){await Ma(i)}}function LN(t,e){(t.Vu.get(e)||[]).forEach(n=>{n.resolve()}),t.Vu.delete(e)}function VN(t,e,n){let r=ne(t),i=r.Ru[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Ru[r.currentUser.toKey()]=i}}function nw(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let r of t.Tu.get(e))t.Pu.delete(r),n&&t.hu.pu(r,n);t.Tu.delete(e),t.isPrimaryClient&&t.Au.zr(e).forEach(r=>{t.Au.containsKey(r)||jN(t,r)})}function jN(t,e){t.Iu.delete(e.path.canonicalString());let n=t.du.get(e);n!==null&&(Aw(t.remoteStore,n),t.du=t.du.remove(e),t.Eu.delete(n),Ow(t))}function vx(t,e,n){for(let r of n)r instanceof np?(t.Au.addReference(r.key,e),u4(t,r)):r instanceof rp?($(Pw,"Document no longer in limbo: "+r.key),t.Au.removeReference(r.key,e),t.Au.containsKey(r.key)||jN(t,r.key)):Y(19791,{yu:r})}function u4(t,e){let n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Iu.has(r)||($(Pw,"New document in limbo: "+n),t.Iu.add(r),Ow(t))}function Ow(t){for(;t.Iu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){let e=t.Iu.values().next().value;t.Iu.delete(e);let n=new K(je.fromString(e)),r=t.mu.next();t.Eu.set(r,new ew(n)),t.du=t.du.insert(n,r),RN(t.remoteStore,new qu(mr(iN(n.path)),r,"TargetPurposeLimboResolution",yw.ue))}}async function Zu(t,e,n){let r=ne(t),i=[],o=[],s=[];r.Pu.isEmpty()||(r.Pu.forEach((a,u)=>{s.push(r.gu(u,e,n).then(l=>{var h;if((l||n)&&r.isPrimaryClient){let p=l?!l.fromCache:(h=n?.targetChanges.get(u.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(l){i.push(l);let p=xI.Es(u.targetId,l);o.push(p)}}))}),await Promise.all(s),r.hu.J_(i),await(async function(u,l){let h=ne(u);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>L.forEach(l,g=>L.forEach(g.Is,y=>h.persistence.referenceDelegate.addReference(p,g.targetId,y)).next(()=>L.forEach(g.ds,y=>h.persistence.referenceDelegate.removeReference(p,g.targetId,y)))))}catch(p){if(!ka(p))throw p;$(Sw,"Failed to update sequence numbers: "+p)}for(let p of l){let g=p.targetId;if(!p.fromCache){let y=h.Fs.get(g),w=y.snapshotVersion,k=y.withLastLimboFreeSnapshotVersion(w);h.Fs=h.Fs.insert(g,k)}}})(r.localStore,o))}async function l4(t,e){let n=ne(t);if(!n.currentUser.isEqual(e)){$(Pw,"User change. New user:",e.toKey());let r=await SN(n.localStore,e);n.currentUser=e,(function(o,s){o.Vu.forEach(a=>{a.forEach(u=>{u.reject(new B(O.CANCELLED,s))})}),o.Vu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Zu(n,r.Bs)}}function d4(t,e){let n=ne(t),r=n.Eu.get(e);if(r&&r.lu)return ve().add(r.key);{let i=ve(),o=n.Tu.get(e);if(!o)return i;for(let s of o){let a=n.Pu.get(s);i=i.unionWith(a.view.tu)}return i}}function UN(t){let e=ne(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=FN.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=d4.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=s4.bind(null,e),e.hu.J_=J3.bind(null,e.eventManager),e.hu.pu=X3.bind(null,e.eventManager),e}function h4(t){let e=ne(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=a4.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=c4.bind(null,e),e}var BN=(()=>{class t{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(n){this.serializer=mp(n.databaseInfo.databaseId),this.sharedClientState=this.bu(n),this.persistence=this.Du(n),await this.persistence.start(),this.localStore=this.vu(n),this.gcScheduler=this.Cu(n,this.localStore),this.indexBackfillerScheduler=this.Fu(n,this.localStore)}Cu(n,r){return null}Fu(n,r){return null}vu(n){return N3(this.persistence,new MI,n.initialUser,this.serializer)}Du(n){return new Wf(RI.Vi,this.serializer)}bu(n){return new OI}async terminate(){var n,r;(n=this.gcScheduler)===null||n===void 0||n.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}return t.provider={build:()=>new t},t})(),rw=class extends BN{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,n){Ce(this.persistence.referenceDelegate instanceof Kf,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new mI(r,e.asyncQueue,n)}Du(e){let n=this.cacheSizeBytes!==void 0?bn.withCacheSize(this.cacheSizeBytes):bn.DEFAULT;return new Wf(r=>Kf.Vi(r,n),this.serializer)}};var f4=(()=>{class t{async initialize(n,r){this.localStore||(this.localStore=n.localStore,this.sharedClientState=n.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!n.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>yx(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=l4.bind(null,this.syncEngine),await Q3(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(n){return(function(){return new QI})()}createDatastore(n){let r=mp(n.databaseInfo.databaseId),i=(function(s){return new UI(s)})(n.databaseInfo);return(function(s,a,u,l){return new qI(s,a,u,l)})(n.authCredentials,n.appCheckCredentials,i,r)}createRemoteStore(n){return(function(i,o,s,a,u){return new GI(i,o,s,a,u)})(this.localStore,this.datastore,n.asyncQueue,r=>yx(this.syncEngine,r,0),(function(){return Yf.C()?new Yf:new FI})())}createSyncEngine(n,r){return(function(o,s,a,u,l,h,p){let g=new tw(o,s,a,u,l,h);return p&&(g.fu=!0),g})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,n.initialUser,n.maxConcurrentLimboResolutions,r)}async terminate(){var n,r;await(async function(o){let s=ne(o);$(Xo,"RemoteStore shutting down."),s.Ia.add(5),await Yu(s),s.Ea.shutdown(),s.Aa.set("Unknown")})(this.remoteStore),(n=this.datastore)===null||n===void 0||n.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()}}return t.provider={build:()=>new t},t})();var iw=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):Jr("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,n){setTimeout(()=>{this.muted||e(n)},0)}};var Gi="FirestoreClient",ow=class{constructor(e,n,r,i,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=wt.UNAUTHENTICATED,this.clientId=Lu.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,async s=>{$(Gi,"Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>($(Gi,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new pr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let r=Mw(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}};async function AE(t,e){t.asyncQueue.verifyOperationInProgress(),$(Gi,"Initializing OfflineComponentProvider");let n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await SN(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>{$i("Terminating Firestore due to IndexedDb database deletion"),t.terminate().then(()=>{$("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(i=>{$i("Terminating Firestore due to IndexedDb database deletion failed",i)})}),t._offlineComponents=e}async function _x(t,e){t.asyncQueue.verifyOperationInProgress();let n=await p4(t);$(Gi,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>px(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>px(e.remoteStore,i)),t._onlineComponents=e}async function p4(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){$(Gi,"Using user provided OfflineComponentProvider");try{await AE(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!(function(i){return i.name==="FirebaseError"?i.code===O.FAILED_PRECONDITION||i.code===O.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(n))throw n;$i("Error using user provided cache. Falling back to memory cache: "+n),await AE(t,new BN)}}else $(Gi,"Using default OfflineComponentProvider"),await AE(t,new rw(void 0));return t._offlineComponents}async function $N(t){return t._onlineComponents||(t._uninitializedComponentsProvider?($(Gi,"Using user provided OnlineComponentProvider"),await _x(t,t._uninitializedComponentsProvider._online)):($(Gi,"Using default OnlineComponentProvider"),await _x(t,new f4))),t._onlineComponents}function g4(t){return $N(t).then(e=>e.syncEngine)}async function m4(t){let e=await $N(t),n=e.eventManager;return n.onListen=e4.bind(null,e.syncEngine),n.onUnlisten=r4.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=t4.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=i4.bind(null,e.syncEngine),n}function y4(t,e,n={}){let r=new pr;return t.asyncQueue.enqueueAndForget(async()=>(function(o,s,a,u,l){let h=new iw({next:g=>{h.Ou(),s.enqueueAndForget(()=>Z3(o,p)),g.fromCache&&u.source==="server"?l.reject(new B(O.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(g)},error:g=>l.reject(g)}),p=new ZI(a,h,{includeMetadataChanges:!0,ka:!0});return Y3(o,p)})(await m4(t),t.asyncQueue,e,n,r)),r.promise}function HN(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var Ex=new Map;var qN="firestore.googleapis.com",Ix=!0,ip=class{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new B(O.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=qN,this.ssl=Ix}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:Ix;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=CN;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<A3)throw new B(O.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}CH("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=HN((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),(function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new B(O.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new B(O.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new B(O.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Ra=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ip({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new B(O.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new B(O.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ip(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new RE;switch(r.type){case"firstParty":return new kE(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new B(O.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){let r=Ex.get(n);r&&($("ComponentProvider","Removing Datastore"),Ex.delete(n),r.terminate())})(this),Promise.resolve()}};function zN(t,e,n,r={}){var i;t=Wo(t,Ra);let o=Un(e),s=t._getSettings(),a=Object.assign(Object.assign({},s),{emulatorOptions:t._getEmulatorOptions()}),u=`${e}:${n}`;o&&(na(`https://${u}`),ra("Firestore",!0)),s.host!==qN&&s.host!==u&&$i("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let l=Object.assign(Object.assign({},s),{host:u,ssl:o,emulatorOptions:r});if(!sr(l,a)&&(t._setSettings(l),r.mockUserToken)){let h,p;if(typeof r.mockUserToken=="string")h=r.mockUserToken,p=wt.MOCK_USER;else{h=Jh(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);let g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new B(O.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new wt(g)}t._authCredentials=new xE(new kf(h,p))}}var es=class t{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},Ut=class t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Vi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}toJSON(){return{type:t._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Qu(n,t._jsonSchema))return new t(e,r||null,new K(je.fromString(n.referencePath)))}};Ut._jsonSchemaVersion="firestore/documentReference/1.0",Ut._jsonSchema={type:at("string",Ut._jsonSchemaVersion),referencePath:at("string")};var Vi=class t extends es{constructor(e,n,r){super(e,n,iN(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Ut(this.firestore,null,new K(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function GN(t,e,...n){if(t=Me(t),Ax("collection","path",e),t instanceof Ra){let r=je.fromString(e,...n);return jR(r),new Vi(t,null,r)}{if(!(t instanceof Ut||t instanceof Vi))throw new B(O.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(je.fromString(e,...n));return jR(r),new Vi(t.firestore,null,r)}}function Fw(t,e,...n){if(t=Me(t),arguments.length===1&&(e=Lu.newId()),Ax("doc","path",e),t instanceof Ra){let r=je.fromString(e,...n);return VR(r),new Ut(t,null,new K(r))}{if(!(t instanceof Ut||t instanceof Vi))throw new B(O.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(je.fromString(e,...n));return VR(r),new Ut(t.firestore,t instanceof Vi?t.converter:null,new K(r))}}var wx="AsyncQueue",op=class{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new Zf(this,"async_queue_retry"),this.oc=()=>{let r=SE();r&&$(wx,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;let n=SE();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;let n=SE();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});let n=new pr;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!ka(e))throw e;$(wx,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){let n=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,Jr("INTERNAL UNHANDLED ERROR: ",bx(r)),r}).then(r=>(this.nc=!1,r))));return this._c=n,n}enqueueAfterDelay(e,n,r){this.ac(),this.sc.indexOf(e)>-1&&(n=0);let i=WI.createAndSchedule(this,e,n,r,o=>this.lc(o));return this.ec.push(i),i}ac(){this.tc&&Y(47125,{hc:bx(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(let n of this.ec)if(n.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this.ec)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){let n=this.ec.indexOf(e);this.ec.splice(n,1)}};function bx(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}var ts=class extends Ra{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new op,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new op(e),this._firestoreClient=void 0,await e}}};function WN(t,e){let n=typeof t=="object"?t:qr(),r=typeof t=="string"?t:e||Vf,i=Mi(n,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=Zh("firestore");o&&zN(i,...o)}return i}function KN(t){if(t._terminated)throw new B(O.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||v4(t),t._firestoreClient}function v4(t){var e,n,r;let i=t._freezeSettings(),o=(function(a,u,l,h){return new VE(a,u,l,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,HN(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)})(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new ow(t._authCredentials,t._appCheckCredentials,t._queue,o,t._componentsProvider&&(function(a){let u=a?._online.build();return{_offline:a?._offline.build(u),_online:u}})(t._componentsProvider))}var ji=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(Bt.fromBase64String(e))}catch(n){throw new B(O.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(Bt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:t._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Qu(e,t._jsonSchema))return t.fromBase64String(e.bytes)}};ji._jsonSchemaVersion="firestore/bytes/1.0",ji._jsonSchema={type:at("string",ji._jsonSchemaVersion),bytes:at("string")};var xa=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new B(O.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new pn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Wu=class{constructor(e){this._methodName=e}};var Ui=class t{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new B(O.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new B(O.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return de(this._lat,e._lat)||de(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:t._jsonSchemaVersion}}static fromJSON(e){if(Qu(e,t._jsonSchema))return new t(e.latitude,e.longitude)}};Ui._jsonSchemaVersion="firestore/geoPoint/1.0",Ui._jsonSchema={type:at("string",Ui._jsonSchemaVersion),latitude:at("number"),longitude:at("number")};var Bi=class t{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:t._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Qu(e,t._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new t(e.vectorValues);throw new B(O.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};Bi._jsonSchemaVersion="firestore/vectorValue/1.0",Bi._jsonSchema={type:at("string",Bi._jsonSchemaVersion),vectorValues:at("object")};var _4=/^__.*__$/,sw=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new _r(e,this.data,this.fieldMask,n,this.fieldTransforms):new Jo(e,this.data,n,this.fieldTransforms)}},sp=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new _r(e,this.data,this.fieldMask,n,this.fieldTransforms)}};function QN(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Y(40011,{Ec:t})}}var aw=class t{constructor(e,n,r,i,o,s){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Ac(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Rc({path:r,mc:!1});return i.fc(e),i}gc(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Rc({path:r,mc:!1});return i.Ac(),i}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return cp(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(QN(this.Ec)&&_4.test(e))throw this.wc('Document fields cannot begin and end with "__"')}},cw=class{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||mp(e)}Dc(e,n,r,i=!1){return new aw({Ec:e,methodName:n,bc:r,path:pn.emptyPath(),mc:!1,Sc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function Lw(t){let e=t._freezeSettings(),n=mp(t._databaseId);return new cw(t._databaseId,!!e.ignoreUndefinedProperties,n)}function E4(t,e,n,r,i,o={}){let s=t.Dc(o.merge||o.mergeFields?2:0,e,n,i);Vw("Data must be an object, but it was:",s,r);let a=YN(r,s),u,l;if(o.merge)u=new Dn(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let h=[];for(let p of o.mergeFields){let g=uw(e,p,n);if(!s.contains(g))throw new B(O.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);JN(h,g)||h.push(g)}u=new Dn(h),l=s.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,l=s.fieldTransforms;return new sw(new fn(a),u,l)}var ap=class t extends Wu{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof t}};function I4(t,e,n,r){let i=t.Dc(1,e,n);Vw("Data must be an object, but it was:",i,r);let o=[],s=fn.empty();Wi(r,(u,l)=>{let h=jw(e,u,n);l=Me(l);let p=i.gc(h);if(l instanceof ap)o.push(h);else{let g=Ju(l,p);g!=null&&(o.push(h),s.set(h,g))}});let a=new Dn(o);return new sp(s,a,i.fieldTransforms)}function w4(t,e,n,r,i,o){let s=t.Dc(1,e,n),a=[uw(e,r,n)],u=[i];if(o.length%2!=0)throw new B(O.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<o.length;g+=2)a.push(uw(e,o[g])),u.push(o[g+1]);let l=[],h=fn.empty();for(let g=a.length-1;g>=0;--g)if(!JN(l,a[g])){let y=a[g],w=u[g];w=Me(w);let k=s.gc(y);if(w instanceof ap)l.push(y);else{let x=Ju(w,k);x!=null&&(l.push(y),h.set(y,x))}}let p=new Dn(l);return new sp(h,p,s.fieldTransforms)}function b4(t,e,n,r=!1){return Ju(n,t.Dc(r?4:3,e))}function Ju(t,e){if(ZN(t=Me(t)))return Vw("Unsupported field value:",e,t),YN(t,e);if(t instanceof Wu)return(function(r,i){if(!QN(i.Ec))throw i.wc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.wc(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(r,i){let o=[],s=0;for(let a of r){let u=Ju(a,i.yc(s));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}})(t,e)}return(function(r,i){if((r=Me(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return r3(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=ct.fromDate(r);return{timestampValue:zf(i.serializer,o)}}if(r instanceof ct){let o=new ct(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:zf(i.serializer,o)}}if(r instanceof Ui)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ji)return{bytesValue:_N(i.serializer,r._byteString)};if(r instanceof Ut){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.wc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Cw(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Bi)return(function(s,a){return{mapValue:{fields:{[Ew]:{stringValue:Iw},[Ea]:{arrayValue:{values:s.toArray().map(l=>{if(typeof l!="number")throw a.wc("VectorValues must only contain numeric values.");return Tw(a.serializer,l)})}}}}}})(r,i);throw i.wc(`Unsupported field value: ${dp(r)}`)})(t,e)}function YN(t,e){let n={};return qx(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Wi(t,(r,i)=>{let o=Ju(i,e.Vc(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function ZN(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof ct||t instanceof Ui||t instanceof ji||t instanceof Ut||t instanceof Wu||t instanceof Bi)}function Vw(t,e,n){if(!ZN(n)||!Rx(n)){let r=dp(n);throw r==="an object"?e.wc(t+" a custom object"):e.wc(t+" "+r)}}function uw(t,e,n){if((e=Me(e))instanceof xa)return e._internalPath;if(typeof e=="string")return jw(t,e);throw cp("Field path arguments must be of type string or ",t,!1,void 0,n)}var D4=new RegExp("[~\\*/\\[\\]]");function jw(t,e,n){if(e.search(D4)>=0)throw cp(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new xa(...e.split("."))._internalPath}catch{throw cp(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function cp(t,e,n,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new B(O.INVALID_ARGUMENT,a+t+u)}function JN(t,e){return t.some(n=>n.isEqual(e))}var up=class{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Ut(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new lw(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(Uw("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},lw=class extends up{data(){return super.data()}};function Uw(t,e){return typeof e=="string"?jw(t,e):e instanceof xa?e._internalPath:e._delegate._internalPath}function T4(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new B(O.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Ku=class{},lp=class extends Ku{};function XN(t,e,...n){let r=[];e instanceof Ku&&r.push(e),r=r.concat(n),(function(o){let s=o.filter(u=>u instanceof hw).length,a=o.filter(u=>u instanceof dw).length;if(s>1||s>0&&a>0)throw new B(O.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(let i of r)t=i._apply(t);return t}var dw=class t extends lp{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=this._parse(e);return tM(e._query,n),new es(e.firestore,e.converter,ZE(e._query,n))}_parse(e){let n=Lw(e.firestore);return(function(o,s,a,u,l,h,p){let g;if(l.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new B(O.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){Tx(p,h);let w=[];for(let k of p)w.push(Dx(u,o,k));g={arrayValue:{values:w}}}else g=Dx(u,o,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||Tx(p,h),g=b4(a,s,p,h==="in"||h==="not-in");return st.create(l,h,g)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}};var hw=class t extends Ku{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new t(e,n)}_parse(e){let n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:zn.create(n,this._getOperator())}_apply(e){let n=this._parse(e);return n.getFilters().length===0?e:((function(i,o){let s=i,a=o.getFlattenedFilters();for(let u of a)tM(s,u),s=ZE(s,u)})(e._query,n),new es(e.firestore,e.converter,ZE(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var fw=class t extends lp{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new t(e,n)}_apply(e){let n=(function(i,o,s){if(i.startAt!==null)throw new B(O.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new B(O.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Qo(o,s)})(e._query,this._field,this._direction);return new es(e.firestore,e.converter,(function(i,o){let s=i.explicitOrderBy.concat([o]);return new qi(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)})(e._query,n))}};function eM(t,e="asc"){let n=e,r=Uw("orderBy",t);return fw._create(r,n)}function Dx(t,e,n){if(typeof(n=Me(n))=="string"){if(n==="")throw new B(O.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!oN(e)&&n.indexOf("/")!==-1)throw new B(O.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);let r=e.path.child(je.fromString(n));if(!K.isDocumentKey(r))throw new B(O.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return GR(t,new K(r))}if(n instanceof Ut)return GR(t,n._key);throw new B(O.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${dp(n)}.`)}function Tx(t,e){if(!Array.isArray(t)||t.length===0)throw new B(O.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function tM(t,e){let n=(function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null})(t.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new B(O.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new B(O.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}var pw=class{convertValue(e,n="none"){switch(Hi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ve(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ei(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Y(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let r={};return Wi(e,(i,o)=>{r[i]=this.convertValue(o,n)}),r}convertVectorValue(e){var n,r,i;let o=(i=(r=(n=e.fields)===null||n===void 0?void 0:n[Ea].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>Ve(s.doubleValue));return new Bi(o)}convertGeoPoint(e){return new Ui(Ve(e.latitude),Ve(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":let r=fp(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Uu(e));default:return null}}convertTimestamp(e){let n=Xr(e);return new ct(n.seconds,n.nanos)}convertDocumentKey(e,n){let r=je.fromString(e);Ce(TN(r),9688,{name:e});let i=new jf(r.get(1),r.get(3)),o=new K(r.popFirst(5));return i.isEqual(n)||Jr(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}};function C4(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}var pa=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},ma=class t extends up{constructor(e,n,r,i,o,s){super(e,n,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new ya(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let r=this._document.data.field(Uw("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new B(O.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,n={};return n.type=t._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}};ma._jsonSchemaVersion="firestore/documentSnapshot/1.0",ma._jsonSchema={type:at("string",ma._jsonSchemaVersion),bundleSource:at("string","DocumentSnapshot"),bundleName:at("string"),bundle:at("string")};var ya=class extends ma{data(e={}){return super.data(e)}},va=class t{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new pa(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new ya(this._firestore,this._userDataWriter,r.key,r,new pa(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new B(O.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let u=new ya(i._firestore,i._userDataWriter,a.doc.key,a.doc,new pa(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let u=new ya(i._firestore,i._userDataWriter,a.doc.key,a.doc,new pa(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,h=-1;return a.type!==0&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),h=s.indexOf(a.doc.key)),{type:S4(a.type),doc:u,oldIndex:l,newIndex:h}})}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new B(O.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=t._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Lu.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let n=[],r=[],i=[];return this.docs.forEach(o=>{o._document!==null&&(n.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function S4(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Y(61501,{type:t})}}va._jsonSchemaVersion="firestore/querySnapshot/1.0",va._jsonSchema={type:at("string",va._jsonSchemaVersion),bundleSource:at("string","QuerySnapshot"),bundleName:at("string"),bundle:at("string")};var gw=class extends pw{constructor(e){super(),this.firestore=e}convertBytes(e){return new ji(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ut(this.firestore,null,n)}};function nM(t){t=Wo(t,es);let e=Wo(t.firestore,ts),n=KN(e),r=new gw(e);return T4(t._query),y4(n,t._query).then(i=>new va(e,r,t,i))}function rM(t,e,n,...r){t=Wo(t,Ut);let i=Wo(t.firestore,ts),o=Lw(i),s;return s=typeof(e=Me(e))=="string"||e instanceof xa?w4(o,"updateDoc",t._key,e,n,r):I4(o,"updateDoc",t._key,e),Bw(i,[s.toMutation(t._key,Zr.exists(!0))])}function iM(t){return Bw(Wo(t.firestore,ts),[new $u(t._key,Zr.none())])}function oM(t,e){let n=Wo(t.firestore,ts),r=Fw(t),i=C4(t.converter,e);return Bw(n,[E4(Lw(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Zr.exists(!1))]).then(()=>r)}function Bw(t,e){return(function(r,i){let o=new pr;return r.asyncQueue.enqueueAndForget(async()=>o4(await g4(r),i,o)),o.promise})(KN(t),e)}(function(e,n=!0){(function(i){Na=i})(ur),hn(new Nt("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new ts(new NE(r.getProvider("auth-internal")),new PE(s,r.getProvider("app-check-internal")),(function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new B(O.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new jf(l.options.projectId,h)})(s,i),s);return o=Object.assign({useFetchStreams:n},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),xe(PR,OR,e),xe(PR,OR,"esm2017")})();var rs=class{constructor(e){return e}},sM="firestore",$w=class{constructor(){return ki(sM)}};var Hw=new q("angularfire2.firestore-instances");function A4(t,e){let n=Vo(sM,t,e);return n&&new rs(n)}function R4(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new rs(r)}}var x4={provide:$w,deps:[[new yt,Hw]]},N4={provide:rs,useFactory:A4,deps:[[new yt,Hw],Bn]};function aM(t,...e){return xe("angularfire",lr.full,"fst"),zt([N4,x4,{provide:Hw,useFactory:R4(t),multi:!0,deps:[be,Be,dr,zr,[new yt,Ho],[new yt,Oi],...e]}])}var cM=Le(oM,!0,2);var qw=Le(GN,!0,2);var uM=Le(iM,!0,2);var zw=Le(Fw,!0,2);var lM=Le(nM,!0);var dM=Le(WN,!0);var hM=Le(eM,!0,2),fM=Le(XN,!0,2);var pM=Le(rM,!0,2);var IM="firebasestorage.googleapis.com",wM="storageBucket",M4=120*1e3,k4=600*1e3;var Ge=class t extends Kt{constructor(e,n,r=0){super(Gw(e),`Firebase Storage: ${n} (${Gw(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,t.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Gw(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}},Ye=(function(t){return t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment",t})(Ye||{});function Gw(t){return"storage/"+t}function Jw(){let t="An unknown error occurred, please check the error payload for server response.";return new Ge(Ye.UNKNOWN,t)}function P4(t){return new Ge(Ye.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function O4(t){return new Ge(Ye.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function F4(){let t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Ge(Ye.UNAUTHENTICATED,t)}function L4(){return new Ge(Ye.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function V4(t){return new Ge(Ye.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function j4(){return new Ge(Ye.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function U4(){return new Ge(Ye.CANCELED,"User canceled the upload/download.")}function B4(t){return new Ge(Ye.INVALID_URL,"Invalid URL '"+t+"'.")}function $4(t){return new Ge(Ye.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function H4(){return new Ge(Ye.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+wM+"' property when initializing the app?")}function q4(){return new Ge(Ye.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function z4(){return new Ge(Ye.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function G4(t){return new Ge(Ye.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Ww(t){return new Ge(Ye.INVALID_ARGUMENT,t)}function bM(){return new Ge(Ye.APP_DELETED,"The Firebase app was deleted.")}function W4(t){return new Ge(Ye.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function el(t,e){return new Ge(Ye.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Xu(t){throw new Ge(Ye.INTERNAL_ERROR,"Internal error: "+t)}var Gn=class t{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){let e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=t.makeFromUrl(e,n)}catch{return new t(e,"")}if(r.path==="")return r;throw $4(e)}static makeFromUrl(e,n){let r=null,i="([A-Za-z0-9.\\-_]+)";function o(oe){oe.path.charAt(oe.path.length-1)==="/"&&(oe.path_=oe.path_.slice(0,-1))}let s="(/(.*))?$",a=new RegExp("^gs://"+i+s,"i"),u={bucket:1,path:3};function l(oe){oe.path_=decodeURIComponent(oe.path)}let h="v[A-Za-z0-9_]+",p=n.replace(/[.]/g,"\\."),g="(/([^?#]*).*)?$",y=new RegExp(`^https?://${p}/${h}/b/${i}/o${g}`,"i"),w={bucket:1,path:3},k=n===IM?"(?:storage.googleapis.com|storage.cloud.google.com)":n,x="([^?#]*)",j=new RegExp(`^https?://${k}/${i}/${x}`,"i"),W=[{regex:a,indices:u,postModify:o},{regex:y,indices:w,postModify:l},{regex:j,indices:{bucket:1,path:2},postModify:l}];for(let oe=0;oe<W.length;oe++){let Ze=W[oe],Ie=Ze.regex.exec(e);if(Ie){let b=Ie[Ze.indices.bucket],v=Ie[Ze.indices.path];v||(v=""),r=new t(b,v),Ze.postModify(r);break}}if(r==null)throw B4(e);return r}},Kw=class{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}};function K4(t,e,n){let r=1,i=null,o=null,s=!1,a=0;function u(){return a===2}let l=!1;function h(...x){l||(l=!0,e.apply(null,x))}function p(x){i=setTimeout(()=>{i=null,t(y,u())},x)}function g(){o&&clearTimeout(o)}function y(x,...j){if(l){g();return}if(x){g(),h.call(null,x,...j);return}if(u()||s){g(),h.call(null,x,...j);return}r<64&&(r*=2);let W;a===1?(a=2,W=0):W=(r+Math.random())*1e3,p(W)}let w=!1;function k(x){w||(w=!0,g(),!l&&(i!==null?(x||(a=2),clearTimeout(i),p(0)):x||(a=1)))}return p(0),o=setTimeout(()=>{s=!0,k(!0)},n),k}function Q4(t){t(!1)}function Y4(t){return t!==void 0}function Z4(t){return typeof t=="object"&&!Array.isArray(t)}function Xw(t){return typeof t=="string"||t instanceof String}function gM(t){return e0()&&t instanceof Blob}function e0(){return typeof Blob<"u"}function mM(t,e,n,r){if(r<e)throw Ww(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw Ww(`Invalid value for '${t}'. Expected ${n} or less.`)}function wp(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function DM(t){let e=encodeURIComponent,n="?";for(let r in t)if(t.hasOwnProperty(r)){let i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var Fa=(function(t){return t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT",t})(Fa||{});function J4(t,e){let n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,o=e.indexOf(t)!==-1;return n||i||o}var Qw=class{constructor(e,n,r,i,o,s,a,u,l,h,p,g=!0,y=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=o,this.additionalRetryCodes_=s,this.callback_=a,this.errorCallback_=u,this.timeout_=l,this.progressCallback_=h,this.connectionFactory_=p,this.retry=g,this.isUsingEmulator=y,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((w,k)=>{this.resolve_=w,this.reject_=k,this.start_()})}start_(){let e=(r,i)=>{if(i){r(!1,new Oa(!1,null,!0));return}let o=this.connectionFactory_();this.pendingConnection_=o;let s=a=>{let u=a.loaded,l=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,l)};this.progressCallback_!==null&&o.addUploadProgressListener(s),o.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(s),this.pendingConnection_=null;let a=o.getErrorCode()===Fa.NO_ERROR,u=o.getStatus();if(!a||J4(u,this.additionalRetryCodes_)&&this.retry){let h=o.getErrorCode()===Fa.ABORT;r(!1,new Oa(!1,null,h));return}let l=this.successCodes_.indexOf(u)!==-1;r(!0,new Oa(l,o))})},n=(r,i)=>{let o=this.resolve_,s=this.reject_,a=i.connection;if(i.wasSuccessCode)try{let u=this.callback_(a,a.getResponse());Y4(u)?o(u):o()}catch(u){s(u)}else if(a!==null){let u=Jw();u.serverResponse=a.getErrorText(),this.errorCallback_?s(this.errorCallback_(a,u)):s(u)}else if(i.canceled){let u=this.appDelete_?bM():U4();s(u)}else{let u=j4();s(u)}};this.canceled_?n(!1,new Oa(!1,null,!0)):this.backoffId_=K4(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&Q4(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}},Oa=class{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}};function X4(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function e6(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function t6(t,e){e&&(t["X-Firebase-GMPID"]=e)}function n6(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function r6(t,e,n,r,i,o,s=!0,a=!1){let u=DM(t.urlParams),l=t.url+u,h=Object.assign({},t.headers);return t6(h,e),X4(h,n),e6(h,o),n6(h,r),new Qw(l,t.method,h,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,s,a)}function i6(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function o6(...t){let e=i6();if(e!==void 0){let n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(e0())return new Blob(t);throw new Ge(Ye.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function s6(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}function a6(t){if(typeof atob>"u")throw G4("base-64");return atob(t)}var Er={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},tl=class{constructor(e,n){this.data=e,this.contentType=n||null}};function c6(t,e){switch(t){case Er.RAW:return new tl(TM(e));case Er.BASE64:case Er.BASE64URL:return new tl(CM(t,e));case Er.DATA_URL:return new tl(l6(e),d6(e))}throw Jw()}function TM(t){let e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{let o=r,s=t.charCodeAt(++n);r=65536|(o&1023)<<10|s&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function u6(t){let e;try{e=decodeURIComponent(t)}catch{throw el(Er.DATA_URL,"Malformed data URL.")}return TM(e)}function CM(t,e){switch(t){case Er.BASE64:{let i=e.indexOf("-")!==-1,o=e.indexOf("_")!==-1;if(i||o)throw el(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Er.BASE64URL:{let i=e.indexOf("+")!==-1,o=e.indexOf("/")!==-1;if(i||o)throw el(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=a6(e)}catch(i){throw i.message.includes("polyfill")?i:el(t,"Invalid character found")}let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}var Ep=class{constructor(e){this.base64=!1,this.contentType=null;let n=e.match(/^data:([^,]+)?,/);if(n===null)throw el(Er.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");let r=n[1]||null;r!=null&&(this.base64=h6(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}};function l6(t){let e=new Ep(t);return e.base64?CM(Er.BASE64,e.rest):u6(e.rest)}function d6(t){return new Ep(t).contentType}function h6(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}var Ip=class t{constructor(e,n){let r=0,i="";gM(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(gM(this.data_)){let r=this.data_,i=s6(r,e,n);return i===null?null:new t(i)}else{let r=new Uint8Array(this.data_.buffer,e,n-e);return new t(r,!0)}}static getBlob(...e){if(e0()){let n=e.map(r=>r instanceof t?r.data_:r);return new t(o6.apply(null,n))}else{let n=e.map(s=>Xw(s)?c6(Er.RAW,s).data:s.data_),r=0;n.forEach(s=>{r+=s.byteLength});let i=new Uint8Array(r),o=0;return n.forEach(s=>{for(let a=0;a<s.length;a++)i[o++]=s[a]}),new t(i,!0)}}uploadData(){return this.data_}};function SM(t){let e;try{e=JSON.parse(t)}catch{return null}return Z4(e)?e:null}function f6(t){if(t.length===0)return null;let e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function p6(t,e){let n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function AM(t){let e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}function g6(t,e){return e}var Mt=class{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||g6}},_p=null;function m6(t){return!Xw(t)||t.length<2?t:AM(t)}function RM(){if(_p)return _p;let t=[];t.push(new Mt("bucket")),t.push(new Mt("generation")),t.push(new Mt("metageneration")),t.push(new Mt("name","fullPath",!0));function e(o,s){return m6(s)}let n=new Mt("name");n.xform=e,t.push(n);function r(o,s){return s!==void 0?Number(s):s}let i=new Mt("size");return i.xform=r,t.push(i),t.push(new Mt("timeCreated")),t.push(new Mt("updated")),t.push(new Mt("md5Hash",null,!0)),t.push(new Mt("cacheControl",null,!0)),t.push(new Mt("contentDisposition",null,!0)),t.push(new Mt("contentEncoding",null,!0)),t.push(new Mt("contentLanguage",null,!0)),t.push(new Mt("contentType",null,!0)),t.push(new Mt("metadata","customMetadata",!0)),_p=t,_p}function y6(t,e){function n(){let r=t.bucket,i=t.fullPath,o=new Gn(r,i);return e._makeStorageReference(o)}Object.defineProperty(t,"ref",{get:n})}function v6(t,e,n){let r={};r.type="file";let i=n.length;for(let o=0;o<i;o++){let s=n[o];r[s.local]=s.xform(r,e[s.server])}return y6(r,t),r}function xM(t,e,n){let r=SM(e);return r===null?null:v6(t,r,n)}function _6(t,e,n,r){let i=SM(e);if(i===null||!Xw(i.downloadTokens))return null;let o=i.downloadTokens;if(o.length===0)return null;let s=encodeURIComponent;return o.split(",").map(l=>{let h=t.bucket,p=t.fullPath,g="/b/"+s(h)+"/o/"+s(p),y=wp(g,n,r),w=DM({alt:"media",token:l});return y+w})[0]}function E6(t,e){let n={},r=e.length;for(let i=0;i<r;i++){let o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}var nl=class{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}};function NM(t){if(!t)throw Jw()}function I6(t,e){function n(r,i){let o=xM(t,i,e);return NM(o!==null),o}return n}function w6(t,e){function n(r,i){let o=xM(t,i,e);return NM(o!==null),_6(o,i,t.host,t._protocol)}return n}function MM(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=L4():i=F4():n.getStatus()===402?i=O4(t.bucket):n.getStatus()===403?i=V4(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function kM(t){let e=MM(t);function n(r,i){let o=e(r,i);return r.getStatus()===404&&(o=P4(t.path)),o.serverResponse=i.serverResponse,o}return n}function b6(t,e,n){let r=e.fullServerUrl(),i=wp(r,t.host,t._protocol),o="GET",s=t.maxOperationRetryTime,a=new nl(i,o,w6(t,n),s);return a.errorHandler=kM(e),a}function D6(t,e){let n=e.fullServerUrl(),r=wp(n,t.host,t._protocol),i="DELETE",o=t.maxOperationRetryTime;function s(u,l){}let a=new nl(r,i,s,o);return a.successCodes=[200,204],a.errorHandler=kM(e),a}function T6(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function C6(t,e,n){let r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=T6(null,e)),r}function S6(t,e,n,r,i){let o=e.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"};function a(){let W="";for(let oe=0;oe<2;oe++)W=W+Math.random().toString().slice(2);return W}let u=a();s["Content-Type"]="multipart/related; boundary="+u;let l=C6(e,r,i),h=E6(l,n),p="--"+u+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+h+`\r
--`+u+`\r
Content-Type: `+l.contentType+`\r
\r
`,g=`\r
--`+u+"--",y=Ip.getBlob(p,r,g);if(y===null)throw q4();let w={name:l.fullPath},k=wp(o,t.host,t._protocol),x="POST",j=t.maxUploadRetryTime,z=new nl(k,x,I6(t,n),j);return z.urlParams=w,z.headers=s,z.body=y.uploadData(),z.errorHandler=MM(e),z}var lue=256*1024;var yM=null,Yw=class{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Fa.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Fa.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Fa.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i,o){if(this.sent_)throw Xu("cannot .send() more than once");if(Un(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),o!==void 0)for(let s in o)o.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,o[s].toString());return i!==void 0?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Xu("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Xu("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Xu("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Xu("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}},Zw=class extends Yw{initXhr(){this.xhr_.responseType="text"}};function t0(){return yM?yM():new Zw}var La=class t{constructor(e,n){this._service=e,n instanceof Gn?this._location=n:this._location=Gn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new t(e,n)}get root(){let e=new Gn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return AM(this._location.path)}get storage(){return this._service}get parent(){let e=f6(this._location.path);if(e===null)return null;let n=new Gn(this._location.bucket,e);return new t(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw W4(e)}};function A6(t,e,n){t._throwIfRoot("uploadBytes");let r=S6(t.storage,t._location,RM(),new Ip(e,!0),n);return t.storage.makeRequestWithTokens(r,t0).then(i=>({metadata:i,ref:t}))}function R6(t){t._throwIfRoot("getDownloadURL");let e=b6(t.storage,t._location,RM());return t.storage.makeRequestWithTokens(e,t0).then(n=>{if(n===null)throw z4();return n})}function x6(t){t._throwIfRoot("deleteObject");let e=D6(t.storage,t._location);return t.storage.makeRequestWithTokens(e,t0)}function N6(t,e){let n=p6(t._location.path,e),r=new Gn(t._location.bucket,n);return new La(t.storage,r)}function M6(t){return/^[A-Za-z]+:\/\//.test(t)}function k6(t,e){return new La(t,e)}function PM(t,e){if(t instanceof rl){let n=t;if(n._bucket==null)throw H4();let r=new La(n,n._bucket);return e!=null?PM(r,e):r}else return e!==void 0?N6(t,e):t}function P6(t,e){if(e&&M6(e)){if(t instanceof rl)return k6(t,e);throw Ww("To use ref(service, url), the first argument must be a Storage instance.")}else return PM(t,e)}function vM(t,e){let n=e?.[wM];return n==null?null:Gn.makeFromBucketSpec(n,t)}function O6(t,e,n,r={}){t.host=`${e}:${n}`;let i=Un(e);i&&(na(`https://${t.host}/b`),ra("Storage",!0)),t._isUsingEmulator=!0,t._protocol=i?"https":"http";let{mockUserToken:o}=r;o&&(t._overrideAuthToken=typeof o=="string"?o:Jh(o,t.app.options.projectId))}var rl=class{constructor(e,n,r,i,o,s=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=o,this._isUsingEmulator=s,this._bucket=null,this._host=IM,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=M4,this._maxUploadRetryTime=k4,this._requests=new Set,i!=null?this._bucket=Gn.makeFromBucketSpec(i,this._host):this._bucket=vM(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Gn.makeFromBucketSpec(this._url,e):this._bucket=vM(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){mM("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){mM("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;let e=this._authProvider.getImmediate({optional:!0});if(e){let n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(Qt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new La(this,e)}_makeRequest(e,n,r,i,o=!0){if(this._deleted)return new Kw(bM());{let s=r6(e,this._appId,r,i,n,this._firebaseVersion,o,this._isUsingEmulator);return this._requests.add(s),s.getPromise().then(()=>this._requests.delete(s),()=>this._requests.delete(s)),s}}async makeRequestWithTokens(e,n){let[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}},_M="@firebase/storage",EM="0.13.14";var OM="storage";function FM(t,e,n){return t=Me(t),A6(t,e,n)}function LM(t){return t=Me(t),R6(t)}function VM(t){return t=Me(t),x6(t)}function jM(t,e){return t=Me(t),P6(t,e)}function UM(t=qr(),e){t=Me(t);let r=Mi(t,OM).getImmediate({identifier:e}),i=Zh("storage");return i&&BM(r,...i),r}function BM(t,e,n,r={}){O6(t,e,n,r)}function F6(t,{instanceIdentifier:e}){let n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new rl(n,r,i,e,ur)}function L6(){hn(new Nt(OM,F6,"PUBLIC").setMultipleInstances(!0)),xe(_M,EM,""),xe(_M,EM,"esm2017")}L6();var is=class{constructor(e){return e}},$M="storage",n0=class{constructor(){return ki($M)}};var r0=new q("angularfire2.storage-instances");function V6(t,e){let n=Vo($M,t,e);return n&&new is(n)}function j6(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new is(r)}}var U6={provide:n0,deps:[[new yt,r0]]},B6={provide:is,useFactory:V6,deps:[[new yt,r0],Bn]};function HM(t,...e){return xe("angularfire",lr.full,"gcs"),zt([B6,U6,{provide:r0,useFactory:j6(t),multi:!0,deps:[be,Be,dr,zr,[new yt,Ho],[new yt,Oi],...e]}])}var qM=Le(VM,!0,2);var zM=Le(LM,!0);var GM=Le(UM,!0);var i0=Le(jM,!0,2);var WM=Le(FM,!0);var KM={production:!1,firebase:{apiKey:"AIzaSyAaQQwHu7R_uw3kXjhbUqolzm41lnU1c0w",authDomain:"portfolio-443ad.firebaseapp.com",databaseURL:"https://portfolio-443ad-default-rtdb.firebaseio.com",projectId:"portfolio-443ad",storageBucket:"portfolio-443ad.firebasestorage.app",messagingSenderId:"180253201705",appId:"1:180253201705:web:2bf986e86130e00e3bd338",measurementId:"G-0VGGB8KVBD"}};var ae="primary",vl=Symbol("RouteTitle"),u0=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function as(t){return new u0(t)}function nk(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=t[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function $6(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!Ir(t[n],e[n]))return!1;return!0}function Ir(t,e){let n=t?l0(t):void 0,r=e?l0(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!rk(t[i],e[i]))return!1;return!0}function l0(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function rk(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,o)=>r[o]===i)}else return t===e}function ik(t){return t.length>0?t[t.length-1]:null}function ii(t){return cm(t)?t:Ti(t)?Ue(Promise.resolve(t)):X(t)}var H6={exact:sk,subset:ak},ok={exact:q6,subset:z6,ignored:()=>!0};function QM(t,e,n){return H6[n.paths](t.root,e.root,n.matrixParams)&&ok[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function q6(t,e){return Ir(t,e)}function sk(t,e,n){if(!os(t.segments,e.segments)||!Tp(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!sk(t.children[r],e.children[r],n))return!1;return!0}function z6(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>rk(t[n],e[n]))}function ak(t,e,n){return ck(t,e,e.segments,n)}function ck(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!os(i,n)||e.hasChildren()||!Tp(i,n,r))}else if(t.segments.length===n.length){if(!os(t.segments,n)||!Tp(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!ak(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),o=n.slice(t.segments.length);return!os(t.segments,i)||!Tp(t.segments,i,r)||!t.children[ae]?!1:ck(t.children[ae],e,o,r)}}function Tp(t,e,n){return e.every((r,i)=>ok[n](t[i].parameters,r.parameters))}var br=class{root;queryParams;fragment;_queryParamMap;constructor(e=new De([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=as(this.queryParams),this._queryParamMap}toString(){return K6.serialize(this)}},De=class{segments;children;parent=null;constructor(e,n){this.segments=e,this.children=n,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Cp(this)}},Ki=class{path;parameters;_parameterMap;constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=as(this.parameters),this._parameterMap}toString(){return lk(this)}};function G6(t,e){return os(t,e)&&t.every((n,r)=>Ir(n.parameters,e[r].parameters))}function os(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function W6(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===ae&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==ae&&(n=n.concat(e(i,r)))}),n}var _l=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=G({token:t,factory:()=>new cs,providedIn:"root"})}return t})(),cs=class{parse(e){let n=new h0(e);return new br(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${il(e.root,!0)}`,r=Z6(e.queryParams),i=typeof e.fragment=="string"?`#${Q6(e.fragment)}`:"";return`${n}${r}${i}`}},K6=new cs;function Cp(t){return t.segments.map(e=>lk(e)).join("/")}function il(t,e){if(!t.hasChildren())return Cp(t);if(e){let n=t.children[ae]?il(t.children[ae],!1):"",r=[];return Object.entries(t.children).forEach(([i,o])=>{i!==ae&&r.push(`${i}:${il(o,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=W6(t,(r,i)=>i===ae?[il(t.children[ae],!1)]:[`${i}:${il(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[ae]!=null?`${Cp(t)}/${n[0]}`:`${Cp(t)}/(${n.join("//")})`}}function uk(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function bp(t){return uk(t).replace(/%3B/gi,";")}function Q6(t){return encodeURI(t)}function d0(t){return uk(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Sp(t){return decodeURIComponent(t)}function YM(t){return Sp(t.replace(/\+/g,"%20"))}function lk(t){return`${d0(t.path)}${Y6(t.parameters)}`}function Y6(t){return Object.entries(t).map(([e,n])=>`;${d0(e)}=${d0(n)}`).join("")}function Z6(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${bp(n)}=${bp(i)}`).join("&"):`${bp(n)}=${bp(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var J6=/^[^\/()?;#]+/;function o0(t){let e=t.match(J6);return e?e[0]:""}var X6=/^[^\/()?;=#]+/;function eq(t){let e=t.match(X6);return e?e[0]:""}var tq=/^[^=?&#]+/;function nq(t){let e=t.match(tq);return e?e[0]:""}var rq=/^[^&#]+/;function iq(t){let e=t.match(rq);return e?e[0]:""}var h0=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new De([],{}):new De([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[ae]=new De(e,n)),r}parseSegment(){let e=o0(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new H(4009,!1);return this.capture(e),new Ki(Sp(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=eq(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=o0(this.remaining);i&&(r=i,this.capture(r))}e[Sp(n)]=Sp(r)}parseQueryParam(e){let n=nq(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let s=iq(this.remaining);s&&(r=s,this.capture(r))}let i=YM(n),o=YM(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=o0(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new H(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=ae);let s=this.parseChildren();n[o]=Object.keys(s).length===1?s[ae]:new De([],s),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new H(4011,!1)}};function dk(t){return t.segments.length>0?new De([],{[ae]:t}):t}function hk(t){let e={};for(let[r,i]of Object.entries(t.children)){let o=hk(i);if(r===ae&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let n=new De(t.segments,e);return oq(n)}function oq(t){if(t.numberOfChildren===1&&t.children[ae]){let e=t.children[ae];return new De(t.segments.concat(e.segments),e.children)}return t}function Qi(t){return t instanceof br}function fk(t,e,n=null,r=null){let i=pk(t);return gk(i,e,n,r)}function pk(t){let e;function n(o){let s={};for(let u of o.children){let l=n(u);s[u.outlet]=l}let a=new De(o.url,s);return o===t&&(e=a),a}let r=n(t.root),i=dk(r);return e??i}function gk(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return s0(i,i,i,n,r);let o=sq(e);if(o.toRoot())return s0(i,i,new De([],{}),n,r);let s=aq(o,i,t),a=s.processChildren?sl(s.segmentGroup,s.index,o.commands):yk(s.segmentGroup,s.index,o.commands);return s0(i,s.segmentGroup,a,n,r)}function Ap(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function ul(t){return typeof t=="object"&&t!=null&&t.outlets}function s0(t,e,n,r,i){let o={};r&&Object.entries(r).forEach(([u,l])=>{o[u]=Array.isArray(l)?l.map(h=>`${h}`):`${l}`});let s;t===e?s=n:s=mk(t,e,n);let a=dk(hk(s));return new br(a,o,i)}function mk(t,e,n){let r={};return Object.entries(t.children).forEach(([i,o])=>{o===e?r[i]=n:r[i]=mk(o,e,n)}),new De(t.segments,r)}var Rp=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&Ap(r[0]))throw new H(4003,!1);let i=r.find(ul);if(i&&i!==ik(r))throw new H(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function sq(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new Rp(!0,0,t);let e=0,n=!1,r=t.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([u,l])=>{a[u]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,u)=>{u==0&&a==="."||(u==0&&a===""?n=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new Rp(n,e,r)}var Ua=class{segmentGroup;processChildren;index;constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function aq(t,e,n){if(t.isAbsolute)return new Ua(e,!0,0);if(!n)return new Ua(e,!1,NaN);if(n.parent===null)return new Ua(n,!0,0);let r=Ap(t.commands[0])?0:1,i=n.segments.length-1+r;return cq(n,i,t.numberOfDoubleDots)}function cq(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new H(4005,!1);i=r.segments.length}return new Ua(r,!1,i-o)}function uq(t){return ul(t[0])?t[0].outlets:{[ae]:t}}function yk(t,e,n){if(t??=new De([],{}),t.segments.length===0&&t.hasChildren())return sl(t,e,n);let r=lq(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let o=new De(t.segments.slice(0,r.pathIndex),{});return o.children[ae]=new De(t.segments.slice(r.pathIndex),t.children),sl(o,0,i)}else return r.match&&i.length===0?new De(t.segments,{}):r.match&&!t.hasChildren()?f0(t,e,n):r.match?sl(t,0,i):f0(t,e,n)}function sl(t,e,n){if(n.length===0)return new De(t.segments,{});{let r=uq(n),i={};if(Object.keys(r).some(o=>o!==ae)&&t.children[ae]&&t.numberOfChildren===1&&t.children[ae].segments.length===0){let o=sl(t.children[ae],e,n);return new De(t.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=yk(t.children[o],e,s))}),Object.entries(t.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new De(t.segments,i)}}function lq(t,e,n){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;let s=t.segments[i],a=n[r];if(ul(a))break;let u=`${a}`,l=r<n.length-1?n[r+1]:null;if(i>0&&u===void 0)break;if(u&&l&&typeof l=="object"&&l.outlets===void 0){if(!JM(u,l,s))return o;r+=2}else{if(!JM(u,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function f0(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let o=n[i];if(ul(o)){let u=dq(o.outlets);return new De(r,u)}if(i===0&&Ap(n[0])){let u=t.segments[e];r.push(new Ki(u.path,ZM(n[0]))),i++;continue}let s=ul(o)?o.outlets[ae]:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&Ap(a)?(r.push(new Ki(s,ZM(a))),i+=2):(r.push(new Ki(s,{})),i++)}return new De(r,{})}function dq(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=f0(new De([],{}),0,r))}),e}function ZM(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function JM(t,e,n){return t==n.path&&Ir(e,n.parameters)}var al="imperative",Dt=(function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t})(Dt||{}),mn=class{id;url;constructor(e,n){this.id=e,this.url=n}},us=class extends mn{type=Dt.NavigationStart;navigationTrigger;restoredState;constructor(e,n,r="imperative",i=null){super(e,n),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Kn=class extends mn{urlAfterRedirects;type=Dt.NavigationEnd;constructor(e,n,r){super(e,n),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Yt=(function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t[t.Aborted=4]="Aborted",t})(Yt||{}),ll=(function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t})(ll||{}),wr=class extends mn{reason;code;type=Dt.NavigationCancel;constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},ri=class extends mn{reason;code;type=Dt.NavigationSkipped;constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i}},$a=class extends mn{error;target;type=Dt.NavigationError;constructor(e,n,r,i){super(e,n),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},dl=class extends mn{urlAfterRedirects;state;type=Dt.RoutesRecognized;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},xp=class extends mn{urlAfterRedirects;state;type=Dt.GuardsCheckStart;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Np=class extends mn{urlAfterRedirects;state;shouldActivate;type=Dt.GuardsCheckEnd;constructor(e,n,r,i,o){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Mp=class extends mn{urlAfterRedirects;state;type=Dt.ResolveStart;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},kp=class extends mn{urlAfterRedirects;state;type=Dt.ResolveEnd;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Pp=class{route;type=Dt.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Op=class{route;type=Dt.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Fp=class{snapshot;type=Dt.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Lp=class{snapshot;type=Dt.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Vp=class{snapshot;type=Dt.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},jp=class{snapshot;type=Dt.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var hl=class{},Ha=class{url;navigationBehaviorOptions;constructor(e,n){this.url=e,this.navigationBehaviorOptions=n}};function hq(t){return!(t instanceof hl)&&!(t instanceof Ha)}function fq(t,e){return t.providers&&!t._injector&&(t._injector=tu(t.providers,e,`Route: ${t.path}`)),t._injector??e}function Wn(t){return t.outlet||ae}function pq(t,e){let n=t.filter(r=>Wn(r)===e);return n.push(...t.filter(r=>Wn(r)!==e)),n}function Ga(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var Up=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return Ga(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new Wa(this.rootInjector)}},Wa=(()=>{class t{rootInjector;contexts=new Map;constructor(n){this.rootInjector=n}onChildOutletCreated(n,r){let i=this.getOrCreateContext(n);i.outlet=r,this.contexts.set(n,i)}onChildOutletDestroyed(n){let r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new Up(this.rootInjector),this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}static \u0275fac=function(r){return new(r||t)(se(et))};static \u0275prov=G({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Bp=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=p0(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=p0(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=g0(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return g0(e,this._root).map(n=>n.value)}};function p0(t,e){if(t===e.value)return e;for(let n of e.children){let r=p0(t,n);if(r)return r}return null}function g0(t,e){if(t===e.value)return[e];for(let n of e.children){let r=g0(t,n);if(r.length)return r.unshift(e),r}return[]}var gn=class{value;children;constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function ja(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var fl=class extends Bp{snapshot;constructor(e,n){super(e),this.snapshot=n,b0(this,e)}toString(){return this.snapshot.toString()}};function vk(t){let e=gq(t),n=new Ct([new Ki("",{})]),r=new Ct({}),i=new Ct({}),o=new Ct({}),s=new Ct(""),a=new Qn(n,r,o,s,i,ae,t,e.root);return a.snapshot=e.root,new fl(new gn(a,[]),e)}function gq(t){let e={},n={},r={},o=new ss([],e,r,"",n,ae,t,null,{});return new pl("",new gn(o,[]))}var Qn=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,n,r,i,o,s,a,u){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(ge(l=>l[vl]))??X(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(ge(e=>as(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(ge(e=>as(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function $p(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:V(V({},e.params),t.params),data:V(V({},e.data),t.data),resolve:V(V(V(V({},t.data),e.data),i?.data),t._resolvedData)}:r={params:V({},t.params),data:V({},t.data),resolve:V(V({},t.data),t._resolvedData??{})},i&&Ek(i)&&(r.resolve[vl]=i.title),r}var ss=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[vl]}constructor(e,n,r,i,o,s,a,u,l){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=as(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=as(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},pl=class extends Bp{url;constructor(e,n){super(n),this.url=e,b0(this,n)}toString(){return _k(this._root)}};function b0(t,e){e.value._routerState=t,e.children.forEach(n=>b0(t,n))}function _k(t){let e=t.children.length>0?` { ${t.children.map(_k).join(", ")} } `:"";return`${t.value}${e}`}function a0(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Ir(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),Ir(e.params,n.params)||t.paramsSubject.next(n.params),$6(e.url,n.url)||t.urlSubject.next(n.url),Ir(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function m0(t,e){let n=Ir(t.params,e.params)&&G6(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||m0(t.parent,e.parent))}function Ek(t){return typeof t.title=="string"||t.title===null}var Ik=new q(""),El=(()=>{class t{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=ae;activateEvents=new Qe;deactivateEvents=new Qe;attachEvents=new Qe;detachEvents=new Qe;routerOutletData=kS(void 0);parentContexts=M(Wa);location=M(No);changeDetector=M(ko);inputBinder=M(Gp,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(n){if(n.name){let{firstChange:r,previousValue:i}=n.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new H(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new H(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new H(4012,!1);this.location.detach();let n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){let n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new H(4013,!1);this._activatedRoute=n;let i=this.location,s=n.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new y0(n,a,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:u,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||t)};static \u0275dir=nt({type:t,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[or]})}return t})(),y0=class{route;childContexts;parent;outletData;constructor(e,n,r,i){this.route=e,this.childContexts=n,this.parent=r,this.outletData=i}get(e,n){return e===Qn?this.route:e===Wa?this.childContexts:e===Ik?this.outletData:this.parent.get(e,n)}},Gp=new q("");var D0=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275cmp=dt({type:t,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&qe(0,"router-outlet")},dependencies:[El],encapsulation:2})}return t})();function T0(t){let e=t.children&&t.children.map(T0),n=e?Z(V({},t),{children:e}):V({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==ae&&(n.component=D0),n}function mq(t,e,n){let r=gl(t,e._root,n?n._root:void 0);return new fl(r,e)}function gl(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=yq(t,e,n);return new gn(r,i)}else{if(t.shouldAttach(e.value)){let o=t.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>gl(t,a)),s}}let r=vq(e.value),i=e.children.map(o=>gl(t,o));return new gn(r,i)}}function yq(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return gl(t,r,i);return gl(t,r)})}function vq(t){return new Qn(new Ct(t.url),new Ct(t.params),new Ct(t.queryParams),new Ct(t.fragment),new Ct(t.data),t.outlet,t.component,t)}var qa=class{redirectTo;navigationBehaviorOptions;constructor(e,n){this.redirectTo=e,this.navigationBehaviorOptions=n}},wk="ngNavigationCancelingError";function Hp(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=Qi(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=bk(!1,Yt.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function bk(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[wk]=!0,n.cancellationCode=e,n}function _q(t){return Dk(t)&&Qi(t.url)}function Dk(t){return!!t&&t[wk]}var Eq=(t,e,n,r)=>ge(i=>(new v0(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),v0=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,n,r,i,o){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),a0(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=ja(n);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,n,s.children)}else this.deactivateChildRoutes(e,n,r);else o&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=ja(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=ja(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=ja(n);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new jp(o.value.snapshot))}),e.children.length&&this.forwardEvent(new Lp(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(a0(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,s.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),a0(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},qp=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Ba=class{component;route;constructor(e,n){this.component=e,this.route=n}};function Iq(t,e,n){let r=t._root,i=e?e._root:null;return ol(r,i,n,[r.value])}function wq(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function Ka(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!Cm(t)?t:e.get(t):r}function ol(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=ja(e);return t.children.forEach(s=>{bq(s,o[s.value.outlet],n,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>cl(a,n.getContext(s),i)),i}function bq(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let u=Dq(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new qp(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?ol(t,e,a?a.children:null,r,i):ol(t,e,n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Ba(a.outlet.component,s))}else s&&cl(e,a,i),i.canActivateChecks.push(new qp(r)),o.component?ol(t,null,a?a.children:null,r,i):ol(t,null,n,r,i);return i}function Dq(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!os(t.url,e.url);case"pathParamsOrQueryParamsChange":return!os(t.url,e.url)||!Ir(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!m0(t,e)||!Ir(t.queryParams,e.queryParams);case"paramsChange":default:return!m0(t,e)}}function cl(t,e,n){let r=ja(t),i=t.value;Object.entries(r).forEach(([o,s])=>{i.component?e?cl(s,e.children.getContext(o),n):cl(s,null,n):cl(s,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new Ba(e.outlet.component,i)):n.canDeactivateChecks.push(new Ba(null,i)):n.canDeactivateChecks.push(new Ba(null,i))}function Il(t){return typeof t=="function"}function Tq(t){return typeof t=="boolean"}function Cq(t){return t&&Il(t.canLoad)}function Sq(t){return t&&Il(t.canActivate)}function Aq(t){return t&&Il(t.canActivateChild)}function Rq(t){return t&&Il(t.canDeactivate)}function xq(t){return t&&Il(t.canMatch)}function Tk(t){return t instanceof Ar||t?.name==="EmptyError"}var Dp=Symbol("INITIAL_VALUE");function za(){return Xt(t=>xd(t.map(e=>e.pipe(xr(1),hm(Dp)))).pipe(ge(e=>{for(let n of e)if(n!==!0){if(n===Dp)return Dp;if(n===!1||Nq(n))return n}return!0}),sn(e=>e!==Dp),xr(1)))}function Nq(t){return Qi(t)||t instanceof qa}function Mq(t,e){return Xe(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return s.length===0&&o.length===0?X(Z(V({},n),{guardsResult:!0})):kq(s,r,i,t).pipe(Xe(a=>a&&Tq(a)?Pq(r,o,t,e):X(a)),ge(a=>Z(V({},n),{guardsResult:a})))})}function kq(t,e,n,r){return Ue(t).pipe(Xe(i=>jq(i.component,i.route,n,e,r)),Nr(i=>i!==!0,!0))}function Pq(t,e,n,r){return Ue(e).pipe(uo(i=>Ms(Fq(i.route.parent,r),Oq(i.route,r),Vq(t,i.path,n),Lq(t,i.route,n))),Nr(i=>i!==!0,!0))}function Oq(t,e){return t!==null&&e&&e(new Vp(t)),X(!0)}function Fq(t,e){return t!==null&&e&&e(new Fp(t)),X(!0)}function Lq(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return X(!0);let i=r.map(o=>bc(()=>{let s=Ga(e)??n,a=Ka(o,s),u=Sq(a)?a.canActivate(e,t):lt(s,()=>a(e,t));return ii(u).pipe(Nr())}));return X(i).pipe(za())}function Vq(t,e,n){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>wq(s)).filter(s=>s!==null).map(s=>bc(()=>{let a=s.guards.map(u=>{let l=Ga(s.node)??n,h=Ka(u,l),p=Aq(h)?h.canActivateChild(r,t):lt(l,()=>h(r,t));return ii(p).pipe(Nr())});return X(a).pipe(za())}));return X(o).pipe(za())}function jq(t,e,n,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return X(!0);let s=o.map(a=>{let u=Ga(e)??i,l=Ka(a,u),h=Rq(l)?l.canDeactivate(t,e,n,r):lt(u,()=>l(t,e,n,r));return ii(h).pipe(Nr())});return X(s).pipe(za())}function Uq(t,e,n,r){let i=e.canLoad;if(i===void 0||i.length===0)return X(!0);let o=i.map(s=>{let a=Ka(s,t),u=Cq(a)?a.canLoad(e,n):lt(t,()=>a(e,n));return ii(u)});return X(o).pipe(za(),Ck(r))}function Ck(t){return tm(ft(e=>{if(typeof e!="boolean")throw Hp(t,e)}),ge(e=>e===!0))}function Bq(t,e,n,r){let i=e.canMatch;if(!i||i.length===0)return X(!0);let o=i.map(s=>{let a=Ka(s,t),u=xq(a)?a.canMatch(e,n):lt(t,()=>a(e,n));return ii(u)});return X(o).pipe(za(),Ck(r))}var ml=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},yl=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function Va(t){return xs(new ml(t))}function $q(t){return xs(new H(4e3,!1))}function Hq(t){return xs(bk(!1,Yt.GuardRejected))}var _0=class{urlSerializer;urlTree;constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return X(r);if(i.numberOfChildren>1||!i.children[ae])return $q(`${e.redirectTo}`);i=i.children[ae]}}applyRedirectCommands(e,n,r,i,o){return qq(n,i,o).pipe(ge(s=>{if(s instanceof br)throw new yl(s);let a=this.applyRedirectCreateUrlTree(s,this.urlSerializer.parse(s),e,r);if(s[0]==="/")throw new yl(a);return a}))}applyRedirectCreateUrlTree(e,n,r,i){let o=this.createSegmentGroup(e,n.root,r,i);return new br(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=n[a]}else r[i]=o}),r}createSegmentGroup(e,n,r,i){let o=this.createSegments(e,n.segments,r,i),s={};return Object.entries(n.children).forEach(([a,u])=>{s[a]=this.createSegmentGroup(e,u,r,i)}),new De(o,s)}createSegments(e,n,r,i){return n.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new H(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}};function qq(t,e,n){if(typeof t=="string")return X(t);let r=t,{queryParams:i,fragment:o,routeConfig:s,url:a,outlet:u,params:l,data:h,title:p}=e;return ii(lt(n,()=>r({params:l,data:h,queryParams:i,fragment:o,routeConfig:s,url:a,outlet:u,title:p})))}var E0={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function zq(t,e,n,r,i){let o=Sk(t,e,n);return o.matched?(r=fq(e,r),Bq(r,e,n,i).pipe(ge(s=>s===!0?o:V({},E0)))):X(o)}function Sk(t,e,n){if(e.path==="**")return Gq(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?V({},E0):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||nk)(n,t,e);if(!i)return V({},E0);let o={};Object.entries(i.posParams??{}).forEach(([a,u])=>{o[a]=u.path});let s=i.consumed.length>0?V(V({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function Gq(t){return{matched:!0,parameters:t.length>0?ik(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function XM(t,e,n,r){return n.length>0&&Qq(t,n,r)?{segmentGroup:new De(e,Kq(r,new De(n,t.children))),slicedSegments:[]}:n.length===0&&Yq(t,n,r)?{segmentGroup:new De(t.segments,Wq(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new De(t.segments,t.children),slicedSegments:n}}function Wq(t,e,n,r){let i={};for(let o of n)if(Wp(t,e,o)&&!r[Wn(o)]){let s=new De([],{});i[Wn(o)]=s}return V(V({},r),i)}function Kq(t,e){let n={};n[ae]=e;for(let r of t)if(r.path===""&&Wn(r)!==ae){let i=new De([],{});n[Wn(r)]=i}return n}function Qq(t,e,n){return n.some(r=>Wp(t,e,r)&&Wn(r)!==ae)}function Yq(t,e,n){return n.some(r=>Wp(t,e,r))}function Wp(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function Zq(t,e,n){return e.length===0&&!t.children[n]}var I0=class{};function Jq(t,e,n,r,i,o,s="emptyOnly"){return new w0(t,e,n,r,i,s,o).recognize()}var Xq=31,w0=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,n,r,i,o,s,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new _0(this.urlSerializer,this.urlTree)}noMatchError(e){return new H(4002,`'${e.segmentGroup}'`)}recognize(){let e=XM(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(ge(({children:n,rootSnapshot:r})=>{let i=new gn(r,n),o=new pl("",i),s=fk(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let n=new ss([],Object.freeze({}),Object.freeze(V({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),ae,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,ae,n).pipe(ge(r=>({children:r,rootSnapshot:n})),Rr(r=>{if(r instanceof yl)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof ml?this.noMatchError(r):r}))}processSegmentGroup(e,n,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r,o):this.processSegment(e,n,r,r.segments,i,!0,o).pipe(ge(s=>s instanceof gn?[s]:[]))}processChildren(e,n,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return Ue(o).pipe(uo(s=>{let a=r.children[s],u=pq(n,s);return this.processSegmentGroup(e,u,a,s,i)}),dm((s,a)=>(s.push(...a),s)),hi(null),lm(),Xe(s=>{if(s===null)return Va(r);let a=Ak(s);return ez(a),X(a)}))}processSegment(e,n,r,i,o,s,a){return Ue(n).pipe(uo(u=>this.processSegmentAgainstRoute(u._injector??e,n,u,r,i,o,s,a).pipe(Rr(l=>{if(l instanceof ml)return X(null);throw l}))),Nr(u=>!!u),Rr(u=>{if(Tk(u))return Zq(r,i,o)?X(new I0):Va(r);throw u}))}processSegmentAgainstRoute(e,n,r,i,o,s,a,u){return Wn(r)!==s&&(s===ae||!Wp(i,o,r))?Va(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,u):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,o,s,u):Va(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,o,s,a){let{matched:u,parameters:l,consumedSegments:h,positionalParamSegments:p,remainingSegments:g}=Sk(n,i,o);if(!u)return Va(n);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>Xq&&(this.allowRedirects=!1));let y=new ss(o,l,Object.freeze(V({},this.urlTree.queryParams)),this.urlTree.fragment,ek(i),Wn(i),i.component??i._loadedComponent??null,i,tk(i)),w=$p(y,a,this.paramsInheritanceStrategy);return y.params=Object.freeze(w.params),y.data=Object.freeze(w.data),this.applyRedirects.applyRedirectCommands(h,i.redirectTo,p,y,e).pipe(Xt(x=>this.applyRedirects.lineralizeSegments(i,x)),Xe(x=>this.processSegment(e,r,n,x.concat(g),s,!1,a)))}matchSegmentAgainstRoute(e,n,r,i,o,s){let a=zq(n,r,i,e,this.urlSerializer);return r.path==="**"&&(n.children={}),a.pipe(Xt(u=>u.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(Xt(({routes:l})=>{let h=r._loadedInjector??e,{parameters:p,consumedSegments:g,remainingSegments:y}=u,w=new ss(g,p,Object.freeze(V({},this.urlTree.queryParams)),this.urlTree.fragment,ek(r),Wn(r),r.component??r._loadedComponent??null,r,tk(r)),k=$p(w,s,this.paramsInheritanceStrategy);w.params=Object.freeze(k.params),w.data=Object.freeze(k.data);let{segmentGroup:x,slicedSegments:j}=XM(n,g,y,l);if(j.length===0&&x.hasChildren())return this.processChildren(h,l,x,w).pipe(ge(W=>new gn(w,W)));if(l.length===0&&j.length===0)return X(new gn(w,[]));let z=Wn(r)===o;return this.processSegment(h,l,x,j,z?ae:o,!0,w).pipe(ge(W=>new gn(w,W instanceof gn?[W]:[])))}))):Va(n)))}getChildConfig(e,n,r){return n.children?X({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?X({routes:n._loadedRoutes,injector:n._loadedInjector}):Uq(e,n,r,this.urlSerializer).pipe(Xe(i=>i?this.configLoader.loadChildren(e,n).pipe(ft(o=>{n._loadedRoutes=o.routes,n._loadedInjector=o.injector})):Hq(n))):X({routes:[],injector:e})}};function ez(t){t.sort((e,n)=>e.value.outlet===ae?-1:n.value.outlet===ae?1:e.value.outlet.localeCompare(n.value.outlet))}function tz(t){let e=t.value.routeConfig;return e&&e.path===""}function Ak(t){let e=[],n=new Set;for(let r of t){if(!tz(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=Ak(r.children);e.push(new gn(r.value,i))}return e.filter(r=>!n.has(r))}function ek(t){return t.data||{}}function tk(t){return t.resolve||{}}function nz(t,e,n,r,i,o){return Xe(s=>Jq(t,e,n,r,s.extractedUrl,i,o).pipe(ge(({state:a,tree:u})=>Z(V({},s),{targetSnapshot:a,urlAfterRedirects:u}))))}function rz(t,e){return Xe(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return X(n);let o=new Set(i.map(u=>u.route)),s=new Set;for(let u of o)if(!s.has(u))for(let l of Rk(u))s.add(l);let a=0;return Ue(s).pipe(uo(u=>o.has(u)?iz(u,r,t,e):(u.data=$p(u,u.parent,t).resolve,X(void 0))),ft(()=>a++),ks(1),Xe(u=>a===s.size?X(n):Zt))})}function Rk(t){let e=t.children.map(n=>Rk(n)).flat();return[t,...e]}function iz(t,e,n,r){let i=t.routeConfig,o=t._resolve;return i?.title!==void 0&&!Ek(i)&&(o[vl]=i.title),bc(()=>(t.data=$p(t,t.parent,n).resolve,oz(o,t,e,r).pipe(ge(s=>(t._resolvedData=s,t.data=V(V({},t.data),s),null)))))}function oz(t,e,n,r){let i=l0(t);if(i.length===0)return X({});let o={};return Ue(i).pipe(Xe(s=>sz(t[s],e,n,r).pipe(Nr(),ft(a=>{if(a instanceof qa)throw Hp(new cs,a);o[s]=a}))),ks(1),ge(()=>o),Rr(s=>Tk(s)?Zt:xs(s)))}function sz(t,e,n,r){let i=Ga(e)??r,o=Ka(t,i),s=o.resolve?o.resolve(e,n):lt(i,()=>o(e,n));return ii(s)}function c0(t){return Xt(e=>{let n=t(e);return n?Ue(n).pipe(ge(()=>e)):X(e)})}var C0=(()=>{class t{buildTitle(n){let r,i=n.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===ae);return r}getResolvedTitleForRoute(n){return n.data[vl]}static \u0275fac=function(r){return new(r||t)};static \u0275prov=G({token:t,factory:()=>M(xk),providedIn:"root"})}return t})(),xk=(()=>{class t extends C0{title;constructor(n){super(),this.title=n}updateTitle(n){let r=this.buildTitle(n);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||t)(se(ZS))};static \u0275prov=G({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Qa=new q("",{providedIn:"root",factory:()=>({})}),wl=new q(""),Nk=(()=>{class t{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=M(Lv);loadComponent(n,r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return X(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=ii(lt(n,()=>r.loadComponent())).pipe(ge(kk),Xt(Pk),ft(s=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s}),Dc(()=>{this.componentLoaders.delete(r)})),o=new Cs(i,()=>new We).pipe(Ts());return this.componentLoaders.set(r,o),o}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return X({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=Mk(r,this.compiler,n,this.onLoadEndListener).pipe(Dc(()=>{this.childrenLoaders.delete(r)})),s=new Cs(o,()=>new We).pipe(Ts());return this.childrenLoaders.set(r,s),s}static \u0275fac=function(r){return new(r||t)};static \u0275prov=G({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Mk(t,e,n,r){return ii(lt(n,()=>t.loadChildren())).pipe(ge(kk),Xt(Pk),Xe(i=>i instanceof jh||Array.isArray(i)?X(i):Ue(e.compileModuleAsync(i))),ge(i=>{r&&r(t);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(n).injector,s=o.get(wl,[],{optional:!0,self:!0}).flat()),{routes:s.map(T0),injector:o}}))}function az(t){return t&&typeof t=="object"&&"default"in t}function kk(t){return az(t)?t.default:t}function Pk(t){return X(t)}var Kp=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=G({token:t,factory:()=>M(cz),providedIn:"root"})}return t})(),cz=(()=>{class t{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}static \u0275fac=function(r){return new(r||t)};static \u0275prov=G({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Ok=new q("");var Fk=new q(""),Lk=(()=>{class t{currentNavigation=Ae(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=null;events=new We;transitionAbortWithErrorSubject=new We;configLoader=M(Nk);environmentInjector=M(et);destroyRef=M(Mn);urlSerializer=M(_l);rootContexts=M(Wa);location=M(ta);inputBindingEnabled=M(Gp,{optional:!0})!==null;titleStrategy=M(C0);options=M(Qa,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=M(Kp);createViewTransition=M(Ok,{optional:!0});navigationErrorHandler=M(Fk,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>X(void 0);rootComponentType=null;destroyed=!1;constructor(){let n=i=>this.events.next(new Pp(i)),r=i=>this.events.next(new Op(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=n,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(n){let r=++this.navigationId;Et(()=>{this.transitions?.next(Z(V({},n),{extractedUrl:this.urlHandlingStrategy.extract(n.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,abortController:new AbortController,id:r}))})}setupNavigations(n){return this.transitions=new Ct(null),this.transitions.pipe(sn(r=>r!==null),Xt(r=>{let i=!1;return X(r).pipe(Xt(o=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",Yt.SupersededByNewNavigation),Zt;this.currentTransition=r,this.currentNavigation.set({id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,targetBrowserUrl:typeof o.extras.browserUrl=="string"?this.urlSerializer.parse(o.extras.browserUrl):o.extras.browserUrl,trigger:o.source,extras:o.extras,previousNavigation:this.lastSuccessfulNavigation?Z(V({},this.lastSuccessfulNavigation),{previousNavigation:null}):null,abort:()=>o.abortController.abort()});let s=!n.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),a=o.extras.onSameUrlNavigation??n.onSameUrlNavigation;if(!s&&a!=="reload")return this.events.next(new ri(o.id,this.urlSerializer.serialize(o.rawUrl),"",ll.IgnoredSameUrlNavigation)),o.resolve(!1),Zt;if(this.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return X(o).pipe(Xt(u=>(this.events.next(new us(u.id,this.urlSerializer.serialize(u.extractedUrl),u.source,u.restoredState)),u.id!==this.navigationId?Zt:Promise.resolve(u))),nz(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,this.paramsInheritanceStrategy),ft(u=>{r.targetSnapshot=u.targetSnapshot,r.urlAfterRedirects=u.urlAfterRedirects,this.currentNavigation.update(h=>(h.finalUrl=u.urlAfterRedirects,h));let l=new dl(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(l)}));if(s&&this.urlHandlingStrategy.shouldProcessUrl(o.currentRawUrl)){let{id:u,extractedUrl:l,source:h,restoredState:p,extras:g}=o,y=new us(u,this.urlSerializer.serialize(l),h,p);this.events.next(y);let w=vk(this.rootComponentType).snapshot;return this.currentTransition=r=Z(V({},o),{targetSnapshot:w,urlAfterRedirects:l,extras:Z(V({},g),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.update(k=>(k.finalUrl=l,k)),X(r)}else return this.events.next(new ri(o.id,this.urlSerializer.serialize(o.extractedUrl),"",ll.IgnoredByUrlHandlingStrategy)),o.resolve(!1),Zt}),ft(o=>{let s=new xp(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(s)}),ge(o=>(this.currentTransition=r=Z(V({},o),{guards:Iq(o.targetSnapshot,o.currentSnapshot,this.rootContexts)}),r)),Mq(this.environmentInjector,o=>this.events.next(o)),ft(o=>{if(r.guardsResult=o.guardsResult,o.guardsResult&&typeof o.guardsResult!="boolean")throw Hp(this.urlSerializer,o.guardsResult);let s=new Np(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(s)}),sn(o=>o.guardsResult?!0:(this.cancelNavigationTransition(o,"",Yt.GuardRejected),!1)),c0(o=>{if(o.guards.canActivateChecks.length!==0)return X(o).pipe(ft(s=>{let a=new Mp(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),Xt(s=>{let a=!1;return X(s).pipe(rz(this.paramsInheritanceStrategy,this.environmentInjector),ft({next:()=>a=!0,complete:()=>{a||this.cancelNavigationTransition(s,"",Yt.NoDataFromResolver)}}))}),ft(s=>{let a=new kp(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}))}),c0(o=>{let s=a=>{let u=[];if(a.routeConfig?.loadComponent){let l=Ga(a)??this.environmentInjector;u.push(this.configLoader.loadComponent(l,a.routeConfig).pipe(ft(h=>{a.component=h}),ge(()=>{})))}for(let l of a.children)u.push(...s(l));return u};return xd(s(o.targetSnapshot.root)).pipe(hi(null),xr(1))}),c0(()=>this.afterPreactivation()),Xt(()=>{let{currentSnapshot:o,targetSnapshot:s}=r,a=this.createViewTransition?.(this.environmentInjector,o.root,s.root);return a?Ue(a).pipe(ge(()=>r)):X(r)}),ge(o=>{let s=mq(n.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return this.currentTransition=r=Z(V({},o),{targetRouterState:s}),this.currentNavigation.update(a=>(a.targetRouterState=s,a)),r}),ft(()=>{this.events.next(new hl)}),Eq(this.rootContexts,n.routeReuseStrategy,o=>this.events.next(o),this.inputBindingEnabled),xr(1),Md(new ce(o=>{let s=r.abortController.signal,a=()=>o.next();return s.addEventListener("abort",a),()=>s.removeEventListener("abort",a)}).pipe(sn(()=>!i&&!r.targetRouterState),ft(()=>{this.cancelNavigationTransition(r,r.abortController.signal.reason+"",Yt.Aborted)}))),ft({next:o=>{i=!0,this.lastSuccessfulNavigation=Et(this.currentNavigation),this.events.next(new Kn(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects))),this.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{i=!0}}),Md(this.transitionAbortWithErrorSubject.pipe(ft(o=>{throw o}))),Dc(()=>{i||this.cancelNavigationTransition(r,"",Yt.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),Rr(o=>{if(this.destroyed)return r.resolve(!1),Zt;if(i=!0,Dk(o))this.events.next(new wr(r.id,this.urlSerializer.serialize(r.extractedUrl),o.message,o.cancellationCode)),_q(o)?this.events.next(new Ha(o.url,o.navigationBehaviorOptions)):r.resolve(!1);else{let s=new $a(r.id,this.urlSerializer.serialize(r.extractedUrl),o,r.targetSnapshot??void 0);try{let a=lt(this.environmentInjector,()=>this.navigationErrorHandler?.(s));if(a instanceof qa){let{message:u,cancellationCode:l}=Hp(this.urlSerializer,a);this.events.next(new wr(r.id,this.urlSerializer.serialize(r.extractedUrl),u,l)),this.events.next(new Ha(a.redirectTo,a.navigationBehaviorOptions))}else throw this.events.next(s),o}catch(a){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(a)}}return Zt}))}))}cancelNavigationTransition(n,r,i){let o=new wr(n.id,this.urlSerializer.serialize(n.extractedUrl),r,i);this.events.next(o),n.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let n=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=Et(this.currentNavigation),i=r?.targetBrowserUrl??r?.extractedUrl;return n.toString()!==i?.toString()&&!r?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||t)};static \u0275prov=G({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function uz(t){return t!==al}var Vk=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=G({token:t,factory:()=>M(lz),providedIn:"root"})}return t})(),zp=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},lz=(()=>{class t extends zp{static \u0275fac=(()=>{let n;return function(i){return(n||(n=Ii(t)))(i||t)}})();static \u0275prov=G({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),jk=(()=>{class t{urlSerializer=M(_l);options=M(Qa,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=M(ta);urlHandlingStrategy=M(Kp);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new br;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:n,initialUrl:r,targetBrowserUrl:i}){let o=n!==void 0?this.urlHandlingStrategy.merge(n,r):r,s=i??o;return s instanceof br?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:n,finalUrl:r,initialUrl:i}){r&&n?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=n):this.rawUrlTree=i}routerState=vk(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:n}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n??this.rawUrlTree)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=G({token:t,factory:()=>M(dz),providedIn:"root"})}return t})(),dz=(()=>{class t extends jk{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(n){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{n(r.url,r.state,"popstate")})})}handleRouterEvent(n,r){n instanceof us?this.updateStateMemento():n instanceof ri?this.commitTransition(r):n instanceof dl?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):n instanceof hl?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):n instanceof wr&&n.code!==Yt.SupersededByNewNavigation&&n.code!==Yt.Redirect?this.restoreHistory(r):n instanceof $a?this.restoreHistory(r,!0):n instanceof Kn&&(this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId)}setBrowserUrl(n,{extras:r,id:i}){let{replaceUrl:o,state:s}=r;if(this.location.isCurrentPathEqualTo(n)||o){let a=this.browserPageId,u=V(V({},s),this.generateNgRouterState(i,a));this.location.replaceState(n,"",u)}else{let a=V(V({},s),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(n,"",a)}}restoreHistory(n,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===n.finalUrl&&o===0&&(this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return this.canceledNavigationResolution==="computed"?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}static \u0275fac=(()=>{let n;return function(i){return(n||(n=Ii(t)))(i||t)}})();static \u0275prov=G({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function S0(t,e){t.events.pipe(sn(n=>n instanceof Kn||n instanceof wr||n instanceof $a||n instanceof ri),ge(n=>n instanceof Kn||n instanceof ri?0:(n instanceof wr?n.code===Yt.Redirect||n.code===Yt.SupersededByNewNavigation:!1)?2:1),sn(n=>n!==2),xr(1)).subscribe(()=>{e()})}var hz={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},fz={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},tn=(()=>{class t{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=M(Rv);stateManager=M(jk);options=M(Qa,{optional:!0})||{};pendingTasks=M(rr);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=M(Lk);urlSerializer=M(_l);location=M(ta);urlHandlingStrategy=M(Kp);injector=M(et);_events=new We;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=M(Vk);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=M(wl,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!M(Gp,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:n=>{this.console.warn(n)}}),this.subscribeToNavigationEvents()}eventsSubscription=new He;subscribeToNavigationEvents(){let n=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=Et(this.navigationTransitions.currentNavigation);if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof wr&&r.code!==Yt.Redirect&&r.code!==Yt.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Kn)this.navigated=!0;else if(r instanceof Ha){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),u=V({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||uz(i.source)},s);this.scheduleNavigation(a,al,null,u,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}hq(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),al,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((n,r,i)=>{this.navigateToSyncWithBrowser(n,i,r)})}navigateToSyncWithBrowser(n,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let u=V({},i);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(o.state=u)}let a=this.parseUrl(n);this.scheduleNavigation(a,r,s,o).catch(u=>{this.disposed||this.injector.get(Gt)(u)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return Et(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(T0),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:u}=r,l=u?this.currentUrlTree.fragment:s,h=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":h=V(V({},this.currentUrlTree.queryParams),o);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=o||null}h!==null&&(h=this.removeEmptyProps(h));let p;try{let g=i?i.snapshot:this.routerState.snapshot.root;p=pk(g)}catch{(typeof n[0]!="string"||n[0][0]!=="/")&&(n=[]),p=this.currentUrlTree.root}return gk(p,n,h,l??null)}navigateByUrl(n,r={skipLocationChange:!1}){let i=Qi(n)?n:this.parseUrl(n),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,al,null,r)}navigate(n,r={skipLocationChange:!1}){return pz(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){try{return this.urlSerializer.parse(n)}catch{return this.urlSerializer.parse("/")}}isActive(n,r){let i;if(r===!0?i=V({},hz):r===!1?i=V({},fz):i=r,Qi(n))return QM(this.currentUrlTree,n,i);let o=this.parseUrl(n);return QM(this.currentUrlTree,o,i)}removeEmptyProps(n){return Object.entries(n).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(n,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,u,l;s?(a=s.resolve,u=s.reject,l=s.promise):l=new Promise((p,g)=>{a=p,u=g});let h=this.pendingTasks.add();return S0(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:o,resolve:a,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(p=>Promise.reject(p))}static \u0275fac=function(r){return new(r||t)};static \u0275prov=G({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function pz(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new H(4008,!1)}var Yi=(()=>{class t{router;route;tabIndexAttribute;renderer;el;locationStrategy;reactiveHref=Ae(null);get href(){return Et(this.reactiveHref)}set href(n){this.reactiveHref.set(n)}target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new We;applicationErrorHandler=M(Gt);options=M(Qa,{optional:!0});constructor(n,r,i,o,s,a){this.router=n,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=a,this.reactiveHref.set(M(new qh("href"),{optional:!0}));let u=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=u==="a"||u==="area"||!!(typeof customElements=="object"&&customElements.get(u)?.observedAttributes?.includes?.("href")),this.isAnchorElement?this.setTabIndexIfNotOnNativeEl("0"):this.subscribeToNavigationEventsIfNecessary()}subscribeToNavigationEventsIfNecessary(){if(this.subscription!==void 0||!this.isAnchorElement)return;let n=this.preserveFragment,r=i=>i==="merge"||i==="preserve";n||=r(this.queryParamsHandling),n||=!this.queryParamsHandling&&!r(this.options?.defaultQueryParamsHandling),n&&(this.subscription=this.router.events.subscribe(i=>{i instanceof Kn&&this.updateHref()}))}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(n){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",n)}ngOnChanges(n){this.isAnchorElement&&(this.updateHref(),this.subscribeToNavigationEventsIfNecessary()),this.onChanges.next(this)}routerLinkInput=null;set routerLink(n){n==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(Qi(n)?this.routerLinkInput=n:this.routerLinkInput=Array.isArray(n)?n:[n],this.setTabIndexIfNotOnNativeEl("0"))}onClick(n,r,i,o,s){let a=this.urlTree;if(a===null||this.isAnchorElement&&(n!==0||r||i||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let u={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,u)?.catch(l=>{this.applicationErrorHandler(l)}),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let n=this.urlTree;this.reactiveHref.set(n!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(n))??"":null)}applyAttributeValue(n,r){let i=this.renderer,o=this.el.nativeElement;r!==null?i.setAttribute(o,n,r):i.removeAttribute(o,n)}get urlTree(){return this.routerLinkInput===null?null:Qi(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||t)(me(tn),me(Qn),Jc("tabindex"),me(Br),me(ln),me(ea))};static \u0275dir=nt({type:t,selectors:[["","routerLink",""]],hostVars:2,hostBindings:function(r,i){r&1&&Ne("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),r&2&&Si("href",i.reactiveHref(),lv)("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",Po],skipLocationChange:[2,"skipLocationChange","skipLocationChange",Po],replaceUrl:[2,"replaceUrl","replaceUrl",Po],routerLink:"routerLink"},features:[or]})}return t})(),A0=(()=>{class t{router;element;renderer;cdr;link;links;classes=[];routerEventsSubscription;linkInputChangesSubscription;_isActive=!1;get isActive(){return this._isActive}routerLinkActiveOptions={exact:!1};ariaCurrentWhenActive;isActiveChange=new Qe;constructor(n,r,i,o,s){this.router=n,this.element=r,this.renderer=i,this.cdr=o,this.link=s,this.routerEventsSubscription=n.events.subscribe(a=>{a instanceof Kn&&this.update()})}ngAfterContentInit(){X(this.links.changes,X(null)).pipe(Ns()).subscribe(n=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();let n=[...this.links.toArray(),this.link].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=Ue(n).pipe(Ns()).subscribe(r=>{this._isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(n){let r=Array.isArray(n)?n:n.split(" ");this.classes=r.filter(i=>!!i)}ngOnChanges(n){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{let n=this.hasActiveLinks();this.classes.forEach(r=>{n?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),n&&this.ariaCurrentWhenActive!==void 0?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this._isActive!==n&&(this._isActive=n,this.cdr.markForCheck(),this.isActiveChange.emit(n))})}isLinkActive(n){let r=mz(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return i=>{let o=i.urlTree;return o?n.isActive(o,r):!1}}hasActiveLinks(){let n=this.isLinkActive(this.router);return this.link&&n(this.link)||this.links.some(n)}static \u0275fac=function(r){return new(r||t)(me(tn),me(ln),me(Br),me(ko),me(Yi,8))};static \u0275dir=nt({type:t,selectors:[["","routerLinkActive",""]],contentQueries:function(r,i,o){if(r&1&&Pv(o,Yi,5),r&2){let s;Ov(s=Fv())&&(i.links=s)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[or]})}return t})();function mz(t){return!!t.paths}var yz=new q("");function R0(t,...e){return zt([{provide:wl,multi:!0,useValue:t},[],{provide:Qn,useFactory:vz,deps:[tn]},{provide:Uh,multi:!0,useFactory:_z},e.map(n=>n.\u0275providers)])}function vz(t){return t.routerState.root}function _z(){let t=M(Be);return e=>{let n=t.get(Ci);if(e!==n.components[0])return;let r=t.get(tn),i=t.get(Ez);t.get(Iz)===1&&r.initialNavigation(),t.get(wz,null,{optional:!0})?.setUpPreloading(),t.get(yz,null,{optional:!0})?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var Ez=new q("",{factory:()=>new We}),Iz=new q("",{providedIn:"root",factory:()=>1});var wz=new q("");var nn=class t{theme=Ae("dark");themeClasses=Wt(()=>this.theme()==="dark"?"bg-gray-900 text-white":"bg-gray-50 text-gray-900");toggleText=Wt(()=>this.theme()==="dark"?"\u2600\uFE0F Light":"\u{1F319} Dark");isDark=Wt(()=>this.theme()==="dark");toggleTheme(){this.theme.set(this.theme()==="light"?"dark":"light")}get currentTheme(){return this.theme()}getTheme(){return this.theme()}static \u0275fac=function(n){return new(n||t)};static \u0275prov=G({token:t,factory:t.\u0275fac,providedIn:"root"})};var Dr=class t{firestore=M(rs);storage=M(is);projects=Ae([]);loading=Ae(!1);error=Ae(null);publishedProjects=Wt(()=>this.projects().filter(e=>e.published));draftProjects=Wt(()=>this.projects().filter(e=>!e.published));get allProjects(){return this.projects()}get isLoading(){return this.loading()}get hasError(){return this.error()}async loadProjects(){this.loading.set(!0),this.error.set(null);try{let e=qw(this.firestore,"projects"),n=fM(e,hM("createdAt","desc")),i=(await lM(n)).docs.map(o=>{let s=o.data();console.log("Raw Firestore data:",s);let a=Z(V({id:o.id},s),{createdAt:s.createdAt?.toDate?s.createdAt.toDate():s.createdAt,updatedAt:s.updatedAt?.toDate?s.updatedAt.toDate():s.updatedAt});return console.log("Processed project:",a),a});this.projects.set(i)}catch(e){this.error.set("Failed to load projects"),console.error("Error loading projects:",e)}finally{this.loading.set(!1)}}async addProject(e){this.loading.set(!0),this.error.set(null);try{let n=new Date,r=Z(V({},e),{createdAt:n,updatedAt:n});console.log("Saving project to Firestore:",r);let i=qw(this.firestore,"projects"),o=await cM(i,r);console.log("Project saved with ID:",o.id);let s=V({id:o.id},r);return this.projects.update(a=>[s,...a]),o.id}catch(n){throw this.error.set("Failed to add project"),console.error("Error adding project:",n),n}finally{this.loading.set(!1)}}async updateProject(e,n){this.loading.set(!0),this.error.set(null);try{let r=zw(this.firestore,"projects",e),i=Z(V({},n),{updatedAt:new Date});await pM(r,i),this.projects.update(o=>o.map(s=>s.id===e?V(V({},s),i):s))}catch(r){throw this.error.set("Failed to update project"),console.error("Error updating project:",r),r}finally{this.loading.set(!1)}}async deleteProject(e){this.loading.set(!0),this.error.set(null);try{let n=this.projects().find(i=>i.id===e);n?.images&&n.images.length>0&&await this.deleteProjectImages(n.images);let r=zw(this.firestore,"projects",e);await uM(r),this.projects.update(i=>i.filter(o=>o.id!==e))}catch(n){throw this.error.set("Failed to delete project"),console.error("Error deleting project:",n),n}finally{this.loading.set(!1)}}async uploadImages(e){console.log("Starting upload of",e.length,"files");let n=e.map(async(i,o)=>{let a=`${Date.now()}_${i.name}`,u=i0(this.storage,`projects/${a}`);console.log(`Uploading file ${o+1}:`,a);try{let l=await WM(u,i),h=await zM(l.ref);return console.log(`Upload successful for ${a}:`,h),console.log("URL starts with http:",h.startsWith("http")),h}catch(l){throw console.error("Error uploading image:",l),l}}),r=await Promise.all(n);return console.log("All uploads completed:",r),r}async deleteProjectImages(e){let n=e.map(async r=>{try{let i=i0(this.storage,r);await qM(i)}catch(i){console.error("Error deleting image:",i)}});await Promise.all(n)}static \u0275fac=function(n){return new(n||t)};static \u0275prov=G({token:t,factory:t.\u0275fac,providedIn:"root"})};var Qp=class t{emoji="\u2728";label="";dark=!1;static \u0275fac=function(n){return new(n||t)};static \u0275cmp=dt({type:t,selectors:[["app-skill-card"]],inputs:{emoji:"emoji",label:"label",dark:"dark"},decls:5,vars:6,consts:[[1,"text-3xl","mb-2"]],template:function(n,r){n&1&&(iu(0,"div")(1,"div",0),F(2),ou(),iu(3,"h3"),F(4),ou()()),n&2&&(P(r.dark?"bg-gray-800 p-6 rounded-lg text-center hover:bg-gray-700 transition-colors":"bg-white p-6 rounded-lg text-center hover:bg-gray-50 transition-colors shadow-md"),C(2),ht(r.emoji),C(),P(r.dark?"text-white font-semibold":"text-gray-900 font-semibold"),C(),ht(r.label))},encapsulation:2})};var bz=(t,e)=>e.id;function Dz(t,e){if(t&1&&(A(0,"div")(1,"p",25),F(2,"No projects published yet."),N(),A(3,"p",26),F(4,"Check back soon for amazing projects!"),N()()),t&2){let n=he();P(n.isDark()?"text-center text-gray-400":"text-center text-gray-500")}}function Tz(t,e){if(t&1&&(A(0,"div",27),qe(1,"img",34),N()),t&2){let n=he().$implicit;C(),ye("src",n.images[0],en)("alt",n.title)}}function Cz(t,e){if(t&1&&(A(0,"div",28)(1,"div"),F(2,"\u{1F4C1}"),N()()),t&2){let n=he(3);C(),P((n.isDark(),"text-white text-4xl"))}}function Sz(t,e){if(t&1&&(A(0,"span",31),F(1),N()),t&2){let n=e.$implicit;C(),ht(n)}}function Az(t,e){if(t&1&&(A(0,"a",35),F(1,"Demo"),N()),t&2){let n=he().$implicit,r=he(2);P(r.isDark()?"text-blue-400 hover:text-blue-300":"text-blue-600 hover:text-blue-500"),ye("href",n.links.demo,en)}}function Rz(t,e){if(t&1&&(A(0,"a",35),F(1,"GitHub"),N()),t&2){let n=he().$implicit,r=he(2);P(r.isDark()?"text-gray-400 hover:text-gray-300":"text-gray-600 hover:text-gray-500"),ye("href",n.links.repo,en)}}function xz(t,e){if(t&1&&(A(0,"a",35),F(1,"Live"),N()),t&2){let n=he().$implicit,r=he(2);P(r.isDark()?"text-green-400 hover:text-green-300":"text-green-600 hover:text-green-500"),ye("href",n.links.live,en)}}function Nz(t,e){if(t&1&&(A(0,"div"),Pe(1,Tz,2,2,"div",27)(2,Cz,3,2,"div",28),A(3,"div",29)(4,"h3"),F(5),N(),A(6,"p"),F(7),N(),A(8,"div",30),Ln(9,Sz,2,1,"span",31,ru),N(),A(11,"div",32),Pe(12,Az,2,3,"a",33),Pe(13,Rz,2,3,"a",33),Pe(14,xz,2,3,"a",33),N()()()),t&2){let n=e.$implicit,r=he(2);P(r.isDark()?"bg-gray-800 rounded-lg overflow-hidden hover:bg-gray-700 transition-colors":"bg-white rounded-lg overflow-hidden hover:bg-gray-50 transition-colors shadow-md"),C(),Oe(n.images&&n.images.length>0?1:2),C(3),P(r.isDark()?"text-xl font-semibold text-white mb-2":"text-xl font-semibold text-gray-900 mb-2"),C(),ht(n.title),C(),P(r.isDark()?"text-gray-400 mb-4":"text-gray-500 mb-4"),C(),ht(n.description),C(2),Vn(n.tags),C(3),Oe(n.links.demo?12:-1),C(),Oe(n.links.repo?13:-1),C(),Oe(n.links.live?14:-1)}}function Mz(t,e){if(t&1&&(A(0,"div",21),Ln(1,Nz,15,12,"div",20,bz),N()),t&2){let n=he();C(),Vn(n.publishedProjects)}}var Yp=class t{themeService=M(nn);projectsService=M(Dr);ngOnInit(){this.projectsService.loadProjects()}isDark(){return this.themeService.isDark()}get publishedProjects(){return console.log(this.projectsService.publishedProjects()),this.projectsService.publishedProjects()}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=dt({type:t,selectors:[["app-home"]],decls:49,vars:32,consts:[[1,"container","mx-auto","px-4","sm:px-6","py-12","sm:py-16","lg:py-20"],[1,"max-w-4xl","mx-auto","text-center"],[1,"text-blue-600"],[1,"flex","flex-col","sm:flex-row","gap-3","sm:gap-4","justify-center","px-4"],["href","#projects",1,"bg-blue-600","hover:bg-blue-700","text-white","px-6","sm:px-8","py-3","rounded-lg","font-semibold","transition-colors","text-center"],["href","#contact"],[1,"max-w-6xl","mx-auto"],[1,"grid","grid-cols-2","sm:grid-cols-3","md:grid-cols-4","gap-4","sm:gap-6"],["emoji","\u{1F170}\uFE0F","label","Angular",3,"dark"],["emoji","\u{1F7E2}","label","Node.js",3,"dark"],["emoji","\u{1F525}","label","Firebase",3,"dark"],["emoji","\u{1F7E1}","label","JavaScript",3,"dark"],["emoji","\u269B\uFE0F","label","React.js",3,"dark"],["emoji","\u{1F9F1}","label","Laravel",3,"dark"],["emoji","\u{1F418}","label","PHP",3,"dark"],["emoji","\u{1F42C}","label","MySQL",3,"dark"],["emoji","\u{1F517}","label","REST APIs",3,"dark"],["emoji","\u{1F9E9}","label","jQuery",3,"dark"],["emoji","\u26A1\uFE0F","label","AJAX",3,"dark"],["id","projects",1,"container","mx-auto","px-4","sm:px-6","py-12","sm:py-16","lg:py-20"],[3,"class"],[1,"grid","grid-cols-1","sm:grid-cols-2","lg:grid-cols-3","gap-6","sm:gap-8"],["id","contact",1,"container","mx-auto","px-4","sm:px-6","py-12","sm:py-16","lg:py-20"],["href","mailto:khaled@example.com",1,"bg-blue-600","hover:bg-blue-700","text-white","px-6","sm:px-8","py-3","rounded-lg","font-semibold","transition-colors","text-center"],["href","https://github.com","target","_blank"],[1,"text-lg","mb-4"],[1,"text-sm"],[1,"h-48","bg-gradient-to-br","from-blue-500","to-purple-600","flex","items-center","justify-center","overflow-hidden"],[1,"h-48","bg-gradient-to-br","from-blue-500","to-purple-600","flex","items-center","justify-center"],[1,"p-6"],[1,"flex","flex-wrap","gap-2","mb-4"],[1,"bg-blue-600","text-white","px-3","py-1","rounded-full","text-sm"],[1,"flex","gap-4"],["target","_blank",3,"href","class"],[1,"w-full","h-full","object-cover",3,"src","alt"],["target","_blank",3,"href"]],template:function(n,r){n&1&&(A(0,"div")(1,"section",0)(2,"div",1)(3,"h1"),F(4," Hi, I'm "),A(5,"span",2),F(6,"Khaled"),N()(),A(7,"p"),F(8," Full Stack Developer "),N(),A(9,"p"),F(10," I create beautiful, functional web applications with modern technologies. Passionate about clean code and user experience. "),N(),A(11,"div",3)(12,"a",4),F(13," View My Work "),N(),A(14,"a",5),F(15," Get In Touch "),N()()()(),A(16,"section",0)(17,"div",6)(18,"h2"),F(19,"Skills & Technologies"),N(),A(20,"div",7),qe(21,"app-skill-card",8)(22,"app-skill-card",9)(23,"app-skill-card",10)(24,"app-skill-card",11)(25,"app-skill-card",12)(26,"app-skill-card",13)(27,"app-skill-card",14)(28,"app-skill-card",15)(29,"app-skill-card",16)(30,"app-skill-card",17)(31,"app-skill-card",18),N()()(),A(32,"section",19)(33,"div",6)(34,"h2"),F(35,"Featured Projects"),N(),Pe(36,Dz,5,2,"div",20)(37,Mz,3,0,"div",21),N()(),A(38,"section",22)(39,"div",1)(40,"h2"),F(41,"Let's Work Together"),N(),A(42,"p"),F(43," I'm always interested in new opportunities and exciting projects. "),N(),A(44,"div",3)(45,"a",23),F(46," Send Email "),N(),A(47,"a",24),F(48," View GitHub "),N()()()()()),n&2&&(P(r.isDark()?"min-h-screen bg-gradient-to-br from-gray-900 via-gray-800 to-black":"min-h-screen bg-gradient-to-br from-gray-50 via-white to-gray-100"),C(3),P(r.isDark()?"text-3xl sm:text-4xl md:text-5xl lg:text-7xl font-bold text-white mb-4 sm:mb-6":"text-3xl sm:text-4xl md:text-5xl lg:text-7xl font-bold text-gray-900 mb-4 sm:mb-6"),C(4),P(r.isDark()?"text-lg sm:text-xl md:text-2xl text-gray-300 mb-6 sm:mb-8":"text-lg sm:text-xl md:text-2xl text-gray-600 mb-6 sm:mb-8"),C(2),P(r.isDark()?"text-base sm:text-lg text-gray-400 mb-8 sm:mb-12 max-w-2xl mx-auto px-4":"text-base sm:text-lg text-gray-500 mb-8 sm:mb-12 max-w-2xl mx-auto px-4"),C(5),P(r.isDark()?"border border-gray-600 hover:border-gray-500 text-gray-300 hover:text-white px-6 sm:px-8 py-3 rounded-lg font-semibold transition-colors text-center":"border border-gray-400 hover:border-gray-500 text-gray-600 hover:text-gray-900 px-6 sm:px-8 py-3 rounded-lg font-semibold transition-colors text-center"),C(4),P(r.isDark()?"text-2xl sm:text-3xl md:text-4xl font-bold text-white text-center mb-8 sm:mb-12":"text-2xl sm:text-3xl md:text-4xl font-bold text-gray-900 text-center mb-8 sm:mb-12"),C(3),ye("dark",r.isDark()),C(),ye("dark",r.isDark()),C(),ye("dark",r.isDark()),C(),ye("dark",r.isDark()),C(),ye("dark",r.isDark()),C(),ye("dark",r.isDark()),C(),ye("dark",r.isDark()),C(),ye("dark",r.isDark()),C(),ye("dark",r.isDark()),C(),ye("dark",r.isDark()),C(),ye("dark",r.isDark()),C(3),P(r.isDark()?"text-2xl sm:text-3xl md:text-4xl font-bold text-white text-center mb-8 sm:mb-12":"text-2xl sm:text-3xl md:text-4xl font-bold text-gray-900 text-center mb-8 sm:mb-12"),C(2),Oe(r.publishedProjects.length===0?36:37),C(4),P(r.isDark()?"text-2xl sm:text-3xl md:text-4xl font-bold text-white mb-6 sm:mb-8":"text-2xl sm:text-3xl md:text-4xl font-bold text-gray-900 mb-6 sm:mb-8"),C(2),P(r.isDark()?"text-base sm:text-lg text-gray-400 mb-8 sm:mb-12 px-4":"text-base sm:text-lg text-gray-500 mb-8 sm:mb-12 px-4"),C(5),P(r.isDark()?"border border-gray-600 hover:border-gray-500 text-gray-300 hover:text-white px-6 sm:px-8 py-3 rounded-lg font-semibold transition-colors text-center":"border border-gray-400 hover:border-gray-500 text-gray-600 hover:text-gray-900 px-6 sm:px-8 py-3 rounded-lg font-semibold transition-colors text-center"))},dependencies:[Qp],encapsulation:2})};var kz=t=>({backgroundColor:t}),Zp=class t{dark=!1;title="";value="";color="#2563eb";icon="";static \u0275fac=function(n){return new(n||t)};static \u0275cmp=dt({type:t,selectors:[["app-stat-card"]],inputs:{dark:"dark",title:"title",value:"value",color:"color",icon:"icon"},decls:10,vars:12,consts:[[1,"flex","items-center"],[1,"p-3","rounded-lg",3,"ngStyle"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6","text-white"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2"],[1,"ml-4"]],template:function(n,r){n&1&&(A(0,"div")(1,"div",0)(2,"div",1),Hs(),A(3,"svg",2),qe(4,"path",3),N()(),qs(),A(5,"div",4)(6,"p"),F(7),N(),A(8,"p"),F(9),N()()()()),n&2&&(P(r.dark?"bg-gray-800 p-6 rounded-lg":"bg-white p-6 rounded-lg shadow-md"),C(2),ye("ngStyle",cu(10,kz,r.color)),C(2),Si("d",r.icon),C(2),P(r.dark?"text-gray-400 text-sm":"text-gray-600 text-sm"),C(),ht(r.title),C(),P(r.dark?"text-2xl font-bold text-white":"text-2xl font-bold text-gray-900"),C(),ht(r.value))},dependencies:[Yv],encapsulation:2})};var Pz=t=>["/admin/edit",t],Oz=(t,e)=>e.id;function Fz(t,e){if(t&1&&(A(0,"tr")(1,"td",12),F(2," Loading projects... "),N()()),t&2){let n=he();C(),P(n.isDark()?"px-6 py-8 text-center text-gray-400":"px-6 py-8 text-center text-gray-500")}}function Lz(t,e){if(t&1&&(A(0,"tr")(1,"td",12),F(2," Error loading projects "),N()()),t&2){let n=he();C(),P(n.isDark()?"px-6 py-8 text-center text-red-400":"px-6 py-8 text-center text-red-500")}}function Vz(t,e){if(t&1&&(A(0,"tr")(1,"td",12),F(2," No projects yet. "),A(3,"a",13),F(4,"Create your first project"),N()()()),t&2){let n=he();C(),P(n.isDark()?"px-6 py-8 text-center text-gray-400":"px-6 py-8 text-center text-gray-500")}}function jz(t,e){if(t&1&&qe(0,"img",16),t&2){let n=he().$implicit;ye("src",n.images[0],en)("alt",n.title)}}function Uz(t,e){t&1&&(A(0,"div",17)(1,"span",24),F(2,"\u{1F4C1}"),N()())}function Bz(t,e){t&1&&(A(0,"span",19),F(1,"Published"),N())}function $z(t,e){t&1&&(A(0,"span",20),F(1,"Draft"),N())}function Hz(t,e){if(t&1){let n=Ai();A(0,"tr")(1,"td",14)(2,"div",15),Pe(3,jz,1,2,"img",16)(4,Uz,3,0,"div",17),A(5,"div",18)(6,"div"),F(7),N(),A(8,"div"),F(9),N()()()(),A(10,"td",14),Pe(11,Bz,2,0,"span",19)(12,$z,2,0,"span",20),N(),A(13,"td"),F(14),N(),A(15,"td",21)(16,"a",22),F(17,"Edit"),N(),A(18,"button",23),Ne("click",function(){let i=Lr(n).$implicit,o=he(2);return Vr(o.deleteProject(i.id))}),F(19,"Delete"),N()()()}if(t&2){let n=e.$implicit,r=he(2);C(3),Oe(n.images&&n.images.length>0?3:4),C(3),P(r.isDark()?"text-sm font-medium text-white":"text-sm font-medium text-gray-900"),C(),ht(n.title),C(),P(r.isDark()?"text-sm text-gray-400":"text-sm text-gray-500"),C(),ht(n.tags.join(", ")),C(2),Oe(n.published?11:12),C(2),P(r.isDark()?"px-6 py-4 whitespace-nowrap text-sm text-gray-400":"px-6 py-4 whitespace-nowrap text-sm text-gray-500"),C(),In(" ",r.formatDate(n.createdAt)||"Unknown"," "),C(2),P(r.isDark()?"text-blue-400 hover:text-blue-300 mr-3":"text-blue-600 hover:text-blue-500 mr-3"),ye("routerLink",cu(16,Pz,n.id)),C(2),P(r.isDark()?"text-red-400 hover:text-red-300":"text-red-600 hover:text-red-500")}}function qz(t,e){if(t&1&&Ln(0,Hz,20,18,"tr",null,Oz),t&2){let n=he();Vn(n.allProjects)}}var Jp=class t{themeService=M(nn);projectsService=M(Dr);ngOnInit(){this.projectsService.loadProjects()}isDark(){return this.themeService.isDark()}get allProjects(){return this.projectsService.allProjects}get publishedProjects(){return this.projectsService.publishedProjects()}get draftProjects(){return this.projectsService.draftProjects()}get isLoading(){return this.projectsService.isLoading}get hasError(){return this.projectsService.hasError}formatDate(e){try{let n;return e&&typeof e.toDate=="function"?n=e.toDate():e instanceof Date?n=e:e&&typeof e=="string"?n=new Date(e):e&&typeof e=="number"?n=new Date(e):n=new Date,isNaN(n.getTime())?"Invalid Date":n.toLocaleDateString()}catch(n){return console.error("Error formatting date:",n,e),"Invalid Date"}}async deleteProject(e){confirm("Are you sure you want to delete this project?")&&await this.projectsService.deleteProject(e)}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=dt({type:t,selectors:[["app-dashboard"]],decls:38,vars:35,consts:[[1,"container","mx-auto","px-6","py-8"],[1,"flex","items-center","justify-between"],[1,"flex","gap-4"],["routerLink","/admin/add"],[1,"container","mx-auto","px-4","sm:px-6","py-6","sm:py-8"],[1,"grid","grid-cols-1","sm:grid-cols-2","lg:grid-cols-3","gap-4","sm:gap-6","mb-6","sm:mb-8"],["title","Total Projects","color","#2563eb","icon","M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10",3,"dark","value"],["title","Published","color","#16a34a","icon","M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z",3,"dark","value"],["title","Drafts","color","#ca8a04","icon","M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z",3,"dark","value"],[1,"overflow-x-auto"],[1,"w-full"],[1,"divide-y"],["colspan","4"],["routerLink","/admin/add",1,"text-blue-600","hover:text-blue-500"],[1,"px-6","py-4","whitespace-nowrap"],[1,"flex","items-center"],[1,"h-10","w-10","rounded-lg","object-cover",3,"src","alt"],[1,"h-10","w-10","bg-gradient-to-br","from-blue-500","to-purple-600","rounded-lg","flex","items-center","justify-center"],[1,"ml-4"],[1,"inline-flex","px-2","py-1","text-xs","font-semibold","rounded-full","bg-green-100","text-green-800"],[1,"inline-flex","px-2","py-1","text-xs","font-semibold","rounded-full","bg-yellow-100","text-yellow-800"],[1,"px-6","py-4","whitespace-nowrap","text-sm","font-medium"],[3,"routerLink"],[3,"click"],[1,"text-white","text-xs"]],template:function(n,r){n&1&&(A(0,"div")(1,"div")(2,"div",0)(3,"div",1)(4,"div")(5,"h1"),F(6,"Admin Dashboard"),N(),A(7,"p"),F(8,"Manage your portfolio projects"),N()(),A(9,"div",2)(10,"a",3),F(11," + Add Project "),N()()()()(),A(12,"div",4)(13,"div",5),qe(14,"app-stat-card",6)(15,"app-stat-card",7)(16,"app-stat-card",8),N(),A(17,"div")(18,"div")(19,"h2"),F(20,"Recent Projects"),N()(),A(21,"div",9)(22,"table",10)(23,"thead")(24,"tr")(25,"th"),F(26,"Project"),N(),A(27,"th"),F(28,"Status"),N(),A(29,"th"),F(30,"Created"),N(),A(31,"th"),F(32,"Actions"),N()()(),A(33,"tbody",11),Pe(34,Fz,3,2,"tr")(35,Lz,3,2,"tr")(36,Vz,5,2,"tr")(37,qz,2,0),N()()()()()()),n&2&&(P(r.isDark()?"min-h-screen bg-gradient-to-br from-gray-900 via-gray-800 to-black":"min-h-screen bg-gradient-to-br from-gray-50 via-white to-gray-100"),C(),P(r.isDark()?"bg-gray-800 border-b border-gray-700":"bg-white border-b border-gray-200"),C(4),P(r.isDark()?"text-3xl font-bold text-white":"text-3xl font-bold text-gray-900"),C(2),P(r.isDark()?"text-gray-400 mt-2":"text-gray-600 mt-2"),C(3),P((r.isDark(),"bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-lg font-semibold transition-colors")),C(4),ye("dark",r.isDark())("value",r.allProjects.length),C(),ye("dark",r.isDark())("value",r.publishedProjects.length),C(),ye("dark",r.isDark())("value",r.draftProjects.length),C(),P(r.isDark()?"bg-gray-800 rounded-lg overflow-hidden":"bg-white rounded-lg shadow-md overflow-hidden"),C(),P(r.isDark()?"px-6 py-4 border-b border-gray-700":"px-6 py-4 border-b border-gray-200"),C(),P(r.isDark()?"text-xl font-semibold text-white":"text-xl font-semibold text-gray-900"),C(4),P(r.isDark()?"bg-gray-700":"bg-gray-50"),C(2),P(r.isDark()?"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider":"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"),C(2),P(r.isDark()?"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider":"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"),C(2),P(r.isDark()?"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider":"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"),C(2),P(r.isDark()?"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider":"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"),C(2),P(r.isDark()?"divide-gray-700":"divide-gray-200"),C(),Oe(r.isLoading?34:r.hasError?35:r.allProjects.length===0?36:37))},dependencies:[Yi,Zp],encapsulation:2})};var Kk=(()=>{class t{_renderer;_elementRef;onChange=n=>{};onTouched=()=>{};constructor(n,r){this._renderer=n,this._elementRef=r}setProperty(n,r){this._renderer.setProperty(this._elementRef.nativeElement,n,r)}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}setDisabledState(n){this.setProperty("disabled",n)}static \u0275fac=function(r){return new(r||t)(me(Br),me(ln))};static \u0275dir=nt({type:t})}return t})(),Qk=(()=>{class t extends Kk{static \u0275fac=(()=>{let n;return function(i){return(n||(n=Ii(t)))(i||t)}})();static \u0275dir=nt({type:t,features:[Fn]})}return t})(),M0=new q(""),zz={provide:M0,useExisting:Zn(()=>Rl),multi:!0},Rl=(()=>{class t extends Qk{writeValue(n){this.setProperty("checked",n)}static \u0275fac=(()=>{let n;return function(i){return(n||(n=Ii(t)))(i||t)}})();static \u0275dir=nt({type:t,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(r,i){r&1&&Ne("change",function(s){return i.onChange(s.target.checked)})("blur",function(){return i.onTouched()})},standalone:!1,features:[Mo([zz]),Fn]})}return t})(),Gz={provide:M0,useExisting:Zn(()=>Xa),multi:!0};function Wz(){let t=wn()?wn().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}var Kz=new q(""),Xa=(()=>{class t extends Kk{_compositionMode;_composing=!1;constructor(n,r,i){super(n,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!Wz())}writeValue(n){let r=n??"";this.setProperty("value",r)}_handleInput(n){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(n)}_compositionStart(){this._composing=!0}_compositionEnd(n){this._composing=!1,this._compositionMode&&this.onChange(n)}static \u0275fac=function(r){return new(r||t)(me(Br),me(ln),me(Kz,8))};static \u0275dir=nt({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&Ne("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},standalone:!1,features:[Mo([Gz]),Fn]})}return t})();function Qz(t){return t==null||Yz(t)===0}function Yz(t){return t==null?null:Array.isArray(t)||typeof t=="string"?t.length:t instanceof Set?t.size:null}var k0=new q(""),Yk=new q("");function Zz(t){return Qz(t.value)?{required:!0}:null}function Uk(t){return null}function Zk(t){return t!=null}function Jk(t){return Ti(t)?Ue(t):t}function Xk(t){let e={};return t.forEach(n=>{e=n!=null?V(V({},e),n):e}),Object.keys(e).length===0?null:e}function eP(t,e){return e.map(n=>n(t))}function Jz(t){return!t.validate}function tP(t){return t.map(e=>Jz(e)?e:n=>e.validate(n))}function Xz(t){if(!t)return null;let e=t.filter(Zk);return e.length==0?null:function(n){return Xk(eP(n,e))}}function P0(t){return t!=null?Xz(tP(t)):null}function eG(t){if(!t)return null;let e=t.filter(Zk);return e.length==0?null:function(n){let r=eP(n,e).map(Jk);return um(r).pipe(ge(Xk))}}function O0(t){return t!=null?eG(tP(t)):null}function Bk(t,e){return t===null?[e]:Array.isArray(t)?[...t,e]:[t,e]}function tG(t){return t._rawValidators}function nG(t){return t._rawAsyncValidators}function x0(t){return t?Array.isArray(t)?t:[t]:[]}function eg(t,e){return Array.isArray(t)?t.includes(e):t===e}function $k(t,e){let n=x0(e);return x0(t).forEach(i=>{eg(n,i)||n.push(i)}),n}function Hk(t,e){return x0(e).filter(n=>!eg(t,n))}var tg=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=P0(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=O0(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return this.control?this.control.hasError(e,n):!1}getError(e,n){return this.control?this.control.getError(e,n):null}},Ja=class extends tg{name;get formDirective(){return null}get path(){return null}},Al=class extends tg{_parent=null;name=null;valueAccessor=null},ng=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},rG={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},Dde=Z(V({},rG),{"[class.ng-submitted]":"isSubmitted"}),ag=(()=>{class t extends ng{constructor(n){super(n)}static \u0275fac=function(r){return new(r||t)(me(Al,2))};static \u0275dir=nt({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&au("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[Fn]})}return t})(),cg=(()=>{class t extends ng{constructor(n){super(n)}static \u0275fac=function(r){return new(r||t)(me(Ja,10))};static \u0275dir=nt({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&au("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},standalone:!1,features:[Fn]})}return t})();var bl="VALID",Xp="INVALID",Ya="PENDING",Dl="DISABLED",Zi=class{},rg=class extends Zi{value;source;constructor(e,n){super(),this.value=e,this.source=n}},Cl=class extends Zi{pristine;source;constructor(e,n){super(),this.pristine=e,this.source=n}},Sl=class extends Zi{touched;source;constructor(e,n){super(),this.touched=e,this.source=n}},Za=class extends Zi{status;source;constructor(e,n){super(),this.status=e,this.source=n}},N0=class extends Zi{source;constructor(e){super(),this.source=e}},ig=class extends Zi{source;constructor(e){super(),this.source=e}};function nP(t){return(ug(t)?t.validators:t)||null}function iG(t){return Array.isArray(t)?P0(t):t||null}function rP(t,e){return(ug(e)?e.asyncValidators:t)||null}function oG(t){return Array.isArray(t)?O0(t):t||null}function ug(t){return t!=null&&!Array.isArray(t)&&typeof t=="object"}function sG(t,e,n){let r=t.controls;if(!(e?Object.keys(r):r).length)throw new H(1e3,"");if(!r[n])throw new H(1001,"")}function aG(t,e,n){t._forEachChild((r,i)=>{if(n[i]===void 0)throw new H(1002,"")})}var og=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,n){this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return Et(this.statusReactive)}set status(e){Et(()=>this.statusReactive.set(e))}_status=Wt(()=>this.statusReactive());statusReactive=Ae(void 0);get valid(){return this.status===bl}get invalid(){return this.status===Xp}get pending(){return this.status==Ya}get disabled(){return this.status===Dl}get enabled(){return this.status!==Dl}errors;get pristine(){return Et(this.pristineReactive)}set pristine(e){Et(()=>this.pristineReactive.set(e))}_pristine=Wt(()=>this.pristineReactive());pristineReactive=Ae(!0);get dirty(){return!this.pristine}get touched(){return Et(this.touchedReactive)}set touched(e){Et(()=>this.touchedReactive.set(e))}_touched=Wt(()=>this.touchedReactive());touchedReactive=Ae(!1);get untouched(){return!this.touched}_events=new We;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators($k(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators($k(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Hk(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Hk(e,this._rawAsyncValidators))}hasValidator(e){return eg(this._rawValidators,e)}hasAsyncValidator(e){return eg(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let n=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(Z(V({},e),{sourceControl:r})),n&&e.emitEvent!==!1&&this._events.next(new Sl(!0,r))}markAllAsDirty(e={}){this.markAsDirty({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsDirty(e))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsTouched(e))}markAsUntouched(e={}){let n=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),n&&e.emitEvent!==!1&&this._events.next(new Sl(!1,r))}markAsDirty(e={}){let n=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(Z(V({},e),{sourceControl:r})),n&&e.emitEvent!==!1&&this._events.next(new Cl(!1,r))}markAsPristine(e={}){let n=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),n&&e.emitEvent!==!1&&this._events.next(new Cl(!0,r))}markAsPending(e={}){this.status=Ya;let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Za(this.status,n)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(Z(V({},e),{sourceControl:n}))}disable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=Dl,this.errors=null,this._forEachChild(i=>{i.disable(Z(V({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new rg(this.value,r)),this._events.next(new Za(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Z(V({},e),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=bl,this._forEachChild(r=>{r.enable(Z(V({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Z(V({},e),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,n){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},n),this._parent._updateTouched({},n))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===bl||this.status===Ya)&&this._runAsyncValidator(r,e.emitEvent)}let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new rg(this.value,n)),this._events.next(new Za(this.status,n)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(Z(V({},e),{sourceControl:n}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Dl:bl}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,n){if(this.asyncValidator){this.status=Ya,this._hasOwnPendingAsyncValidator={emitEvent:n!==!1,shouldHaveEmitted:e!==!1};let r=Jk(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:n,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(n.emitEvent!==!1,this,n.shouldHaveEmitted)}get(e){let n=e;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(e,n){let r=n?this.get(n):this;return r&&r.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,n,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new Za(this.status,n)),this._parent&&this._parent._updateControlsErrors(e,n,r)}_initObservables(){this.valueChanges=new Qe,this.statusChanges=new Qe}_calculateStatus(){return this._allControlsDisabled()?Dl:this.errors?Xp:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Ya)?Ya:this._anyControlsHaveStatus(Xp)?Xp:bl}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,n){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,n),i&&this._events.next(new Cl(this.pristine,n))}_updateTouched(e={},n){this.touched=this._anyControlsTouched(),this._events.next(new Sl(this.touched,n)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,n)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){ug(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let n=this._parent&&this._parent.dirty;return!e&&!!n&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=iG(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=oG(this._rawAsyncValidators)}},sg=class extends og{constructor(e,n,r){super(nP(n),rP(r,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(e,n){return this.controls[e]?this.controls[e]:(this.controls[e]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(e,n,r={}){this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(e,n,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],n&&this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,n={}){aG(this,!0,e),Object.keys(e).forEach(r=>{sG(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e={},n={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n,this),this._updateTouched(n,this),this.updateValueAndValidity(n),n?.emitEvent!==!1&&this._events.next(new ig(this))}getRawValue(){return this._reduceChildren({},(e,n,r)=>(e[r]=n.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(n,r)=>r._syncPendingControls()?!0:n);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(n=>{let r=this.controls[n];r&&e(r,n)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[n,r]of Object.entries(this.controls))if(this.contains(n)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(n,r,i)=>((r.enabled||this.disabled)&&(n[i]=r.value),n))}_reduceChildren(e,n){let r=e;return this._forEachChild((i,o)=>{r=n(r,i,o)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var F0=new q("",{providedIn:"root",factory:()=>L0}),L0="always";function cG(t,e){return[...e.path,t]}function iP(t,e,n=L0){oP(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||n==="always")&&e.valueAccessor.setDisabledState?.(t.disabled),lG(t,e),hG(t,e),dG(t,e),uG(t,e)}function qk(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function uG(t,e){if(e.valueAccessor.setDisabledState){let n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}function oP(t,e){let n=tG(t);e.validator!==null?t.setValidators(Bk(n,e.validator)):typeof n=="function"&&t.setValidators([n]);let r=nG(t);e.asyncValidator!==null?t.setAsyncValidators(Bk(r,e.asyncValidator)):typeof r=="function"&&t.setAsyncValidators([r]);let i=()=>t.updateValueAndValidity();qk(e._rawValidators,i),qk(e._rawAsyncValidators,i)}function lG(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,t.updateOn==="change"&&sP(t,e)})}function dG(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,t.updateOn==="blur"&&t._pendingChange&&sP(t,e),t.updateOn!=="submit"&&t.markAsTouched()})}function sP(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function hG(t,e){let n=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}function fG(t,e){t==null,oP(t,e)}function pG(t,e){if(!t.hasOwnProperty("model"))return!1;let n=t.model;return n.isFirstChange()?!0:!Object.is(e,n.currentValue)}function gG(t){return Object.getPrototypeOf(t.constructor)===Qk}function mG(t,e){t._syncPendingControls(),e.forEach(n=>{let r=n.control;r.updateOn==="submit"&&r._pendingChange&&(n.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function yG(t,e){if(!e)return null;Array.isArray(e);let n,r,i;return e.forEach(o=>{o.constructor===Xa?n=o:gG(o)?r=o:i=o}),i||r||n||null}var vG={provide:Ja,useExisting:Zn(()=>xl)},Tl=Promise.resolve(),xl=(()=>{class t extends Ja{callSetDisabledState;get submitted(){return Et(this.submittedReactive)}_submitted=Wt(()=>this.submittedReactive());submittedReactive=Ae(!1);_directives=new Set;form;ngSubmit=new Qe;options;constructor(n,r,i){super(),this.callSetDisabledState=i,this.form=new sg({},P0(n),O0(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(n){Tl.then(()=>{let r=this._findContainer(n.path);n.control=r.registerControl(n.name,n.control),iP(n.control,n,this.callSetDisabledState),n.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(n)})}getControl(n){return this.form.get(n.path)}removeControl(n){Tl.then(()=>{let r=this._findContainer(n.path);r&&r.removeControl(n.name),this._directives.delete(n)})}addFormGroup(n){Tl.then(()=>{let r=this._findContainer(n.path),i=new sg({});fG(i,n),r.registerControl(n.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(n){Tl.then(()=>{let r=this._findContainer(n.path);r&&r.removeControl(n.name)})}getFormGroup(n){return this.form.get(n.path)}updateModel(n,r){Tl.then(()=>{this.form.get(n.path).setValue(r)})}setValue(n){this.control.setValue(n)}onSubmit(n){return this.submittedReactive.set(!0),mG(this.form,this._directives),this.ngSubmit.emit(n),this.form._events.next(new N0(this.control)),n?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(n=void 0){this.form.reset(n),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(n){return n.pop(),n.length?this.form.get(n):this.form}static \u0275fac=function(r){return new(r||t)(me(k0,10),me(Yk,10),me(F0,8))};static \u0275dir=nt({type:t,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){r&1&&Ne("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[Mo([vG]),Fn]})}return t})();function zk(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function Gk(t){return typeof t=="object"&&t!==null&&Object.keys(t).length===2&&"value"in t&&"disabled"in t}var _G=class extends og{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,n,r){super(nP(n),rP(r,n)),this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),ug(n)&&(n.nonNullable||n.initialValueIsDefault)&&(Gk(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1,n?.emitEvent!==!1&&this._events.next(new ig(this))}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){zk(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){zk(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){Gk(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var EG={provide:Al,useExisting:Zn(()=>Nl)},Wk=Promise.resolve(),Nl=(()=>{class t extends Al{_changeDetectorRef;callSetDisabledState;control=new _G;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new Qe;constructor(n,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this._parent=n,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=yG(this,o)}ngOnChanges(n){if(this._checkForErrors(),!this._registered||"name"in n){if(this._registered&&(this._checkName(),this.formDirective)){let r=n.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in n&&this._updateDisabled(n),pG(n,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){iP(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(n){Wk.then(()=>{this.control.setValue(n,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(n){let r=n.isDisabled.currentValue,i=r!==0&&Po(r);Wk.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(n){return this._parent?cG(n,this._parent):[n]}static \u0275fac=function(r){return new(r||t)(me(Ja,9),me(k0,10),me(Yk,10),me(M0,10),me(ko,8),me(F0,8))};static \u0275dir=nt({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[Mo([EG]),Fn,or]})}return t})();var lg=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275dir=nt({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return t})();var IG=(()=>{class t{_validator=Uk;_onChange;_enabled;ngOnChanges(n){if(this.inputName in n){let r=this.normalizeInput(n[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):Uk,this._onChange&&this._onChange()}}validate(n){return this._validator(n)}registerOnValidatorChange(n){this._onChange=n}enabled(n){return n!=null}static \u0275fac=function(r){return new(r||t)};static \u0275dir=nt({type:t,features:[or]})}return t})();var wG={provide:k0,useExisting:Zn(()=>Ml),multi:!0};var Ml=(()=>{class t extends IG{required;inputName="required";normalizeInput=Po;createValidator=n=>Zz;enabled(n){return n}static \u0275fac=(()=>{let n;return function(i){return(n||(n=Ii(t)))(i||t)}})();static \u0275dir=nt({type:t,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){r&2&&Si("required",i._enabled?"":null)},inputs:{required:"required"},standalone:!1,features:[Mo([wG]),Fn]})}return t})();var bG=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=Di({type:t});static \u0275inj=Pr({})}return t})();var dg=(()=>{class t{static withConfig(n){return{ngModule:t,providers:[{provide:F0,useValue:n.callSetDisabledState??L0}]}}static \u0275fac=function(r){return new(r||t)};static \u0275mod=Di({type:t});static \u0275inj=Pr({imports:[bG]})}return t})();var DG=(t,e)=>e.name;function TG(t,e){if(t&1&&(A(0,"div",20),qe(1,"img",21),A(2,"p"),F(3),N()()),t&2){let n=e.$implicit,r=he(2);C(),P(r.isDark()?"border-gray-600":"border-gray-300"),ye("src",n.url,en)("alt",n.name),C(),P(r.isDark()?"text-xs text-gray-400 mt-1 truncate":"text-xs text-gray-500 mt-1 truncate"),C(),ht(n.name)}}function CG(t,e){if(t&1&&(A(0,"div",13)(1,"h4"),F(2,"Selected Images:"),N(),A(3,"div",8),Ln(4,TG,4,7,"div",20,DG),N()()),t&2){let n=he();C(),P(n.isDark()?"text-sm font-medium text-white mb-2":"text-sm font-medium text-gray-700 mb-2"),C(3),Vn(n.imagePreviews)}}function SG(t,e){if(t&1&&(A(0,"div",16),F(1),N()),t&2){let n=he();C(),In(" ",n.error()," ")}}function AG(t,e){t&1&&F(0," Creating... ")}function RG(t,e){t&1&&F(0," Create Project ")}var hg=class t{themeService=M(nn);projectsService=M(Dr);router=M(tn);project={title:"",description:"",tags:[],links:{},images:[],published:!1};tagsInput="";error=Ae(null);imagePreviews=[];isDark(){return this.themeService.isDark()}async onSubmit(){this.error.set(null),this.project.tags=this.tagsInput.split(",").map(e=>e.trim()).filter(e=>e.length>0);try{if(this.imagePreviews.length>0){let e=this.getSelectedFiles();if(console.log("Files to upload:",e),e.length>0){let n=await this.projectsService.uploadImages(e);console.log("Uploaded image URLs:",n),this.project.images=n.filter(r=>r.startsWith("http")),console.log("Final images array:",this.project.images)}}else this.project.images=[];console.log("Project data before saving:",this.project),await this.projectsService.addProject(this.project),this.router.navigateByUrl("/admin")}catch(e){console.error("Error creating project:",e),this.error.set("Failed to create project. Please try again.")}}onImageChange(e){let n=e.target.files;n&&n.length>0&&(this.imagePreviews=Array.from(n).map(r=>({name:r.name,url:URL.createObjectURL(r),file:r})),this.project.images=[])}getSelectedFiles(){return this.imagePreviews.map(e=>e.file)}goBack(){this.router.navigateByUrl("/admin")}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=dt({type:t,selectors:[["app-add-project"]],decls:56,vars:55,consts:[[1,"container","mx-auto","px-4","sm:px-6","py-6","sm:py-8"],[1,"max-w-2xl","mx-auto"],[1,"mb-6","sm:mb-8"],[3,"ngSubmit"],[1,"mb-6"],["type","text","name","title","required","","placeholder","Enter project title",3,"ngModelChange","ngModel"],["name","description","rows","4","required","","placeholder","Describe your project...",3,"ngModelChange","ngModel"],["type","text","name","tags","placeholder","React, Angular, Node.js, etc.",3,"ngModelChange","ngModel"],[1,"grid","grid-cols-1","sm:grid-cols-2","lg:grid-cols-3","gap-4"],["type","url","name","demo","placeholder","https://demo.example.com",3,"ngModelChange","ngModel"],["type","url","name","repo","placeholder","https://github.com/user/repo",3,"ngModelChange","ngModel"],["type","url","name","live","placeholder","https://live.example.com",3,"ngModelChange","ngModel"],["type","file","multiple","","accept","image/*",3,"change"],[1,"mt-4"],[1,"flex","items-center"],["type","checkbox","name","published",1,"mr-3",3,"ngModelChange","ngModel"],[1,"mb-6","p-4","bg-red-100","border","border-red-400","text-red-700","rounded"],[1,"flex","flex-col","sm:flex-row","gap-3","sm:gap-4"],["type","submit",1,"bg-blue-600","hover:bg-blue-700","disabled:bg-gray-400","text-white","px-6","py-2","rounded-lg","font-semibold","transition-colors","flex-1","sm:flex-none",3,"disabled"],["type","button",3,"click"],[1,"relative"],[1,"w-full","h-32","object-cover","rounded-lg","border",3,"src","alt"]],template:function(n,r){n&1&&(A(0,"div")(1,"div",0)(2,"div",1)(3,"div",2)(4,"h1"),F(5,"Add New Project"),N(),A(6,"p"),F(7,"Create a new project for your portfolio"),N()(),A(8,"form",3),Ne("ngSubmit",function(){return r.onSubmit()}),A(9,"div",4)(10,"label"),F(11,"Project Title"),N(),A(12,"input",5),_t("ngModelChange",function(o){return xt(r.project.title,o)||(r.project.title=o),o}),N()(),A(13,"div",4)(14,"label"),F(15,"Description"),N(),A(16,"textarea",6),_t("ngModelChange",function(o){return xt(r.project.description,o)||(r.project.description=o),o}),N()(),A(17,"div",4)(18,"label"),F(19,"Tags (comma-separated)"),N(),A(20,"input",7),_t("ngModelChange",function(o){return xt(r.tagsInput,o)||(r.tagsInput=o),o}),N()(),A(21,"div",4)(22,"h3"),F(23,"Project Links"),N(),A(24,"div",8)(25,"div")(26,"label"),F(27,"Demo URL"),N(),A(28,"input",9),_t("ngModelChange",function(o){return xt(r.project.links.demo,o)||(r.project.links.demo=o),o}),N()(),A(29,"div")(30,"label"),F(31,"Repository URL"),N(),A(32,"input",10),_t("ngModelChange",function(o){return xt(r.project.links.repo,o)||(r.project.links.repo=o),o}),N()(),A(33,"div")(34,"label"),F(35,"Live URL"),N(),A(36,"input",11),_t("ngModelChange",function(o){return xt(r.project.links.live,o)||(r.project.links.live=o),o}),N()()()(),A(37,"div",4)(38,"label"),F(39,"Project Images"),N(),A(40,"input",12),Ne("change",function(o){return r.onImageChange(o)}),N(),A(41,"p"),F(42,"Select multiple images for your project"),N(),Pe(43,CG,6,2,"div",13),N(),A(44,"div",4)(45,"label",14)(46,"input",15),_t("ngModelChange",function(o){return xt(r.project.published,o)||(r.project.published=o),o}),N(),A(47,"span"),F(48,"Publish this project (make it visible on the public site)"),N()()(),Pe(49,SG,2,1,"div",16),A(50,"div",17)(51,"button",18),Pe(52,AG,1,0)(53,RG,1,0),N(),A(54,"button",19),Ne("click",function(){return r.goBack()}),F(55," Cancel "),N()()()()()()),n&2&&(P(r.isDark()?"min-h-screen bg-gradient-to-br from-gray-900 via-gray-800 to-black":"min-h-screen bg-gradient-to-br from-gray-50 via-white to-gray-100"),C(4),P(r.isDark()?"text-2xl sm:text-3xl font-bold text-white mb-2":"text-2xl sm:text-3xl font-bold text-gray-900 mb-2"),C(2),P(r.isDark()?"text-sm sm:text-base text-gray-400":"text-sm sm:text-base text-gray-600"),C(2),P(r.isDark()?"bg-gray-800 p-4 sm:p-6 rounded-lg":"bg-white p-4 sm:p-6 rounded-lg shadow-md"),C(2),P(r.isDark()?"block text-sm font-medium text-white mb-2":"block text-sm font-medium text-gray-700 mb-2"),C(2),P(r.isDark()?"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500":"w-full px-3 py-2 bg-white border border-gray-300 rounded-md text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500"),vt("ngModel",r.project.title),C(2),P(r.isDark()?"block text-sm font-medium text-white mb-2":"block text-sm font-medium text-gray-700 mb-2"),C(2),P(r.isDark()?"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500":"w-full px-3 py-2 bg-white border border-gray-300 rounded-md text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500"),vt("ngModel",r.project.description),C(2),P(r.isDark()?"block text-sm font-medium text-white mb-2":"block text-sm font-medium text-gray-700 mb-2"),C(2),P(r.isDark()?"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500":"w-full px-3 py-2 bg-white border border-gray-300 rounded-md text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500"),vt("ngModel",r.tagsInput),C(2),P(r.isDark()?"text-lg font-medium text-white mb-4":"text-lg font-medium text-gray-900 mb-4"),C(4),P(r.isDark()?"block text-sm font-medium text-white mb-2":"block text-sm font-medium text-gray-700 mb-2"),C(2),P(r.isDark()?"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500":"w-full px-3 py-2 bg-white border border-gray-300 rounded-md text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500"),vt("ngModel",r.project.links.demo),C(2),P(r.isDark()?"block text-sm font-medium text-white mb-2":"block text-sm font-medium text-gray-700 mb-2"),C(2),P(r.isDark()?"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500":"w-full px-3 py-2 bg-white border border-gray-300 rounded-md text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500"),vt("ngModel",r.project.links.repo),C(2),P(r.isDark()?"block text-sm font-medium text-white mb-2":"block text-sm font-medium text-gray-700 mb-2"),C(2),P(r.isDark()?"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500":"w-full px-3 py-2 bg-white border border-gray-300 rounded-md text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500"),vt("ngModel",r.project.links.live),C(2),P(r.isDark()?"block text-sm font-medium text-white mb-2":"block text-sm font-medium text-gray-700 mb-2"),C(2),P(r.isDark()?"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-blue-600 file:text-white hover:file:bg-blue-700":"w-full px-3 py-2 bg-white border border-gray-300 rounded-md text-gray-900 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-blue-600 file:text-white hover:file:bg-blue-700"),C(),P(r.isDark()?"text-sm text-gray-400 mt-1":"text-sm text-gray-500 mt-1"),C(2),Oe(r.imagePreviews.length>0?43:-1),C(3),vt("ngModel",r.project.published),C(),P(r.isDark()?"text-white":"text-gray-900"),C(2),Oe(r.error()?49:-1),C(2),ye("disabled",r.projectsService.isLoading),C(),Oe(r.projectsService.isLoading?52:53),C(2),P(r.isDark()?"bg-gray-700 hover:bg-gray-600 text-white px-6 py-2 rounded-lg font-semibold transition-colors flex-1 sm:flex-none":"bg-gray-200 hover:bg-gray-300 text-gray-900 px-6 py-2 rounded-lg font-semibold transition-colors flex-1 sm:flex-none"))},dependencies:[dg,lg,Xa,Rl,ag,cg,Ml,Nl,xl],encapsulation:2})};var xG=(t,e)=>e.name;function NG(t,e){if(t&1&&(A(0,"div",21),qe(1,"img",22),A(2,"p"),F(3,"Current Image"),N()()),t&2){let n=e.$implicit,r=he(2);C(),P(r.isDark()?"border-gray-600":"border-gray-300"),ye("src",n,en)("alt","Project image"),C(),P(r.isDark()?"text-xs text-gray-400 mt-1 truncate":"text-xs text-gray-500 mt-1 truncate")}}function MG(t,e){if(t&1&&(A(0,"div",13)(1,"h4"),F(2,"Current Images:"),N(),A(3,"div",20),Ln(4,NG,4,6,"div",21,ru),N(),A(6,"p"),F(7,"Select new images above to replace current ones"),N()()),t&2){let n=he();C(),P(n.isDark()?"text-sm font-medium text-white mb-2":"text-sm font-medium text-gray-700 mb-2"),C(3),Vn(n.project.images),C(2),P(n.isDark()?"text-xs text-gray-400 mt-2":"text-xs text-gray-500 mt-2")}}function kG(t,e){if(t&1&&(A(0,"div",21),qe(1,"img",22),A(2,"p"),F(3),N()()),t&2){let n=e.$implicit,r=he(2);C(),P(r.isDark()?"border-gray-600":"border-gray-300"),ye("src",n.url,en)("alt",n.name),C(),P(r.isDark()?"text-xs text-gray-400 mt-1 truncate":"text-xs text-gray-500 mt-1 truncate"),C(),ht(n.name)}}function PG(t,e){if(t&1&&(A(0,"div",13)(1,"h4"),F(2,"New Images:"),N(),A(3,"div",20),Ln(4,kG,4,7,"div",21,xG),N()()),t&2){let n=he();C(),P(n.isDark()?"text-sm font-medium text-white mb-2":"text-sm font-medium text-gray-700 mb-2"),C(3),Vn(n.imagePreviews)}}function OG(t,e){if(t&1&&(A(0,"div",16),F(1),N()),t&2){let n=he();C(),In(" ",n.error()," ")}}function FG(t,e){t&1&&F(0," Updating... ")}function LG(t,e){t&1&&F(0," Update Project ")}var fg=class t{themeService=M(nn);projectsService=M(Dr);router=M(tn);route=M(Qn);project={id:"",title:"",description:"",tags:[],links:{},images:[],published:!1,createdAt:new Date,updatedAt:new Date};tagsInput="";error=Ae(null);imagePreviews=[];ngOnInit(){let e=this.route.snapshot.paramMap.get("id");if(e){let n=this.projectsService.allProjects.find(r=>r.id===e);n?(this.project=V({},n),this.tagsInput=n.tags.join(", "),n.images&&n.images.length>0&&console.log("Existing project images:",n.images)):this.router.navigateByUrl("/admin")}}isDark(){return this.themeService.isDark()}async onSubmit(){this.error.set(null),this.project.tags=this.tagsInput.split(",").map(e=>e.trim()).filter(e=>e.length>0);try{if(this.imagePreviews.length>0){let e=this.getSelectedFiles();if(console.log("Files to upload:",e),e.length>0){let n=await this.projectsService.uploadImages(e);console.log("Uploaded image URLs:",n),this.project.images=n.filter(r=>r.startsWith("http")),console.log("Final images array:",this.project.images)}}console.log("Project data before updating:",this.project),await this.projectsService.updateProject(this.project.id,this.project),this.router.navigateByUrl("/admin")}catch(e){console.error("Error updating project:",e),this.error.set("Failed to update project. Please try again.")}}onImageChange(e){let n=e.target.files;n&&n.length>0&&(this.imagePreviews=Array.from(n).map(r=>({name:r.name,url:URL.createObjectURL(r),file:r})),this.project.images=[])}getSelectedFiles(){return this.imagePreviews.map(e=>e.file)}goBack(){this.router.navigateByUrl("/admin")}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=dt({type:t,selectors:[["app-edit-project"]],decls:57,vars:56,consts:[[1,"container","mx-auto","px-6","py-8"],[1,"max-w-2xl","mx-auto"],[1,"mb-8"],[3,"ngSubmit"],[1,"mb-6"],["type","text","name","title","required","","placeholder","Enter project title",3,"ngModelChange","ngModel"],["name","description","rows","4","required","","placeholder","Describe your project...",3,"ngModelChange","ngModel"],["type","text","name","tags","placeholder","React, Angular, Node.js, etc.",3,"ngModelChange","ngModel"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-4"],["type","url","name","demo","placeholder","https://demo.example.com",3,"ngModelChange","ngModel"],["type","url","name","repo","placeholder","https://github.com/user/repo",3,"ngModelChange","ngModel"],["type","url","name","live","placeholder","https://live.example.com",3,"ngModelChange","ngModel"],["type","file","multiple","","accept","image/*",3,"change"],[1,"mt-4"],[1,"flex","items-center"],["type","checkbox","name","published",1,"mr-3",3,"ngModelChange","ngModel"],[1,"mb-6","p-4","bg-red-100","border","border-red-400","text-red-700","rounded"],[1,"flex","gap-4"],["type","submit",1,"bg-blue-600","hover:bg-blue-700","disabled:bg-gray-400","text-white","px-6","py-2","rounded-lg","font-semibold","transition-colors",3,"disabled"],["type","button",3,"click"],[1,"grid","grid-cols-2","md:grid-cols-3","gap-4"],[1,"relative"],[1,"w-full","h-32","object-cover","rounded-lg","border",3,"src","alt"]],template:function(n,r){n&1&&(A(0,"div")(1,"div",0)(2,"div",1)(3,"div",2)(4,"h1"),F(5,"Edit Project"),N(),A(6,"p"),F(7,"Update your project details"),N()(),A(8,"form",3),Ne("ngSubmit",function(){return r.onSubmit()}),A(9,"div",4)(10,"label"),F(11,"Project Title"),N(),A(12,"input",5),_t("ngModelChange",function(o){return xt(r.project.title,o)||(r.project.title=o),o}),N()(),A(13,"div",4)(14,"label"),F(15,"Description"),N(),A(16,"textarea",6),_t("ngModelChange",function(o){return xt(r.project.description,o)||(r.project.description=o),o}),N()(),A(17,"div",4)(18,"label"),F(19,"Tags (comma-separated)"),N(),A(20,"input",7),_t("ngModelChange",function(o){return xt(r.tagsInput,o)||(r.tagsInput=o),o}),N()(),A(21,"div",4)(22,"h3"),F(23,"Project Links"),N(),A(24,"div",8)(25,"div")(26,"label"),F(27,"Demo URL"),N(),A(28,"input",9),_t("ngModelChange",function(o){return xt(r.project.links.demo,o)||(r.project.links.demo=o),o}),N()(),A(29,"div")(30,"label"),F(31,"Repository URL"),N(),A(32,"input",10),_t("ngModelChange",function(o){return xt(r.project.links.repo,o)||(r.project.links.repo=o),o}),N()(),A(33,"div")(34,"label"),F(35,"Live URL"),N(),A(36,"input",11),_t("ngModelChange",function(o){return xt(r.project.links.live,o)||(r.project.links.live=o),o}),N()()()(),A(37,"div",4)(38,"label"),F(39,"Project Images"),N(),A(40,"input",12),Ne("change",function(o){return r.onImageChange(o)}),N(),A(41,"p"),F(42,"Select multiple images for your project"),N(),Pe(43,MG,8,4,"div",13),Pe(44,PG,6,2,"div",13),N(),A(45,"div",4)(46,"label",14)(47,"input",15),_t("ngModelChange",function(o){return xt(r.project.published,o)||(r.project.published=o),o}),N(),A(48,"span"),F(49,"Publish this project (make it visible on the public site)"),N()()(),Pe(50,OG,2,1,"div",16),A(51,"div",17)(52,"button",18),Pe(53,FG,1,0)(54,LG,1,0),N(),A(55,"button",19),Ne("click",function(){return r.goBack()}),F(56," Cancel "),N()()()()()()),n&2&&(P(r.isDark()?"min-h-screen bg-gradient-to-br from-gray-900 via-gray-800 to-black":"min-h-screen bg-gradient-to-br from-gray-50 via-white to-gray-100"),C(4),P(r.isDark()?"text-3xl font-bold text-white mb-2":"text-3xl font-bold text-gray-900 mb-2"),C(2),P(r.isDark()?"text-gray-400":"text-gray-600"),C(2),P(r.isDark()?"bg-gray-800 p-6 rounded-lg":"bg-white p-6 rounded-lg shadow-md"),C(2),P(r.isDark()?"block text-sm font-medium text-white mb-2":"block text-sm font-medium text-gray-700 mb-2"),C(2),P(r.isDark()?"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500":"w-full px-3 py-2 bg-white border border-gray-300 rounded-md text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500"),vt("ngModel",r.project.title),C(2),P(r.isDark()?"block text-sm font-medium text-white mb-2":"block text-sm font-medium text-gray-700 mb-2"),C(2),P(r.isDark()?"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500":"w-full px-3 py-2 bg-white border border-gray-300 rounded-md text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500"),vt("ngModel",r.project.description),C(2),P(r.isDark()?"block text-sm font-medium text-white mb-2":"block text-sm font-medium text-gray-700 mb-2"),C(2),P(r.isDark()?"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500":"w-full px-3 py-2 bg-white border border-gray-300 rounded-md text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500"),vt("ngModel",r.tagsInput),C(2),P(r.isDark()?"text-lg font-medium text-white mb-4":"text-lg font-medium text-gray-900 mb-4"),C(4),P(r.isDark()?"block text-sm font-medium text-white mb-2":"block text-sm font-medium text-gray-700 mb-2"),C(2),P(r.isDark()?"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500":"w-full px-3 py-2 bg-white border border-gray-300 rounded-md text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500"),vt("ngModel",r.project.links.demo),C(2),P(r.isDark()?"block text-sm font-medium text-white mb-2":"block text-sm font-medium text-gray-700 mb-2"),C(2),P(r.isDark()?"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500":"w-full px-3 py-2 bg-white border border-gray-300 rounded-md text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500"),vt("ngModel",r.project.links.repo),C(2),P(r.isDark()?"block text-sm font-medium text-white mb-2":"block text-sm font-medium text-gray-700 mb-2"),C(2),P(r.isDark()?"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500":"w-full px-3 py-2 bg-white border border-gray-300 rounded-md text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500"),vt("ngModel",r.project.links.live),C(2),P(r.isDark()?"block text-sm font-medium text-white mb-2":"block text-sm font-medium text-gray-700 mb-2"),C(2),P(r.isDark()?"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-blue-600 file:text-white hover:file:bg-blue-700":"w-full px-3 py-2 bg-white border border-gray-300 rounded-md text-gray-900 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-blue-600 file:text-white hover:file:bg-blue-700"),C(),P(r.isDark()?"text-sm text-gray-400 mt-1":"text-sm text-gray-500 mt-1"),C(2),Oe(r.project.images&&r.project.images.length>0&&r.imagePreviews.length===0?43:-1),C(),Oe(r.imagePreviews.length>0?44:-1),C(3),vt("ngModel",r.project.published),C(),P(r.isDark()?"text-white":"text-gray-900"),C(2),Oe(r.error()?50:-1),C(2),ye("disabled",r.projectsService.isLoading),C(),Oe(r.projectsService.isLoading?53:54),C(2),P(r.isDark()?"bg-gray-700 hover:bg-gray-600 text-white px-6 py-2 rounded-lg font-semibold transition-colors":"bg-gray-200 hover:bg-gray-300 text-gray-900 px-6 py-2 rounded-lg font-semibold transition-colors"))},dependencies:[dg,lg,Xa,Rl,ag,cg,Ml,Nl,xl],encapsulation:2})};var ec=class t{auth=M($o);user=Ae(null);isAuthed=Wt(()=>!!this.user());constructor(){RR(this.auth,e=>this.user.set(e))}async signInWithGoogle(){let e=new uE;await xR(this.auth,e)}async signOut(){await NR(this.auth)}static \u0275fac=function(n){return new(n||t)};static \u0275prov=G({token:t,factory:t.\u0275fac,providedIn:"root"})};var VG=["khaledalhoussein3@gmail.com"],pg=()=>{let t=M(ec),e=M(tn),n=t.user();return n&&VG.includes(n.email||"")?!0:(e.navigateByUrl("/"),!1)};var cP=[{path:"",component:Yp},{path:"admin",component:Jp,canActivate:[pg]},{path:"admin/add",component:hg,canActivate:[pg]},{path:"admin/edit/:id",component:fg,canActivate:[pg]}];var uP={providers:[dy(),jv(),R0(cP),AA(()=>RA(KM.firebase)),SR(()=>AR()),aM(()=>dM()),HM(()=>GM())]};var lP=()=>({exact:!0});function jG(t,e){if(t&1&&(A(0,"a",16),F(1," Admin "),N()),t&2){let n=he();P(n.isDark()?"text-gray-300 hover:text-white px-3 py-2 rounded-md text-sm font-medium transition-colors":"text-gray-600 hover:text-gray-900 px-3 py-2 rounded-md text-sm font-medium transition-colors")}}function UG(t,e){if(t&1){let n=Ai();A(0,"button",17),Ne("click",function(){Lr(n);let i=he();return Vr(i.auth.signOut())}),F(1,"Sign out"),N()}}function BG(t,e){if(t&1){let n=Ai();A(0,"button",18),Ne("click",function(){Lr(n);let i=he();return Vr(i.auth.signInWithGoogle())}),F(1,"Sign in"),N()}}function $G(t,e){if(t&1&&(A(0,"a",16),F(1," Admin "),N()),t&2){let n=he();P(n.isDark()?"text-gray-300 hover:text-white block px-3 py-2 rounded-md text-base font-medium":"text-gray-600 hover:text-gray-900 block px-3 py-2 rounded-md text-base font-medium")}}function HG(t,e){if(t&1){let n=Ai();A(0,"button",19),Ne("click",function(){Lr(n);let i=he();return Vr(i.auth.signOut())}),F(1,"Sign out"),N()}}function qG(t,e){if(t&1){let n=Ai();A(0,"button",20),Ne("click",function(){Lr(n);let i=he();return Vr(i.auth.signInWithGoogle())}),F(1,"Sign in"),N()}}var gg=class t{themeService=M(nn);auth=M(ec);router=M(tn);mobileMenuOpen=!1;constructor(){Bv(()=>{let e=this.auth.isAuthed(),n=this.router.url;!e&&n.startsWith("/admin")&&this.router.navigateByUrl("/")})}toggleMobileMenu(){this.mobileMenuOpen=!this.mobileMenuOpen}isDark(){return this.themeService.isDark()}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=dt({type:t,selectors:[["app-nav"]],decls:27,vars:28,consts:[[1,"max-w-7xl","mx-auto","px-4","sm:px-6","lg:px-8"],[1,"flex","justify-between","items-center","h-16"],[1,"flex","items-center"],["routerLink","/"],[1,"hidden","md:flex","items-center","space-x-2","lg:space-x-4"],["routerLink","/","routerLinkActive","text-blue-600",3,"routerLinkActiveOptions"],["routerLink","/admin","routerLinkActive","text-blue-600",3,"class"],[3,"click"],[1,"bg-red-600","hover:bg-red-700","text-white","px-3","py-2","rounded-md","text-sm","font-medium","transition-colors"],[1,"bg-blue-600","hover:bg-blue-700","text-white","px-3","py-2","rounded-md","text-sm","font-medium","transition-colors"],[1,"md:hidden"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-6","w-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 6h16M4 12h16M4 18h16"],[1,"px-2","pt-2","pb-3","space-y-1","sm:px-3","border-t"],[1,"bg-red-600","hover:bg-red-700","text-white","block","w-full","text-left","px-3","py-2","rounded-md","text-base","font-medium"],[1,"bg-blue-600","hover:bg-blue-700","text-white","block","w-full","text-left","px-3","py-2","rounded-md","text-base","font-medium"],["routerLink","/admin","routerLinkActive","text-blue-600"],[1,"bg-red-600","hover:bg-red-700","text-white","px-3","py-2","rounded-md","text-sm","font-medium","transition-colors",3,"click"],[1,"bg-blue-600","hover:bg-blue-700","text-white","px-3","py-2","rounded-md","text-sm","font-medium","transition-colors",3,"click"],[1,"bg-red-600","hover:bg-red-700","text-white","block","w-full","text-left","px-3","py-2","rounded-md","text-base","font-medium",3,"click"],[1,"bg-blue-600","hover:bg-blue-700","text-white","block","w-full","text-left","px-3","py-2","rounded-md","text-base","font-medium",3,"click"]],template:function(n,r){n&1&&(A(0,"nav")(1,"div",0)(2,"div",1)(3,"div",2)(4,"a",3),F(5,"Portfolio"),N()(),A(6,"div",4)(7,"a",5),F(8," Home "),N(),Pe(9,jG,2,2,"a",6),A(10,"button",7),Ne("click",function(){return r.themeService.toggleTheme()}),F(11),N(),Pe(12,UG,2,0,"button",8)(13,BG,2,0,"button",9),N(),A(14,"div",10)(15,"button",7),Ne("click",function(){return r.toggleMobileMenu()}),Hs(),A(16,"svg",11),qe(17,"path",12),N()()()(),qs(),A(18,"div")(19,"div",13)(20,"a",5),F(21," Home "),N(),Pe(22,$G,2,2,"a",6),A(23,"button",7),Ne("click",function(){return r.themeService.toggleTheme()}),F(24),N(),Pe(25,HG,2,0,"button",14)(26,qG,2,0,"button",15),N()()()()),n&2&&(P(r.isDark()?"bg-gray-900 shadow-lg border-b border-gray-800":"bg-white shadow-sm border-b border-gray-200"),C(4),P(r.isDark()?"text-lg sm:text-xl font-bold text-white":"text-lg sm:text-xl font-bold text-gray-900"),C(3),P(r.isDark()?"text-gray-300 hover:text-white px-3 py-2 rounded-md text-sm font-medium transition-colors":"text-gray-600 hover:text-gray-900 px-3 py-2 rounded-md text-sm font-medium transition-colors"),ye("routerLinkActiveOptions",Bh(26,lP)),C(2),Oe(r.auth.isAuthed()?9:-1),C(),P(r.isDark()?"text-gray-300 hover:text-white px-3 py-2 rounded-md text-sm font-medium transition-colors":"text-gray-600 hover:text-gray-900 px-3 py-2 rounded-md text-sm font-medium transition-colors"),C(),In(" ",r.themeService.toggleText()," "),C(),Oe(r.auth.isAuthed()?12:13),C(3),P(r.isDark()?"text-gray-300 hover:text-white p-2 rounded-md":"text-gray-600 hover:text-gray-900 p-2 rounded-md"),C(3),P(r.mobileMenuOpen?"md:hidden":"hidden"),C(),P(r.isDark()?"border-gray-700":"border-gray-200"),C(),P(r.isDark()?"text-gray-300 hover:text-white block px-3 py-2 rounded-md text-base font-medium":"text-gray-600 hover:text-gray-900 block px-3 py-2 rounded-md text-base font-medium"),ye("routerLinkActiveOptions",Bh(27,lP)),C(2),Oe(r.auth.isAuthed()?22:-1),C(),P(r.isDark()?"text-gray-300 hover:text-white block w-full text-left px-3 py-2 rounded-md text-base font-medium":"text-gray-600 hover:text-gray-900 block w-full text-left px-3 py-2 rounded-md text-base font-medium"),C(),In(" ",r.themeService.toggleText()," "),C(),Oe(r.auth.isAuthed()?25:26))},dependencies:[Yi,A0],encapsulation:2})};var mg=class t{title=Ae("portfolio");themeService=M(nn);static \u0275fac=function(n){return new(n||t)};static \u0275cmp=dt({type:t,selectors:[["app-root"]],decls:4,vars:2,consts:[[1,"min-h-screen"]],template:function(n,r){n&1&&(A(0,"div"),qe(1,"app-nav"),A(2,"main",0),qe(3,"router-outlet"),N()()),n&2&&P(r.themeService.themeClasses())},dependencies:[El,gg],encapsulation:2})};s_(mg,uP).catch(t=>console.error(t));

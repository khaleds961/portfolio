var XP=Object.defineProperty,eO=Object.defineProperties;var tO=Object.getOwnPropertyDescriptors;var Gb=Object.getOwnPropertySymbols;var nO=Object.prototype.hasOwnProperty,rO=Object.prototype.propertyIsEnumerable;var Wb=(t,e,n)=>e in t?XP(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,V=(t,e)=>{for(var n in e||={})nO.call(e,n)&&Wb(t,n,e[n]);if(Gb)for(var n of Gb(e))rO.call(e,n)&&Wb(t,n,e[n]);return t},Z=(t,e)=>eO(t,tO(e));var qg;function Zl(){return qg}function Yn(t){let e=qg;return qg=t,e}var Kb=Symbol("NotFound");function _s(t){return t===Kb||t?.name==="\u0275NotFound"}function nd(t,e){return Object.is(t,e)}var Lt=null,Jl=!1,zg=1,iO=null,Vt=Symbol("SIGNAL");function J(t){let e=Lt;return Lt=t,e}function rd(){return Lt}var io={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Es(t){if(Jl)throw new Error("");if(Lt===null)return;Lt.consumerOnSignalRead(t);let e=Lt.producersTail;if(e!==void 0&&e.producer===t)return;let n,r=Lt.recomputing;if(r&&(n=e!==void 0?e.nextProducer:Lt.producers,n!==void 0&&n.producer===t)){Lt.producersTail=n,n.lastReadVersion=t.version;return}let i=t.consumersTail;if(i!==void 0&&i.consumer===Lt&&(!r||sO(i,Lt)))return;let o=bs(Lt),s={producer:t,consumer:Lt,nextProducer:n,prevConsumer:i,lastReadVersion:t.version,nextConsumer:void 0};Lt.producersTail=s,e!==void 0?e.nextProducer=s:Lt.producers=s,o&&Jb(t,s)}function Qb(){zg++}function id(t){if(!(bs(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===zg)){if(!t.producerMustRecompute(t)&&!ws(t)){td(t);return}t.producerRecomputeValue(t),td(t)}}function Gg(t){if(t.consumers===void 0)return;let e=Jl;Jl=!0;try{for(let n=t.consumers;n!==void 0;n=n.nextConsumer){let r=n.consumer;r.dirty||oO(r)}}finally{Jl=e}}function Wg(){return Lt?.consumerAllowSignalWrites!==!1}function oO(t){t.dirty=!0,Gg(t),t.consumerMarkedDirty?.(t)}function td(t){t.dirty=!1,t.lastCleanEpoch=zg}function oo(t){return t&&Yb(t),J(t)}function Yb(t){t.producersTail=void 0,t.recomputing=!0}function Is(t,e){J(e),t&&Zb(t)}function Zb(t){t.recomputing=!1;let e=t.producersTail,n=e!==void 0?e.nextProducer:t.producers;if(n!==void 0){if(bs(t))do n=Kg(n);while(n!==void 0);e!==void 0?e.nextProducer=void 0:t.producers=void 0}}function ws(t){for(let e=t.producers;e!==void 0;e=e.nextProducer){let n=e.producer,r=e.lastReadVersion;if(r!==n.version||(id(n),r!==n.version))return!0}return!1}function so(t){if(bs(t)){let e=t.producers;for(;e!==void 0;)e=Kg(e)}t.producers=void 0,t.producersTail=void 0,t.consumers=void 0,t.consumersTail=void 0}function Jb(t,e){let n=t.consumersTail,r=bs(t);if(n!==void 0?(e.nextConsumer=n.nextConsumer,n.nextConsumer=e):(e.nextConsumer=void 0,t.consumers=e),e.prevConsumer=n,t.consumersTail=e,!r)for(let i=t.producers;i!==void 0;i=i.nextProducer)Jb(i.producer,i)}function Kg(t){let e=t.producer,n=t.nextProducer,r=t.nextConsumer,i=t.prevConsumer;if(t.nextConsumer=void 0,t.prevConsumer=void 0,r!==void 0?r.prevConsumer=i:e.consumersTail=i,i!==void 0)i.nextConsumer=r;else if(e.consumers=r,!bs(e)){let o=e.producers;for(;o!==void 0;)o=Kg(o)}return n}function bs(t){return t.consumerIsAlwaysLive||t.consumers!==void 0}function od(t){iO?.(t)}function sO(t,e){let n=e.producersTail;if(n!==void 0){let r=e.producers;do{if(r===t)return!0;if(r===n)break;r=r.nextProducer}while(r!==void 0)}return!1}function sd(t,e){let n=Object.create(aO);n.computation=t,e!==void 0&&(n.equal=e);let r=()=>{if(id(n),Es(n),n.value===Ac)throw n.error;return n.value};return r[Vt]=n,od(n),r}var Xl=Symbol("UNSET"),ed=Symbol("COMPUTING"),Ac=Symbol("ERRORED"),aO=Z(V({},io),{value:Xl,dirty:!0,error:null,equal:nd,kind:"computed",producerMustRecompute(t){return t.value===Xl||t.value===ed},producerRecomputeValue(t){if(t.value===ed)throw new Error("");let e=t.value;t.value=ed;let n=oo(t),r,i=!1;try{r=t.computation(),J(null),i=e!==Xl&&e!==Ac&&r!==Ac&&t.equal(e,r)}catch(o){r=Ac,t.error=o}finally{Is(t,n)}if(i){t.value=e;return}t.value=r,t.version++}});function cO(){throw new Error}var Xb=cO;function eD(t){Xb(t)}function Qg(t){Xb=t}var uO=null;function Yg(t,e){let n=Object.create(ad);n.value=t,e!==void 0&&(n.equal=e);let r=()=>tD(n);return r[Vt]=n,od(n),[r,s=>Ds(n,s),s=>Zg(n,s)]}function tD(t){return Es(t),t.value}function Ds(t,e){Wg()||eD(t),t.equal(t.value,e)||(t.value=e,lO(t))}function Zg(t,e){Wg()||eD(t),Ds(t,e(t.value))}var ad=Z(V({},io),{equal:nd,value:void 0,kind:"signal"});function lO(t){t.version++,Qb(),Gg(t),uO?.(t)}function re(t){return typeof t=="function"}function Ts(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var cd=Ts(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function ao(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var He=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(re(r))try{r()}catch(o){e=o instanceof cd?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{nD(o)}catch(s){e=e??[],s instanceof cd?e=[...e,...s.errors]:e.push(s)}}if(e)throw new cd(e)}}add(e){var n;if(e&&e!==this)if(this.closed)nD(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&ao(n,e)}remove(e){let{_finalizers:n}=this;n&&ao(n,e),e instanceof t&&e._removeParent(this)}};He.EMPTY=(()=>{let t=new He;return t.closed=!0,t})();var Jg=He.EMPTY;function ud(t){return t instanceof He||t&&"closed"in t&&re(t.remove)&&re(t.add)&&re(t.unsubscribe)}function nD(t){re(t)?t():t.unsubscribe()}var Sn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Cs={setTimeout(t,e,...n){let{delegate:r}=Cs;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=Cs;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function ld(t){Cs.setTimeout(()=>{let{onUnhandledError:e}=Sn;if(e)e(t);else throw t})}function Rc(){}var rD=Xg("C",void 0,void 0);function iD(t){return Xg("E",void 0,t)}function oD(t){return Xg("N",t,void 0)}function Xg(t,e,n){return{kind:t,value:e,error:n}}var co=null;function Ss(t){if(Sn.useDeprecatedSynchronousErrorHandling){let e=!co;if(e&&(co={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=co;if(co=null,n)throw r}}else t()}function sD(t){Sn.useDeprecatedSynchronousErrorHandling&&co&&(co.errorThrown=!0,co.error=t)}var uo=class extends He{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,ud(e)&&e.add(this)):this.destination=fO}static create(e,n,r){return new As(e,n,r)}next(e){this.isStopped?tm(oD(e),this):this._next(e)}error(e){this.isStopped?tm(iD(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?tm(rD,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},dO=Function.prototype.bind;function em(t,e){return dO.call(t,e)}var nm=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){dd(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){dd(r)}else dd(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){dd(n)}}},As=class extends uo{constructor(e,n,r){super();let i;if(re(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&Sn.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&em(e.next,o),error:e.error&&em(e.error,o),complete:e.complete&&em(e.complete,o)}):i=e}this.destination=new nm(i)}};function dd(t){Sn.useDeprecatedSynchronousErrorHandling?sD(t):ld(t)}function hO(t){throw t}function tm(t,e){let{onStoppedNotification:n}=Sn;n&&Cs.setTimeout(()=>n(t,e))}var fO={closed:!0,next:Rc,error:hO,complete:Rc};var Rs=typeof Symbol=="function"&&Symbol.observable||"@@observable";function sn(t){return t}function rm(...t){return im(t)}function im(t){return t.length===0?sn:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var ce=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let o=gO(n)?n:new As(n,r,i);return Ss(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=aD(r),new r((i,o)=>{let s=new As({next:a=>{try{n(a)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[Rs](){return this}pipe(...n){return im(n)(this)}toPromise(n){return n=aD(n),new n((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return t.create=e=>new t(e),t})();function aD(t){var e;return(e=t??Sn.Promise)!==null&&e!==void 0?e:Promise}function pO(t){return t&&re(t.next)&&re(t.error)&&re(t.complete)}function gO(t){return t&&t instanceof uo||pO(t)&&ud(t)}function om(t){return re(t?.lift)}function _e(t){return e=>{if(om(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function ge(t,e,n,r,i){return new sm(t,e,n,r,i)}var sm=class extends uo{constructor(e,n,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function xs(){return _e((t,e)=>{let n=null;t._refCount++;let r=ge(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,o=n;n=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var Ns=class extends ce{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,om(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new He;let n=this.getSubject();e.add(this.source.subscribe(ge(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=He.EMPTY)}return e}refCount(){return xs()(this)}};var cD=Ts(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var We=(()=>{class t extends ce{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new hd(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new cD}next(n){Ss(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){Ss(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){Ss(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:o}=this;return r||i?Jg:(this.currentObservers=null,o.push(n),new He(()=>{this.currentObservers=null,ao(o,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){let n=new ce;return n.source=this,n}}return t.create=(e,n)=>new hd(e,n),t})(),hd=class extends We{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:Jg}};var Ct=class extends We{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var am={now(){return(am.delegate||Date).now()},delegate:void 0};var fd=class extends He{constructor(e,n){super()}schedule(e,n=0){return this}};var xc={setInterval(t,e,...n){let{delegate:r}=xc;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=xc;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var Ms=class extends fd{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,n),this}requestAsyncId(e,n,r=0){return xc.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&xc.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,ao(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var ks=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};ks.now=am.now;var Ps=class extends ks{constructor(e,n=ks.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var cm=new Ps(Ms);var pd=class extends Ms{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}};var gd=class extends Ps{};var um=new gd(pd);var Jt=new ce(t=>t.complete());function uD(t){return t&&re(t.schedule)}function lD(t){return t[t.length-1]}function md(t){return re(lD(t))?t.pop():void 0}function ui(t){return uD(lD(t))?t.pop():void 0}function yd(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function hD(t,e,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(h){try{l(r.next(h))}catch(p){s(p)}}function u(h){try{l(r.throw(h))}catch(p){s(p)}}function l(h){h.done?o(h.value):i(h.value).then(a,u)}l((r=r.apply(t,e||[])).next())})}function dD(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function lo(t){return this instanceof lo?(this.v=t,this):new lo(t)}function fD(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(y){return function(w){return Promise.resolve(w).then(y,p)}}function a(y,w){r[y]&&(i[y]=function(k){return new Promise(function(M,j){o.push([y,k,M,j])>1||u(y,k)})},w&&(i[y]=w(i[y])))}function u(y,w){try{l(r[y](w))}catch(k){g(o[0][3],k)}}function l(y){y.value instanceof lo?Promise.resolve(y.value.v).then(h,p):g(o[0][2],y)}function h(y){u("next",y)}function p(y){u("throw",y)}function g(y,w){y(w),o.shift(),o.length&&u(o[0][0],o[0][1])}}function pD(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof dD=="function"?dD(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(s){return new Promise(function(a,u){s=t[o](s),i(a,u,s.done,s.value)})}}function i(o,s,a,u){Promise.resolve(u).then(function(l){o({value:l,done:a})},s)}}var vd=t=>t&&typeof t.length=="number"&&typeof t!="function";function _d(t){return re(t?.then)}function Ed(t){return re(t[Rs])}function Id(t){return Symbol.asyncIterator&&re(t?.[Symbol.asyncIterator])}function wd(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function mO(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var bd=mO();function Dd(t){return re(t?.[bd])}function Td(t){return fD(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield lo(n.read());if(i)return yield lo(void 0);yield yield lo(r)}}finally{n.releaseLock()}})}function Cd(t){return re(t?.getReader)}function et(t){if(t instanceof ce)return t;if(t!=null){if(Ed(t))return yO(t);if(vd(t))return vO(t);if(_d(t))return _O(t);if(Id(t))return gD(t);if(Dd(t))return EO(t);if(Cd(t))return IO(t)}throw wd(t)}function yO(t){return new ce(e=>{let n=t[Rs]();if(re(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function vO(t){return new ce(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function _O(t){return new ce(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,ld)})}function EO(t){return new ce(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function gD(t){return new ce(e=>{wO(t,e).catch(n=>e.error(n))})}function IO(t){return gD(Td(t))}function wO(t,e){var n,r,i,o;return hD(this,void 0,void 0,function*(){try{for(n=pD(t);r=yield n.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}e.complete()})}function Xt(t,e,n,r=0,i=!1){let o=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(o),!i)return o}function li(t,e=0){return _e((n,r)=>{n.subscribe(ge(r,i=>Xt(r,t,()=>r.next(i),e),()=>Xt(r,t,()=>r.complete(),e),i=>Xt(r,t,()=>r.error(i),e)))})}function di(t,e=0){return _e((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function mD(t,e){return et(t).pipe(di(e),li(e))}function yD(t,e){return et(t).pipe(di(e),li(e))}function vD(t,e){return new ce(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function _D(t,e){return new ce(n=>{let r;return Xt(n,e,()=>{r=t[bd](),Xt(n,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){n.error(s);return}o?n.complete():n.next(i)},0,!0)}),()=>re(r?.return)&&r.return()})}function Sd(t,e){if(!t)throw new Error("Iterable cannot be null");return new ce(n=>{Xt(n,e,()=>{let r=t[Symbol.asyncIterator]();Xt(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function ED(t,e){return Sd(Td(t),e)}function ID(t,e){if(t!=null){if(Ed(t))return mD(t,e);if(vd(t))return vD(t,e);if(_d(t))return yD(t,e);if(Id(t))return Sd(t,e);if(Dd(t))return _D(t,e);if(Cd(t))return ED(t,e)}throw wd(t)}function Be(t,e){return e?ID(t,e):et(t)}function X(...t){let e=ui(t);return Be(t,e)}function Os(t,e){let n=re(t)?t:()=>t,r=i=>i.error(n());return new ce(e?i=>e.schedule(r,0,i):r)}function lm(t){return!!t&&(t instanceof ce||re(t.lift)&&re(t.subscribe))}var xr=Ts(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function me(t,e){return _e((n,r)=>{let i=0;n.subscribe(ge(r,o=>{r.next(t.call(e,o,i++))}))})}var{isArray:bO}=Array;function DO(t,e){return bO(e)?t(...e):t(e)}function Ad(t){return me(e=>DO(t,e))}var{isArray:TO}=Array,{getPrototypeOf:CO,prototype:SO,keys:AO}=Object;function Rd(t){if(t.length===1){let e=t[0];if(TO(e))return{args:e,keys:null};if(RO(e)){let n=AO(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function RO(t){return t&&typeof t=="object"&&CO(t)===SO}function xd(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function Nd(...t){let e=ui(t),n=md(t),{args:r,keys:i}=Rd(t);if(r.length===0)return Be([],e);let o=new ce(xO(r,e,i?s=>xd(i,s):sn));return n?o.pipe(Ad(n)):o}function xO(t,e,n=sn){return r=>{wD(e,()=>{let{length:i}=t,o=new Array(i),s=i,a=i;for(let u=0;u<i;u++)wD(e,()=>{let l=Be(t[u],e),h=!1;l.subscribe(ge(r,p=>{o[u]=p,h||(h=!0,a--),a||r.next(n(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function wD(t,e,n){t?Xt(n,t,e):e()}function bD(t,e,n,r,i,o,s,a){let u=[],l=0,h=0,p=!1,g=()=>{p&&!u.length&&!l&&e.complete()},y=k=>l<r?w(k):u.push(k),w=k=>{o&&e.next(k),l++;let M=!1;et(n(k,h++)).subscribe(ge(e,j=>{i?.(j),o?y(j):e.next(j)},()=>{M=!0},void 0,()=>{if(M)try{for(l--;u.length&&l<r;){let j=u.shift();s?Xt(e,s,()=>w(j)):w(j)}g()}catch(j){e.error(j)}}))};return t.subscribe(ge(e,y,()=>{p=!0,g()})),()=>{a?.()}}function tt(t,e,n=1/0){return re(e)?tt((r,i)=>me((o,s)=>e(r,o,i,s))(et(t(r,i))),n):(typeof e=="number"&&(n=e),_e((r,i)=>bD(r,i,t,n)))}function Fs(t=1/0){return tt(sn,t)}function DD(){return Fs(1)}function Ls(...t){return DD()(Be(t,ui(t)))}function Nc(t){return new ce(e=>{et(t()).subscribe(e)})}function dm(...t){let e=md(t),{args:n,keys:r}=Rd(t),i=new ce(o=>{let{length:s}=n;if(!s){o.complete();return}let a=new Array(s),u=s,l=s;for(let h=0;h<s;h++){let p=!1;et(n[h]).subscribe(ge(o,g=>{p||(p=!0,l--),a[h]=g},()=>u--,void 0,()=>{(!u||!p)&&(l||o.next(r?xd(r,a):a),o.complete())}))}});return e?i.pipe(Ad(e)):i}function an(t,e){return _e((n,r)=>{let i=0;n.subscribe(ge(r,o=>t.call(e,o,i++)&&r.next(o)))})}function Nr(t){return _e((e,n)=>{let r=null,i=!1,o;r=e.subscribe(ge(n,void 0,void 0,s=>{o=et(t(s,Nr(t)(e))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function TD(t,e,n,r,i){return(o,s)=>{let a=n,u=e,l=0;o.subscribe(ge(s,h=>{let p=l++;u=a?t(u,h,p):(a=!0,h),r&&s.next(u)},i&&(()=>{a&&s.next(u),s.complete()})))}}function ho(t,e){return re(e)?tt(t,e,1):tt(t,1)}function hi(t){return _e((e,n)=>{let r=!1;e.subscribe(ge(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function Mr(t){return t<=0?()=>Jt:_e((e,n)=>{let r=0;e.subscribe(ge(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function Md(t=NO){return _e((e,n)=>{let r=!1;e.subscribe(ge(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function NO(){return new xr}function Mc(t){return _e((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function kr(t,e){let n=arguments.length>=2;return r=>r.pipe(t?an((i,o)=>t(i,o,r)):sn,Mr(1),n?hi(e):Md(()=>new xr))}function Vs(t){return t<=0?()=>Jt:_e((e,n)=>{let r=[];e.subscribe(ge(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function hm(t,e){let n=arguments.length>=2;return r=>r.pipe(t?an((i,o)=>t(i,o,r)):sn,Vs(1),n?hi(e):Md(()=>new xr))}function fm(t,e){return _e(TD(t,e,arguments.length>=2,!0))}function pm(...t){let e=ui(t);return _e((n,r)=>{(e?Ls(t,n,e):Ls(t,n)).subscribe(r)})}function en(t,e){return _e((n,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();n.subscribe(ge(r,u=>{i?.unsubscribe();let l=0,h=o++;et(t(u,h)).subscribe(i=ge(r,p=>r.next(e?e(u,p,h,l++):p),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function kd(t){return _e((e,n)=>{et(t).subscribe(ge(n,()=>n.complete(),Rc)),!n.closed&&e.subscribe(n)})}function gt(t,e,n){let r=re(t)||e||n?{next:t,error:e,complete:n}:t;return r?_e((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(ge(o,u=>{var l;(l=r.next)===null||l===void 0||l.call(r,u),o.next(u)},()=>{var u;a=!1,(u=r.complete)===null||u===void 0||u.call(r),o.complete()},u=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,u),o.error(u)},()=>{var u,l;a&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):sn}function CD(t){let e=J(null);try{return t()}finally{J(e)}}var SD=Z(V({},io),{consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!0,dirty:!0,kind:"effect"});function AD(t){if(t.dirty=!1,t.version>0&&!ws(t))return;t.version++;let e=oo(t);try{t.cleanup(),t.fn()}finally{Is(t,e)}}var fi=class{full;major;minor;patch;constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},Cm=new fi("20.3.2");var Ld="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",H=class extends Error{code;constructor(e,n){super(vo(e,n)),this.code=e}};function MO(t){return`NG0${Math.abs(t)}`}function vo(t,e){return`${MO(t)}${e?": "+e:""}`}var Lc=globalThis;function Te(t){for(let e in t)if(t[e]===Te)return e;throw Error("")}function ND(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function Or(t){if(typeof t=="string")return t;if(Array.isArray(t))return`[${t.map(Or).join(", ")}]`;if(t==null)return""+t;let e=t.overriddenName||t.name;if(e)return`${e}`;let n=t.toString();if(n==null)return""+n;let r=n.indexOf(`
`);return r>=0?n.slice(0,r):n}function Vd(t,e){return t?e?`${t} ${e}`:t:e||""}var kO=Te({__forward_ref__:Te});function Zn(t){return t.__forward_ref__=Zn,t.toString=function(){return Or(this())},t}function St(t){return Sm(t)?t():t}function Sm(t){return typeof t=="function"&&t.hasOwnProperty(kO)&&t.__forward_ref__===Zn}function z(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Fr(t){return{providers:t.providers||[],imports:t.imports||[]}}function Vc(t){return PO(t,jd)}function Am(t){return Vc(t)!==null}function PO(t,e){return t.hasOwnProperty(e)&&t[e]||null}function OO(t){let e=t?.[jd]??null;return e||null}function mm(t){return t&&t.hasOwnProperty(Od)?t[Od]:null}var jd=Te({\u0275prov:Te}),Od=Te({\u0275inj:Te}),q=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,n){this._desc=e,this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=z({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function Rm(t){return t&&!!t.\u0275providers}var xm=Te({\u0275cmp:Te}),Nm=Te({\u0275dir:Te}),Mm=Te({\u0275pipe:Te}),km=Te({\u0275mod:Te}),Pc=Te({\u0275fac:Te}),_o=Te({__NG_ELEMENT_ID__:Te}),RD=Te({__NG_ENV_ID__:Te});function jc(t){return typeof t=="string"?t:t==null?"":String(t)}function MD(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():jc(t)}var kD=Te({ngErrorCode:Te}),FO=Te({ngErrorMessage:Te}),LO=Te({ngTokenPath:Te});function Pm(t,e){return PD("",-200,e)}function Ud(t,e){throw new H(-201,!1)}function PD(t,e,n){let r=new H(e,t);return r[kD]=e,r[FO]=t,n&&(r[LO]=n),r}function VO(t){return t[kD]}var ym;function OD(){return ym}function cn(t){let e=ym;return ym=t,e}function Om(t,e,n){let r=Vc(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&8)return null;if(e!==void 0)return e;Ud(t,"Injector")}var jO={},fo=jO,vm="__NG_DI_FLAG__",_m=class{injector;constructor(e){this.injector=e}retrieve(e,n){let r=po(n)||0;try{return this.injector.get(e,r&8?null:fo,r)}catch(i){if(_s(i))return i;throw i}}};function UO(t,e=0){let n=Zl();if(n===void 0)throw new H(-203,!1);if(n===null)return Om(t,void 0,e);{let r=BO(e),i=n.retrieve(t,r);if(_s(i)){if(r.optional)return null;throw i}return i}}function se(t,e=0){return(OD()||UO)(St(t),e)}function R(t,e){return se(t,po(e))}function po(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function BO(t){return{optional:!!(t&8),host:!!(t&1),self:!!(t&2),skipSelf:!!(t&4)}}function Em(t){let e=[];for(let n=0;n<t.length;n++){let r=St(t[n]);if(Array.isArray(r)){if(r.length===0)throw new H(900,!1);let i,o=0;for(let s=0;s<r.length;s++){let a=r[s],u=$O(a);typeof u=="number"?u===-1?i=a.token:o|=u:i=a}e.push(se(i,o))}else e.push(se(r))}return e}function FD(t,e){return t[vm]=e,t.prototype[vm]=e,t}function $O(t){return t[vm]}function go(t,e){let n=t.hasOwnProperty(Pc);return n?t[Pc]:null}function LD(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){let i=t[r],o=e[r];if(n&&(i=n(i),o=n(o)),o!==i)return!1}return!0}function VD(t){return t.flat(Number.POSITIVE_INFINITY)}function Bd(t,e){t.forEach(n=>Array.isArray(n)?Bd(n,e):e(n))}function Fm(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Uc(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function jD(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let o=i-2;t[i]=t[o],i--}t[e]=n,t[e+1]=r}}function $d(t,e,n){let r=Us(t,e);return r>=0?t[r|1]=n:(r=~r,jD(t,r,e,n)),r}function Hd(t,e){let n=Us(t,e);if(n>=0)return t[n|1]}function Us(t,e){return HO(t,e,1)}function HO(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let o=r+(i-r>>1),s=t[o<<n];if(e===s)return o<<n;s>e?i=o:r=o+1}return~(i<<n)}var gi={},zt=[],Lr=new q(""),Lm=new q("",-1),Vm=new q(""),Oc=class{get(e,n=fo){if(n===fo){let i=PD("",-201);throw i.name="\u0275NotFound",i}return n}};function jm(t){return t[km]||null}function mi(t){return t[xm]||null}function Um(t){return t[Nm]||null}function UD(t){return t[Mm]||null}function Gt(t){return{\u0275providers:t}}function BD(t){return Gt([{provide:Lr,multi:!0,useValue:t}])}function $D(...t){return{\u0275providers:Bm(!0,t),\u0275fromNgModule:!0}}function Bm(t,...e){let n=[],r=new Set,i,o=s=>{n.push(s)};return Bd(e,s=>{let a=s;Fd(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&HD(i,o),n}function HD(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];$m(i,o=>{e(o,r)})}}function Fd(t,e,n,r){if(t=St(t),!t)return!1;let i=null,o=mm(t),s=!o&&mi(t);if(!o&&!s){let u=t.ngModule;if(o=mm(u),o)i=u;else return!1}else{if(s&&!s.standalone)return!1;i=t}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let u=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of u)Fd(l,e,n,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{Bd(o.imports,h=>{Fd(h,e,n,r)&&(l||=[],l.push(h))})}finally{}l!==void 0&&HD(l,e)}if(!a){let l=go(i)||(()=>new i);e({provide:i,useFactory:l,deps:zt},i),e({provide:Vm,useValue:i,multi:!0},i),e({provide:Lr,useValue:()=>se(i),multi:!0},i)}let u=o.providers;if(u!=null&&!a){let l=t;$m(u,h=>{e(h,l)})}}else return!1;return i!==t&&t.providers!==void 0}function $m(t,e){for(let n of t)Rm(n)&&(n=n.\u0275providers),Array.isArray(n)?$m(n,e):e(n)}var qO=Te({provide:String,useValue:Te});function qD(t){return t!==null&&typeof t=="object"&&qO in t}function zO(t){return!!(t&&t.useExisting)}function GO(t){return!!(t&&t.useFactory)}function mo(t){return typeof t=="function"}function zD(t){return!!t.useClass}var Bc=new q(""),Pd={},xD={},gm;function $c(){return gm===void 0&&(gm=new Oc),gm}var nt=class{},yo=class extends nt{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,wm(e,s=>this.processProvider(s)),this.records.set(Lm,js(void 0,this)),i.has("environment")&&this.records.set(nt,js(void 0,this));let o=this.records.get(Bc);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(Vm,zt,{self:!0}))}retrieve(e,n){let r=po(n)||0;try{return this.get(e,fo,r)}catch(i){if(_s(i))return i;throw i}}destroy(){kc(this),this._destroyed=!0;let e=J(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),J(e)}}onDestroy(e){return kc(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){kc(this);let n=Yn(this),r=cn(void 0),i;try{return e()}finally{Yn(n),cn(r)}}get(e,n=fo,r){if(kc(this),e.hasOwnProperty(RD))return e[RD](this);let i=po(r),o,s=Yn(this),a=cn(void 0);try{if(!(i&4)){let l=this.records.get(e);if(l===void 0){let h=ZO(e)&&Vc(e);h&&this.injectableDefInScope(h)?l=js(Im(e),Pd):l=null,this.records.set(e,l)}if(l!=null)return this.hydrate(e,l,i)}let u=i&2?$c():this.parent;return n=i&8&&n===fo?null:n,u.get(e,n)}catch(u){let l=VO(u);throw l===-200||l===-201?new H(l,null):u}finally{cn(a),Yn(s)}}resolveInjectorInitializers(){let e=J(null),n=Yn(this),r=cn(void 0),i;try{let o=this.get(Lr,zt,{self:!0});for(let s of o)s()}finally{Yn(n),cn(r),J(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(Or(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=St(e);let n=mo(e)?e:St(e&&e.provide),r=KO(e);if(!mo(e)&&e.multi===!0){let i=this.records.get(n);i||(i=js(void 0,Pd,!0),i.factory=()=>Em(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n,r){let i=J(null);try{if(n.value===xD)throw Pm(Or(e));return n.value===Pd&&(n.value=xD,n.value=n.factory(void 0,r)),typeof n.value=="object"&&n.value&&YO(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{J(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=St(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function Im(t){let e=Vc(t),n=e!==null?e.factory:go(t);if(n!==null)return n;if(t instanceof q)throw new H(204,!1);if(t instanceof Function)return WO(t);throw new H(204,!1)}function WO(t){if(t.length>0)throw new H(204,!1);let n=OO(t);return n!==null?()=>n.factory(t):()=>new t}function KO(t){if(qD(t))return js(void 0,t.useValue);{let e=Hm(t);return js(e,Pd)}}function Hm(t,e,n){let r;if(mo(t)){let i=St(t);return go(i)||Im(i)}else if(qD(t))r=()=>St(t.useValue);else if(GO(t))r=()=>t.useFactory(...Em(t.deps||[]));else if(zO(t))r=(i,o)=>se(St(t.useExisting),o!==void 0&&o&8?8:void 0);else{let i=St(t&&(t.useClass||t.provide));if(QO(t))r=()=>new i(...Em(t.deps));else return go(i)||Im(i)}return r}function kc(t){if(t.destroyed)throw new H(205,!1)}function js(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function QO(t){return!!t.deps}function YO(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function ZO(t){return typeof t=="function"||typeof t=="object"&&t.ngMetadataName==="InjectionToken"}function wm(t,e){for(let n of t)Array.isArray(n)?wm(n,e):n&&Rm(n)?wm(n.\u0275providers,e):e(n)}function ht(t,e){let n;t instanceof yo?(kc(t),n=t):n=new _m(t);let r,i=Yn(n),o=cn(void 0);try{return e()}finally{Yn(i),cn(o)}}function GD(){return OD()!==void 0||Zl()!=null}var xn=0,Q=1,te=2,dt=3,yn=4,vn=5,Bs=6,$s=7,Ke=8,Hs=9,Jn=10,Fe=11,qs=12,qm=13,Eo=14,un=15,yi=16,Io=17,Xn=18,Hc=19,zm=20,Pr=21,qd=22,Vr=23,ln=24,zd=25,At=26,Rt=27,WD=1,Gm=6,vi=7,qc=8,wo=9,rt=10;function er(t){return Array.isArray(t)&&typeof t[WD]=="object"}function Nn(t){return Array.isArray(t)&&t[WD]===!0}function Wm(t){return(t.flags&4)!==0}function _i(t){return t.componentOffset>-1}function Gd(t){return(t.flags&1)===1}function tr(t){return!!t.template}function zs(t){return(t[te]&512)!==0}function bo(t){return(t[te]&256)===256}var Km="svg",KD="math";function _n(t){for(;Array.isArray(t);)t=t[xn];return t}function Qm(t,e){return _n(e[t])}function Mn(t,e){return _n(e[t.index])}function zc(t,e){return t.data[e]}function En(t,e){let n=e[t];return er(n)?n:n[xn]}function QD(t){return(t[te]&4)===4}function Wd(t){return(t[te]&128)===128}function YD(t){return Nn(t[dt])}function nr(t,e){return e==null?null:t[e]}function Ym(t){t[Io]=0}function Zm(t){t[te]&1024||(t[te]|=1024,Wd(t)&&Do(t))}function ZD(t,e){for(;t>0;)e=e[Eo],t--;return e}function Gc(t){return!!(t[te]&9216||t[ln]?.dirty)}function Kd(t){t[Jn].changeDetectionScheduler?.notify(8),t[te]&64&&(t[te]|=1024),Gc(t)&&Do(t)}function Do(t){t[Jn].changeDetectionScheduler?.notify(0);let e=pi(t);for(;e!==null&&!(e[te]&8192||(e[te]|=8192,!Wd(e)));)e=pi(e)}function Jm(t,e){if(bo(t))throw new H(911,!1);t[Pr]===null&&(t[Pr]=[]),t[Pr].push(e)}function JD(t,e){if(t[Pr]===null)return;let n=t[Pr].indexOf(e);n!==-1&&t[Pr].splice(n,1)}function pi(t){let e=t[dt];return Nn(e)?e[dt]:e}function Xm(t){return t[$s]??=[]}function ey(t){return t.cleanup??=[]}function XD(t,e,n,r){let i=Xm(e);i.push(n),t.firstCreatePass&&ey(t).push(r,i.length-1)}var ue={lFrame:hT(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var bm=!1;function eT(){return ue.lFrame.elementDepthCount}function tT(){ue.lFrame.elementDepthCount++}function ty(){ue.lFrame.elementDepthCount--}function nT(){return ue.bindingsEnabled}function rT(){return ue.skipHydrationRootTNode!==null}function ny(t){return ue.skipHydrationRootTNode===t}function ry(){ue.skipHydrationRootTNode=null}function de(){return ue.lFrame.lView}function mt(){return ue.lFrame.tView}function To(t){return ue.lFrame.contextLView=t,t[Ke]}function Co(t){return ue.lFrame.contextLView=null,t}function yt(){let t=iy();for(;t!==null&&t.type===64;)t=t.parent;return t}function iy(){return ue.lFrame.currentTNode}function iT(){let t=ue.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function Gs(t,e){let n=ue.lFrame;n.currentTNode=t,n.isParent=e}function oy(){return ue.lFrame.isParent}function oT(){ue.lFrame.isParent=!1}function sy(){return bm}function Ws(t){let e=bm;return bm=t,e}function ay(){let t=ue.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function sT(t){return ue.lFrame.bindingIndex=t}function So(){return ue.lFrame.bindingIndex++}function cy(t){let e=ue.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function aT(){return ue.lFrame.inI18n}function cT(t,e){let n=ue.lFrame;n.bindingIndex=n.bindingRootIndex=t,Qd(e)}function uT(){return ue.lFrame.currentDirectiveIndex}function Qd(t){ue.lFrame.currentDirectiveIndex=t}function lT(t){let e=ue.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function uy(){return ue.lFrame.currentQueryIndex}function Yd(t){ue.lFrame.currentQueryIndex=t}function JO(t){let e=t[Q];return e.type===2?e.declTNode:e.type===1?t[vn]:null}function ly(t,e,n){if(n&4){let i=e,o=t;for(;i=i.parent,i===null&&!(n&1);)if(i=JO(o),i===null||(o=o[Eo],i.type&10))break;if(i===null)return!1;e=i,t=o}let r=ue.lFrame=dT();return r.currentTNode=e,r.lView=t,!0}function Zd(t){let e=dT(),n=t[Q];ue.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function dT(){let t=ue.lFrame,e=t===null?null:t.child;return e===null?hT(t):e}function hT(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function fT(){let t=ue.lFrame;return ue.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var dy=fT;function Jd(){let t=fT();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function pT(t){return(ue.lFrame.contextLView=ZD(t,ue.lFrame.contextLView))[Ke]}function jr(){return ue.lFrame.selectedIndex}function Ei(t){ue.lFrame.selectedIndex=t}function Xd(){let t=ue.lFrame;return zc(t.tView,t.selectedIndex)}function Ks(){ue.lFrame.currentNamespace=Km}function Qs(){XO()}function XO(){ue.lFrame.currentNamespace=null}function gT(){return ue.lFrame.currentNamespace}var mT=!0;function eh(){return mT}function th(t){mT=t}function Dm(t,e=null,n=null,r){let i=hy(t,e,n,r);return i.resolveInjectorInitializers(),i}function hy(t,e=null,n=null,r,i=new Set){let o=[n||zt,$D(t)];return r=r||(typeof t=="object"?void 0:Or(t)),new yo(o,e||$c(),r||null,i)}var Oe=class t{static THROW_IF_NOT_FOUND=fo;static NULL=new Oc;static create(e,n){if(Array.isArray(e))return Dm({name:""},n,e,"");{let r=e.name??"";return Dm({name:r},e.parent,e.providers,r)}}static \u0275prov=z({token:t,providedIn:"any",factory:()=>se(Lm)});static __NG_ELEMENT_ID__=-1},it=new q(""),kn=(()=>{class t{static __NG_ELEMENT_ID__=e1;static __NG_ENV_ID__=n=>n}return t})(),Fc=class extends kn{_lView;constructor(e){super(),this._lView=e}get destroyed(){return bo(this._lView)}onDestroy(e){let n=this._lView;return Jm(n,e),()=>JD(n,e)}};function e1(){return new Fc(de())}var An=class{_console=console;handleError(e){this._console.error("ERROR",e)}},Wt=new q("",{providedIn:"root",factory:()=>{let t=R(nt),e;return n=>{t.destroyed&&!e?setTimeout(()=>{throw n}):(e??=t.get(An),e.handleError(n))}}}),yT={provide:Lr,useValue:()=>void R(An),multi:!0},t1=new q("",{providedIn:"root",factory:()=>{let t=R(it).defaultView;if(!t)return;let e=R(Wt),n=o=>{e(o.reason),o.preventDefault()},r=o=>{o.error?e(o.error):e(new Error(o.message,{cause:o})),o.preventDefault()},i=()=>{t.addEventListener("unhandledrejection",n),t.addEventListener("error",r)};typeof Zone<"u"?Zone.root.run(i):i(),R(kn).onDestroy(()=>{t.removeEventListener("error",r),t.removeEventListener("unhandledrejection",n)})}});function fy(){return Gt([BD(()=>void R(t1))])}function py(t){return typeof t=="function"&&t[Vt]!==void 0}function Ae(t,e){let[n,r,i]=Yg(t,e?.equal),o=n,s=o[Vt];return o.set=r,o.update=i,o.asReadonly=gy.bind(o),o}function gy(){let t=this[Vt];if(t.readonlyFn===void 0){let e=()=>this();e[Vt]=t,t.readonlyFn=e}return t.readonlyFn}function my(t){return py(t)&&typeof t.set=="function"}var Rn=class{},Wc=new q("",{providedIn:"root",factory:()=>!1});var yy=new q(""),nh=new q("");var Kc=(()=>{class t{view;node;constructor(n,r){this.view=n,this.node=r}static __NG_ELEMENT_ID__=n1}return t})();function n1(){return new Kc(de(),yt())}var rr=(()=>{class t{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new Ct(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new ce(n=>{n.next(!1),n.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let n=this.taskId++;return this.pendingTasks.add(n),n}has(n){return this.pendingTasks.has(n)}remove(n){this.pendingTasks.delete(n),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=z({token:t,providedIn:"root",factory:()=>new t})}return t})(),Ao=(()=>{class t{internalPendingTasks=R(rr);scheduler=R(Rn);errorHandler=R(Wt);add(){let n=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(n)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(n))}}run(n){let r=this.add();n().catch(this.errorHandler).finally(r)}static \u0275prov=z({token:t,providedIn:"root",factory:()=>new t})}return t})();function Ro(...t){}var Qc=(()=>{class t{static \u0275prov=z({token:t,providedIn:"root",factory:()=>new Tm})}return t})(),Tm=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let n=e.zone,r=this.queues.get(n);r.has(e)&&(r.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let n=e.zone;this.queues.has(n)||this.queues.set(n,new Set);let r=this.queues.get(n);r.has(e)||r.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[n,r]of this.queues)n===null?e||=this.flushQueue(r):e||=n.run(()=>this.flushQueue(r));e||(this.dirtyEffectCount=0)}}flushQueue(e){let n=!1;for(let r of e)r.dirty&&(this.dirtyEffectCount--,n=!0,r.run());return n}};function ra(t){return{toString:t}.toString()}var rh="__parameters__";function u1(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function l1(t,e,n){return ra(()=>{let r=u1(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(u,l,h){let p=u.hasOwnProperty(rh)?u[rh]:Object.defineProperty(u,rh,{value:[]})[rh];for(;p.length<=h;)p.push(null);return(p[h]=p[h]||[]).push(s),u}}return i.prototype.ngMetadataName=t,i.annotationCls=i,i})}var vt=FD(l1("Optional"),8);function d1(t){return typeof t=="function"}var lh=class{previousValue;currentValue;firstChange;constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function WT(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}var or=(()=>{let t=()=>KT;return t.ngInherit=!0,t})();function KT(t){return t.type.prototype.ngOnChanges&&(t.setInput=f1),h1}function h1(){let t=YT(this),e=t?.current;if(e){let n=t.previous;if(n===gi)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function f1(t,e,n,r,i){let o=this.declaredInputs[r],s=YT(t)||p1(t,{previous:gi,current:null}),a=s.current||(s.current={}),u=s.previous,l=u[o];a[o]=new lh(l&&l.currentValue,n,u===gi),WT(t,e,i,n)}var QT="__ngSimpleChanges__";function YT(t){return t[QT]||null}function p1(t,e){return t[QT]=e}var vT=[];var Re=function(t,e=null,n){for(let r=0;r<vT.length;r++){let i=vT[r];i(t,e,n)}};function g1(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=KT(e);(n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s)}i&&(n.preOrderHooks??=[]).push(0-t,i),o&&((n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o))}function m1(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let o=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:h}=o;s&&(t.contentHooks??=[]).push(-n,s),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),u&&(t.viewHooks??=[]).push(-n,u),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),h!=null&&(t.destroyHooks??=[]).push(n,h)}}function sh(t,e,n){ZT(t,e,3,n)}function ah(t,e,n,r){(t[te]&3)===n&&ZT(t,e,n,r)}function vy(t,e){let n=t[te];(n&3)===e&&(n&=16383,n+=1,t[te]=n)}function ZT(t,e,n,r){let i=r!==void 0?t[Io]&65535:0,o=r??-1,s=e.length-1,a=0;for(let u=i;u<s;u++)if(typeof e[u+1]=="number"){if(a=e[u],r!=null&&a>=r)break}else e[u]<0&&(t[Io]+=65536),(a<o||o==-1)&&(y1(t,n,e,u),t[Io]=(t[Io]&4294901760)+u+2),u++}function _T(t,e){Re(4,t,e);let n=J(null);try{e.call(t)}finally{J(n),Re(5,t,e)}}function y1(t,e,n,r){let i=n[r]<0,o=n[r+1],s=i?-n[r]:n[r],a=t[s];i?t[te]>>14<t[Io]>>16&&(t[te]&3)===e&&(t[te]+=16384,_T(a,o)):_T(a,o)}var Zs=-1,No=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,n,r,i){this.factory=e,this.name=i,this.canSeeViewProviders=n,this.injectImpl=r}};function v1(t){return(t.flags&8)!==0}function _1(t){return(t.flags&16)!==0}function E1(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let o=n[r++],s=n[r++],a=n[r++];t.setAttribute(e,s,a,o)}else{let o=i,s=n[++r];I1(o)?t.setProperty(e,o,s):t.setAttribute(e,o,s),r++}}return r}function JT(t){return t===3||t===4||t===6}function I1(t){return t.charCodeAt(0)===64}function Js(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?ET(t,n,i,null,e[++r]):ET(t,n,i,null,null))}}return t}function ET(t,e,n,r,i){let o=0,s=t.length;if(e===-1)s=-1;else for(;o<t.length;){let a=t[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<t.length;){let a=t[o];if(typeof a=="number")break;if(a===n){i!==null&&(t[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),i!==null&&t.splice(o++,0,i)}function XT(t){return t!==Zs}function dh(t){return t&32767}function w1(t){return t>>16}function hh(t,e){let n=w1(t),r=e;for(;n>0;)r=r[Eo],n--;return r}var Ry=!0;function IT(t){let e=Ry;return Ry=t,e}var b1=256,eC=b1-1,tC=5,D1=0,ir={};function T1(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(_o)&&(r=n[_o]),r==null&&(r=n[_o]=D1++);let i=r&eC,o=1<<i;e.data[t+(i>>tC)]|=o}function fh(t,e){let n=nC(t,e);if(n!==-1)return n;let r=e[Q];r.firstCreatePass&&(t.injectorIndex=e.length,_y(r.data,t),_y(e,null),_y(r.blueprint,null));let i=av(t,e),o=t.injectorIndex;if(XT(i)){let s=dh(i),a=hh(i,e),u=a[Q].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|u[s+l]}return e[o+8]=i,o}function _y(t,e){t.push(0,0,0,0,0,0,0,0,e)}function nC(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function av(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=aC(i),r===null)return Zs;if(n++,i=i[Eo],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return Zs}function xy(t,e,n){T1(t,e,n)}function C1(t,e){if(e==="class")return t.classes;if(e==="style")return t.styles;let n=t.attrs;if(n){let r=n.length,i=0;for(;i<r;){let o=n[i];if(JT(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof n[i]=="string";)i++;else{if(o===e)return n[i+1];i=i+2}}}return null}function rC(t,e,n){if(n&8||t!==void 0)return t;Ud(e,"NodeInjector")}function iC(t,e,n,r){if(n&8&&r===void 0&&(r=null),(n&3)===0){let i=t[Hs],o=cn(void 0);try{return i?i.get(e,r,n&8):Om(e,r,n&8)}finally{cn(o)}}return rC(r,e,n)}function oC(t,e,n,r=0,i){if(t!==null){if(e[te]&2048&&!(r&2)){let s=x1(t,e,n,r,ir);if(s!==ir)return s}let o=sC(t,e,n,r,ir);if(o!==ir)return o}return iC(e,n,r,i)}function sC(t,e,n,r,i){let o=A1(n);if(typeof o=="function"){if(!ly(e,t,r))return r&1?rC(i,n,r):iC(e,n,r,i);try{let s;if(s=o(r),s==null&&!(r&8))Ud(n);else return s}finally{dy()}}else if(typeof o=="number"){let s=null,a=nC(t,e),u=Zs,l=r&1?e[un][vn]:null;for((a===-1||r&4)&&(u=a===-1?av(t,e):e[a+8],u===Zs||!bT(r,!1)?a=-1:(s=e[Q],a=dh(u),e=hh(u,e)));a!==-1;){let h=e[Q];if(wT(o,a,h.data)){let p=S1(a,e,n,s,r,l);if(p!==ir)return p}u=e[a+8],u!==Zs&&bT(r,e[Q].data[a+8]===l)&&wT(o,a,e)?(s=h,a=dh(u),e=hh(u,e)):a=-1}}return i}function S1(t,e,n,r,i,o){let s=e[Q],a=s.data[t+8],u=r==null?_i(a)&&Ry:r!=s&&(a.type&3)!==0,l=i&1&&o===a,h=ch(a,s,n,u,l);return h!==null?Jc(e,s,h,a,i):ir}function ch(t,e,n,r,i){let o=t.providerIndexes,s=e.data,a=o&1048575,u=t.directiveStart,l=t.directiveEnd,h=o>>20,p=r?a:a+h,g=i?a+h:l;for(let y=p;y<g;y++){let w=s[y];if(y<u&&n===w||y>=u&&w.type===n)return y}if(i){let y=s[u];if(y&&tr(y)&&y.type===n)return u}return null}function Jc(t,e,n,r,i){let o=t[n],s=e.data;if(o instanceof No){let a=o;if(a.resolving){let y=MD(s[n]);throw Pm(y)}let u=IT(a.canSeeViewProviders);a.resolving=!0;let l=s[n].type||s[n],h,p=a.injectImpl?cn(a.injectImpl):null,g=ly(t,r,0);try{o=t[n]=a.factory(void 0,i,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&g1(n,s[n],e)}finally{p!==null&&cn(p),IT(u),a.resolving=!1,dy()}}return o}function A1(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(_o)?t[_o]:void 0;return typeof e=="number"?e>=0?e&eC:R1:e}function wT(t,e,n){let r=1<<t;return!!(n[e+(t>>tC)]&r)}function bT(t,e){return!(t&2)&&!(t&1&&e)}var xo=class{_tNode;_lView;constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return oC(this._tNode,this._lView,e,po(r),n)}};function R1(){return new xo(yt(),de())}function wi(t){return ra(()=>{let e=t.prototype.constructor,n=e[Pc]||Ny(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let o=i[Pc]||Ny(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function Ny(t){return Sm(t)?()=>{let e=Ny(St(t));return e&&e()}:go(t)}function x1(t,e,n,r,i){let o=t,s=e;for(;o!==null&&s!==null&&s[te]&2048&&!zs(s);){let a=sC(o,s,n,r|2,ir);if(a!==ir)return a;let u=o.parent;if(!u){let l=s[zm];if(l){let h=l.get(n,ir,r);if(h!==ir)return h}u=aC(s),s=s[Eo]}o=u}return i}function aC(t){let e=t[Q],n=e.type;return n===2?e.declTNode:n===1?t[vn]:null}function ou(t){return C1(yt(),t)}function N1(){return ia(yt(),de())}function ia(t,e){return new tn(Mn(t,e))}var tn=(()=>{class t{nativeElement;constructor(n){this.nativeElement=n}static __NG_ELEMENT_ID__=N1}return t})();function M1(t){return t instanceof tn?t.nativeElement:t}function k1(){return this._results[Symbol.iterator]()}var ph=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new We}constructor(e=!1){this._emitDistinctChangesOnly=e}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,n){return this._results.reduce(e,n)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,n){this.dirty=!1;let r=VD(e);(this._changesDetected=!LD(this._results,r,n))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=k1};function cC(t){return(t.flags&128)===128}var cv=(function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t})(cv||{}),uC=new Map,P1=0;function O1(){return P1++}function F1(t){uC.set(t[Hc],t)}function My(t){uC.delete(t[Hc])}var DT="__ngContext__";function Xs(t,e){er(e)?(t[DT]=e[Hc],F1(e)):t[DT]=e}function lC(t){return hC(t[qs])}function dC(t){return hC(t[yn])}function hC(t){for(;t!==null&&!Nn(t);)t=t[yn];return t}var ky;function uv(t){ky=t}function fC(){if(ky!==void 0)return ky;if(typeof document<"u")return document;throw new H(210,!1)}var Ah=new q("",{providedIn:"root",factory:()=>L1}),L1="ng",Rh=new q(""),bi=new q("",{providedIn:"platform",factory:()=>"unknown"});var xh=new q("",{providedIn:"root",factory:()=>fC().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var V1="h",j1="b";var pC="r";var gC="di";var mC=!1,yC=new q("",{providedIn:"root",factory:()=>mC});var U1=(t,e,n,r)=>{};function B1(t,e,n,r){U1(t,e,n,r)}function lv(t){return(t.flags&32)===32}var $1=()=>null;function vC(t,e,n=!1){return $1(t,e,n)}function _C(t,e){let n=t.contentQueries;if(n!==null){let r=J(null);try{for(let i=0;i<n.length;i+=2){let o=n[i],s=n[i+1];if(s!==-1){let a=t.data[s];Yd(o),a.contentQueries(2,e[s],s)}}}finally{J(r)}}}function Py(t,e,n){Yd(0);let r=J(null);try{e(t,n)}finally{J(r)}}function EC(t,e,n){if(Wm(e)){let r=J(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=t.data[s];if(a.contentQueries){let u=n[s];a.contentQueries(1,u,s)}}}finally{J(r)}}}var Ur=(function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t})(Ur||{});var ih;function H1(){if(ih===void 0&&(ih=null,Lc.trustedTypes))try{ih=Lc.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return ih}function TT(t){return H1()?.createScriptURL(t)||t}var gh=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Ld})`}};function oa(t){return t instanceof gh?t.changingThisBreaksApplicationSecurity:t}function dv(t,e){let n=IC(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${Ld})`)}return n===e}function IC(t){return t instanceof gh&&t.getTypeName()||null}var q1=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function wC(t){return t=String(t),t.match(q1)?t:"unsafe:"+t}var Nh=(function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t})(Nh||{});function nn(t){let e=DC();return e?e.sanitize(Nh.URL,t)||"":dv(t,"URL")?oa(t):wC(jc(t))}function bC(t){let e=DC();if(e)return TT(e.sanitize(Nh.RESOURCE_URL,t)||"");if(dv(t,"ResourceURL"))return TT(oa(t));throw new H(904,!1)}function z1(t,e){return e==="src"&&(t==="embed"||t==="frame"||t==="iframe"||t==="media"||t==="script")||e==="href"&&(t==="base"||t==="link")?bC:nn}function hv(t,e,n){return z1(e,n)(t)}function DC(){let t=de();return t&&t[Jn].sanitizer}function TC(t){return t instanceof Function?t():t}function G1(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||t.charCodeAt(i+o)<=32)return i}n=i+1}}var CC="ng-template";function W1(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&G1(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(fv(t))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===n)return!0}return!1}function fv(t){return t.type===4&&t.value!==CC}function K1(t,e,n){let r=t.type===4&&!n?CC:t.value;return e===r}function Q1(t,e,n){let r=4,i=t.attrs,o=i!==null?J1(i):0,s=!1;for(let a=0;a<e.length;a++){let u=e[a];if(typeof u=="number"){if(!s&&!Pn(r)&&!Pn(u))return!1;if(s&&Pn(u))continue;s=!1,r=u|r&1;continue}if(!s)if(r&4){if(r=2|r&1,u!==""&&!K1(t,u,n)||u===""&&e.length===1){if(Pn(r))return!1;s=!0}}else if(r&8){if(i===null||!W1(t,i,u,n)){if(Pn(r))return!1;s=!0}}else{let l=e[++a],h=Y1(u,i,fv(t),n);if(h===-1){if(Pn(r))return!1;s=!0;continue}if(l!==""){let p;if(h>o?p="":p=i[h+1].toLowerCase(),r&2&&l!==p){if(Pn(r))return!1;s=!0}}}}return Pn(r)||s}function Pn(t){return(t&1)===0}function Y1(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let o=!1;for(;i<e.length;){let s=e[i];if(s===t)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return X1(e,t)}function Z1(t,e,n=!1){for(let r=0;r<e.length;r++)if(Q1(t,e[r],n))return!0;return!1}function J1(t){for(let e=0;e<t.length;e++){let n=t[e];if(JT(n))return e}return t.length}function X1(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function CT(t,e){return t?":not("+e.trim()+")":e}function eF(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if(typeof s=="string")if(r&2){let a=t[++n];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!Pn(s)&&(e+=CT(o,i),i=""),r=s,o=o||!Pn(r);n++}return i!==""&&(e+=CT(o,i)),e}function tF(t){return t.map(eF).join(",")}function nF(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let o=t[r];if(typeof o=="string")i===2?o!==""&&e.push(o,t[++r]):i===8&&n.push(o);else{if(!Pn(i))break;i=o}r++}return n.length&&e.push(1,...n),e}var dn={};function rF(t,e){return t.createText(e)}function iF(t,e,n){t.setValue(e,n)}function SC(t,e,n){return t.createElement(e,n)}function mh(t,e,n,r,i){t.insertBefore(e,n,r,i)}function AC(t,e,n){t.appendChild(e,n)}function ST(t,e,n,r,i){r!==null?mh(t,e,n,r,i):AC(t,e,n)}function RC(t,e,n,r){t.removeChild(null,e,n,r)}function oF(t,e,n){t.setAttribute(e,"style",n)}function sF(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function xC(t,e,n){let{mergedAttrs:r,classes:i,styles:o}=n;r!==null&&E1(t,e,r),i!==null&&sF(t,e,i),o!==null&&oF(t,e,o)}function pv(t,e,n,r,i,o,s,a,u,l,h){let p=Rt+r,g=p+i,y=aF(p,g),w=typeof l=="function"?l():l;return y[Q]={type:t,blueprint:y,template:n,queries:null,viewQuery:a,declTNode:e,data:y.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:g,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:u,consts:w,incompleteFirstPass:!1,ssrId:h}}function aF(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:dn);return n}function cF(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=pv(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function gv(t,e,n,r,i,o,s,a,u,l,h){let p=e.blueprint.slice();return p[xn]=i,p[te]=r|4|128|8|64|1024,(l!==null||t&&t[te]&2048)&&(p[te]|=2048),Ym(p),p[dt]=p[Eo]=t,p[Ke]=n,p[Jn]=s||t&&t[Jn],p[Fe]=a||t&&t[Fe],p[Hs]=u||t&&t[Hs]||null,p[vn]=o,p[Hc]=O1(),p[Bs]=h,p[zm]=l,p[un]=e.type==2?t[un]:p,p}function uF(t,e,n){let r=Mn(e,t),i=cF(n),o=t[Jn].rendererFactory,s=mv(t,gv(t,i,null,NC(n),r,e,null,o.createRenderer(r,n),null,null,null));return t[e.index]=s}function NC(t){let e=16;return t.signals?e=4096:t.onPush&&(e=64),e}function MC(t,e,n,r){if(n===0)return-1;let i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function mv(t,e){return t[qs]?t[qm][yn]=e:t[qs]=e,t[qm]=e,e}function T(t=1){kC(mt(),de(),jr()+t,!1)}function kC(t,e,n,r){if(!r)if((e[te]&3)===3){let o=t.preOrderCheckHooks;o!==null&&sh(e,o,n)}else{let o=t.preOrderHooks;o!==null&&ah(e,o,0,n)}Ei(n)}var Mh=(function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t})(Mh||{});function Oy(t,e,n,r){let i=J(null);try{let[o,s,a]=t.inputs[n],u=null;(s&Mh.SignalBased)!==0&&(u=e[o][Vt]),u!==null&&u.transformFn!==void 0?r=u.transformFn(r):a!==null&&(r=a.call(e,r)),t.setInput!==null?t.setInput(e,u,r,n,o):WT(e,u,o,r)}finally{J(i)}}var Fn=(function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t})(Fn||{}),lF;function yv(t,e){return lF(t,e)}var kh=new Set;function Ys(t,e,n,r,i,o){if(r!=null){let s,a=!1;Nn(r)?s=r:er(r)&&(a=!0,r=r[xn]);let u=_n(r);t===0&&n!==null?i==null?AC(e,n,u):mh(e,n,u,i||null,!0):t===1&&n!==null?mh(e,n,u,i||null,!0):t===2?AT(o,l=>{RC(e,u,a,l)}):t===3&&AT(o,()=>{e.destroyNode(u)}),s!=null&&bF(e,t,s,n,i)}}function dF(t,e){PC(t,e),e[xn]=null,e[vn]=null}function hF(t,e,n,r,i,o){r[xn]=i,r[vn]=e,Oh(t,r,n,1,i,o)}function PC(t,e){e[Jn].changeDetectionScheduler?.notify(9),Oh(t,e,e[Fe],2,null,null)}function fF(t){let e=t[qs];if(!e)return Ey(t[Q],t);for(;e;){let n=null;if(er(e))n=e[qs];else{let r=e[rt];r&&(n=r)}if(!n){for(;e&&!e[yn]&&e!==t;)er(e)&&Ey(e[Q],e),e=e[dt];e===null&&(e=t),er(e)&&Ey(e[Q],e),n=e&&e[yn]}e=n}}function vv(t,e){let n=t[wo],r=n.indexOf(e);n.splice(r,1)}function Ph(t,e){if(bo(e))return;let n=e[Fe];n.destroyNode&&Oh(t,e,n,3,null,null),fF(e)}function Ey(t,e){if(bo(e))return;let n=J(null);try{e[te]&=-129,e[te]|=256,e[ln]&&so(e[ln]),mF(t,e),gF(t,e),e[Q].type===1&&e[Fe].destroy();let r=e[yi];if(r!==null&&Nn(e[dt])){r!==e[dt]&&vv(r,e);let i=e[Xn];i!==null&&i.detachView(t)}My(e)}finally{J(n)}}function AT(t,e){if(t&&t[At]&&t[At].leave)if(t[At].skipLeaveAnimations)t[At].skipLeaveAnimations=!1;else{let n=t[At].leave,r=[];for(let i=0;i<n.length;i++){let o=n[i];r.push(o())}t[At].running=Promise.allSettled(r),t[At].leave=void 0}pF(t,e)}function pF(t,e){if(t&&t[At]&&t[At].running){t[At].running.then(()=>{t[At]&&t[At].running&&(t[At].running=void 0),kh.delete(t),e(!0)});return}e(!1)}function gF(t,e){let n=t.cleanup,r=e[$s];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let a=n[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[n[s+1]];n[s].call(a)}r!==null&&(e[$s]=null);let i=e[Pr];if(i!==null){e[Pr]=null;for(let s=0;s<i.length;s++){let a=i[s];a()}}let o=e[Vr];if(o!==null){e[Vr]=null;for(let s of o)s.destroy()}}function mF(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof No)){let o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],u=o[s+1];Re(4,a,u);try{u.call(a)}finally{Re(5,a,u)}}else{Re(4,i,o);try{o.call(i)}finally{Re(5,i,o)}}}}}function yF(t,e,n){return vF(t,e.parent,n)}function vF(t,e,n){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return n[xn];if(_i(r)){let{encapsulation:i}=t.data[r.directiveStart+r.componentOffset];if(i===Ur.None||i===Ur.Emulated)return null}return Mn(r,n)}function _F(t,e,n){return IF(t,e,n)}function EF(t,e,n){return t.type&40?Mn(t,n):null}var IF=EF,RT;function _v(t,e,n,r){let i=yF(t,r,e),o=e[Fe],s=r.parent||e[vn],a=_F(s,r,e);if(i!=null)if(Array.isArray(n))for(let u=0;u<n.length;u++)ST(o,i,n[u],a,!1);else ST(o,i,n,a,!1);RT!==void 0&&RT(o,r,e,n,i)}function Yc(t,e){if(e!==null){let n=e.type;if(n&3)return Mn(e,t);if(n&4)return Fy(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return Yc(t,r);{let i=t[e.index];return Nn(i)?Fy(-1,i):_n(i)}}else{if(n&128)return Yc(t,e.next);if(n&32)return yv(e,t)()||_n(t[e.index]);{let r=OC(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=pi(t[un]);return Yc(i,r)}else return Yc(t,e.next)}}}return null}function OC(t,e){if(e!==null){let r=t[un][vn],i=e.projection;return r.projection[i]}return null}function Fy(t,e){let n=rt+t+1;if(n<e.length){let r=e[n],i=r[Q].firstChild;if(i!==null)return Yc(r,i)}return e[vi]}function Ev(t,e,n,r,i,o,s){for(;n!=null;){if(n.type===128){n=n.next;continue}let a=r[n.index],u=n.type;if(s&&e===0&&(a&&Xs(_n(a),r),n.flags|=2),!lv(n))if(u&8)Ev(t,e,n.child,r,i,o,!1),Ys(e,t,i,a,o,r);else if(u&32){let l=yv(n,r),h;for(;h=l();)Ys(e,t,i,h,o,r);Ys(e,t,i,a,o,r)}else u&16?wF(t,e,r,n,i,o):Ys(e,t,i,a,o,r);n=s?n.projectionNext:n.next}}function Oh(t,e,n,r,i,o){Ev(n,r,t.firstChild,e,i,o,!1)}function wF(t,e,n,r,i,o){let s=n[un],u=s[vn].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++){let h=u[l];Ys(e,t,i,h,o,n)}else{let l=u,h=s[dt];cC(r)&&(l.flags|=128),Ev(t,e,l,h,i,o,!0)}}function bF(t,e,n,r,i){let o=n[vi],s=_n(n);o!==s&&Ys(e,t,r,o,i);for(let a=rt;a<n.length;a++){let u=n[a];Oh(u[Q],u,t,e,r,o)}}function DF(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let o=r.indexOf("-")===-1?void 0:Fn.DashCase;i==null?t.removeStyle(n,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Fn.Important),t.setStyle(n,r,i,o))}}function FC(t,e,n,r,i){let o=jr(),s=r&2;try{Ei(-1),s&&e.length>Rt&&kC(t,e,Rt,!1),Re(s?2:0,i,n),n(r,i)}finally{Ei(o),Re(s?3:1,i,n)}}function LC(t,e,n){NF(t,e,n),(n.flags&64)===64&&MF(t,e,n)}function Iv(t,e,n=Mn){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?n(e,t):t[s];t[i++]=a}}}function TF(t,e,n,r){let o=r.get(yC,mC)||n===Ur.ShadowDom,s=t.selectRootElement(e,o);return CF(s),s}function CF(t){SF(t)}var SF=()=>null;function AF(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function VC(t,e,n,r,i,o){let s=e[Q];if(wv(t,s,e,n,r)){_i(t)&&xF(e,t.index);return}t.type&3&&(n=AF(n)),RF(t,e,n,r,i,o)}function RF(t,e,n,r,i,o){if(t.type&3){let s=Mn(t,e);r=o!=null?o(r,t.value||"",n):r,i.setProperty(s,n,r)}else t.type&12}function xF(t,e){let n=En(e,t);n[te]&16||(n[te]|=64)}function NF(t,e,n){let r=n.directiveStart,i=n.directiveEnd;_i(n)&&uF(e,n,t.data[r+n.componentOffset]),t.firstCreatePass||fh(n,e);let o=n.initialInputs;for(let s=r;s<i;s++){let a=t.data[s],u=Jc(e,t,s,n);if(Xs(u,e),o!==null&&LF(e,s-r,u,a,n,o),tr(a)){let l=En(n.index,e);l[Ke]=Jc(e,t,s,n)}}}function MF(t,e,n){let r=n.directiveStart,i=n.directiveEnd,o=n.index,s=uT();try{Ei(o);for(let a=r;a<i;a++){let u=t.data[a],l=e[a];Qd(a),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&kF(u,l)}}finally{Ei(-1),Qd(s)}}function kF(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function PF(t,e){let n=t.directiveRegistry,r=null;if(n)for(let i=0;i<n.length;i++){let o=n[i];Z1(e,o.selectors,!1)&&(r??=[],tr(o)?r.unshift(o):r.push(o))}return r}function OF(t,e,n,r,i,o){let s=Mn(t,e);FF(e[Fe],s,o,t.value,n,r,i)}function FF(t,e,n,r,i,o,s){if(o==null)t.removeAttribute(e,i,n);else{let a=s==null?jc(o):s(o,r||"",i);t.setAttribute(e,i,a,n)}}function LF(t,e,n,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;a+=2){let u=s[a],l=s[a+1];Oy(r,n,u,l)}}function jC(t,e,n,r,i){let o=Rt+n,s=e[Q],a=i(s,e,t,r,n);e[o]=a,Gs(t,!0);let u=t.type===2;return u?(xC(e[Fe],a,t),(eT()===0||Gd(t))&&Xs(a,e),tT()):Xs(a,e),eh()&&(!u||!lv(t))&&_v(s,e,a,t),t}function UC(t){let e=t;return oy()?oT():(e=e.parent,Gs(e,!1)),e}function VF(t,e){let n=t[Hs];if(!n)return;let r;try{r=n.get(Wt,null)}catch{r=null}r?.(e)}function wv(t,e,n,r,i){let o=t.inputs?.[r],s=t.hostDirectiveInputs?.[r],a=!1;if(s)for(let u=0;u<s.length;u+=2){let l=s[u],h=s[u+1],p=e.data[l];Oy(p,n[l],h,i),a=!0}if(o)for(let u of o){let l=n[u],h=e.data[u];Oy(h,l,r,i),a=!0}return a}function jF(t,e){let n=En(e,t),r=n[Q];UF(r,n);let i=n[xn];i!==null&&n[Bs]===null&&(n[Bs]=vC(i,n[Hs])),Re(18),bv(r,n,n[Ke]),Re(19,n[Ke])}function UF(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function bv(t,e,n){Zd(e);try{let r=t.viewQuery;r!==null&&Py(1,r,n);let i=t.template;i!==null&&FC(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[Xn]?.finishViewCreation(t),t.staticContentQueries&&_C(t,e),t.staticViewQueries&&Py(2,t.viewQuery,n);let o=t.components;o!==null&&BF(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[te]&=-5,Jd()}}function BF(t,e){for(let n=0;n<e.length;n++)jF(t,e[n])}function Fh(t,e,n,r){let i=J(null);try{let o=e.tView,a=t[te]&4096?4096:16,u=gv(t,o,n,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=t[e.index];u[yi]=l;let h=t[Xn];return h!==null&&(u[Xn]=h.createEmbeddedView(o)),bv(o,u,n),u}finally{J(i)}}function Xc(t,e){return!e||e.firstChild===null||cC(t)}function eu(t,e,n,r,i=!1){for(;n!==null;){if(n.type===128){n=i?n.projectionNext:n.next;continue}let o=e[n.index];o!==null&&r.push(_n(o)),Nn(o)&&BC(o,r);let s=n.type;if(s&8)eu(t,e,n.child,r);else if(s&32){let a=yv(n,e),u;for(;u=a();)r.push(u)}else if(s&16){let a=OC(e,n);if(Array.isArray(a))r.push(...a);else{let u=pi(e[un]);eu(u[Q],u,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function BC(t,e){for(let n=rt;n<t.length;n++){let r=t[n],i=r[Q].firstChild;i!==null&&eu(r[Q],r,i,e)}t[vi]!==t[xn]&&e.push(t[vi])}function $C(t){if(t[zd]!==null){for(let e of t[zd])e.impl.addSequence(e);t[zd].length=0}}var HC=[];function $F(t){return t[ln]??HF(t)}function HF(t){let e=HC.pop()??Object.create(zF);return e.lView=t,e}function qF(t){t.lView[ln]!==t&&(t.lView=null,HC.push(t))}var zF=Z(V({},io),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{Do(t.lView)},consumerOnSignalRead(){this.lView[ln]=this}});function GF(t){let e=t[ln]??Object.create(WF);return e.lView=t,e}var WF=Z(V({},io),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{let e=pi(t.lView);for(;e&&!qC(e[Q]);)e=pi(e);e&&Zm(e)},consumerOnSignalRead(){this.lView[ln]=this}});function qC(t){return t.type!==2}function zC(t){if(t[Vr]===null)return;let e=!0;for(;e;){let n=!1;for(let r of t[Vr])r.dirty&&(n=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=n&&!!(t[te]&8192)}}var KF=100;function GC(t,e=0){let r=t[Jn].rendererFactory,i=!1;i||r.begin?.();try{QF(t,e)}finally{i||r.end?.()}}function QF(t,e){let n=sy();try{Ws(!0),Ly(t,e);let r=0;for(;Gc(t);){if(r===KF)throw new H(103,!1);r++,Ly(t,1)}}finally{Ws(n)}}function YF(t,e,n,r){if(bo(e))return;let i=e[te],o=!1,s=!1;Zd(e);let a=!0,u=null,l=null;o||(qC(t)?(l=$F(e),u=oo(l)):rd()===null?(a=!1,l=GF(e),u=oo(l)):e[ln]&&(so(e[ln]),e[ln]=null));try{Ym(e),sT(t.bindingStartIndex),n!==null&&FC(t,e,n,2,r),ZF(e);let h=(i&3)===3;if(!o)if(h){let y=t.preOrderCheckHooks;y!==null&&sh(e,y,null)}else{let y=t.preOrderHooks;y!==null&&ah(e,y,0,null),vy(e,0)}if(s||JF(e),zC(e),WC(e,0),t.contentQueries!==null&&_C(t,e),!o)if(h){let y=t.contentCheckHooks;y!==null&&sh(e,y)}else{let y=t.contentHooks;y!==null&&ah(e,y,1),vy(e,1)}eL(t,e);let p=t.components;p!==null&&QC(e,p,0);let g=t.viewQuery;if(g!==null&&Py(2,g,r),!o)if(h){let y=t.viewCheckHooks;y!==null&&sh(e,y)}else{let y=t.viewHooks;y!==null&&ah(e,y,2),vy(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[qd]){for(let y of e[qd])y();e[qd]=null}o||($C(e),e[te]&=-73)}catch(h){throw o||Do(e),h}finally{l!==null&&(Is(l,u),a&&qF(l)),Jd()}}function ZF(t){let e=t[At];if(e?.enter){for(let n of e.enter)n();e.enter=void 0}}function WC(t,e){for(let n=lC(t);n!==null;n=dC(n))for(let r=rt;r<n.length;r++){let i=n[r];KC(i,e)}}function JF(t){for(let e=lC(t);e!==null;e=dC(e)){if(!(e[te]&2))continue;let n=e[wo];for(let r=0;r<n.length;r++){let i=n[r];Zm(i)}}}function XF(t,e,n){Re(18);let r=En(e,t);KC(r,n),Re(19,r[Ke])}function KC(t,e){Wd(t)&&Ly(t,e)}function Ly(t,e){let r=t[Q],i=t[te],o=t[ln],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&ws(o)),s||=!1,o&&(o.dirty=!1),t[te]&=-9217,s)YF(r,t,r.template,t[Ke]);else if(i&8192){let a=J(null);try{zC(t),WC(t,1);let u=r.components;u!==null&&QC(t,u,1),$C(t)}finally{J(a)}}}function QC(t,e,n){for(let r=0;r<e.length;r++)XF(t,e[r],n)}function eL(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)Ei(~i);else{let o=i,s=n[++r],a=n[++r];cT(s,o);let u=e[o];Re(24,u),a(2,u),Re(25,u)}}}finally{Ei(-1)}}function Dv(t,e){let n=sy()?64:1088;for(t[Jn].changeDetectionScheduler?.notify(e);t;){t[te]|=n;let r=pi(t);if(zs(t)&&!r)return t;t=r}return null}function YC(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function ZC(t,e){let n=rt+e;if(n<t.length)return t[n]}function Lh(t,e,n,r=!0){let i=e[Q];if(tL(i,e,t,n),r){let s=Fy(n,t),a=e[Fe],u=a.parentNode(t[vi]);u!==null&&hF(i,t[vn],a,e,u,s)}let o=e[Bs];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function JC(t,e){let n=tu(t,e);return n!==void 0&&Ph(n[Q],n),n}function tu(t,e){if(t.length<=rt)return;let n=rt+e,r=t[n];if(r){let i=r[yi];i!==null&&i!==t&&vv(i,r),e>0&&(t[n-1][yn]=r[yn]);let o=Uc(t,rt+e);dF(r[Q],r);let s=o[Xn];s!==null&&s.detachView(o[Q]),r[dt]=null,r[yn]=null,r[te]&=-129}return r}function tL(t,e,n,r){let i=rt+r,o=n.length;r>0&&(n[i-1][yn]=e),r<o-rt?(e[yn]=n[i],Fm(n,rt+r,e)):(n.push(e),e[yn]=null),e[dt]=n;let s=e[yi];s!==null&&n!==s&&XC(s,e);let a=e[Xn];a!==null&&a.insertView(t),Kd(e),e[te]|=128}function XC(t,e){let n=t[wo],r=e[dt];if(er(r))t[te]|=2;else{let i=r[dt][un];e[un]!==i&&(t[te]|=2)}n===null?t[wo]=[e]:n.push(e)}var Ii=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,n=e[Q];return eu(n,e,n.firstChild,[])}constructor(e,n){this._lView=e,this._cdRefInjectingView=n}get context(){return this._lView[Ke]}set context(e){this._lView[Ke]=e}get destroyed(){return bo(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[dt];if(Nn(e)){let n=e[qc],r=n?n.indexOf(this):-1;r>-1&&(tu(e,r),Uc(n,r))}this._attachedToViewContainer=!1}Ph(this._lView[Q],this._lView)}onDestroy(e){Jm(this._lView,e)}markForCheck(){Dv(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[te]&=-129}reattach(){Kd(this._lView),this._lView[te]|=128}detectChanges(){this._lView[te]|=1024,GC(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new H(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=zs(this._lView),n=this._lView[yi];n!==null&&!e&&vv(n,this._lView),PC(this._lView[Q],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new H(902,!1);this._appRef=e;let n=zs(this._lView),r=this._lView[yi];r!==null&&!n&&XC(r,this._lView),Kd(this._lView)}};var ea=(()=>{class t{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=nL;constructor(n,r,i){this._declarationLView=n,this._declarationTContainer=r,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(n,r){return this.createEmbeddedViewImpl(n,r)}createEmbeddedViewImpl(n,r,i){let o=Fh(this._declarationLView,this._declarationTContainer,n,{embeddedViewInjector:r,dehydratedView:i});return new Ii(o)}}return t})();function nL(){return Tv(yt(),de())}function Tv(t,e){return t.type&4?new ea(e,t,ia(t,e)):null}function Vh(t,e,n,r,i){let o=t.data[e];if(o===null)o=rL(t,e,n,r,i),aT()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=r,o.attrs=i;let s=iT();o.injectorIndex=s===null?-1:s.injectorIndex}return Gs(o,!0),o}function rL(t,e,n,r,i){let o=iy(),s=oy(),a=s?o:o&&o.parent,u=t.data[e]=oL(t,a,n,e,r,i);return iL(t,u,o,s),u}function iL(t,e,n,r){t.firstChild===null&&(t.firstChild=e),n!==null&&(r?n.child==null&&e.parent!==null&&(n.child=e):n.next===null&&(n.next=e,e.prev=n))}function oL(t,e,n,r,i,o){let s=e?e.injectorIndex:-1,a=0;return rT()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var KY=new RegExp(`^(\\d+)*(${j1}|${V1})*(.*)`);function sL(t){let e=t[Gm]??[],r=t[dt][Fe],i=[];for(let o of e)o.data[gC]!==void 0?i.push(o):aL(o,r);t[Gm]=i}function aL(t,e){let n=0,r=t.firstChild;if(r){let i=t.data[pC];for(;n<i;){let o=r.nextSibling;RC(e,r,!1),r=o,n++}}}var cL=()=>null,uL=()=>null;function Vy(t,e){return cL(t,e)}function eS(t,e,n){return uL(t,e,n)}var tS=class{},jh=class{},jy=class{resolveComponentFactory(e){throw new H(917,!1)}},su=class{static NULL=new jy},Mo=class{},sr=(()=>{class t{destroyNode=null;static __NG_ELEMENT_ID__=()=>lL()}return t})();function lL(){let t=de(),e=yt(),n=En(e.index,t);return(er(n)?n:t)[Fe]}var nS=(()=>{class t{static \u0275prov=z({token:t,providedIn:"root",factory:()=>null})}return t})();var uh={},Uy=class{injector;parentInjector;constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){let i=this.injector.get(e,uh,r);return i!==uh||n===uh?i:this.parentInjector.get(e,n,r)}};function yh(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=Vd(i,a);else if(o==2){let u=a,l=e[++s];r=Vd(r,u+": "+l+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}function ye(t,e=0){let n=de();if(n===null)return se(t,e);let r=yt();return oC(r,n,St(t),e)}function Cv(){let t="invalid";throw new Error(t)}function dL(t,e,n,r,i){let o=r===null?null:{"":-1},s=i(t,n);if(s!==null){let a=s,u=null,l=null;for(let h of s)if(h.resolveHostDirectives!==null){[a,u,l]=h.resolveHostDirectives(s);break}pL(t,e,n,a,o,u,l)}o!==null&&r!==null&&hL(n,r,o)}function hL(t,e,n){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let o=n[e[i+1]];if(o==null)throw new H(-301,!1);r.push(e[i],o)}}function fL(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function pL(t,e,n,r,i,o,s){let a=r.length,u=!1;for(let g=0;g<a;g++){let y=r[g];!u&&tr(y)&&(u=!0,fL(t,n,g)),xy(fh(n,e),t,y.type)}EL(n,t.data.length,a);for(let g=0;g<a;g++){let y=r[g];y.providersResolver&&y.providersResolver(y)}let l=!1,h=!1,p=MC(t,e,a,null);a>0&&(n.directiveToIndex=new Map);for(let g=0;g<a;g++){let y=r[g];if(n.mergedAttrs=Js(n.mergedAttrs,y.hostAttrs),mL(t,n,e,p,y),_L(p,y,i),s!==null&&s.has(y)){let[k,M]=s.get(y);n.directiveToIndex.set(y.type,[p,k+n.directiveStart,M+n.directiveStart])}else(o===null||!o.has(y))&&n.directiveToIndex.set(y.type,p);y.contentQueries!==null&&(n.flags|=4),(y.hostBindings!==null||y.hostAttrs!==null||y.hostVars!==0)&&(n.flags|=64);let w=y.type.prototype;!l&&(w.ngOnChanges||w.ngOnInit||w.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),l=!0),!h&&(w.ngOnChanges||w.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),h=!0),p++}gL(t,n,o)}function gL(t,e,n){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=t.data[r];if(n===null||!n.has(i))xT(0,e,i,r),xT(1,e,i,r),MT(e,r,!1);else{let o=n.get(i);NT(0,e,o,r),NT(1,e,o,r),MT(e,r,!0)}}}function xT(t,e,n,r){let i=t===0?n.inputs:n.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;t===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(r),rS(e,o)}}function NT(t,e,n,r){let i=t===0?n.inputs:n.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],a;t===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[s]??=[],a[s].push(r,o),rS(e,s)}}function rS(t,e){e==="class"?t.flags|=8:e==="style"&&(t.flags|=16)}function MT(t,e,n){let{attrs:r,inputs:i,hostDirectiveInputs:o}=t;if(r===null||!n&&i===null||n&&o===null||fv(t)){t.initialInputs??=[],t.initialInputs.push(null);return}let s=null,a=0;for(;a<r.length;){let u=r[a];if(u===0){a+=4;continue}else if(u===5){a+=2;continue}else if(typeof u=="number")break;if(!n&&i.hasOwnProperty(u)){let l=i[u];for(let h of l)if(h===e){s??=[],s.push(u,r[a+1]);break}}else if(n&&o.hasOwnProperty(u)){let l=o[u];for(let h=0;h<l.length;h+=2)if(l[h]===e){s??=[],s.push(l[h+1],r[a+1]);break}}a+=2}t.initialInputs??=[],t.initialInputs.push(s)}function mL(t,e,n,r,i){t.data[r]=i;let o=i.factory||(i.factory=go(i.type,!0)),s=new No(o,tr(i),ye,null);t.blueprint[r]=s,n[r]=s,yL(t,e,r,MC(t,n,i.hostVars,dn),i)}function yL(t,e,n,r,i){let o=i.hostBindings;if(o){let s=t.hostBindingOpCodes;s===null&&(s=t.hostBindingOpCodes=[]);let a=~e.index;vL(s)!=a&&s.push(a),s.push(n,r,o)}}function vL(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function _L(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;tr(e)&&(n[""]=t)}}function EL(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function iS(t,e,n,r,i,o,s,a){let u=e[Q],l=u.consts,h=nr(l,s),p=Vh(u,t,n,r,h);return o&&dL(u,e,p,nr(l,a),i),p.mergedAttrs=Js(p.mergedAttrs,p.attrs),p.attrs!==null&&yh(p,p.attrs,!1),p.mergedAttrs!==null&&yh(p,p.mergedAttrs,!0),u.queries!==null&&u.queries.elementStart(u,p),p}function oS(t,e){m1(t,e),Wm(e)&&t.queries.elementEnd(e)}function IL(t,e,n,r,i,o){let s=e.consts,a=nr(s,i),u=Vh(e,t,n,r,a);if(u.mergedAttrs=Js(u.mergedAttrs,u.attrs),o!=null){let l=nr(s,o);u.localNames=[];for(let h=0;h<l.length;h+=2)u.localNames.push(l[h],-1)}return u.attrs!==null&&yh(u,u.attrs,!1),u.mergedAttrs!==null&&yh(u,u.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,u),u}function Sv(t){return t!==null&&(typeof t=="function"||typeof t=="object")}function sS(t,e,n){return t[e]=n}function wL(t,e){return t[e]}function Br(t,e,n){if(n===dn)return!1;let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function Iy(t,e,n){return function r(i){let o=_i(t)?En(t.index,e):e;Dv(o,5);let s=e[Ke],a=kT(e,s,n,i),u=r.__ngNextListenerFn__;for(;u;)a=kT(e,s,u,i)&&a,u=u.__ngNextListenerFn__;return a}}function kT(t,e,n,r){let i=J(null);try{return Re(6,e,n),n(r)!==!1}catch(o){return VF(t,o),!1}finally{Re(7,e,n),J(i)}}function bL(t,e,n,r,i,o,s,a){let u=Gd(t),l=!1,h=null;if(!r&&u&&(h=TL(e,n,o,t.index)),h!==null){let p=h.__ngLastListenerFn__||h;p.__ngNextListenerFn__=s,h.__ngLastListenerFn__=s,l=!0}else{let p=Mn(t,n),g=r?r(p):p;B1(n,g,o,a);let y=i.listen(g,o,a);if(!DL(o)){let w=r?k=>r(_n(k[t.index])):t.index;aS(w,e,n,o,a,y,!1)}}return l}function DL(t){return t.startsWith("animation")||t.startsWith("transition")}function TL(t,e,n,r){let i=t.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===n&&i[o+1]===r){let a=e[$s],u=i[o+2];return a&&a.length>u?a[u]:null}typeof s=="string"&&(o+=2)}return null}function aS(t,e,n,r,i,o,s){let a=e.firstCreatePass?ey(e):null,u=Xm(n),l=u.length;u.push(i,o),a&&a.push(r,t,l,(l+1)*(s?-1:1))}function PT(t,e,n,r,i,o){let s=e[n],a=e[Q],l=a.data[n].outputs[r],p=s[l].subscribe(o);aS(t.index,a,e,i,o,p,!0)}var By=Symbol("BINDING");var vh=class extends su{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=mi(e);return new ta(n,this.ngModule)}};function CL(t){return Object.keys(t).map(e=>{let[n,r,i]=t[e],o={propName:n,templateName:e,isSignal:(r&Mh.SignalBased)!==0};return i&&(o.transform=i),o})}function SL(t){return Object.keys(t).map(e=>({propName:t[e],templateName:e}))}function AL(t,e,n){let r=e instanceof nt?e:e?.injector;return r&&t.getStandaloneInjector!==null&&(r=t.getStandaloneInjector(r)||r),r?new Uy(n,r):n}function RL(t){let e=t.get(Mo,null);if(e===null)throw new H(407,!1);let n=t.get(nS,null),r=t.get(Rn,null);return{rendererFactory:e,sanitizer:n,changeDetectionScheduler:r,ngReflect:!1}}function xL(t,e){let n=cS(t);return SC(e,n,n==="svg"?Km:n==="math"?KD:null)}function cS(t){return(t.selectors[0][0]||"div").toLowerCase()}var ta=class extends jh{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=CL(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=SL(this.componentDef.outputs),this.cachedOutputs}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=tF(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!n}create(e,n,r,i,o,s){Re(22);let a=J(null);try{let u=this.componentDef,l=NL(r,u,s,o),h=AL(u,i||this.ngModule,e),p=RL(h),g=p.rendererFactory.createRenderer(null,u),y=r?TF(g,r,u.encapsulation,h):xL(u,g),w=s?.some(OT)||o?.some(j=>typeof j!="function"&&j.bindings.some(OT)),k=gv(null,l,null,512|NC(u),null,null,p,g,h,null,vC(y,h,!0));k[Rt]=y,Zd(k);let M=null;try{let j=iS(Rt,k,2,"#host",()=>l.directiveRegistry,!0,0);xC(g,y,j),Xs(y,k),LC(l,k,j),EC(l,j,k),oS(l,j),n!==void 0&&kL(j,this.ngContentSelectors,n),M=En(j.index,k),k[Ke]=M[Ke],bv(l,k,null)}catch(j){throw M!==null&&My(M),My(k),j}finally{Re(23),Jd()}return new _h(this.componentType,k,!!w)}finally{J(a)}}};function NL(t,e,n,r){let i=t?["ng-version","20.3.2"]:nF(e.selectors[0]),o=null,s=null,a=0;if(n)for(let h of n)a+=h[By].requiredVars,h.create&&(h.targetIdx=0,(o??=[]).push(h)),h.update&&(h.targetIdx=0,(s??=[]).push(h));if(r)for(let h=0;h<r.length;h++){let p=r[h];if(typeof p!="function")for(let g of p.bindings){a+=g[By].requiredVars;let y=h+1;g.create&&(g.targetIdx=y,(o??=[]).push(g)),g.update&&(g.targetIdx=y,(s??=[]).push(g))}}let u=[e];if(r)for(let h of r){let p=typeof h=="function"?h:h.type,g=Um(p);u.push(g)}return pv(0,null,ML(o,s),1,a,u,null,null,null,[i],null)}function ML(t,e){return!t&&!e?null:n=>{if(n&1&&t)for(let r of t)r.create();if(n&2&&e)for(let r of e)r.update()}}function OT(t){let e=t[By].kind;return e==="input"||e==="twoWay"}var _h=class extends tS{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,n,r){super(),this._rootLView=n,this._hasInputBindings=r,this._tNode=zc(n[Q],Rt),this.location=ia(this._tNode,n),this.instance=En(this._tNode.index,n)[Ke],this.hostView=this.changeDetectorRef=new Ii(n,void 0),this.componentType=e}setInput(e,n){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let i=this._rootLView,o=wv(r,i[Q],i,e,n);this.previousInputValues.set(e,n);let s=En(r.index,i);Dv(s,1)}get injector(){return new xo(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function kL(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let o=n[i];r.push(o!=null&&o.length?Array.from(o):null)}}var Oo=(()=>{class t{static __NG_ELEMENT_ID__=PL}return t})();function PL(){let t=yt();return lS(t,de())}var OL=Oo,uS=class extends OL{_lContainer;_hostTNode;_hostLView;constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return ia(this._hostTNode,this._hostLView)}get injector(){return new xo(this._hostTNode,this._hostLView)}get parentInjector(){let e=av(this._hostTNode,this._hostLView);if(XT(e)){let n=hh(e,this._hostLView),r=dh(e),i=n[Q].data[r+8];return new xo(i,n)}else return new xo(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=FT(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-rt}createEmbeddedView(e,n,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=Vy(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},o,s);return this.insertImpl(a,i,Xc(this._hostTNode,s)),a}createComponent(e,n,r,i,o,s,a){let u=e&&!d1(e),l;if(u)l=n;else{let M=n||{};l=M.index,r=M.injector,i=M.projectableNodes,o=M.environmentInjector||M.ngModuleRef,s=M.directives,a=M.bindings}let h=u?e:new ta(mi(e)),p=r||this.parentInjector;if(!o&&h.ngModule==null){let j=(u?p:this.parentInjector).get(nt,null);j&&(o=j)}let g=mi(h.componentType??{}),y=Vy(this._lContainer,g?.id??null),w=y?.firstChild??null,k=h.create(p,i,w,o,s,a);return this.insertImpl(k.hostView,l,Xc(this._hostTNode,y)),k}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(YD(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let u=i[dt],l=new uS(u,u[vn],u[dt]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(n),s=this._lContainer;return Lh(s,i,o,r),e.attachToViewContainerRef(),Fm(wy(s),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=FT(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=tu(this._lContainer,n);r&&(Uc(wy(this._lContainer),n),Ph(r[Q],r))}detach(e){let n=this._adjustIndex(e,-1),r=tu(this._lContainer,n);return r&&Uc(wy(this._lContainer),n)!=null?new Ii(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function FT(t){return t[qc]}function wy(t){return t[qc]||(t[qc]=[])}function lS(t,e){let n,r=e[t.index];return Nn(r)?n=r:(n=YC(r,e,null,t),e[t.index]=n,mv(e,n)),LL(n,e,t,r),new uS(n,t,e)}function FL(t,e){let n=t[Fe],r=n.createComment(""),i=Mn(e,t),o=n.parentNode(i);return mh(n,o,r,n.nextSibling(i),!1),r}var LL=UL,VL=()=>!1;function jL(t,e,n){return VL(t,e,n)}function UL(t,e,n,r){if(t[vi])return;let i;n.type&8?i=_n(r):i=FL(e,n),t[vi]=i}var $y=class t{queryList;matches=null;constructor(e){this.queryList=e}clone(){return new t(this.queryList)}setDirty(){this.queryList.setDirty()}},Hy=class t{queries;constructor(e=[]){this.queries=e}createEmbeddedView(e){let n=e.queries;if(n!==null){let r=e.contentQueries!==null?e.contentQueries[0]:n.length,i=[];for(let o=0;o<r;o++){let s=n.getByIndex(o),a=this.queries[s.indexInDeclarationView];i.push(a.clone())}return new t(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let n=0;n<this.queries.length;n++)Av(e,n).matches!==null&&this.queries[n].setDirty()}},qy=class{flags;read;predicate;constructor(e,n,r=null){this.flags=n,this.read=r,typeof e=="string"?this.predicate=KL(e):this.predicate=e}},zy=class t{queries;constructor(e=[]){this.queries=e}elementStart(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,n)}elementEnd(e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(e)}embeddedTView(e){let n=null;for(let r=0;r<this.length;r++){let i=n!==null?n.length:0,o=this.getByIndex(r).embeddedTView(e,i);o&&(o.indexInDeclarationView=r,n!==null?n.push(o):n=[o])}return n!==null?new t(n):null}template(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,n)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},Gy=class t{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(e,n=-1){this.metadata=e,this._declarationNodeIndex=n}elementStart(e,n){this.isApplyingToNode(n)&&this.matchTNode(e,n)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,n){this.elementStart(e,n)}embeddedTView(e,n){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,n),new t(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let n=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==n;)r=r.parent;return n===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,n){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let o=r[i];this.matchTNodeWithReadOption(e,n,BL(n,o)),this.matchTNodeWithReadOption(e,n,ch(n,e,o,!1,!1))}else r===ea?n.type&4&&this.matchTNodeWithReadOption(e,n,-1):this.matchTNodeWithReadOption(e,n,ch(n,e,r,!1,!1))}matchTNodeWithReadOption(e,n,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===tn||i===Oo||i===ea&&n.type&4)this.addMatch(n.index,-2);else{let o=ch(n,e,i,!1,!1);o!==null&&this.addMatch(n.index,o)}else this.addMatch(n.index,r)}}addMatch(e,n){this.matches===null?this.matches=[e,n]:this.matches.push(e,n)}};function BL(t,e){let n=t.localNames;if(n!==null){for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1]}return null}function $L(t,e){return t.type&11?ia(t,e):t.type&4?Tv(t,e):null}function HL(t,e,n,r){return n===-1?$L(e,t):n===-2?qL(t,e,r):Jc(t,t[Q],n,e)}function qL(t,e,n){if(n===tn)return ia(e,t);if(n===ea)return Tv(e,t);if(n===Oo)return lS(e,t)}function dS(t,e,n,r){let i=e[Xn].queries[r];if(i.matches===null){let o=t.data,s=n.matches,a=[];for(let u=0;s!==null&&u<s.length;u+=2){let l=s[u];if(l<0)a.push(null);else{let h=o[l];a.push(HL(e,h,s[u+1],n.metadata.read))}}i.matches=a}return i.matches}function Wy(t,e,n,r){let i=t.queries.getByIndex(n),o=i.matches;if(o!==null){let s=dS(t,e,i,n);for(let a=0;a<o.length;a+=2){let u=o[a];if(u>0)r.push(s[a/2]);else{let l=o[a+1],h=e[-u];for(let p=rt;p<h.length;p++){let g=h[p];g[yi]===g[dt]&&Wy(g[Q],g,l,r)}if(h[wo]!==null){let p=h[wo];for(let g=0;g<p.length;g++){let y=p[g];Wy(y[Q],y,l,r)}}}}}return r}function zL(t,e){return t[Xn].queries[e].queryList}function GL(t,e,n){let r=new ph((n&4)===4);return XD(t,e,r,r.destroy),(e[Xn]??=new Hy).queries.push(new $y(r))-1}function WL(t,e,n,r){let i=mt();if(i.firstCreatePass){let o=yt();QL(i,new qy(e,n,r),o.index),YL(i,t),(n&2)===2&&(i.staticContentQueries=!0)}return GL(i,de(),n)}function KL(t){return t.split(",").map(e=>e.trim())}function QL(t,e,n){t.queries===null&&(t.queries=new zy),t.queries.track(new Gy(e,n))}function YL(t,e){let n=t.contentQueries||(t.contentQueries=[]),r=n.length?n[n.length-1]:-1;e!==r&&n.push(t.queries.length-1,e)}function Av(t,e){return t.queries.getByIndex(e)}function ZL(t,e){let n=t[Q],r=Av(n,e);return r.crossesNgTemplate?Wy(n,t,e,[]):dS(n,t,r,e)}var LT=new Set;function $r(t){LT.has(t)||(LT.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}var ko=class{},Uh=class{};var Eh=class extends ko{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new vh(this);constructor(e,n,r,i=!0){super(),this.ngModuleType=e,this._parent=n;let o=jm(e);this._bootstrapComponents=TC(o.bootstrap),this._r3Injector=hy(e,n,[{provide:ko,useValue:this},{provide:su,useValue:this.componentFactoryResolver},...r],Or(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Ih=class extends Uh{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new Eh(this.moduleType,e,[])}};var nu=class extends ko{injector;componentFactoryResolver=new vh(this);instance=null;constructor(e){super();let n=new yo([...e.providers,{provide:ko,useValue:this},{provide:su,useValue:this.componentFactoryResolver}],e.parent||$c(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function au(t,e,n=null){return new nu({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var JL=(()=>{class t{_injector;cachedInjectors=new Map;constructor(n){this._injector=n}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){let r=Bm(!1,n.type),i=r.length>0?au([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,i)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=z({token:t,providedIn:"environment",factory:()=>new t(se(nt))})}return t})();function Ye(t){return ra(()=>{let e=hS(t),n=Z(V({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===cv.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(JL).getOrCreateStandaloneInjector(n):null,getExternalStyles:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||Ur.Emulated,styles:t.styles||zt,_:null,schemas:t.schemas||null,tView:null,id:""});e.standalone&&$r("NgStandalone"),fS(n);let r=t.dependencies;return n.directiveDefs=VT(r,XL),n.pipeDefs=VT(r,UD),n.id=nV(n),n})}function XL(t){return mi(t)||Um(t)}function Di(t){return ra(()=>({type:t.type,bootstrap:t.bootstrap||zt,declarations:t.declarations||zt,imports:t.imports||zt,exports:t.exports||zt,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function eV(t,e){if(t==null)return gi;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],o,s,a,u;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o,u=i[3]||null):(o=i,s=i,a=Mh.None,u=null),n[o]=[r,a,u],e[o]=s}return n}function tV(t){if(t==null)return gi;let e={};for(let n in t)t.hasOwnProperty(n)&&(e[t[n]]=n);return e}function ot(t){return ra(()=>{let e=hS(t);return fS(e),e})}function hS(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputConfig:t.inputs||gi,exportAs:t.exportAs||null,standalone:t.standalone??!0,signals:t.signals===!0,selectors:t.selectors||zt,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:eV(t.inputs,e),outputs:tV(t.outputs),debugInfo:null}}function fS(t){t.features?.forEach(e=>e(t))}function VT(t,e){return t?()=>{let n=typeof t=="function"?t():t,r=[];for(let i of n){let o=e(i);o!==null&&r.push(o)}return r}:null}function nV(t){let e=0,n=typeof t.consts=="function"?"":t.consts,r=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,n,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function rV(t){return Object.getPrototypeOf(t.prototype).constructor}function Ln(t){let e=rV(t.type),n=!0,r=[t];for(;e;){let i;if(tr(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new H(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);let s=t;s.inputs=by(t.inputs),s.declaredInputs=by(t.declaredInputs),s.outputs=by(t.outputs);let a=i.hostBindings;a&&cV(t,a);let u=i.viewQuery,l=i.contentQueries;if(u&&sV(t,u),l&&aV(t,l),iV(t,i),ND(t.outputs,i.outputs),tr(i)&&i.data.animation){let h=t.data;h.animation=(h.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(t),a===Ln&&(n=!1)}}e=Object.getPrototypeOf(e)}oV(r)}function iV(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let r=e.inputs[n];r!==void 0&&(t.inputs[n]=r,t.declaredInputs[n]=e.declaredInputs[n])}}function oV(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){let i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Js(i.hostAttrs,n=Js(n,i.hostAttrs))}}function by(t){return t===gi?{}:t===zt?[]:t}function sV(t,e){let n=t.viewQuery;n?t.viewQuery=(r,i)=>{e(r,i),n(r,i)}:t.viewQuery=e}function aV(t,e){let n=t.contentQueries;n?t.contentQueries=(r,i,o)=>{e(r,i,o),n(r,i,o)}:t.contentQueries=e}function cV(t,e){let n=t.hostBindings;n?t.hostBindings=(r,i)=>{e(r,i),n(r,i)}:t.hostBindings=e}function uV(t,e,n,r,i,o,s,a){if(n.firstCreatePass){t.mergedAttrs=Js(t.mergedAttrs,t.attrs);let h=t.tView=pv(2,t,i,o,s,n.directiveRegistry,n.pipeRegistry,null,n.schemas,n.consts,null);n.queries!==null&&(n.queries.template(n,t),h.queries=n.queries.embeddedTView(t))}a&&(t.flags|=a),Gs(t,!1);let u=lV(n,e,t,r);eh()&&_v(n,e,u,t),Xs(u,e);let l=YC(u,e,u,t);e[r+Rt]=l,mv(e,l),jL(l,t,e)}function wh(t,e,n,r,i,o,s,a,u,l,h){let p=n+Rt,g;if(e.firstCreatePass){if(g=Vh(e,p,4,s||null,a||null),l!=null){let y=nr(e.consts,l);g.localNames=[];for(let w=0;w<y.length;w+=2)g.localNames.push(y[w],-1)}}else g=e.data[p];return uV(g,t,e,n,r,i,o,u),l!=null&&Iv(t,g,h),g}var lV=dV;function dV(t,e,n,r){return th(!0),e[Fe].createComment("")}var Rv=(function(t){return t[t.CHANGE_DETECTION=0]="CHANGE_DETECTION",t[t.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",t})(Rv||{}),cu=new q(""),pS=!1,Ky=class extends We{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,GD()&&(this.destroyRef=R(kn,{optional:!0})??void 0,this.pendingTasks=R(rr,{optional:!0})??void 0)}emit(e){let n=J(null);try{super.next(e)}finally{J(n)}}subscribe(e,n,r){let i=e,o=n||(()=>null),s=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof He&&e.add(a),a}wrapInTimeout(e){return n=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(n)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},Qe=Ky;function gS(t){let e,n;function r(){t=Ro;try{n!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(n),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{t(),r()}),typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(()=>{t(),r()})),()=>r()}function jT(t){return queueMicrotask(()=>t()),()=>{t=Ro}}var xv="isAngularZone",bh=xv+"_ID",hV=0,be=class t{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new Qe(!1);onMicrotaskEmpty=new Qe(!1);onStable=new Qe(!1);onError=new Qe(!1);constructor(e){let{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=pS}=e;if(typeof Zone>"u")throw new H(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,gV(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(xv)===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new H(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new H(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,fV,Ro,Ro);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},fV={};function Nv(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function pV(t){if(t.isCheckStableRunning||t.callbackScheduled)return;t.callbackScheduled=!0;function e(){gS(()=>{t.callbackScheduled=!1,Qy(t),t.isCheckStableRunning=!0,Nv(t),t.isCheckStableRunning=!1})}t.scheduleInRootZone?Zone.root.run(()=>{e()}):t._outer.run(()=>{e()}),Qy(t)}function gV(t){let e=()=>{pV(t)},n=hV++;t._inner=t._inner.fork({name:"angular",properties:{[xv]:!0,[bh]:n,[bh+n]:!0},onInvokeTask:(r,i,o,s,a,u)=>{if(mV(u))return r.invokeTask(o,s,a,u);try{return UT(t),r.invokeTask(o,s,a,u)}finally{(t.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),BT(t)}},onInvoke:(r,i,o,s,a,u,l)=>{try{return UT(t),r.invoke(o,s,a,u,l)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!yV(u)&&e(),BT(t)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(t._hasPendingMicrotasks=s.microTask,Qy(t),Nv(t)):s.change=="macroTask"&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}function Qy(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.callbackScheduled===!0?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function UT(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function BT(t){t._nesting--,Nv(t)}var ru=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new Qe;onMicrotaskEmpty=new Qe;onStable=new Qe;onError=new Qe;run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}};function mV(t){return mS(t,"__ignore_ng_zone__")}function yV(t){return mS(t,"__scheduler_tick__")}function mS(t,e){return!Array.isArray(t)||t.length!==1?!1:t[0]?.data?.[e]===!0}var yS=(()=>{class t{impl=null;execute(){this.impl?.execute()}static \u0275prov=z({token:t,providedIn:"root",factory:()=>new t})}return t})();var Mv=(()=>{class t{log(n){console.log(n)}warn(n){console.warn(n)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();var kv=new q("");function Ti(t){return!!t&&typeof t.then=="function"}function Pv(t){return!!t&&typeof t.subscribe=="function"}var vS=new q("");var Ov=(()=>{class t{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r});appInits=R(vS,{optional:!0})??[];injector=R(Oe);constructor(){}runInitializers(){if(this.initialized)return;let n=[];for(let i of this.appInits){let o=ht(this.injector,i);if(Ti(o))n.push(o);else if(Pv(o)){let s=new Promise((a,u)=>{o.subscribe({complete:a,error:u})});n.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),n.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||t)};static \u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Bh=new q("");function _S(){Qg(()=>{let t="";throw new H(600,t)})}function ES(t){return t.isBoundToModule}var vV=10;var Ci=(()=>{class t{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=R(Wt);afterRenderManager=R(yS);zonelessEnabled=R(Wc);rootEffectScheduler=R(Qc);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new We;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=R(rr);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(me(n=>!n))}constructor(){R(cu,{optional:!0})}whenStable(){let n;return new Promise(r=>{n=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{n.unsubscribe()})}_injector=R(nt);_rendererFactory=null;get injector(){return this._injector}bootstrap(n,r){return this.bootstrapImpl(n,r)}bootstrapImpl(n,r,i=Oe.NULL){return this._injector.get(be).run(()=>{Re(10);let s=n instanceof jh;if(!this._injector.get(Ov).done){let w="";throw new H(405,w)}let u;s?u=n:u=this._injector.get(su).resolveComponentFactory(n),this.componentTypes.push(u.componentType);let l=ES(u)?void 0:this._injector.get(ko),h=r||u.selector,p=u.create(i,[],h,l),g=p.location.nativeElement,y=p.injector.get(kv,null);return y?.registerApplication(g),p.onDestroy(()=>{this.detachView(p.hostView),Zc(this.components,p),y?.unregisterApplication(g)}),this._loadComponent(p),Re(11,p),p})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){Re(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(Rv.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new H(101,!1);let n=J(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,J(n),this.afterTick.next(),Re(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(Mo,null,{optional:!0}));let n=0;for(;this.dirtyFlags!==0&&n++<vV;)Re(14),this.synchronizeOnce(),Re(15)}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let n=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!Gc(i))continue;let o=r&&!this.zonelessEnabled?0:1;GC(i,o),n=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}n||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:n})=>Gc(n))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(n){let r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){let r=n;Zc(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(n),this._injector.get(Bh,[]).forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>Zc(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new H(406,!1);let n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||t)};static \u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Zc(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function Si(t,e,n,r){let i=de(),o=So();if(Br(i,o,e)){let s=mt(),a=Xd();OF(a,i,t,e,n,r)}return Si}var tZ=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";var Yy=class{destroy(e){}updateValue(e,n){}swap(e,n){let r=Math.min(e,n),i=Math.max(e,n),o=this.detach(i);if(i-r>1){let s=this.detach(r);this.attach(r,o),this.attach(i,s)}else this.attach(r,o)}move(e,n){this.attach(n,this.detach(e,!0))}};function Dy(t,e,n,r,i){return t===n&&Object.is(e,r)?1:Object.is(i(t,e),i(n,r))?-1:0}function _V(t,e,n){let r,i,o=0,s=t.length-1,a=void 0;if(Array.isArray(e)){let u=e.length-1;for(;o<=s&&o<=u;){let l=t.at(o),h=e[o],p=Dy(o,l,o,h,n);if(p!==0){p<0&&t.updateValue(o,h),o++;continue}let g=t.at(s),y=e[u],w=Dy(s,g,u,y,n);if(w!==0){w<0&&t.updateValue(s,y),s--,u--;continue}let k=n(o,l),M=n(s,g),j=n(o,h);if(Object.is(j,M)){let G=n(u,y);Object.is(G,k)?(t.swap(o,s),t.updateValue(s,y),u--,s--):t.move(s,o),t.updateValue(o,h),o++;continue}if(r??=new Dh,i??=HT(t,o,s,n),Zy(t,r,o,j))t.updateValue(o,h),o++,s++;else if(i.has(j))r.set(k,t.detach(o)),s--;else{let G=t.create(o,e[o]);t.attach(o,G),o++,s++}}for(;o<=u;)$T(t,r,n,o,e[o]),o++}else if(e!=null){let u=e[Symbol.iterator](),l=u.next();for(;!l.done&&o<=s;){let h=t.at(o),p=l.value,g=Dy(o,h,o,p,n);if(g!==0)g<0&&t.updateValue(o,p),o++,l=u.next();else{r??=new Dh,i??=HT(t,o,s,n);let y=n(o,p);if(Zy(t,r,o,y))t.updateValue(o,p),o++,s++,l=u.next();else if(!i.has(y))t.attach(o,t.create(o,p)),o++,s++,l=u.next();else{let w=n(o,h);r.set(w,t.detach(o)),s--}}}for(;!l.done;)$T(t,r,n,t.length,l.value),l=u.next()}for(;o<=s;)t.destroy(t.detach(s--));r?.forEach(u=>{t.destroy(u)})}function Zy(t,e,n,r){return e!==void 0&&e.has(r)?(t.attach(n,e.get(r)),e.delete(r),!0):!1}function $T(t,e,n,r,i){if(Zy(t,e,r,n(r,i)))t.updateValue(r,i);else{let o=t.create(r,i);t.attach(r,o)}}function HT(t,e,n,r){let i=new Set;for(let o=e;o<=n;o++)i.add(r(o,t.at(o)));return i}var Dh=class{kvMap=new Map;_vMap=void 0;has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let n=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(n)?(this.kvMap.set(e,this._vMap.get(n)),this._vMap.delete(n)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,n){if(this.kvMap.has(e)){let r=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let i=this._vMap;for(;i.has(r);)r=i.get(r);i.set(r,n)}else this.kvMap.set(e,n)}forEach(e){for(let[n,r]of this.kvMap)if(e(r,n),this._vMap!==void 0){let i=this._vMap;for(;i.has(r);)r=i.get(r),e(r,n)}}};function xe(t,e,n,r,i,o,s,a){$r("NgControlFlow");let u=de(),l=mt(),h=nr(l.consts,o);return wh(u,l,t,e,n,r,i,h,256,s,a),Fv}function Fv(t,e,n,r,i,o,s,a){$r("NgControlFlow");let u=de(),l=mt(),h=nr(l.consts,o);return wh(u,l,t,e,n,r,i,h,512,s,a),Fv}function Ne(t,e){$r("NgControlFlow");let n=de(),r=So(),i=n[r]!==dn?n[r]:-1,o=i!==-1?Th(n,Rt+i):void 0,s=0;if(Br(n,r,t)){let a=J(null);try{if(o!==void 0&&JC(o,s),t!==-1){let u=Rt+t,l=Th(n,u),h=tv(n[Q],u),p=eS(l,h,n),g=Fh(n,h,e,{dehydratedView:p});Lh(l,g,s,Xc(h,p))}}finally{J(a)}}else if(o!==void 0){let a=ZC(o,s);a!==void 0&&(a[Ke]=e)}}var Jy=class{lContainer;$implicit;$index;constructor(e,n,r){this.lContainer=e,this.$implicit=n,this.$index=r}get $count(){return this.lContainer.length-rt}};function uu(t,e){return e}var Xy=class{hasEmptyBlock;trackByFn;liveCollection;constructor(e,n,r){this.hasEmptyBlock=e,this.trackByFn=n,this.liveCollection=r}};function Vn(t,e,n,r,i,o,s,a,u,l,h,p,g){$r("NgControlFlow");let y=de(),w=mt(),k=u!==void 0,M=de(),j=a?s.bind(M[un][Ke]):s,G=new Xy(k,j);M[Rt+t]=G,wh(y,w,t+1,e,n,r,i,nr(w.consts,o),256),k&&wh(y,w,t+2,u,l,h,p,nr(w.consts,g),512)}var ev=class extends Yy{lContainer;hostLView;templateTNode;operationsCounter=void 0;needsIndexUpdate=!1;constructor(e,n,r){super(),this.lContainer=e,this.hostLView=n,this.templateTNode=r}get length(){return this.lContainer.length-rt}at(e){return this.getLView(e)[Ke].$implicit}attach(e,n){let r=n[Bs];this.needsIndexUpdate||=e!==this.length,Lh(this.lContainer,n,e,Xc(this.templateTNode,r))}detach(e,n){return this.needsIndexUpdate||=e!==this.length-1,n&&EV(this.lContainer,e),IV(this.lContainer,e)}create(e,n){let r=Vy(this.lContainer,this.templateTNode.tView.ssrId),i=Fh(this.hostLView,this.templateTNode,new Jy(this.lContainer,n,e),{dehydratedView:r});return this.operationsCounter?.recordCreate(),i}destroy(e){Ph(e[Q],e),this.operationsCounter?.recordDestroy()}updateValue(e,n){this.getLView(e)[Ke].$implicit=n}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[Ke].$index=e}getLView(e){return wV(this.lContainer,e)}};function jn(t){let e=J(null),n=jr();try{let r=de(),i=r[Q],o=r[n],s=n+1,a=Th(r,s);if(o.liveCollection===void 0){let l=tv(i,s);o.liveCollection=new ev(a,r,l)}else o.liveCollection.reset();let u=o.liveCollection;if(_V(u,t,o.trackByFn),u.updateIndexes(),o.hasEmptyBlock){let l=So(),h=u.length===0;if(Br(r,l,h)){let p=n+2,g=Th(r,p);if(h){let y=tv(i,p),w=eS(g,y,r),k=Fh(r,y,void 0,{dehydratedView:w});Lh(g,k,0,Xc(y,w))}else i.firstUpdatePass&&sL(g),JC(g,0)}}}finally{J(e)}}function Th(t,e){return t[e]}function EV(t,e){if(t.length<=rt)return;let n=rt+e,r=t[n];r&&r[At]&&(r[At].skipLeaveAnimations=!0)}function IV(t,e){return tu(t,e)}function wV(t,e){return ZC(t,e)}function tv(t,e){return zc(t,e)}function le(t,e,n){let r=de(),i=So();if(Br(r,i,e)){let o=mt(),s=Xd();VC(s,r,t,e,r[Fe],n)}return le}function nv(t,e,n,r,i){wv(e,t,n,i?"class":"style",r)}function A(t,e,n,r){let i=de(),o=i[Q],s=t+Rt,a=o.firstCreatePass?iS(s,i,2,e,PF,nT(),n,r):o.data[s];if(jC(a,i,t,e,IS),Gd(a)){let u=i[Q];LC(u,i,a),EC(u,a,i)}return r!=null&&Iv(i,a),A}function N(){let t=mt(),e=yt(),n=UC(e);return t.firstCreatePass&&oS(t,n),ny(n)&&ry(),ty(),n.classesWithoutHost!=null&&v1(n)&&nv(t,n,de(),n.classesWithoutHost,!0),n.stylesWithoutHost!=null&&_1(n)&&nv(t,n,de(),n.stylesWithoutHost,!1),N}function qe(t,e,n,r){return A(t,e,n,r),N(),qe}function Fo(t,e,n,r){let i=de(),o=i[Q],s=t+Rt,a=o.firstCreatePass?IL(s,o,2,e,n,r):o.data[s];return jC(a,i,t,e,IS),r!=null&&Iv(i,a),Fo}function Lo(){let t=yt(),e=UC(t);return ny(e)&&ry(),ty(),Lo}var IS=(t,e,n,r,i)=>(th(!0),SC(e[Fe],r,gT()));function sa(){return de()}var lu="en-US";var bV=lu;function wS(t){typeof t=="string"&&(bV=t.toLowerCase().replace(/_/g,"-"))}function Le(t,e,n){let r=de(),i=mt(),o=yt();return bS(i,r,r[Fe],o,t,e,n),Le}function bS(t,e,n,r,i,o,s){let a=!0,u=null;if((r.type&3||s)&&(u??=Iy(r,e,o),bL(r,t,e,s,n,i,o,u)&&(a=!1)),a){let l=r.outputs?.[i],h=r.hostDirectiveOutputs?.[i];if(h&&h.length)for(let p=0;p<h.length;p+=2){let g=h[p],y=h[p+1];u??=Iy(r,e,o),PT(r,e,g,y,i,u)}if(l&&l.length)for(let p of l)u??=Iy(r,e,o),PT(r,e,p,i,i,u)}}function fe(t=1){return pT(t)}function Lv(t,e,n,r){WL(t,e,n,r)}function Vv(t){let e=de(),n=mt(),r=uy();Yd(r+1);let i=Av(n,r);if(t.dirty&&QD(e)===((i.metadata.flags&2)===2)){if(i.matches===null)t.reset([]);else{let o=ZL(e,r);t.reset(o,M1),t.notifyOnChanges()}return!0}return!1}function jv(){return zL(de(),uy())}function oh(t,e){return t<<17|e<<2}function Po(t){return t>>17&32767}function DV(t){return(t&2)==2}function TV(t,e){return t&131071|e<<17}function rv(t){return t|2}function na(t){return(t&131068)>>2}function Ty(t,e){return t&-131069|e<<2}function CV(t){return(t&1)===1}function iv(t){return t|1}function SV(t,e,n,r,i,o){let s=o?e.classBindings:e.styleBindings,a=Po(s),u=na(s);t[r]=n;let l=!1,h;if(Array.isArray(n)){let p=n;h=p[1],(h===null||Us(p,h)>0)&&(l=!0)}else h=n;if(i)if(u!==0){let g=Po(t[a+1]);t[r+1]=oh(g,a),g!==0&&(t[g+1]=Ty(t[g+1],r)),t[a+1]=TV(t[a+1],r)}else t[r+1]=oh(a,0),a!==0&&(t[a+1]=Ty(t[a+1],r)),a=r;else t[r+1]=oh(u,0),a===0?a=r:t[u+1]=Ty(t[u+1],r),u=r;l&&(t[r+1]=rv(t[r+1])),qT(t,h,r,!0),qT(t,h,r,!1),AV(e,h,t,r,o),s=oh(a,u),o?e.classBindings=s:e.styleBindings=s}function AV(t,e,n,r,i){let o=i?t.residualClasses:t.residualStyles;o!=null&&typeof e=="string"&&Us(o,e)>=0&&(n[r+1]=iv(n[r+1]))}function qT(t,e,n,r){let i=t[n+1],o=e===null,s=r?Po(i):na(i),a=!1;for(;s!==0&&(a===!1||o);){let u=t[s],l=t[s+1];RV(u,e)&&(a=!0,t[s+1]=r?iv(l):rv(l)),s=r?Po(l):na(l)}a&&(t[n+1]=r?rv(i):iv(i))}function RV(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?Us(t,e)>=0:!1}var On={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function xV(t){return t.substring(On.key,On.keyEnd)}function NV(t){return MV(t),DS(t,TS(t,0,On.textEnd))}function DS(t,e){let n=On.textEnd;return n===e?-1:(e=On.keyEnd=kV(t,On.key=e,n),TS(t,e,n))}function MV(t){On.key=0,On.keyEnd=0,On.value=0,On.valueEnd=0,On.textEnd=t.length}function TS(t,e,n){for(;e<n&&t.charCodeAt(e)<=32;)e++;return e}function kV(t,e,n){for(;e<n&&t.charCodeAt(e)>32;)e++;return e}function du(t,e){return OV(t,e,null,!0),du}function P(t){FV($V,PV,t,!0)}function PV(t,e){for(let n=NV(e);n>=0;n=DS(e,n))$d(t,xV(e),!0)}function OV(t,e,n,r){let i=de(),o=mt(),s=cy(2);if(o.firstUpdatePass&&SS(o,t,s,r),e!==dn&&Br(i,s,e)){let a=o.data[jr()];AS(o,a,i,i[Fe],t,i[s+1]=qV(e,n),r,s)}}function FV(t,e,n,r){let i=mt(),o=cy(2);i.firstUpdatePass&&SS(i,null,o,r);let s=de();if(n!==dn&&Br(s,o,n)){let a=i.data[jr()];if(RS(a,r)&&!CS(i,o)){let u=r?a.classesWithoutHost:a.stylesWithoutHost;u!==null&&(n=Vd(u,n||"")),nv(i,a,s,n,r)}else HV(i,a,s,s[Fe],s[o+1],s[o+1]=BV(t,e,n),r,o)}}function CS(t,e){return e>=t.expandoStartIndex}function SS(t,e,n,r){let i=t.data;if(i[n+1]===null){let o=i[jr()],s=CS(t,n);RS(o,r)&&e===null&&!s&&(e=!1),e=LV(i,o,e,r),SV(i,o,e,n,s,r)}}function LV(t,e,n,r){let i=lT(t),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=Cy(null,t,e,n,r),n=iu(n,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||t[s]!==i)if(n=Cy(i,t,e,n,r),o===null){let u=VV(t,e,r);u!==void 0&&Array.isArray(u)&&(u=Cy(null,t,e,u[1],r),u=iu(u,e.attrs,r),jV(t,e,r,u))}else o=UV(t,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),n}function VV(t,e,n){let r=n?e.classBindings:e.styleBindings;if(na(r)!==0)return t[Po(r)]}function jV(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[Po(i)]=r}function UV(t,e,n){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=t[o].hostAttrs;r=iu(r,s,n)}return iu(r,e.attrs,n)}function Cy(t,e,n,r,i){let o=null,s=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<s&&(o=e[a],r=iu(r,o.hostAttrs,i),o!==t);)a++;return t!==null&&(n.directiveStylingLast=a),r}function iu(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),$d(t,s,n?!0:e[++o]))}return t===void 0?null:t}function BV(t,e,n){if(n==null||n==="")return zt;let r=[],i=oa(n);if(Array.isArray(i))for(let o=0;o<i.length;o++)t(r,i[o],!0);else if(typeof i=="object")for(let o in i)i.hasOwnProperty(o)&&t(r,o,i[o]);else typeof i=="string"&&e(r,i);return r}function $V(t,e,n){let r=String(e);r!==""&&!r.includes(" ")&&$d(t,r,n)}function HV(t,e,n,r,i,o,s,a){i===dn&&(i=zt);let u=0,l=0,h=0<i.length?i[0]:null,p=0<o.length?o[0]:null;for(;h!==null||p!==null;){let g=u<i.length?i[u+1]:void 0,y=l<o.length?o[l+1]:void 0,w=null,k;h===p?(u+=2,l+=2,g!==y&&(w=p,k=y)):p===null||h!==null&&h<p?(u+=2,w=h):(l+=2,w=p,k=y),w!==null&&AS(t,e,n,r,w,k,s,a),h=u<i.length?i[u]:null,p=l<o.length?o[l]:null}}function AS(t,e,n,r,i,o,s,a){if(!(e.type&3))return;let u=t.data,l=u[a+1],h=CV(l)?zT(u,e,n,i,na(l),s):void 0;if(!Ch(h)){Ch(o)||DV(l)&&(o=zT(u,null,n,i,a,s));let p=Qm(jr(),n);DF(r,s,p,i,o)}}function zT(t,e,n,r,i,o){let s=e===null,a;for(;i>0;){let u=t[i],l=Array.isArray(u),h=l?u[1]:u,p=h===null,g=n[i+1];g===dn&&(g=p?zt:void 0);let y=p?Hd(g,r):h===r?g:void 0;if(l&&!Ch(y)&&(y=Hd(u,r)),Ch(y)&&(a=y,s))return a;let w=t[i+1];i=s?Po(w):na(w)}if(e!==null){let u=o?e.residualClasses:e.residualStyles;u!=null&&(a=Hd(u,r))}return a}function Ch(t){return t!==void 0}function qV(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=Or(oa(t)))),t}function RS(t,e){return(t.flags&(e?8:16))!==0}function F(t,e=""){let n=de(),r=mt(),i=t+Rt,o=r.firstCreatePass?Vh(r,i,1,e,null):r.data[i],s=zV(r,n,o,e,t);n[i]=s,eh()&&_v(r,n,s,o),Gs(o,!1)}var zV=(t,e,n,r,i)=>(th(!0),rF(e[Fe],r));function GV(t,e,n,r=""){return Br(t,So(),n)?e+jc(n)+r:dn}function ft(t){return In("",t),ft}function In(t,e,n){let r=de(),i=GV(r,t,e,n);return i!==dn&&WV(r,jr(),i),In}function WV(t,e,n){let r=Qm(e,t);iF(t[Fe],r,n)}function _t(t,e,n){my(e)&&(e=e());let r=de(),i=So();if(Br(r,i,e)){let o=mt(),s=Xd();VC(s,r,t,e,r[Fe],n)}return _t}function xt(t,e){let n=my(t);return n&&t.set(e),n}function Et(t,e){let n=de(),r=mt(),i=yt();return bS(r,n,n[Fe],i,t,e),Et}function KV(t,e,n){let r=mt();if(r.firstCreatePass){let i=tr(t);ov(n,r.data,r.blueprint,i,!0),ov(e,r.data,r.blueprint,i,!1)}}function ov(t,e,n,r,i){if(t=St(t),Array.isArray(t))for(let o=0;o<t.length;o++)ov(t[o],e,n,r,i);else{let o=mt(),s=de(),a=yt(),u=mo(t)?t:St(t.provide),l=Hm(t),h=a.providerIndexes&1048575,p=a.directiveStart,g=a.providerIndexes>>20;if(mo(t)||!t.multi){let y=new No(l,i,ye,null),w=Ay(u,e,i?h:h+g,p);w===-1?(xy(fh(a,s),o,u),Sy(o,t,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(y),s.push(y)):(n[w]=y,s[w]=y)}else{let y=Ay(u,e,h+g,p),w=Ay(u,e,h,h+g),k=y>=0&&n[y],M=w>=0&&n[w];if(i&&!M||!i&&!k){xy(fh(a,s),o,u);let j=ZV(i?YV:QV,n.length,i,r,l,t);!i&&M&&(n[w].providerFactory=j),Sy(o,t,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(j),s.push(j)}else{let j=xS(n[i?w:y],l,!i&&r);Sy(o,t,y>-1?y:w,j)}!i&&r&&M&&n[w].componentProviders++}}}function Sy(t,e,n,r){let i=mo(e),o=zD(e);if(i||o){let u=(o?St(e.useClass):e).prototype.ngOnDestroy;if(u){let l=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){let h=l.indexOf(n);h===-1?l.push(n,[r,u]):l[h+1].push(r,u)}else l.push(n,u)}}}function xS(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function Ay(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function QV(t,e,n,r,i){return sv(this.multi,[])}function YV(t,e,n,r,i){let o=this.multi,s;if(this.providerFactory){let a=this.providerFactory.componentProviders,u=Jc(r,r[Q],this.providerFactory.index,i);s=u.slice(0,a),sv(o,s);for(let l=a;l<u.length;l++)s.push(u[l])}else s=[],sv(o,s);return s}function sv(t,e){for(let n=0;n<t.length;n++){let r=t[n];e.push(r())}return e}function ZV(t,e,n,r,i,o){let s=new No(t,n,ye,null);return s.multi=[],s.index=e,s.componentProviders=0,xS(s,i,r&&!n),s}function Vo(t,e=[]){return n=>{n.providersResolver=(r,i)=>KV(r,i?i(t):t,e)}}function $h(t,e,n){let r=ay()+t,i=de();return i[r]===dn?sS(i,r,n?e.call(n):e()):wL(i,r)}function hu(t,e,n,r){return XV(de(),ay(),t,e,n,r)}function JV(t,e){let n=t[e];return n===dn?void 0:n}function XV(t,e,n,r,i,o){let s=e+n;return Br(t,s,i)?sS(t,s+1,o?r.call(o,i):r(i)):JV(t,s+1)}var Sh=class{ngModuleFactory;componentFactories;constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},Uv=(()=>{class t{compileModuleSync(n){return new Ih(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){let r=this.compileModuleSync(n),i=jm(n),o=TC(i.declarations).reduce((s,a)=>{let u=mi(a);return u&&s.push(new ta(u)),s},[]);return new Sh(r,o)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static \u0275fac=function(r){return new(r||t)};static \u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var e2=(()=>{class t{zone=R(be);changeDetectionScheduler=R(Rn);applicationRef=R(Ci);applicationErrorHandler=R(Wt);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{try{this.applicationRef.dirtyFlags|=1,this.applicationRef._tick()}catch(n){this.applicationErrorHandler(n)}})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||t)};static \u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function NS({ngZoneFactory:t,ignoreChangesOutsideZone:e,scheduleInRootZone:n}){return t??=()=>new be(Z(V({},MS()),{scheduleInRootZone:n})),[{provide:be,useFactory:t},{provide:Lr,multi:!0,useFactory:()=>{let r=R(e2,{optional:!0});return()=>r.initialize()}},{provide:Lr,multi:!0,useFactory:()=>{let r=R(t2);return()=>{r.initialize()}}},e===!0?{provide:yy,useValue:!0}:[],{provide:nh,useValue:n??pS},{provide:Wt,useFactory:()=>{let r=R(be),i=R(nt),o;return s=>{r.runOutsideAngular(()=>{i.destroyed&&!o?setTimeout(()=>{throw s}):(o??=i.get(An),o.handleError(s))})}}}]}function MS(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var t2=(()=>{class t{subscription=new He;initialized=!1;zone=R(be);pendingTasks=R(rr);initialize(){if(this.initialized)return;this.initialized=!0;let n=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(n=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{be.assertNotInAngularZone(),queueMicrotask(()=>{n!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(n),n=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{be.assertInAngularZone(),n??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||t)};static \u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var Bv=(()=>{class t{applicationErrorHandler=R(Wt);appRef=R(Ci);taskService=R(rr);ngZone=R(be);zonelessEnabled=R(Wc);tracing=R(cu,{optional:!0});disableScheduling=R(yy,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new He;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(bh):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(R(nh,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof ru||!this.zoneIsDefined)}notify(n){if(!this.zonelessEnabled&&n===5)return;let r=!1;switch(n){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{this.appRef.dirtyFlags|=16,r=!0;break}case 13:{this.appRef.dirtyFlags|=2,r=!0;break}case 11:{r=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let i=this.useMicrotaskScheduler?jT:gS;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(n){return!(this.disableScheduling&&!n||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(bh+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let n=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(n),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,jT(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(n)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let n=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(n)}}static \u0275fac=function(r){return new(r||t)};static \u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function $v(){return $r("NgZoneless"),Gt([{provide:Rn,useExisting:Bv},{provide:be,useClass:ru},{provide:Wc,useValue:!0},{provide:nh,useValue:!1},[]])}function n2(){return typeof $localize<"u"&&$localize.locale||lu}var Hh=new q("",{providedIn:"root",factory:()=>R(Hh,{optional:!0,skipSelf:!0})||n2()});function It(t){return CD(t)}function Kt(t,e){return sd(t,e?.equal)}var Hv=class{[Vt];constructor(e){this[Vt]=e}destroy(){this[Vt].destroy()}};function qv(t,e){let n=e?.injector??R(Oe),r=e?.manualCleanup!==!0?n.get(kn):null,i,o=n.get(Kc,null,{optional:!0}),s=n.get(Rn);return o!==null?(i=o2(o.view,s,t),r instanceof Fc&&r._lView===o.view&&(r=null)):i=s2(t,n.get(Qc),s),i.injector=n,r!==null&&(i.onDestroyFn=r.onDestroy(()=>i.destroy())),new Hv(i)}var kS=Z(V({},SD),{cleanupFns:void 0,zone:null,onDestroyFn:Ro,run(){let t=Ws(!1);try{AD(this)}finally{Ws(t)}},cleanup(){if(!this.cleanupFns?.length)return;let t=J(null);try{for(;this.cleanupFns.length;)this.cleanupFns.pop()()}finally{this.cleanupFns=[],J(t)}}}),r2=Z(V({},kS),{consumerMarkedDirty(){this.scheduler.schedule(this),this.notifier.notify(12)},destroy(){so(this),this.onDestroyFn(),this.cleanup(),this.scheduler.remove(this)}}),i2=Z(V({},kS),{consumerMarkedDirty(){this.view[te]|=8192,Do(this.view),this.notifier.notify(13)},destroy(){so(this),this.onDestroyFn(),this.cleanup(),this.view[Vr]?.delete(this)}});function o2(t,e,n){let r=Object.create(i2);return r.view=t,r.zone=typeof Zone<"u"?Zone.current:null,r.notifier=e,r.fn=PS(r,n),t[Vr]??=new Set,t[Vr].add(r),r.consumerMarkedDirty(r),r}function s2(t,e,n){let r=Object.create(r2);return r.fn=PS(r,t),r.scheduler=e,r.notifier=n,r.zone=typeof Zone<"u"?Zone.current:null,r.scheduler.add(r),r.notifier.notify(12),r}function PS(t,e){return()=>{e(n=>(t.cleanupFns??=[]).push(n))}}var jS=Symbol("InputSignalNode#UNSET"),b2=Z(V({},ad),{transformFn:void 0,applyValueToInputSignal(t,e){Ds(t,e)}});function US(t,e){let n=Object.create(b2);n.value=t,n.transformFn=e?.transform;function r(){if(Es(n),n.value===jS){let i=null;throw new H(-950,i)}return n.value}return r[Vt]=n,r}var zh=class{attributeName;constructor(e){this.attributeName=e}__NG_ELEMENT_ID__=()=>ou(this.attributeName);toString(){return`HostAttributeToken ${this.attributeName}`}},D2=new q("");D2.__NG_ELEMENT_ID__=t=>{let e=yt();if(e===null)throw new H(204,!1);if(e.type&2)return e.value;if(t&8)return null;throw new H(204,!1)};function OS(t,e){return US(t,e)}function T2(t){return US(jS,t)}var BS=(OS.required=T2,OS);var zv=new q(""),C2=new q("");function fu(t){return!t.moduleRef}function S2(t){let e=fu(t)?t.r3Injector:t.moduleRef.injector,n=e.get(be);return n.run(()=>{fu(t)?t.r3Injector.resolveInjectorInitializers():t.moduleRef.resolveInjectorInitializers();let r=e.get(Wt),i;if(n.runOutsideAngular(()=>{i=n.onError.subscribe({next:r})}),fu(t)){let o=()=>e.destroy(),s=t.platformInjector.get(zv);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>t.moduleRef.destroy(),s=t.platformInjector.get(zv);s.add(o),t.moduleRef.onDestroy(()=>{Zc(t.allPlatformModules,t.moduleRef),i.unsubscribe(),s.delete(o)})}return R2(r,n,()=>{let o=e.get(rr),s=o.add(),a=e.get(Ov);return a.runInitializers(),a.donePromise.then(()=>{let u=e.get(Hh,lu);if(wS(u||lu),!e.get(C2,!0))return fu(t)?e.get(Ci):(t.allPlatformModules.push(t.moduleRef),t.moduleRef);if(fu(t)){let h=e.get(Ci);return t.rootComponent!==void 0&&h.bootstrap(t.rootComponent),h}else return A2?.(t.moduleRef,t.allPlatformModules),t.moduleRef}).finally(()=>void o.remove(s))})})}var A2;function R2(t,e,n){try{let r=n();return Ti(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t(r)),r}}var qh=null;function x2(t=[],e){return Oe.create({name:e,providers:[{provide:Bc,useValue:"platform"},{provide:zv,useValue:new Set([()=>qh=null])},...t]})}function N2(t=[]){if(qh)return qh;let e=x2(t);return qh=e,_S(),M2(e),e}function M2(t){let e=t.get(Rh,null);ht(t,()=>{e?.forEach(n=>n())})}function Qv(){return!1}var Ai=(()=>{class t{static __NG_ELEMENT_ID__=k2}return t})();function k2(t){return P2(yt(),de(),(t&16)===16)}function P2(t,e,n){if(_i(t)&&!n){let r=En(t.index,e);return new Ii(r,r)}else if(t.type&175){let r=e[un];return new Ii(r,e)}return null}var Gv=class{constructor(){}supports(e){return e instanceof Map||Sv(e)}create(){return new Wv}},Wv=class{_records=new Map;_mapHead=null;_appendAfter=null;_previousMapHead=null;_changesHead=null;_changesTail=null;_additionsHead=null;_additionsTail=null;_removalsHead=null;_removalsTail=null;get isDirty(){return this._additionsHead!==null||this._changesHead!==null||this._removalsHead!==null}forEachItem(e){let n;for(n=this._mapHead;n!==null;n=n._next)e(n)}forEachPreviousItem(e){let n;for(n=this._previousMapHead;n!==null;n=n._nextPrevious)e(n)}forEachChangedItem(e){let n;for(n=this._changesHead;n!==null;n=n._nextChanged)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)e(n)}diff(e){if(!e)e=new Map;else if(!(e instanceof Map||Sv(e)))throw new H(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._mapHead;if(this._appendAfter=null,this._forEach(e,(r,i)=>{if(n&&n.key===i)this._maybeAddToChanges(n,r),this._appendAfter=n,n=n._next;else{let o=this._getOrCreateRecordForKey(i,r);n=this._insertBeforeOrAppend(n,o)}}),n){n._prev&&(n._prev._next=null),this._removalsHead=n;for(let r=n;r!==null;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,n){if(e){let r=e._prev;return n._next=e,n._prev=r,e._prev=n,r&&(r._next=n),e===this._mapHead&&(this._mapHead=n),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=n,n._prev=this._appendAfter):this._mapHead=n,this._appendAfter=n,null}_getOrCreateRecordForKey(e,n){if(this._records.has(e)){let i=this._records.get(e);this._maybeAddToChanges(i,n);let o=i._prev,s=i._next;return o&&(o._next=s),s&&(s._prev=o),i._next=null,i._prev=null,i}let r=new Kv(e);return this._records.set(e,r),r.currentValue=n,this._addToAdditions(r),r}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;e!==null;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;e!=null;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,n){Object.is(n,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=n,this._addToChanges(e))}_addToAdditions(e){this._additionsHead===null?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){this._changesHead===null?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,n){e instanceof Map?e.forEach(n):Object.keys(e).forEach(r=>n(e[r],r))}},Kv=class{key;previousValue=null;currentValue=null;_nextPrevious=null;_next=null;_prev=null;_nextAdded=null;_nextRemoved=null;_nextChanged=null;constructor(e){this.key=e}};function FS(){return new Yv([new Gv])}var Yv=(()=>{class t{static \u0275prov=z({token:t,providedIn:"root",factory:FS});factories;constructor(n){this.factories=n}static create(n,r){if(r){let i=r.factories.slice();n=n.concat(i)}return new t(n)}static extend(n){return{provide:t,useFactory:()=>{let r=R(t,{optional:!0,skipSelf:!0});return t.create(n,r||FS())}}}find(n){let r=this.factories.find(i=>i.supports(n));if(r)return r;throw new H(901,!1)}}return t})();function $S(t){let{rootComponent:e,appProviders:n,platformProviders:r,platformRef:i}=t;Re(8);try{let o=i?.injector??N2(r),s=[NS({}),{provide:Rn,useExisting:Bv},yT,...n||[]],a=new nu({providers:s,parent:o,debugName:"",runEnvironmentInitializers:!1});return S2({r3Injector:a.injector,platformInjector:o,rootComponent:e})}catch(o){return Promise.reject(o)}finally{Re(9)}}function Ri(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}var zS=null;function wn(){return zS}function Zv(t){zS??=t}var pu=class{},Jv=(()=>{class t{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||t)};static \u0275prov=z({token:t,factory:()=>R(GS),providedIn:"platform"})}return t})();var GS=(()=>{class t extends Jv{_location;_history;_doc=R(it);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return wn().getBaseHref(this._doc)}onPopState(n){let r=wn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){let r=wn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,i){this._history.pushState(n,r,i)}replaceState(n,r,i){this._history.replaceState(n,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||t)};static \u0275prov=z({token:t,factory:()=>new t,providedIn:"platform"})}return t})();function WS(t,e){return t?e?t.endsWith("/")?e.startsWith("/")?t+e.slice(1):t+e:e.startsWith("/")?t+e:`${t}/${e}`:t:e}function HS(t){let e=t.search(/#|\?|$/);return t[e-1]==="/"?t.slice(0,e-1)+t.slice(e):t}function xi(t){return t&&t[0]!=="?"?`?${t}`:t}var jo=(()=>{class t{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||t)};static \u0275prov=z({token:t,factory:()=>R(Xv),providedIn:"root"})}return t})(),KS=new q(""),Xv=(()=>{class t extends jo{_platformLocation;_baseHref;_removeListenerFns=[];constructor(n,r){super(),this._platformLocation=n,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??R(it).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return WS(this._baseHref,n)}path(n=!1){let r=this._platformLocation.pathname+xi(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,o){let s=this.prepareExternalUrl(i+xi(o));this._platformLocation.pushState(n,r,s)}replaceState(n,r,i,o){let s=this.prepareExternalUrl(i+xi(o));this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static \u0275fac=function(r){return new(r||t)(se(Jv),se(KS,8))};static \u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Uo=(()=>{class t{_subject=new We;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(n){this._locationStrategy=n;let r=this._locationStrategy.getBaseHref();this._basePath=L2(HS(qS(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+xi(r))}normalize(n){return t.stripTrailingSlash(F2(this._basePath,qS(n)))}prepareExternalUrl(n){return n&&n[0]!=="/"&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+xi(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+xi(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=xi;static joinWithSlash=WS;static stripTrailingSlash=HS;static \u0275fac=function(r){return new(r||t)(se(jo))};static \u0275prov=z({token:t,factory:()=>O2(),providedIn:"root"})}return t})();function O2(){return new Uo(se(jo))}function F2(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function qS(t){return t.replace(/\/index.html$/,"")}function L2(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}var e_=(()=>{class t{_ngEl;_differs;_renderer;_ngStyle=null;_differ=null;constructor(n,r,i){this._ngEl=n,this._differs=r,this._renderer=i}set ngStyle(n){this._ngStyle=n,!this._differ&&n&&(this._differ=this._differs.find(n).create())}ngDoCheck(){if(this._differ){let n=this._differ.diff(this._ngStyle);n&&this._applyChanges(n)}}_setStyle(n,r){let[i,o]=n.split("."),s=i.indexOf("-")===-1?void 0:Fn.DashCase;r!=null?this._renderer.setStyle(this._ngEl.nativeElement,i,o?`${r}${o}`:r,s):this._renderer.removeStyle(this._ngEl.nativeElement,i,s)}_applyChanges(n){n.forEachRemovedItem(r=>this._setStyle(r.key,null)),n.forEachAddedItem(r=>this._setStyle(r.key,r.currentValue)),n.forEachChangedItem(r=>this._setStyle(r.key,r.currentValue))}static \u0275fac=function(r){return new(r||t)(ye(tn),ye(Yv),ye(sr))};static \u0275dir=ot({type:t,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"}})}return t})();function t_(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,o]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var gu=class{};var QS="browser";var YS=(()=>{class t{static \u0275prov=z({token:t,providedIn:"root",factory:()=>new n_(R(it),window)})}return t})(),n_=class{document;window;offset=()=>[0,0];constructor(e,n){this.document=e,this.window=n}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e,n){this.window.scrollTo(Z(V({},n),{left:e[0],top:e[1]}))}scrollToAnchor(e,n){let r=$2(this.document,e);r&&(this.scrollToElement(r,n),r.focus())}setHistoryScrollRestoration(e){try{this.window.history.scrollRestoration=e}catch{console.warn(vo(2400,!1))}}scrollToElement(e,n){let r=e.getBoundingClientRect(),i=r.left+this.window.pageXOffset,o=r.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(Z(V({},n),{left:i-s[0],top:o-s[1]}))}};function $2(t,e){let n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if(typeof t.createTreeWalker=="function"&&t.body&&typeof t.body.attachShadow=="function"){let r=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let o=i.shadowRoot;if(o){let s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}var Wh=new q(""),a_=(()=>{class t{_zone;_plugins;_eventNameToPlugin=new Map;constructor(n,r){this._zone=r,n.forEach(i=>{i.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,r,i,o){return this._findPluginFor(r).addEventListener(n,r,i,o)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(o=>o.supports(n)),!r)throw new H(5101,!1);return this._eventNameToPlugin.set(n,r),r}static \u0275fac=function(r){return new(r||t)(se(Wh),se(be))};static \u0275prov=z({token:t,factory:t.\u0275fac})}return t})(),mu=class{_doc;constructor(e){this._doc=e}manager},r_="ng-app-id";function ZS(t){for(let e of t)e.remove()}function JS(t,e){let n=e.createElement("style");return n.textContent=t,n}function q2(t,e,n,r){let i=t.head?.querySelectorAll(`style[${r_}="${e}"],link[${r_}="${e}"]`);if(i)for(let o of i)o.removeAttribute(r_),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&n.set(o.textContent,{usage:0,elements:[o]})}function o_(t,e){let n=e.createElement("link");return n.setAttribute("rel","stylesheet"),n.setAttribute("href",t),n}var c_=(()=>{class t{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(n,r,i,o={}){this.doc=n,this.appId=r,this.nonce=i,q2(n,r,this.inline,this.external),this.hosts.add(n.head)}addStyles(n,r){for(let i of n)this.addUsage(i,this.inline,JS);r?.forEach(i=>this.addUsage(i,this.external,o_))}removeStyles(n,r){for(let i of n)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(n,r,i){let o=r.get(n);o?o.usage++:r.set(n,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(n,this.doc)))})}removeUsage(n,r){let i=r.get(n);i&&(i.usage--,i.usage<=0&&(ZS(i.elements),r.delete(n)))}ngOnDestroy(){for(let[,{elements:n}]of[...this.inline,...this.external])ZS(n);this.hosts.clear()}addHost(n){this.hosts.add(n);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(n,JS(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(n,o_(r,this.doc)))}removeHost(n){this.hosts.delete(n)}addElement(n,r){return this.nonce&&r.setAttribute("nonce",this.nonce),n.appendChild(r)}static \u0275fac=function(r){return new(r||t)(se(it),se(Ah),se(xh,8),se(bi))};static \u0275prov=z({token:t,factory:t.\u0275fac})}return t})(),i_={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},u_=/%COMP%/g;var eA="%COMP%",z2=`_nghost-${eA}`,G2=`_ngcontent-${eA}`,W2=!0,K2=new q("",{providedIn:"root",factory:()=>W2});function Q2(t){return G2.replace(u_,t)}function Y2(t){return z2.replace(u_,t)}function tA(t,e){return e.map(n=>n.replace(u_,t))}var l_=(()=>{class t{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(n,r,i,o,s,a,u,l=null,h=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=u,this.nonce=l,this.tracingService=h,this.platformIsServer=!1,this.defaultRenderer=new yu(n,s,u,this.platformIsServer,this.tracingService)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(n,r);return i instanceof Gh?i.applyToHost(n):i instanceof vu&&i.applyStyles(),i}getOrCreateRenderer(n,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,p=this.platformIsServer,g=this.tracingService;switch(r.encapsulation){case Ur.Emulated:o=new Gh(u,l,r,this.appId,h,s,a,p,g);break;case Ur.ShadowDom:return new s_(u,l,n,r,s,a,this.nonce,p,g);default:o=new vu(u,l,r,h,s,a,p,g);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(n){this.rendererByCompId.delete(n)}static \u0275fac=function(r){return new(r||t)(se(a_),se(c_),se(Ah),se(K2),se(it),se(bi),se(be),se(xh),se(cu,8))};static \u0275prov=z({token:t,factory:t.\u0275fac})}return t})(),yu=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,n,r,i,o){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.tracingService=o}destroy(){}destroyNode=null;createElement(e,n){return n?this.doc.createElementNS(i_[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(XS(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(XS(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){n.remove()}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new H(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let o=i_[i];o?e.setAttributeNS(o,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=i_[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(Fn.DashCase|Fn.Important)?e.style.setProperty(n,r,i&Fn.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&Fn.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r,i){if(typeof e=="string"&&(e=wn().getGlobalEventTarget(this.doc,e),!e))throw new H(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,n,o)),this.eventManager.addEventListener(e,n,o,i)}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;e(n)===!1&&n.preventDefault()}}};function XS(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var s_=class extends yu{sharedStylesHost;hostEl;shadowRoot;constructor(e,n,r,i,o,s,a,u,l){super(e,o,s,u,l),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let h=i.styles;h=tA(i.id,h);for(let g of h){let y=document.createElement("style");a&&y.setAttribute("nonce",a),y.textContent=g,this.shadowRoot.appendChild(y)}let p=i.getExternalStyles?.();if(p)for(let g of p){let y=o_(g,o);a&&y.setAttribute("nonce",a),this.shadowRoot.appendChild(y)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(null,n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},vu=class extends yu{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,n,r,i,o,s,a,u,l){super(e,o,s,a,u),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i;let h=r.styles;this.styles=l?tA(l,h):h,this.styleUrls=r.getExternalStyles?.(l)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&kh.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},Gh=class extends vu{contentAttr;hostAttr;constructor(e,n,r,i,o,s,a,u,l){let h=i+"-"+r.id;super(e,n,r,o,s,a,u,l,h),this.contentAttr=Q2(h),this.hostAttr=Y2(h)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}};var Kh=class t extends pu{supportsDOMEvents=!0;static makeCurrent(){Zv(new t)}onAndCancel(e,n,r,i){return e.addEventListener(n,r,i),()=>{e.removeEventListener(n,r,i)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.remove()}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=Z2();return n==null?null:J2(n)}resetBaseElement(){_u=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return t_(document.cookie,e)}},_u=null;function Z2(){return _u=_u||document.head.querySelector("base"),_u?_u.getAttribute("href"):null}function J2(t){return new URL(t,document.baseURI).pathname}var X2=(()=>{class t{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||t)};static \u0275prov=z({token:t,factory:t.\u0275fac})}return t})(),rA=(()=>{class t extends mu{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i,o){return n.addEventListener(r,i,o),()=>this.removeEventListener(n,r,i,o)}removeEventListener(n,r,i,o){return n.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||t)(se(it))};static \u0275prov=z({token:t,factory:t.\u0275fac})}return t})(),nA=["alt","control","meta","shift"],ej={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},tj={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},iA=(()=>{class t extends mu{constructor(n){super(n)}supports(n){return t.parseEventName(n)!=null}addEventListener(n,r,i,o){let s=t.parseEventName(r),a=t.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>wn().onAndCancel(n,s.domEventName,a,o))}static parseEventName(n){let r=n.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=t._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),nA.forEach(l=>{let h=r.indexOf(l);h>-1&&(r.splice(h,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let u={};return u.domEventName=i,u.fullKey=s,u}static matchEventFullKeyCode(n,r){let i=ej[n.key]||n.key,o="";return r.indexOf("code.")>-1&&(i=n.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),nA.forEach(s=>{if(s!==i){let a=tj[s];a(n)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(n,r,i){return o=>{t.matchEventFullKeyCode(o,n)&&i.runGuarded(()=>r(o))}}static _normalizeKey(n){return n==="esc"?"escape":n}static \u0275fac=function(r){return new(r||t)(se(it))};static \u0275prov=z({token:t,factory:t.\u0275fac})}return t})();function d_(t,e,n){let r=V({rootComponent:t,platformRef:n?.platformRef},nj(e));return $S(r)}function nj(t){return{appProviders:[...aj,...t?.providers??[]],platformProviders:sj}}function rj(){Kh.makeCurrent()}function ij(){return new An}function oj(){return uv(document),document}var sj=[{provide:bi,useValue:QS},{provide:Rh,useValue:rj,multi:!0},{provide:it,useFactory:oj}];var aj=[{provide:Bc,useValue:"root"},{provide:An,useFactory:ij},{provide:Wh,useClass:rA,multi:!0,deps:[it]},{provide:Wh,useClass:iA,multi:!0,deps:[it]},l_,c_,a_,{provide:Mo,useExisting:l_},{provide:gu,useClass:X2},[]];var oA=(()=>{class t{_doc;constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static \u0275fac=function(r){return new(r||t)(se(it))};static \u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var sA=()=>{};var uA=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},uj=function(t){let e=[],n=0,r=0;for(;n<t.length;){let i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=t[n++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=t[n++],s=t[n++],a=t[n++],u=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{let o=t[n++],s=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},Qh={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){let o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,l=u?t[i+2]:0,h=o>>2,p=(o&3)<<4|a>>4,g=(a&15)<<2|l>>6,y=l&63;u||(y=64,s||(g=64)),r.push(n[h],n[p],n[g],n[y])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(uA(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):uj(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){let o=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;let l=i<t.length?n[t.charAt(i)]:64;++i;let p=i<t.length?n[t.charAt(i)]:64;if(++i,o==null||a==null||l==null||p==null)throw new f_;let g=o<<2|a>>4;if(r.push(g),l!==64){let y=a<<4&240|l>>2;if(r.push(y),p!==64){let w=l<<6&192|p;r.push(w)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},f_=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},lj=function(t){let e=uA(t);return Qh.encodeByteArray(e,!0)},Iu=function(t){return lj(t).replace(/\./g,"")},Yh=function(t){try{return Qh.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function g_(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var dj=()=>g_().__FIREBASE_DEFAULTS__,hj=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},fj=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&Yh(t[1]);return e&&JSON.parse(e)},Zh=()=>{try{return sA()||dj()||hj()||fj()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},m_=t=>{var e,n;return(n=(e=Zh())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},Jh=t=>{let e=m_(t);if(!e)return;let n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},y_=()=>{var t;return(t=Zh())===null||t===void 0?void 0:t.config},v_=t=>{var e;return(e=Zh())===null||e===void 0?void 0:e[`_${t}`]};var Bo=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};function Bn(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function aa(t){return(await fetch(t,{credentials:"include"})).ok}function Xh(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Iu(JSON.stringify(n)),Iu(JSON.stringify(s)),""].join(".")}var Eu={};function pj(){let t={prod:[],emulator:[]};for(let e of Object.keys(Eu))Eu[e]?t.emulator.push(e):t.prod.push(e);return t}function gj(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}var aA=!1;function ca(t,e){if(typeof window>"u"||typeof document>"u"||!Bn(window.location.host)||Eu[t]===e||Eu[t]||aA)return;Eu[t]=e;function n(g){return`__firebase__banner__${g}`}let r="__firebase__banner",o=pj().prod.length>0;function s(){let g=document.getElementById(r);g&&g.remove()}function a(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function u(g,y){g.setAttribute("width","24"),g.setAttribute("id",y),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function l(){let g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{aA=!0,s()},g}function h(g,y){g.setAttribute("id",y),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function p(){let g=gj(r),y=n("text"),w=document.getElementById(y)||document.createElement("span"),k=n("learnmore"),M=document.getElementById(k)||document.createElement("a"),j=n("preprendIcon"),G=document.getElementById(j)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){let W=g.element;a(W),h(M,k);let oe=l();u(G,j),W.append(G,w,M,oe),document.body.appendChild(W)}o?(w.innerText="Preview backend disconnected.",G.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(G.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,w.innerText="Preview backend running in this workspace."),w.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}function wt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function lA(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(wt())}function mj(){var t;let e=(t=Zh())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function dA(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function hA(){let t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function fA(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function pA(){let t=wt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function gA(){return!mj()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function wu(){try{return typeof indexedDB=="object"}catch{return!1}}function mA(){return new Promise((t,e)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}var yj="FirebaseError",Qt=class t extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=yj,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Un.prototype.create)}},Un=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){let r=n[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?vj(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new Qt(i,a,r)}};function vj(t,e){return t.replace(_j,(n,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var _j=/\{\$([^}]+)}/g;function yA(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function ar(t,e){if(t===e)return!0;let n=Object.keys(t),r=Object.keys(e);for(let i of n){if(!r.includes(i))return!1;let o=t[i],s=e[i];if(cA(o)&&cA(s)){if(!ar(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function cA(t){return t!==null&&typeof t=="object"}function ua(t){let e=[];for(let[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function vA(t,e){let n=new p_(t,e);return n.subscribe.bind(n)}var p_=class{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");Ej(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=h_),i.error===void 0&&(i.error=h_),i.complete===void 0&&(i.complete=h_);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function Ej(t,e){if(typeof t!="object"||t===null)return!1;for(let n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function h_(){}var Boe=14400*1e3;function ke(t){return t&&t._delegate?t._delegate:t}var Nt=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var $o="[DEFAULT]";var __=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let r=new Bo;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(wj(e))try{this.getOrInitializeService({instanceIdentifier:$o})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=$o){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){let e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=$o){return this.instances.has(e)}getOptions(e=$o){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[o,s]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(e,n){var r;let i=this.normalizeInstanceIdentifier(n),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);let s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Ij(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=$o){return this.component?this.component.multipleInstances?e:$o:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function Ij(t){return t===$o?void 0:t}function wj(t){return t.instantiationMode==="EAGER"}var ef=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new __(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var bj=[],pe=(function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t})(pe||{}),Dj={debug:pe.DEBUG,verbose:pe.VERBOSE,info:pe.INFO,warn:pe.WARN,error:pe.ERROR,silent:pe.SILENT},Tj=pe.INFO,Cj={[pe.DEBUG]:"log",[pe.VERBOSE]:"log",[pe.INFO]:"info",[pe.WARN]:"warn",[pe.ERROR]:"error"},Sj=(t,e,...n)=>{if(e<t.logLevel)return;let r=new Date().toISOString(),i=Cj[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},cr=class{constructor(e){this.name=e,this._logLevel=Tj,this._logHandler=Sj,this._userLogHandler=null,bj.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in pe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Dj[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,pe.DEBUG,...e),this._logHandler(this,pe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,pe.VERBOSE,...e),this._logHandler(this,pe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,pe.INFO,...e),this._logHandler(this,pe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,pe.WARN,...e),this._logHandler(this,pe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,pe.ERROR,...e),this._logHandler(this,pe.ERROR,...e)}};var Aj=(t,e)=>e.some(n=>t instanceof n),_A,EA;function Rj(){return _A||(_A=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function xj(){return EA||(EA=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var IA=new WeakMap,I_=new WeakMap,wA=new WeakMap,E_=new WeakMap,b_=new WeakMap;function Nj(t){let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",s)},o=()=>{n(ur(t.result)),i()},s=()=>{r(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",s)});return e.then(n=>{n instanceof IDBCursor&&IA.set(n,t)}).catch(()=>{}),b_.set(e,t),e}function Mj(t){if(I_.has(t))return;let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",s),t.removeEventListener("abort",s)},o=()=>{n(),i()},s=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",s),t.addEventListener("abort",s)});I_.set(t,e)}var w_={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return I_.get(t);if(e==="objectStoreNames")return t.objectStoreNames||wA.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ur(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function bA(t){w_=t(w_)}function kj(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let r=t.call(tf(this),e,...n);return wA.set(r,e.sort?e.sort():[e]),ur(r)}:xj().includes(t)?function(...e){return t.apply(tf(this),e),ur(IA.get(this))}:function(...e){return ur(t.apply(tf(this),e))}}function Pj(t){return typeof t=="function"?kj(t):(t instanceof IDBTransaction&&Mj(t),Aj(t,Rj())?new Proxy(t,w_):t)}function ur(t){if(t instanceof IDBRequest)return Nj(t);if(E_.has(t))return E_.get(t);let e=Pj(t);return e!==t&&(E_.set(t,e),b_.set(e,t)),e}var tf=t=>b_.get(t);function TA(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(t,e),a=ur(s);return r&&s.addEventListener("upgradeneeded",u=>{r(ur(s.result),u.oldVersion,u.newVersion,ur(s.transaction),u)}),n&&s.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{o&&u.addEventListener("close",()=>o()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var Oj=["get","getKey","getAll","getAllKeys","count"],Fj=["put","add","delete","clear"],D_=new Map;function DA(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(D_.get(e))return D_.get(e);let n=e.replace(/FromIndex$/,""),r=e!==n,i=Fj.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||Oj.includes(n)))return;let o=async function(s,...a){let u=this.transaction(s,i?"readwrite":"readonly"),l=u.store;return r&&(l=l.index(a.shift())),(await Promise.all([l[n](...a),i&&u.done]))[0]};return D_.set(e,o),o}bA(t=>Z(V({},t),{get:(e,n,r)=>DA(e,n)||t.get(e,n,r),has:(e,n)=>!!DA(e,n)||t.has(e,n)}));var C_=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Lj(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function Lj(t){let e=t.getComponent();return e?.type==="VERSION"}var S_="@firebase/app",CA="0.13.2";var qr=new cr("@firebase/app"),Vj="@firebase/app-compat",jj="@firebase/analytics-compat",Uj="@firebase/analytics",Bj="@firebase/app-check-compat",$j="@firebase/app-check",Hj="@firebase/auth",qj="@firebase/auth-compat",zj="@firebase/database",Gj="@firebase/data-connect",Wj="@firebase/database-compat",Kj="@firebase/functions",Qj="@firebase/functions-compat",Yj="@firebase/installations",Zj="@firebase/installations-compat",Jj="@firebase/messaging",Xj="@firebase/messaging-compat",eU="@firebase/performance",tU="@firebase/performance-compat",nU="@firebase/remote-config",rU="@firebase/remote-config-compat",iU="@firebase/storage",oU="@firebase/storage-compat",sU="@firebase/firestore",aU="@firebase/ai",cU="@firebase/firestore-compat",uU="firebase",lU="11.10.0";var A_="[DEFAULT]",dU={[S_]:"fire-core",[Vj]:"fire-core-compat",[Uj]:"fire-analytics",[jj]:"fire-analytics-compat",[$j]:"fire-app-check",[Bj]:"fire-app-check-compat",[Hj]:"fire-auth",[qj]:"fire-auth-compat",[zj]:"fire-rtdb",[Gj]:"fire-data-connect",[Wj]:"fire-rtdb-compat",[Kj]:"fire-fn",[Qj]:"fire-fn-compat",[Yj]:"fire-iid",[Zj]:"fire-iid-compat",[Jj]:"fire-fcm",[Xj]:"fire-fcm-compat",[eU]:"fire-perf",[tU]:"fire-perf-compat",[nU]:"fire-rc",[rU]:"fire-rc-compat",[iU]:"fire-gcs",[oU]:"fire-gcs-compat",[sU]:"fire-fst",[cU]:"fire-fst-compat",[aU]:"fire-vertex","fire-js":"fire-js",[uU]:"fire-js-all"};var bu=new Map,hU=new Map,R_=new Map;function SA(t,e){try{t.container.addComponent(e)}catch(n){qr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function hn(t){let e=t.name;if(R_.has(e))return qr.debug(`There were multiple attempts to register component ${e}.`),!1;R_.set(e,t);for(let n of bu.values())SA(n,t);for(let n of hU.values())SA(n,t);return!0}function Mi(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Yt(t){return t==null?!1:t.settings!==void 0}var fU={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ni=new Un("app","Firebase",fU);var x_=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Nt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ni.create("app-deleted",{appName:this._name})}};var lr=lU;function k_(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let r=Object.assign({name:A_,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw Ni.create("bad-app-name",{appName:String(i)});if(n||(n=y_()),!n)throw Ni.create("no-options");let o=bu.get(i);if(o){if(ar(n,o.options)&&ar(r,o.config))return o;throw Ni.create("duplicate-app",{appName:i})}let s=new ef(i);for(let u of R_.values())s.addComponent(u);let a=new x_(n,r,s);return bu.set(i,a),a}function zr(t=A_){let e=bu.get(t);if(!e&&t===A_&&y_())return k_();if(!e)throw Ni.create("no-app",{appName:t});return e}function nf(){return Array.from(bu.values())}function Me(t,e,n){var r;let i=(r=dU[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);let o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){let a=[`Unable to register library "${i}" with version "${e}":`];o&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),qr.warn(a.join(" "));return}hn(new Nt(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var pU="firebase-heartbeat-database",gU=1,Du="firebase-heartbeat-store",T_=null;function NA(){return T_||(T_=TA(pU,gU,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Du)}catch(n){console.warn(n)}}}}).catch(t=>{throw Ni.create("idb-open",{originalErrorMessage:t.message})})),T_}async function mU(t){try{let n=(await NA()).transaction(Du),r=await n.objectStore(Du).get(MA(t));return await n.done,r}catch(e){if(e instanceof Qt)qr.warn(e.message);else{let n=Ni.create("idb-get",{originalErrorMessage:e?.message});qr.warn(n.message)}}}async function AA(t,e){try{let r=(await NA()).transaction(Du,"readwrite");await r.objectStore(Du).put(e,MA(t)),await r.done}catch(n){if(n instanceof Qt)qr.warn(n.message);else{let r=Ni.create("idb-set",{originalErrorMessage:n?.message});qr.warn(r.message)}}}function MA(t){return`${t.name}!${t.options.appId}`}var yU=1024,vU=30,N_=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new M_(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=RA();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats.length>vU){let s=EU(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){qr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let n=RA(),{heartbeatsToSend:r,unsentEntries:i}=_U(this._heartbeatsCache.heartbeats),o=Iu(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return qr.warn(n),""}}};function RA(){return new Date().toISOString().substring(0,10)}function _U(t,e=yU){let n=[],r=t.slice();for(let i of t){let o=n.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),xA(n)>e){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),xA(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var M_=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return wu()?mA().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){let n=await mU(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){let i=await this.read();return AA(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){let i=await this.read();return AA(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}};function xA(t){return Iu(JSON.stringify({version:2,heartbeats:t})).length}function EU(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}function IU(t){hn(new Nt("platform-logger",e=>new C_(e),"PRIVATE")),hn(new Nt("heartbeat",e=>new N_(e),"PRIVATE")),Me(S_,CA,t),Me(S_,CA,"esm2017"),Me("fire-js","")}IU("");var wU="firebase",bU="11.10.0";Me(wU,bU,"app");function kA(t){t===void 0&&(t=R(Oe));let e=t.get(Ao);return n=>new ce(r=>{let i=e.add(),o=!1;function s(){o||(i(),o=!0)}let a=n.subscribe({next:u=>{r.next(u),s()},complete:()=>{r.complete(),s()},error:u=>{r.error(u),s()}});return a.add(()=>{r.unsubscribe(),s()}),a})}var dr=new fi("ANGULARFIRE2_VERSION");function qo(t,e,n){if(e){if(e.length===1)return e[0];let o=e.filter(s=>s.app===n);if(o.length===1)return o[0]}return n.container.getProvider(t).getImmediate({optional:!0})}var ki=(t,e)=>{let n=e?[e]:nf(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},la=(function(t){return t[t.SILENT=0]="SILENT",t[t.WARN=1]="WARN",t[t.VERBOSE=2]="VERBOSE",t})(la||{}),PA=Qv()&&typeof Zone<"u"?la.WARN:la.SILENT;var rf=class{zone;delegate;constructor(e,n=um){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){let i=this.zone,o=function(s){i?i.runGuarded(()=>{e.apply(this,[s])}):e.apply(this,[s])};return this.delegate.schedule(o,n,r)}},hr=(()=>{class t{outsideAngular;insideAngular;constructor(){let n=R(be);this.outsideAngular=n.runOutsideAngular(()=>new rf(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=n.run(()=>new rf(typeof Zone>"u"?void 0:Zone.current,cm))}static \u0275fac=function(r){return new(r||t)};static \u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),OA=!1;function DU(t,e){!OA&&(PA>la.SILENT||Qv())&&(OA=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),PA>=e&&console.warn(`Firebase API called outside injection context: ${t.name}`)}function TU(t){let e=R(be,{optional:!0});return e?e.runOutsideAngular(()=>t()):t()}function Ho(t){let e=R(be,{optional:!0});return e?e.run(()=>t()):t()}var CU=(t,e,n)=>(...r)=>(e&&setTimeout(e,0),ht(n,()=>Ho(()=>t.apply(void 0,r)))),Ve=(t,e,n)=>(n||=e?la.WARN:la.VERBOSE,function(){let r,i=arguments,o,s,a;try{o=R(hr),s=R(Ao),a=R(nt)}catch{return DU(t,n),t.apply(this,i)}for(let l=0;l<arguments.length;l++)typeof i[l]=="function"&&(e&&(r||=Ho(()=>s.add())),i[l]=CU(i[l],r,a));let u=TU(()=>t.apply(this,i));return e?u instanceof ce?u.pipe(di(o.outsideAngular),li(o.insideAngular),kA(a)):u instanceof Promise?Ho(()=>{let l=s.add();return new Promise((h,p)=>{u.then(g=>ht(a,()=>Ho(()=>h(g))),g=>ht(a,()=>Ho(()=>p(g)))).finally(l)})}):typeof u=="function"&&r?function(){return setTimeout(r,0),u.apply(this,arguments)}:Ho(()=>u):u instanceof ce?u.pipe(di(o.outsideAngular),li(o.insideAngular)):Ho(()=>u)});var $n=class{constructor(e){return e}},Gr=class{constructor(){return nf()}};function SU(t){return t&&t.length===1?t[0]:new $n(zr())}var P_=new q("angularfire2._apps"),AU={provide:$n,useFactory:SU,deps:[[new vt,P_]]},RU={provide:Gr,deps:[[new vt,P_]]};function xU(t){return(e,n)=>{let r=n.get(bi);Me("angularfire",dr.full,"core"),Me("angularfire",dr.full,"app"),Me("angular",Cm.full,r.toString());let i=e.runOutsideAngular(()=>t(n));return new $n(i)}}function FA(t,...e){return Gt([AU,RU,{provide:P_,useFactory:xU(t),multi:!0,deps:[be,Oe,hr,...e]}])}var LA=Ve(k_,!0);var NU=new Map,MU={activated:!1,tokenObservers:[]},kU={initialized:!1,enabled:!1};function Hn(t){return NU.get(t)||Object.assign({},MU)}function BA(){return kU}var PU="https://content-firebaseappcheck.googleapis.com/v1";var OU="exchangeDebugToken",VA={OFFSET_DURATION:300*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:960*1e3},Bse=1440*60*1e3;var L_=class{constructor(e,n,r,i,o){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(e){this.stop();try{this.pending=new Bo,this.pending.promise.catch(n=>{}),await FU(this.getNextRun(e)),this.pending.resolve(),await this.pending.promise,this.pending=new Bo,this.pending.promise.catch(n=>{}),await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}};function FU(t){return new Promise(e=>{setTimeout(e,t)})}var LU={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},Pi=new Un("appCheck","AppCheck",LU);function $A(t){if(!Hn(t).activated)throw Pi.create("use-before-activation",{appName:t.name})}async function HA({url:t,body:e},n){let r={"Content-Type":"application/json"},i=n.getImmediate({optional:!0});if(i){let p=await i.getHeartbeatsHeader();p&&(r["X-Firebase-Client"]=p)}let o={method:"POST",body:JSON.stringify(e),headers:r},s;try{s=await fetch(t,o)}catch(p){throw Pi.create("fetch-network-error",{originalErrorMessage:p?.message})}if(s.status!==200)throw Pi.create("fetch-status-error",{httpStatus:s.status});let a;try{a=await s.json()}catch(p){throw Pi.create("fetch-parse-error",{originalErrorMessage:p?.message})}let u=a.ttl.match(/^([\d.]+)(s)$/);if(!u||!u[2]||isNaN(Number(u[1])))throw Pi.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});let l=Number(u[1])*1e3,h=Date.now();return{token:a.token,expireTimeMillis:h+l,issuedAtTimeMillis:h}}function qA(t,e){let{projectId:n,appId:r,apiKey:i}=t.options;return{url:`${PU}/projects/${n}/apps/${r}:${OU}?key=${i}`,body:{debug_token:e}}}var VU="firebase-app-check-database",jU=1,V_="firebase-app-check-store";var of=null;function UU(){return of||(of=new Promise((t,e)=>{try{let n=indexedDB.open(VU,jU);n.onsuccess=r=>{t(r.target.result)},n.onerror=r=>{var i;e(Pi.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},n.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(V_,{keyPath:"compositeKey"})}}}catch(n){e(Pi.create("storage-open",{originalErrorMessage:n?.message}))}}),of)}function BU(t,e){return $U(HU(t),e)}async function $U(t,e){let r=(await UU()).transaction(V_,"readwrite"),o=r.objectStore(V_).put({compositeKey:t,value:e});return new Promise((s,a)=>{o.onsuccess=u=>{s()},r.onerror=u=>{var l;a(Pi.create("storage-set",{originalErrorMessage:(l=u.target.error)===null||l===void 0?void 0:l.message}))}})}function HU(t){return`${t.options.appId}-${t.name}`}var Tu=new cr("@firebase/app-check");function O_(t,e){return wu()?BU(t,e).catch(n=>{Tu.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}function zA(){return BA().enabled}async function GA(){let t=BA();if(t.enabled&&t.token)return t.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)}var qU={error:"UNKNOWN_ERROR"};function zU(t){return Qh.encodeString(JSON.stringify(t),!1)}async function j_(t,e=!1,n=!1){let r=t.app;$A(r);let i=Hn(r),o=i.token,s;if(o&&!Cu(o)&&(i.token=void 0,o=void 0),!o){let l=await i.cachedTokenPromise;l&&(Cu(l)?o=l:await O_(r,void 0))}if(!e&&o&&Cu(o))return{token:o.token};let a=!1;if(zA())try{i.exchangeTokenPromise||(i.exchangeTokenPromise=HA(qA(r,await GA()),t.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),a=!0);let l=await i.exchangeTokenPromise;return await O_(r,l),i.token=l,{token:l.token}}catch(l){return l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?Tu.warn(l.message):n&&Tu.error(l),F_(l)}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),a=!0),o=await Hn(r).exchangeTokenPromise}catch(l){l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?Tu.warn(l.message):n&&Tu.error(l),s=l}let u;return o?s?Cu(o)?u={token:o.token,internalError:s}:u=F_(s):(u={token:o.token},i.token=o,await O_(r,o)):u=F_(s),a&&QU(r,u),u}async function GU(t){let e=t.app;$A(e);let{provider:n}=Hn(e);if(zA()){let r=await GA(),{token:i}=await HA(qA(e,r),t.heartbeatServiceProvider);return{token:i}}else{let{token:r}=await n.getToken();return{token:r}}}function WU(t,e,n,r){let{app:i}=t,o=Hn(i),s={next:n,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&Cu(o.token)){let a=o.token;Promise.resolve().then(()=>{n({token:a.token}),jA(t)}).catch(()=>{})}o.cachedTokenPromise.then(()=>jA(t))}function WA(t,e){let n=Hn(t),r=n.tokenObservers.filter(i=>i.next!==e);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function jA(t){let{app:e}=t,n=Hn(e),r=n.tokenRefresher;r||(r=KU(t),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function KU(t){let{app:e}=t;return new L_(async()=>{let n=Hn(e),r;if(n.token?r=await j_(t,!0):r=await j_(t),r.error)throw r.error;if(r.internalError)throw r.internalError},()=>!0,()=>{let n=Hn(e);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5,i=n.token.expireTimeMillis-300*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},VA.RETRIAL_MIN_WAIT,VA.RETRIAL_MAX_WAIT)}function QU(t,e){let n=Hn(t).tokenObservers;for(let r of n)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function Cu(t){return t.expireTimeMillis-Date.now()>0}function F_(t){return{token:zU(qU),error:t}}var U_=class{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){let{tokenObservers:e}=Hn(this.app);for(let n of e)WA(this.app,n.next);return Promise.resolve()}};function YU(t,e){return new U_(t,e)}function ZU(t){return{getToken:e=>j_(t,e),getLimitedUseToken:()=>GU(t),addTokenListener:e=>WU(t,"INTERNAL",e),removeTokenListener:e=>WA(t.app,e)}}var JU="@firebase/app-check",XU="0.10.1";var eB="app-check",UA="app-check-internal";function tB(){hn(new Nt(eB,t=>{let e=t.getProvider("app").getImmediate(),n=t.getProvider("heartbeat");return YU(e,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(UA).initialize()})),hn(new Nt(UA,t=>{let e=t.getProvider("app-check").getImmediate();return ZU(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Me(JU,XU)}tB();var nB="app-check";var Oi=class{constructor(){return ki(nB)}};var rB=["localhost","0.0.0.0","127.0.0.1"],Xse=typeof window<"u"&&rB.includes(window.location.hostname);function cR(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var uR=cR,lR=new Un("auth","Firebase",cR());var df=new cr("@firebase/auth");function iB(t,...e){df.logLevel<=pe.WARN&&df.warn(`Auth (${lr}): ${t}`,...e)}function af(t,...e){df.logLevel<=pe.ERROR&&df.error(`Auth (${lr}): ${t}`,...e)}function pr(t,...e){throw iE(t,...e)}function qn(t,...e){return iE(t,...e)}function rE(t,e,n){let r=Object.assign(Object.assign({},uR()),{[e]:n});return new Un("auth","Firebase",r).create(e,{appName:t.name})}function zo(t){return rE(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function oB(t,e,n){let r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&pr(t,"argument-error"),rE(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function iE(t,...e){if(typeof t!="string"){let n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return lR.create(t,...e)}function ee(t,e,...n){if(!t)throw iE(e,...n)}function Wr(t){let e="INTERNAL ASSERTION FAILED: "+t;throw af(e),new Error(e)}function Qr(t,e){t||Wr(e)}function H_(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function sB(){return KA()==="http:"||KA()==="https:"}function KA(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}function aB(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(sB()||hA()||"connection"in navigator)?navigator.onLine:!0}function cB(){if(typeof navigator>"u")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}var Go=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,Qr(n>e,"Short delay should be less than long delay!"),this.isMobile=lA()||fA()}get(){return aB()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function oE(t,e){Qr(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var hf=class{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Wr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Wr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Wr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var uB={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var lB=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],dB=new Go(3e4,6e4);function sE(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function ha(t,e,n,r,i={}){return dR(t,i,async()=>{let o={},s={};r&&(e==="GET"?s=r:o={body:JSON.stringify(r)});let a=ua(Object.assign({key:t.config.apiKey},s)).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);let l=Object.assign({method:e,headers:u},o);return dA()||(l.referrerPolicy="no-referrer"),t.emulatorConfig&&Bn(t.emulatorConfig.host)&&(l.credentials="include"),hf.fetch()(await hR(t,t.config.apiHost,n,a),l)})}async function dR(t,e,n){t._canInitEmulator=!1;let r=Object.assign(Object.assign({},uB),e);try{let i=new q_(t),o=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();let s=await o.json();if("needConfirmation"in s)throw sf(t,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let a=o.ok?s.errorMessage:s.error.message,[u,l]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw sf(t,"credential-already-in-use",s);if(u==="EMAIL_EXISTS")throw sf(t,"email-already-in-use",s);if(u==="USER_DISABLED")throw sf(t,"user-disabled",s);let h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw rE(t,h,l);pr(t,h)}}catch(i){if(i instanceof Qt)throw i;pr(t,"network-request-failed",{message:String(i)})}}async function hB(t,e,n,r,i={}){let o=await ha(t,e,n,r,i);return"mfaPendingCredential"in o&&pr(t,"multi-factor-auth-required",{_serverResponse:o}),o}async function hR(t,e,n,r){let i=`${e}${n}?${r}`,o=t,s=o.config.emulator?oE(t.config,i):`${t.config.apiScheme}://${i}`;return lB.includes(n)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(s).toString():s}var q_=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(qn(this.auth,"network-request-failed")),dB.get())})}};function sf(t,e,n){let r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=qn(t,e,r);return i.customData._tokenResponse=n,i}async function fB(t,e){return ha(t,"POST","/v1/accounts:delete",e)}async function ff(t,e){return ha(t,"POST","/v1/accounts:lookup",e)}function Su(t){if(t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function aE(t,e=!1){let n=ke(t),r=await n.getIdToken(e),i=cE(r);ee(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:Su(B_(i.auth_time)),issuedAtTime:Su(B_(i.iat)),expirationTime:Su(B_(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}}function B_(t){return Number(t)*1e3}function cE(t){let[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return af("JWT malformed, contained fewer than 3 sections"),null;try{let i=Yh(n);return i?JSON.parse(i):(af("Failed to decode base64 JWT payload"),null)}catch(i){return af("Caught error parsing JWT payload as JSON",i?.toString()),null}}function QA(t){let e=cE(t);return ee(e,"internal-error"),ee(typeof e.exp<"u","internal-error"),ee(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Ru(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Qt&&pB(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function pB({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}var z_=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}};var xu=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Su(this.lastLoginAt),this.creationTime=Su(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};async function pf(t){var e;let n=t.auth,r=await t.getIdToken(),i=await Ru(t,ff(n,{idToken:r}));ee(i?.users.length,n,"internal-error");let o=i.users[0];t._notifyReloadListener(o);let s=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?fR(o.providerUserInfo):[],a=gB(t.providerData,s),u=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!a?.length,h=u?l:!1,p={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new xu(o.createdAt,o.lastLoginAt),isAnonymous:h};Object.assign(t,p)}async function uE(t){let e=ke(t);await pf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function gB(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function fR(t){return t.map(e=>{var{providerId:n}=e,r=yd(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}async function mB(t,e){let n=await dR(t,{},async()=>{let r=ua({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=t.config,s=await hR(t,i,"/v1/token",`key=${o}`),a=await t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let u={method:"POST",headers:a,body:r};return t.emulatorConfig&&Bn(t.emulatorConfig.host)&&(u.credentials="include"),hf.fetch()(s,u)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function yB(t,e){return ha(t,"POST","/v2/accounts:revokeToken",sE(t,e))}var Au=class t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ee(e.idToken,"internal-error"),ee(typeof e.idToken<"u","internal-error"),ee(typeof e.refreshToken<"u","internal-error");let n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):QA(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ee(e.length!==0,"internal-error");let n=QA(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ee(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){let{accessToken:r,refreshToken:i,expiresIn:o}=await mB(e,n);this.updateTokensAndExpiration(r,i,Number(o))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){let{refreshToken:r,accessToken:i,expirationTime:o}=n,s=new t;return r&&(ee(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(ee(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(ee(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new t,this.toJSON())}_performRefresh(){return Wr("not implemented")}};function Fi(t,e){ee(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}var Li=class t{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,o=yd(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new z_(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new xu(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){let n=await Ru(this,this.stsTokenManager.getToken(this.auth,e));return ee(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return aE(this,e)}reload(){return uE(this)}_assign(e){this!==e&&(ee(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let n=new t(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ee(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await pf(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Yt(this.auth.app))return Promise.reject(zo(this.auth));let e=await this.getIdToken();return await Ru(this,fB(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,o,s,a,u,l,h;let p=(r=n.displayName)!==null&&r!==void 0?r:void 0,g=(i=n.email)!==null&&i!==void 0?i:void 0,y=(o=n.phoneNumber)!==null&&o!==void 0?o:void 0,w=(s=n.photoURL)!==null&&s!==void 0?s:void 0,k=(a=n.tenantId)!==null&&a!==void 0?a:void 0,M=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,j=(l=n.createdAt)!==null&&l!==void 0?l:void 0,G=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:W,emailVerified:oe,isAnonymous:Xe,providerData:Ie,stsTokenManager:b}=n;ee(W&&b,e,"internal-error");let v=Au.fromJSON(this.name,b);ee(typeof W=="string",e,"internal-error"),Fi(p,e.name),Fi(g,e.name),ee(typeof oe=="boolean",e,"internal-error"),ee(typeof Xe=="boolean",e,"internal-error"),Fi(y,e.name),Fi(w,e.name),Fi(k,e.name),Fi(M,e.name),Fi(j,e.name),Fi(G,e.name);let E=new t({uid:W,auth:e,email:g,emailVerified:oe,displayName:p,isAnonymous:Xe,photoURL:w,phoneNumber:y,tenantId:k,stsTokenManager:v,createdAt:j,lastLoginAt:G});return Ie&&Array.isArray(Ie)&&(E.providerData=Ie.map(I=>Object.assign({},I))),M&&(E._redirectEventId=M),E}static async _fromIdTokenResponse(e,n,r=!1){let i=new Au;i.updateFromServerResponse(n);let o=new t({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await pf(o),o}static async _fromGetAccountInfoResponse(e,n,r){let i=n.users[0];ee(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?fR(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,a=new Au;a.updateFromIdToken(r);let u=new t({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new xu(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(u,l),u}};var YA=new Map;function Kr(t){Qr(t instanceof Function,"Expected a class definition");let e=YA.get(t);return e?(Qr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,YA.set(t,e),e)}var vB=(()=>{class t{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(n,r){this.storage[n]=r}async _get(n){let r=this.storage[n];return r===void 0?null:r}async _remove(n){delete this.storage[n]}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})(),G_=vB;function cf(t,e,n){return`firebase:${t}:${e}:${n}`}var gf=class t{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=cf(this.userKey,i.apiKey,o),this.fullPersistenceKey=cf("persistence",i.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){let e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let n=await ff(this.auth,{idToken:e}).catch(()=>{});return n?Li._fromGetAccountInfoResponse(this.auth,n,e):null}return Li._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;let n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new t(Kr(G_),e,r);let i=(await Promise.all(n.map(async l=>{if(await l._isAvailable())return l}))).filter(l=>l),o=i[0]||Kr(G_),s=cf(r,e.config.apiKey,e.name),a=null;for(let l of n)try{let h=await l._get(s);if(h){let p;if(typeof h=="string"){let g=await ff(e,{idToken:h}).catch(()=>{});if(!g)break;p=await Li._fromGetAccountInfoResponse(e,g,h)}else p=Li._fromJSON(e,h);l!==o&&(a=p),o=l;break}}catch{}let u=i.filter(l=>l._shouldAllowMigration);return!o._shouldAllowMigration||!u.length?new t(o,e,r):(o=u[0],a&&await o._set(s,a.toJSON()),await Promise.all(n.map(async l=>{if(l!==o)try{await l._remove(s)}catch{}})),new t(o,e,r))}};function ZA(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(yR(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(pR(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(_R(e))return"Blackberry";if(ER(e))return"Webos";if(gR(e))return"Safari";if((e.includes("chrome/")||mR(e))&&!e.includes("edge/"))return"Chrome";if(vR(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function pR(t=wt()){return/firefox\//i.test(t)}function gR(t=wt()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function mR(t=wt()){return/crios\//i.test(t)}function yR(t=wt()){return/iemobile/i.test(t)}function vR(t=wt()){return/android/i.test(t)}function _R(t=wt()){return/blackberry/i.test(t)}function ER(t=wt()){return/webos/i.test(t)}function lE(t=wt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function _B(t=wt()){var e;return lE(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function EB(){return pA()&&document.documentMode===10}function IR(t=wt()){return lE(t)||vR(t)||ER(t)||_R(t)||/windows phone/i.test(t)||yR(t)}function wR(t,e=[]){let n;switch(t){case"Browser":n=ZA(wt());break;case"Worker":n=`${ZA(wt())}-${t}`;break;default:n=t}let r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${lr}/${r}`}var W_=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){let r=o=>new Promise((s,a)=>{try{let u=e(o);s(u)}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;let n=[];try{for(let r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(let i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}};async function IB(t,e={}){return ha(t,"GET","/v2/passwordPolicy",sE(t,e))}var wB=6,K_=class{constructor(e){var n,r,i,o;let s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=s.minPasswordLength)!==null&&n!==void 0?n:wB,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,o,s,a;let u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(o=u.containsUppercaseLetter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(s=u.containsNumericCharacter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(e,n){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var Q_=class{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new mf(this),this.idTokenSubscription=new mf(this),this.beforeStateQueue=new W_(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=lR,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Kr(n)),this._initializationPromise=this.queue(async()=>{var r,i,o;if(!this._deleted&&(this.persistenceManager=await gf.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;let e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{let n=await ff(this,{idToken:e}),r=await Li._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Yt(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(a,a))}):this.directlySetCurrentUser(null)}let r=await this.assertedPersistence.getCurrentUser(),i=r,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();let s=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i?._redirectEventId,u=await this.tryRedirectSignIn(e);(!s||s===a)&&u?.user&&(i=u.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return ee(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await pf(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=cB()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Yt(this.app))return Promise.reject(zo(this));let n=e?ke(e):null;return n&&ee(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ee(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Yt(this.app)?Promise.reject(zo(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Yt(this.app)?Promise.reject(zo(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Kr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){let e=await IB(this),n=new K_(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Un("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){let n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await yB(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){let r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){let n=e&&Kr(e)||this._popupRedirectResolver;ee(n,this,"argument-error"),this.redirectPersistenceManager=await gf.create(this,[Kr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};let o=typeof n=="function"?n:n.next.bind(n),s=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(ee(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof n=="function"){let u=e.addObserver(n,r,i);return()=>{s=!0,u()}}else{let u=e.addObserver(n);return()=>{s=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ee(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=wR(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;let n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);let r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);let i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;if(Yt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n?.error&&iB(`Error while retrieving App Check token: ${n.error}`),n?.token}};function Df(t){return ke(t)}var mf=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=vA(n=>this.observer=n)}get next(){return ee(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var dE={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function bB(t){dE=t}function DB(t){return dE.loadJS(t)}function TB(){return dE.gapiScript}function bR(t){return`__${t}${Math.floor(Math.random()*1e6)}`}function hE(t,e){let n=Mi(t,"auth");if(n.isInitialized()){let i=n.getImmediate(),o=n.getOptions();if(ar(o,e??{}))return i;pr(i,"already-initialized")}return n.initialize({options:e})}function CB(t,e){let n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(Kr);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function fE(t,e,n){let r=Df(t);ee(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!n?.disableWarnings,o=DR(e),{host:s,port:a}=SB(e),u=a===null?"":`:${a}`,l={url:`${o}//${s}${u}/`},h=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){ee(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),ee(ar(l,r.config.emulator)&&ar(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=l,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,Bn(s)?(aa(`${o}//${s}${u}`),ca("Auth",!0)):i||AB()}function DR(t){let e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function SB(t){let e=DR(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};let r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let o=i[1];return{host:o,port:JA(r.substr(o.length+1))}}else{let[o,s]=r.split(":");return{host:o,port:JA(s)}}}function JA(t){if(!t)return null;let e=Number(t);return isNaN(e)?null:e}function AB(){function t(){let e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}var Nu=class{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Wr("not implemented")}_getIdTokenResponse(e){return Wr("not implemented")}_linkToIdToken(e,n){return Wr("not implemented")}_getReauthenticationResolver(e){return Wr("not implemented")}};async function da(t,e){return hB(t,"POST","/v1/accounts:signInWithIdp",sE(t,e))}var RB="http://localhost",yf=class t extends Nu{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){let n=new t(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):pr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){let n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,o=yd(n,["providerId","signInMethod"]);if(!r||!i)return null;let s=new t(r,i);return s.idToken=o.idToken||void 0,s.accessToken=o.accessToken||void 0,s.secret=o.secret,s.nonce=o.nonce,s.pendingToken=o.pendingToken||null,s}_getIdTokenResponse(e){let n=this.buildRequest();return da(e,n)}_linkToIdToken(e,n){let r=this.buildRequest();return r.idToken=n,da(e,r)}_getReauthenticationResolver(e){let n=this.buildRequest();return n.autoCreate=!1,da(e,n)}buildRequest(){let e={requestUri:RB,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{let n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=ua(n)}return e}};var Mu=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var vf=class extends Mu{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var pE=(()=>{class t extends vf{constructor(){super("google.com"),this.addScope("profile")}static credential(n,r){return yf._fromParams({providerId:t.PROVIDER_ID,signInMethod:t.GOOGLE_SIGN_IN_METHOD,idToken:n,accessToken:r})}static credentialFromResult(n){return t.credentialFromTaggedObject(n)}static credentialFromError(n){return t.credentialFromTaggedObject(n.customData||{})}static credentialFromTaggedObject({_tokenResponse:n}){if(!n)return null;let{oauthIdToken:r,oauthAccessToken:i}=n;if(!r&&!i)return null;try{return t.credential(r,i)}catch{return null}}}t.GOOGLE_SIGN_IN_METHOD="google.com",t.PROVIDER_ID="google.com";return t})();var ku=class t{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){let o=await Li._fromIdTokenResponse(e,r,i),s=XA(r);return new t({user:o,providerId:s,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);let i=XA(r);return new t({user:e,providerId:i,_tokenResponse:r,operationType:n})}};function XA(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}var Y_=class t extends Qt{constructor(e,n,r,i){var o;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,t.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new t(e,n,r,i)}};function TR(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Y_._fromErrorAndOperation(t,o,e,r):o})}async function xB(t,e,n=!1){let r=await Ru(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return ku._forOperation(t,"link",r)}async function NB(t,e,n=!1){let{auth:r}=t;if(Yt(r.app))return Promise.reject(zo(r));let i="reauthenticate";try{let o=await Ru(t,TR(r,i,e,t),n);ee(o.idToken,r,"internal-error");let s=cE(o.idToken);ee(s,r,"internal-error");let{sub:a}=s;return ee(t.uid===a,r,"user-mismatch"),ku._forOperation(t,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&pr(r,"user-mismatch"),o}}async function MB(t,e,n=!1){if(Yt(t.app))return Promise.reject(zo(t));let r="signIn",i=await TR(t,r,e),o=await ku._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(o.user),o}function gE(t,e,n,r){return ke(t).onIdTokenChanged(e,n,r)}function mE(t,e,n){return ke(t).beforeAuthStateChanged(e,n)}function yE(t,e,n,r){return ke(t).onAuthStateChanged(e,n,r)}function vE(t){return ke(t).signOut()}var _f="__sak";var Ef=class{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(_f,"1"),this.storage.removeItem(_f),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){let n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var kB=1e3,PB=10,OB=(()=>{class t extends Ef{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(n,r)=>this.onStorageEvent(n,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=IR(),this._shouldAllowMigration=!0}forAllChangedKeys(n){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),o=this.localCache[r];i!==o&&n(r,o,i)}}onStorageEvent(n,r=!1){if(!n.key){this.forAllChangedKeys((a,u,l)=>{this.notifyListeners(a,l)});return}let i=n.key;r?this.detachListener():this.stopPolling();let o=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);EB()&&s!==n.newValue&&n.newValue!==n.oldValue?setTimeout(o,PB):o()}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((n,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:n,oldValue:r,newValue:i}),!0)})},kB)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(n,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[n]||(this.listeners[n]=new Set,this.localCache[n]=this.storage.getItem(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(n,r){await super._set(n,r),this.localCache[n]=JSON.stringify(r)}async _get(n){let r=await super._get(n);return this.localCache[n]=JSON.stringify(r),r}async _remove(n){await super._remove(n),delete this.localCache[n]}}return t.type="LOCAL",t})(),CR=OB;var FB=(()=>{class t extends Ef{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(n,r){}_removeListener(n,r){}}return t.type="SESSION",t})(),_E=FB;function LB(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}var VB=(()=>{class t{constructor(n){this.eventTarget=n,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(n){let r=this.receivers.find(o=>o.isListeningto(n));if(r)return r;let i=new t(n);return this.receivers.push(i),i}isListeningto(n){return this.eventTarget===n}async handleEvent(n){let r=n,{eventId:i,eventType:o,data:s}=r.data,a=this.handlersMap[o];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:o});let u=Array.from(a).map(async h=>h(r.origin,s)),l=await LB(u);r.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:l})}_subscribe(n,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[n]||(this.handlersMap[n]=new Set),this.handlersMap[n].add(r)}_unsubscribe(n,r){this.handlersMap[n]&&r&&this.handlersMap[n].delete(r),(!r||this.handlersMap[n].size===0)&&delete this.handlersMap[n],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}t.receivers=[];return t})();function EE(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}var Z_=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((a,u)=>{let l=EE("",20);i.port1.start();let h=setTimeout(()=>{u(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(p){let g=p;if(g.data.eventId===l)switch(g.data.status){case"ack":clearTimeout(h),o=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),a(g.data.response);break;default:clearTimeout(h),clearTimeout(o),u(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:n},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}};function fr(){return window}function jB(t){fr().location.href=t}function SR(){return typeof fr().WorkerGlobalScope<"u"&&typeof fr().importScripts=="function"}async function UB(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function BB(){var t;return((t=navigator?.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function $B(){return SR()?self:null}var AR="firebaseLocalStorageDb",HB=1,If="firebaseLocalStorage",RR="fbase_key",Wo=class{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}};function Tf(t,e){return t.transaction([If],e?"readwrite":"readonly").objectStore(If)}function qB(){let t=indexedDB.deleteDatabase(AR);return new Wo(t).toPromise()}function J_(){let t=indexedDB.open(AR,HB);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{let r=t.result;try{r.createObjectStore(If,{keyPath:RR})}catch(i){n(i)}}),t.addEventListener("success",async()=>{let r=t.result;r.objectStoreNames.contains(If)?e(r):(r.close(),await qB(),e(await J_()))})})}async function eR(t,e,n){let r=Tf(t,!0).put({[RR]:e,value:n});return new Wo(r).toPromise()}async function zB(t,e){let n=Tf(t,!1).get(e),r=await new Wo(n).toPromise();return r===void 0?null:r.value}function tR(t,e){let n=Tf(t,!0).delete(e);return new Wo(n).toPromise()}var GB=800,WB=3,KB=(()=>{class t{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await J_(),this.db)}async _withRetries(n){let r=0;for(;;)try{let i=await this._openDb();return await n(i)}catch(i){if(r++>WB)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return SR()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=VB._getInstance($B()),this.receiver._subscribe("keyChanged",async(n,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(n,r)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await UB(),!this.activeServiceWorker)return;this.sender=new Z_(this.activeServiceWorker);let i=await this.sender._send("ping",{},800);i&&!((n=i[0])===null||n===void 0)&&n.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(n){if(!(!this.sender||!this.activeServiceWorker||BB()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:n},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;let n=await J_();return await eR(n,_f,"1"),await tR(n,_f),!0}catch{}return!1}async _withPendingWrite(n){this.pendingWrites++;try{await n()}finally{this.pendingWrites--}}async _set(n,r){return this._withPendingWrite(async()=>(await this._withRetries(i=>eR(i,n,r)),this.localCache[n]=r,this.notifyServiceWorker(n)))}async _get(n){let r=await this._withRetries(i=>zB(i,n));return this.localCache[n]=r,r}async _remove(n){return this._withPendingWrite(async()=>(await this._withRetries(r=>tR(r,n)),delete this.localCache[n],this.notifyServiceWorker(n)))}async _poll(){let n=await this._withRetries(o=>{let s=Tf(o,!1).getAll();return new Wo(s).toPromise()});if(!n)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(n.length!==0)for(let{fbase_key:o,value:s}of n)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(s)&&(this.notifyListeners(o,s),r.push(o));for(let o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),r.push(o));return r}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let o of Array.from(i))o(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),GB)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(n,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[n]||(this.listeners[n]=new Set,this._get(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return t.type="LOCAL",t})(),xR=KB;var uae=bR("rcb"),lae=new Go(3e4,6e4);function NR(t,e){return e?Kr(e):(ee(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}var Pu=class extends Nu{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return da(e,this._buildIdpRequest())}_linkToIdToken(e,n){return da(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return da(e,this._buildIdpRequest())}_buildIdpRequest(e){let n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}};function QB(t){return MB(t.auth,new Pu(t),t.bypassAuthState)}function YB(t){let{auth:e,user:n}=t;return ee(n,e,"internal-error"),NB(n,new Pu(t),t.bypassAuthState)}async function ZB(t){let{auth:e,user:n}=t;return ee(n,e,"internal-error"),xB(n,new Pu(t),t.bypassAuthState)}var wf=class{constructor(e,n,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){let{urlResponse:n,sessionId:r,postBody:i,tenantId:o,error:s,type:a}=e;if(s){this.reject(s);return}let u={auth:this.auth,requestUri:n,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(u))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return QB;case"linkViaPopup":case"linkViaRedirect":return ZB;case"reauthViaPopup":case"reauthViaRedirect":return YB;default:pr(this.auth,"internal-error")}}resolve(e){Qr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Qr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var JB=new Go(2e3,1e4);async function IE(t,e,n){if(Yt(t.app))return Promise.reject(qn(t,"operation-not-supported-in-this-environment"));let r=Df(t);oB(t,e,Mu);let i=NR(r,n);return new XB(r,"signInViaPopup",e,i).executeNotNull()}var XB=(()=>{class t extends wf{constructor(n,r,i,o,s){super(n,r,o,s),this.provider=i,this.authWindow=null,this.pollId=null,t.currentPopupAction&&t.currentPopupAction.cancel(),t.currentPopupAction=this}async executeNotNull(){let n=await this.execute();return ee(n,this.auth,"internal-error"),n}async onExecution(){Qr(this.filter.length===1,"Popup operations only handle one event");let n=EE();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],n),this.authWindow.associatedEvent=n,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(qn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var n;return((n=this.authWindow)===null||n===void 0?void 0:n.associatedEvent)||null}cancel(){this.reject(qn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,t.currentPopupAction=null}pollUserCancellation(){let n=()=>{var r,i;if(!((i=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(qn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(n,JB.get())};n()}}t.currentPopupAction=null;return t})(),e$="pendingRedirect",uf=new Map,X_=class extends wf{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=uf.get(this.auth._key());if(!e){try{let r=await t$(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}uf.set(this.auth._key(),e)}return this.bypassAuthState||uf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}};async function t$(t,e){let n=i$(e),r=r$(t);if(!await r._isAvailable())return!1;let i=await r._get(n)==="true";return await r._remove(n),i}function n$(t,e){uf.set(t._key(),e)}function r$(t){return Kr(t._redirectPersistence)}function i$(t){return cf(e$,t.config.apiKey,t.name)}async function o$(t,e,n=!1){if(Yt(t.app))return Promise.reject(zo(t));let r=Df(t),i=NR(r,e),s=await new X_(r,i,n).execute();return s&&!n&&(delete s.user._redirectEventId,await r._persistUserIfCurrent(s.user),await r._setRedirectUser(null,e)),s}var s$=600*1e3,eE=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!a$(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!MR(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(qn(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){let r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=s$&&this.cachedEventUids.clear(),this.cachedEventUids.has(nR(e))}saveEventToCache(e){this.cachedEventUids.add(nR(e)),this.lastProcessedEventTime=Date.now()}};function nR(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function MR({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function a$(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return MR(t);default:return!1}}async function c$(t,e={}){return ha(t,"GET","/v1/projects",e)}var u$=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,l$=/^https?/;async function d$(t){if(t.config.emulator)return;let{authorizedDomains:e}=await c$(t);for(let n of e)try{if(h$(n))return}catch{}pr(t,"unauthorized-domain")}function h$(t){let e=H_(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){let s=new URL(t);return s.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&s.hostname===r}if(!l$.test(n))return!1;if(u$.test(t))return r===t;let i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var f$=new Go(3e4,6e4);function rR(){let t=fr().___jsl;if(t?.H){for(let e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function p$(t){return new Promise((e,n)=>{var r,i,o;function s(){rR(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{rR(),n(qn(t,"network-request-failed"))},timeout:f$.get()})}if(!((i=(r=fr().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=fr().gapi)===null||o===void 0)&&o.load)s();else{let a=bR("iframefcb");return fr()[a]=()=>{gapi.load?s():n(qn(t,"network-request-failed"))},DB(`${TB()}?onload=${a}`).catch(u=>n(u))}}).catch(e=>{throw lf=null,e})}var lf=null;function g$(t){return lf=lf||p$(t),lf}var m$=new Go(5e3,15e3),y$="__/auth/iframe",v$="emulator/auth/iframe",_$={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},E$=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function I$(t){let e=t.config;ee(e.authDomain,t,"auth-domain-config-required");let n=e.emulator?oE(e,v$):`https://${t.config.authDomain}/${y$}`,r={apiKey:e.apiKey,appName:t.name,v:lr},i=E$.get(t.config.apiHost);i&&(r.eid=i);let o=t._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${ua(r).slice(1)}`}async function w$(t){let e=await g$(t),n=fr().gapi;return ee(n,t,"internal-error"),e.open({where:document.body,url:I$(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:_$,dontclear:!0},r=>new Promise(async(i,o)=>{await r.restyle({setHideOnLeave:!1});let s=qn(t,"network-request-failed"),a=fr().setTimeout(()=>{o(s)},m$.get());function u(){fr().clearTimeout(a),i(r)}r.ping(u).then(u,()=>{o(s)})}))}var b$={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},D$=500,T$=600,C$="_blank",S$="http://localhost",bf=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function A$(t,e,n,r=D$,i=T$){let o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",u=Object.assign(Object.assign({},b$),{width:r.toString(),height:i.toString(),top:o,left:s}),l=wt().toLowerCase();n&&(a=mR(l)?C$:n),pR(l)&&(e=e||S$,u.scrollbars="yes");let h=Object.entries(u).reduce((g,[y,w])=>`${g}${y}=${w},`,"");if(_B(l)&&a!=="_self")return R$(e||"",a),new bf(null);let p=window.open(e||"",a,h);ee(p,t,"popup-blocked");try{p.focus()}catch{}return new bf(p)}function R$(t,e){let n=document.createElement("a");n.href=t,n.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var x$="__/auth/handler",N$="emulator/auth/handler",M$=encodeURIComponent("fac");async function iR(t,e,n,r,i,o){ee(t.config.authDomain,t,"auth-domain-config-required"),ee(t.config.apiKey,t,"invalid-api-key");let s={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:lr,eventId:i};if(e instanceof Mu){e.setDefaultLanguage(t.languageCode),s.providerId=e.providerId||"",yA(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(let[h,p]of Object.entries(o||{}))s[h]=p}if(e instanceof vf){let h=e.getScopes().filter(p=>p!=="");h.length>0&&(s.scopes=h.join(","))}t.tenantId&&(s.tid=t.tenantId);let a=s;for(let h of Object.keys(a))a[h]===void 0&&delete a[h];let u=await t._getAppCheckToken(),l=u?`#${M$}=${encodeURIComponent(u)}`:"";return`${k$(t)}?${ua(a).slice(1)}${l}`}function k$({config:t}){return t.emulator?oE(t,N$):`https://${t.authDomain}/${x$}`}var $_="webStorageSupport",tE=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=_E,this._completeRedirectFn=o$,this._overrideRedirectResult=n$}async _openPopup(e,n,r,i){var o;Qr((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");let s=await iR(e,n,r,H_(),i);return A$(e,s,EE())}async _openRedirect(e,n,r,i){await this._originValidation(e);let o=await iR(e,n,r,H_(),i);return jB(o),new Promise(()=>{})}_initialize(e){let n=e._key();if(this.eventManagers[n]){let{manager:i,promise:o}=this.eventManagers[n];return i?Promise.resolve(i):(Qr(o,"If manager is not set, promise should be"),o)}let r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){let n=await w$(e),r=new eE(e);return n.register("authEvent",i=>(ee(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send($_,{type:$_},i=>{var o;let s=(o=i?.[0])===null||o===void 0?void 0:o[$_];s!==void 0&&n(!!s),pr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=d$(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return IR()||gR()||lE()}},kR=tE;var oR="@firebase/auth",sR="1.10.8";var nE=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ee(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function P$(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function O$(t){hn(new Nt("auth",(e,{options:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;ee(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let u={apiKey:s,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:wR(t)},l=new Q_(r,i,o,u);return CB(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),hn(new Nt("auth-internal",e=>{let n=Df(e.getProvider("auth").getImmediate());return(r=>new nE(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Me(oR,sR,P$(t)),Me(oR,sR,"esm2017")}var F$=300,L$=v_("authIdTokenMaxAge")||F$,aR=null,V$=t=>async e=>{let n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>L$)return;let i=n?.token;aR!==i&&(aR=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function wE(t=zr()){let e=Mi(t,"auth");if(e.isInitialized())return e.getImmediate();let n=hE(t,{popupRedirectResolver:kR,persistence:[xR,CR,_E]}),r=v_("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let o=new URL(r,location.origin);if(location.origin===o.origin){let s=V$(o.toString());mE(n,s,()=>s(n.currentUser)),gE(n,a=>s(a))}}let i=m_("auth");return i&&fE(n,`http://${i}`),n}function j$(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}bB({loadJS(t){return new Promise((e,n)=>{let r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{let o=qn("internal-error");o.customData=i,n(o)},r.type="text/javascript",r.charset="UTF-8",j$().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});O$("Browser");var PR="auth",Ko=class{constructor(e){return e}},Qo=class{constructor(){return ki(PR)}};var bE=new q("angularfire2.auth-instances");function RH(t,e){let n=qo(PR,t,e);return n&&new Ko(n)}function xH(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new Ko(r)}}var NH={provide:Qo,deps:[[new vt,bE]]},MH={provide:Ko,useFactory:RH,deps:[[new vt,bE],$n]};function OR(t,...e){return Me("angularfire",dr.full,"auth"),Gt([MH,NH,{provide:bE,useFactory:xH(t),multi:!0,deps:[be,Oe,hr,Gr,[new vt,Oi],...e]}])}var FR=Ve(wE,!0);var LR=Ve(yE,!0);var VR=Ve(IE,!0,2);var jR=Ve(vE,!0,2);var UR=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},BR={};var Yr,DE;(function(){var t;function e(b,v){function E(){}E.prototype=v.prototype,b.D=v.prototype,b.prototype=new E,b.prototype.constructor=b,b.C=function(I,D,S){for(var _=Array(arguments.length-2),Sr=2;Sr<arguments.length;Sr++)_[Sr-2]=arguments[Sr];return v.prototype[D].apply(I,_)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(b,v,E){E||(E=0);var I=Array(16);if(typeof v=="string")for(var D=0;16>D;++D)I[D]=v.charCodeAt(E++)|v.charCodeAt(E++)<<8|v.charCodeAt(E++)<<16|v.charCodeAt(E++)<<24;else for(D=0;16>D;++D)I[D]=v[E++]|v[E++]<<8|v[E++]<<16|v[E++]<<24;v=b.g[0],E=b.g[1],D=b.g[2];var S=b.g[3],_=v+(S^E&(D^S))+I[0]+3614090360&4294967295;v=E+(_<<7&4294967295|_>>>25),_=S+(D^v&(E^D))+I[1]+3905402710&4294967295,S=v+(_<<12&4294967295|_>>>20),_=D+(E^S&(v^E))+I[2]+606105819&4294967295,D=S+(_<<17&4294967295|_>>>15),_=E+(v^D&(S^v))+I[3]+3250441966&4294967295,E=D+(_<<22&4294967295|_>>>10),_=v+(S^E&(D^S))+I[4]+4118548399&4294967295,v=E+(_<<7&4294967295|_>>>25),_=S+(D^v&(E^D))+I[5]+1200080426&4294967295,S=v+(_<<12&4294967295|_>>>20),_=D+(E^S&(v^E))+I[6]+2821735955&4294967295,D=S+(_<<17&4294967295|_>>>15),_=E+(v^D&(S^v))+I[7]+4249261313&4294967295,E=D+(_<<22&4294967295|_>>>10),_=v+(S^E&(D^S))+I[8]+1770035416&4294967295,v=E+(_<<7&4294967295|_>>>25),_=S+(D^v&(E^D))+I[9]+2336552879&4294967295,S=v+(_<<12&4294967295|_>>>20),_=D+(E^S&(v^E))+I[10]+4294925233&4294967295,D=S+(_<<17&4294967295|_>>>15),_=E+(v^D&(S^v))+I[11]+2304563134&4294967295,E=D+(_<<22&4294967295|_>>>10),_=v+(S^E&(D^S))+I[12]+1804603682&4294967295,v=E+(_<<7&4294967295|_>>>25),_=S+(D^v&(E^D))+I[13]+4254626195&4294967295,S=v+(_<<12&4294967295|_>>>20),_=D+(E^S&(v^E))+I[14]+2792965006&4294967295,D=S+(_<<17&4294967295|_>>>15),_=E+(v^D&(S^v))+I[15]+1236535329&4294967295,E=D+(_<<22&4294967295|_>>>10),_=v+(D^S&(E^D))+I[1]+4129170786&4294967295,v=E+(_<<5&4294967295|_>>>27),_=S+(E^D&(v^E))+I[6]+3225465664&4294967295,S=v+(_<<9&4294967295|_>>>23),_=D+(v^E&(S^v))+I[11]+643717713&4294967295,D=S+(_<<14&4294967295|_>>>18),_=E+(S^v&(D^S))+I[0]+3921069994&4294967295,E=D+(_<<20&4294967295|_>>>12),_=v+(D^S&(E^D))+I[5]+3593408605&4294967295,v=E+(_<<5&4294967295|_>>>27),_=S+(E^D&(v^E))+I[10]+38016083&4294967295,S=v+(_<<9&4294967295|_>>>23),_=D+(v^E&(S^v))+I[15]+3634488961&4294967295,D=S+(_<<14&4294967295|_>>>18),_=E+(S^v&(D^S))+I[4]+3889429448&4294967295,E=D+(_<<20&4294967295|_>>>12),_=v+(D^S&(E^D))+I[9]+568446438&4294967295,v=E+(_<<5&4294967295|_>>>27),_=S+(E^D&(v^E))+I[14]+3275163606&4294967295,S=v+(_<<9&4294967295|_>>>23),_=D+(v^E&(S^v))+I[3]+4107603335&4294967295,D=S+(_<<14&4294967295|_>>>18),_=E+(S^v&(D^S))+I[8]+1163531501&4294967295,E=D+(_<<20&4294967295|_>>>12),_=v+(D^S&(E^D))+I[13]+2850285829&4294967295,v=E+(_<<5&4294967295|_>>>27),_=S+(E^D&(v^E))+I[2]+4243563512&4294967295,S=v+(_<<9&4294967295|_>>>23),_=D+(v^E&(S^v))+I[7]+1735328473&4294967295,D=S+(_<<14&4294967295|_>>>18),_=E+(S^v&(D^S))+I[12]+2368359562&4294967295,E=D+(_<<20&4294967295|_>>>12),_=v+(E^D^S)+I[5]+4294588738&4294967295,v=E+(_<<4&4294967295|_>>>28),_=S+(v^E^D)+I[8]+2272392833&4294967295,S=v+(_<<11&4294967295|_>>>21),_=D+(S^v^E)+I[11]+1839030562&4294967295,D=S+(_<<16&4294967295|_>>>16),_=E+(D^S^v)+I[14]+4259657740&4294967295,E=D+(_<<23&4294967295|_>>>9),_=v+(E^D^S)+I[1]+2763975236&4294967295,v=E+(_<<4&4294967295|_>>>28),_=S+(v^E^D)+I[4]+1272893353&4294967295,S=v+(_<<11&4294967295|_>>>21),_=D+(S^v^E)+I[7]+4139469664&4294967295,D=S+(_<<16&4294967295|_>>>16),_=E+(D^S^v)+I[10]+3200236656&4294967295,E=D+(_<<23&4294967295|_>>>9),_=v+(E^D^S)+I[13]+681279174&4294967295,v=E+(_<<4&4294967295|_>>>28),_=S+(v^E^D)+I[0]+3936430074&4294967295,S=v+(_<<11&4294967295|_>>>21),_=D+(S^v^E)+I[3]+3572445317&4294967295,D=S+(_<<16&4294967295|_>>>16),_=E+(D^S^v)+I[6]+76029189&4294967295,E=D+(_<<23&4294967295|_>>>9),_=v+(E^D^S)+I[9]+3654602809&4294967295,v=E+(_<<4&4294967295|_>>>28),_=S+(v^E^D)+I[12]+3873151461&4294967295,S=v+(_<<11&4294967295|_>>>21),_=D+(S^v^E)+I[15]+530742520&4294967295,D=S+(_<<16&4294967295|_>>>16),_=E+(D^S^v)+I[2]+3299628645&4294967295,E=D+(_<<23&4294967295|_>>>9),_=v+(D^(E|~S))+I[0]+4096336452&4294967295,v=E+(_<<6&4294967295|_>>>26),_=S+(E^(v|~D))+I[7]+1126891415&4294967295,S=v+(_<<10&4294967295|_>>>22),_=D+(v^(S|~E))+I[14]+2878612391&4294967295,D=S+(_<<15&4294967295|_>>>17),_=E+(S^(D|~v))+I[5]+4237533241&4294967295,E=D+(_<<21&4294967295|_>>>11),_=v+(D^(E|~S))+I[12]+1700485571&4294967295,v=E+(_<<6&4294967295|_>>>26),_=S+(E^(v|~D))+I[3]+2399980690&4294967295,S=v+(_<<10&4294967295|_>>>22),_=D+(v^(S|~E))+I[10]+4293915773&4294967295,D=S+(_<<15&4294967295|_>>>17),_=E+(S^(D|~v))+I[1]+2240044497&4294967295,E=D+(_<<21&4294967295|_>>>11),_=v+(D^(E|~S))+I[8]+1873313359&4294967295,v=E+(_<<6&4294967295|_>>>26),_=S+(E^(v|~D))+I[15]+4264355552&4294967295,S=v+(_<<10&4294967295|_>>>22),_=D+(v^(S|~E))+I[6]+2734768916&4294967295,D=S+(_<<15&4294967295|_>>>17),_=E+(S^(D|~v))+I[13]+1309151649&4294967295,E=D+(_<<21&4294967295|_>>>11),_=v+(D^(E|~S))+I[4]+4149444226&4294967295,v=E+(_<<6&4294967295|_>>>26),_=S+(E^(v|~D))+I[11]+3174756917&4294967295,S=v+(_<<10&4294967295|_>>>22),_=D+(v^(S|~E))+I[2]+718787259&4294967295,D=S+(_<<15&4294967295|_>>>17),_=E+(S^(D|~v))+I[9]+3951481745&4294967295,b.g[0]=b.g[0]+v&4294967295,b.g[1]=b.g[1]+(D+(_<<21&4294967295|_>>>11))&4294967295,b.g[2]=b.g[2]+D&4294967295,b.g[3]=b.g[3]+S&4294967295}r.prototype.u=function(b,v){v===void 0&&(v=b.length);for(var E=v-this.blockSize,I=this.B,D=this.h,S=0;S<v;){if(D==0)for(;S<=E;)i(this,b,S),S+=this.blockSize;if(typeof b=="string"){for(;S<v;)if(I[D++]=b.charCodeAt(S++),D==this.blockSize){i(this,I),D=0;break}}else for(;S<v;)if(I[D++]=b[S++],D==this.blockSize){i(this,I),D=0;break}}this.h=D,this.o+=v},r.prototype.v=function(){var b=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);b[0]=128;for(var v=1;v<b.length-8;++v)b[v]=0;var E=8*this.o;for(v=b.length-8;v<b.length;++v)b[v]=E&255,E/=256;for(this.u(b),b=Array(16),v=E=0;4>v;++v)for(var I=0;32>I;I+=8)b[E++]=this.g[v]>>>I&255;return b};function o(b,v){var E=a;return Object.prototype.hasOwnProperty.call(E,b)?E[b]:E[b]=v(b)}function s(b,v){this.h=v;for(var E=[],I=!0,D=b.length-1;0<=D;D--){var S=b[D]|0;I&&S==v||(E[D]=S,I=!1)}this.g=E}var a={};function u(b){return-128<=b&&128>b?o(b,function(v){return new s([v|0],0>v?-1:0)}):new s([b|0],0>b?-1:0)}function l(b){if(isNaN(b)||!isFinite(b))return p;if(0>b)return M(l(-b));for(var v=[],E=1,I=0;b>=E;I++)v[I]=b/E|0,E*=4294967296;return new s(v,0)}function h(b,v){if(b.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(b.charAt(0)=="-")return M(h(b.substring(1),v));if(0<=b.indexOf("-"))throw Error('number format error: interior "-" character');for(var E=l(Math.pow(v,8)),I=p,D=0;D<b.length;D+=8){var S=Math.min(8,b.length-D),_=parseInt(b.substring(D,D+S),v);8>S?(S=l(Math.pow(v,S)),I=I.j(S).add(l(_))):(I=I.j(E),I=I.add(l(_)))}return I}var p=u(0),g=u(1),y=u(16777216);t=s.prototype,t.m=function(){if(k(this))return-M(this).m();for(var b=0,v=1,E=0;E<this.g.length;E++){var I=this.i(E);b+=(0<=I?I:4294967296+I)*v,v*=4294967296}return b},t.toString=function(b){if(b=b||10,2>b||36<b)throw Error("radix out of range: "+b);if(w(this))return"0";if(k(this))return"-"+M(this).toString(b);for(var v=l(Math.pow(b,6)),E=this,I="";;){var D=oe(E,v).g;E=j(E,D.j(v));var S=((0<E.g.length?E.g[0]:E.h)>>>0).toString(b);if(E=D,w(E))return S+I;for(;6>S.length;)S="0"+S;I=S+I}},t.i=function(b){return 0>b?0:b<this.g.length?this.g[b]:this.h};function w(b){if(b.h!=0)return!1;for(var v=0;v<b.g.length;v++)if(b.g[v]!=0)return!1;return!0}function k(b){return b.h==-1}t.l=function(b){return b=j(this,b),k(b)?-1:w(b)?0:1};function M(b){for(var v=b.g.length,E=[],I=0;I<v;I++)E[I]=~b.g[I];return new s(E,~b.h).add(g)}t.abs=function(){return k(this)?M(this):this},t.add=function(b){for(var v=Math.max(this.g.length,b.g.length),E=[],I=0,D=0;D<=v;D++){var S=I+(this.i(D)&65535)+(b.i(D)&65535),_=(S>>>16)+(this.i(D)>>>16)+(b.i(D)>>>16);I=_>>>16,S&=65535,_&=65535,E[D]=_<<16|S}return new s(E,E[E.length-1]&-2147483648?-1:0)};function j(b,v){return b.add(M(v))}t.j=function(b){if(w(this)||w(b))return p;if(k(this))return k(b)?M(this).j(M(b)):M(M(this).j(b));if(k(b))return M(this.j(M(b)));if(0>this.l(y)&&0>b.l(y))return l(this.m()*b.m());for(var v=this.g.length+b.g.length,E=[],I=0;I<2*v;I++)E[I]=0;for(I=0;I<this.g.length;I++)for(var D=0;D<b.g.length;D++){var S=this.i(I)>>>16,_=this.i(I)&65535,Sr=b.i(D)>>>16,uc=b.i(D)&65535;E[2*I+2*D]+=_*uc,G(E,2*I+2*D),E[2*I+2*D+1]+=S*uc,G(E,2*I+2*D+1),E[2*I+2*D+1]+=_*Sr,G(E,2*I+2*D+1),E[2*I+2*D+2]+=S*Sr,G(E,2*I+2*D+2)}for(I=0;I<v;I++)E[I]=E[2*I+1]<<16|E[2*I];for(I=v;I<2*v;I++)E[I]=0;return new s(E,0)};function G(b,v){for(;(b[v]&65535)!=b[v];)b[v+1]+=b[v]>>>16,b[v]&=65535,v++}function W(b,v){this.g=b,this.h=v}function oe(b,v){if(w(v))throw Error("division by zero");if(w(b))return new W(p,p);if(k(b))return v=oe(M(b),v),new W(M(v.g),M(v.h));if(k(v))return v=oe(b,M(v)),new W(M(v.g),v.h);if(30<b.g.length){if(k(b)||k(v))throw Error("slowDivide_ only works with positive integers.");for(var E=g,I=v;0>=I.l(b);)E=Xe(E),I=Xe(I);var D=Ie(E,1),S=Ie(I,1);for(I=Ie(I,2),E=Ie(E,2);!w(I);){var _=S.add(I);0>=_.l(b)&&(D=D.add(E),S=_),I=Ie(I,1),E=Ie(E,1)}return v=j(b,D.j(v)),new W(D,v)}for(D=p;0<=b.l(v);){for(E=Math.max(1,Math.floor(b.m()/v.m())),I=Math.ceil(Math.log(E)/Math.LN2),I=48>=I?1:Math.pow(2,I-48),S=l(E),_=S.j(v);k(_)||0<_.l(b);)E-=I,S=l(E),_=S.j(v);w(S)&&(S=g),D=D.add(S),b=j(b,_)}return new W(D,b)}t.A=function(b){return oe(this,b).h},t.and=function(b){for(var v=Math.max(this.g.length,b.g.length),E=[],I=0;I<v;I++)E[I]=this.i(I)&b.i(I);return new s(E,this.h&b.h)},t.or=function(b){for(var v=Math.max(this.g.length,b.g.length),E=[],I=0;I<v;I++)E[I]=this.i(I)|b.i(I);return new s(E,this.h|b.h)},t.xor=function(b){for(var v=Math.max(this.g.length,b.g.length),E=[],I=0;I<v;I++)E[I]=this.i(I)^b.i(I);return new s(E,this.h^b.h)};function Xe(b){for(var v=b.g.length+1,E=[],I=0;I<v;I++)E[I]=b.i(I)<<1|b.i(I-1)>>>31;return new s(E,b.h)}function Ie(b,v){var E=v>>5;v%=32;for(var I=b.g.length-E,D=[],S=0;S<I;S++)D[S]=0<v?b.i(S+E)>>>v|b.i(S+E+1)<<32-v:b.i(S+E);return new s(D,b.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,DE=BR.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=h,Yr=BR.Integer=s}).apply(typeof UR<"u"?UR:typeof self<"u"?self:typeof window<"u"?window:{});var Cf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Zr={};var TE,kH,fa,CE,Ou,Sf,SE,AE,RE;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,d,f){return c==Array.prototype||c==Object.prototype||(c[d]=f.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Cf=="object"&&Cf];for(var d=0;d<c.length;++d){var f=c[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function i(c,d){if(d)e:{var f=r;c=c.split(".");for(var m=0;m<c.length-1;m++){var C=c[m];if(!(C in f))break e;f=f[C]}c=c[c.length-1],m=f[c],d=d(m),d!=m&&d!=null&&e(f,c,{configurable:!0,writable:!0,value:d})}}function o(c,d){c instanceof String&&(c+="");var f=0,m=!1,C={next:function(){if(!m&&f<c.length){var x=f++;return{value:d(x,c[x]),done:!1}}return m=!0,{done:!0,value:void 0}}};return C[Symbol.iterator]=function(){return C},C}i("Array.prototype.values",function(c){return c||function(){return o(this,function(d,f){return f})}});var s=s||{},a=this||self;function u(c){var d=typeof c;return d=d!="object"?d:c?Array.isArray(c)?"array":d:"null",d=="array"||d=="object"&&typeof c.length=="number"}function l(c){var d=typeof c;return d=="object"&&c!=null||d=="function"}function h(c,d,f){return c.call.apply(c.bind,arguments)}function p(c,d,f){if(!c)throw Error();if(2<arguments.length){var m=Array.prototype.slice.call(arguments,2);return function(){var C=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(C,m),c.apply(d,C)}}return function(){return c.apply(d,arguments)}}function g(c,d,f){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,g.apply(null,arguments)}function y(c,d){var f=Array.prototype.slice.call(arguments,1);return function(){var m=f.slice();return m.push.apply(m,arguments),c.apply(this,m)}}function w(c,d){function f(){}f.prototype=d.prototype,c.aa=d.prototype,c.prototype=new f,c.prototype.constructor=c,c.Qb=function(m,C,x){for(var U=Array(arguments.length-2),Se=2;Se<arguments.length;Se++)U[Se-2]=arguments[Se];return d.prototype[C].apply(m,U)}}function k(c){let d=c.length;if(0<d){let f=Array(d);for(let m=0;m<d;m++)f[m]=c[m];return f}return[]}function M(c,d){for(let f=1;f<arguments.length;f++){let m=arguments[f];if(u(m)){let C=c.length||0,x=m.length||0;c.length=C+x;for(let U=0;U<x;U++)c[C+U]=m[U]}else c.push(m)}}class j{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function G(c){return/^[\s\xa0]*$/.test(c)}function W(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function oe(c){return oe[" "](c),c}oe[" "]=function(){};var Xe=W().indexOf("Gecko")!=-1&&!(W().toLowerCase().indexOf("webkit")!=-1&&W().indexOf("Edge")==-1)&&!(W().indexOf("Trident")!=-1||W().indexOf("MSIE")!=-1)&&W().indexOf("Edge")==-1;function Ie(c,d,f){for(let m in c)d.call(f,c[m],m,c)}function b(c,d){for(let f in c)d.call(void 0,c[f],f,c)}function v(c){let d={};for(let f in c)d[f]=c[f];return d}let E="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function I(c,d){let f,m;for(let C=1;C<arguments.length;C++){m=arguments[C];for(f in m)c[f]=m[f];for(let x=0;x<E.length;x++)f=E[x],Object.prototype.hasOwnProperty.call(m,f)&&(c[f]=m[f])}}function D(c){var d=1;c=c.split(":");let f=[];for(;0<d&&c.length;)f.push(c.shift()),d--;return c.length&&f.push(c.join(":")),f}function S(c){a.setTimeout(()=>{throw c},0)}function _(){var c=_g;let d=null;return c.g&&(d=c.g,c.g=c.g.next,c.g||(c.h=null),d.next=null),d}class Sr{constructor(){this.h=this.g=null}add(d,f){let m=uc.get();m.set(d,f),this.h?this.h.next=m:this.g=m,this.h=m}}var uc=new j(()=>new _P,c=>c.reset());class _P{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let lc,dc=!1,_g=new Sr,z0=()=>{let c=a.Promise.resolve(void 0);lc=()=>{c.then(EP)}};var EP=()=>{for(var c;c=_();){try{c.h.call(c.g)}catch(f){S(f)}var d=uc;d.j(c),100>d.h&&(d.h++,c.next=d.g,d.g=c)}dc=!1};function oi(){this.s=this.s,this.C=this.C}oi.prototype.s=!1,oi.prototype.ma=function(){this.s||(this.s=!0,this.N())},oi.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function kt(c,d){this.type=c,this.g=this.target=d,this.defaultPrevented=!1}kt.prototype.h=function(){this.defaultPrevented=!0};var IP=(function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,d=Object.defineProperty({},"passive",{get:function(){c=!0}});try{let f=()=>{};a.addEventListener("test",f,d),a.removeEventListener("test",f,d)}catch{}return c})();function hc(c,d){if(kt.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var f=this.type=c.type,m=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=d,d=c.relatedTarget){if(Xe){e:{try{oe(d.nodeName);var C=!0;break e}catch{}C=!1}C||(d=null)}}else f=="mouseover"?d=c.fromElement:f=="mouseout"&&(d=c.toElement);this.relatedTarget=d,m?(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:wP[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&hc.aa.h.call(this)}}w(hc,kt);var wP={2:"touch",3:"pen",4:"mouse"};hc.prototype.h=function(){hc.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var fc="closure_listenable_"+(1e6*Math.random()|0),bP=0;function DP(c,d,f,m,C){this.listener=c,this.proxy=null,this.src=d,this.type=f,this.capture=!!m,this.ha=C,this.key=++bP,this.da=this.fa=!1}function Pl(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Ol(c){this.src=c,this.g={},this.h=0}Ol.prototype.add=function(c,d,f,m,C){var x=c.toString();c=this.g[x],c||(c=this.g[x]=[],this.h++);var U=Ig(c,d,m,C);return-1<U?(d=c[U],f||(d.fa=!1)):(d=new DP(d,this.src,x,!!m,C),d.fa=f,c.push(d)),d};function Eg(c,d){var f=d.type;if(f in c.g){var m=c.g[f],C=Array.prototype.indexOf.call(m,d,void 0),x;(x=0<=C)&&Array.prototype.splice.call(m,C,1),x&&(Pl(d),c.g[f].length==0&&(delete c.g[f],c.h--))}}function Ig(c,d,f,m){for(var C=0;C<c.length;++C){var x=c[C];if(!x.da&&x.listener==d&&x.capture==!!f&&x.ha==m)return C}return-1}var wg="closure_lm_"+(1e6*Math.random()|0),bg={};function G0(c,d,f,m,C){if(m&&m.once)return K0(c,d,f,m,C);if(Array.isArray(d)){for(var x=0;x<d.length;x++)G0(c,d[x],f,m,C);return null}return f=Sg(f),c&&c[fc]?c.K(d,f,l(m)?!!m.capture:!!m,C):W0(c,d,f,!1,m,C)}function W0(c,d,f,m,C,x){if(!d)throw Error("Invalid event type");var U=l(C)?!!C.capture:!!C,Se=Tg(c);if(Se||(c[wg]=Se=new Ol(c)),f=Se.add(d,f,m,U,x),f.proxy)return f;if(m=TP(),f.proxy=m,m.src=c,m.listener=f,c.addEventListener)IP||(C=U),C===void 0&&(C=!1),c.addEventListener(d.toString(),m,C);else if(c.attachEvent)c.attachEvent(Y0(d.toString()),m);else if(c.addListener&&c.removeListener)c.addListener(m);else throw Error("addEventListener and attachEvent are unavailable.");return f}function TP(){function c(f){return d.call(c.src,c.listener,f)}let d=CP;return c}function K0(c,d,f,m,C){if(Array.isArray(d)){for(var x=0;x<d.length;x++)K0(c,d[x],f,m,C);return null}return f=Sg(f),c&&c[fc]?c.L(d,f,l(m)?!!m.capture:!!m,C):W0(c,d,f,!0,m,C)}function Q0(c,d,f,m,C){if(Array.isArray(d))for(var x=0;x<d.length;x++)Q0(c,d[x],f,m,C);else m=l(m)?!!m.capture:!!m,f=Sg(f),c&&c[fc]?(c=c.i,d=String(d).toString(),d in c.g&&(x=c.g[d],f=Ig(x,f,m,C),-1<f&&(Pl(x[f]),Array.prototype.splice.call(x,f,1),x.length==0&&(delete c.g[d],c.h--)))):c&&(c=Tg(c))&&(d=c.g[d.toString()],c=-1,d&&(c=Ig(d,f,m,C)),(f=-1<c?d[c]:null)&&Dg(f))}function Dg(c){if(typeof c!="number"&&c&&!c.da){var d=c.src;if(d&&d[fc])Eg(d.i,c);else{var f=c.type,m=c.proxy;d.removeEventListener?d.removeEventListener(f,m,c.capture):d.detachEvent?d.detachEvent(Y0(f),m):d.addListener&&d.removeListener&&d.removeListener(m),(f=Tg(d))?(Eg(f,c),f.h==0&&(f.src=null,d[wg]=null)):Pl(c)}}}function Y0(c){return c in bg?bg[c]:bg[c]="on"+c}function CP(c,d){if(c.da)c=!0;else{d=new hc(d,this);var f=c.listener,m=c.ha||c.src;c.fa&&Dg(c),c=f.call(m,d)}return c}function Tg(c){return c=c[wg],c instanceof Ol?c:null}var Cg="__closure_events_fn_"+(1e9*Math.random()>>>0);function Sg(c){return typeof c=="function"?c:(c[Cg]||(c[Cg]=function(d){return c.handleEvent(d)}),c[Cg])}function Pt(){oi.call(this),this.i=new Ol(this),this.M=this,this.F=null}w(Pt,oi),Pt.prototype[fc]=!0,Pt.prototype.removeEventListener=function(c,d,f,m){Q0(this,c,d,f,m)};function Ht(c,d){var f,m=c.F;if(m)for(f=[];m;m=m.F)f.push(m);if(c=c.M,m=d.type||d,typeof d=="string")d=new kt(d,c);else if(d instanceof kt)d.target=d.target||c;else{var C=d;d=new kt(m,c),I(d,C)}if(C=!0,f)for(var x=f.length-1;0<=x;x--){var U=d.g=f[x];C=Fl(U,m,!0,d)&&C}if(U=d.g=c,C=Fl(U,m,!0,d)&&C,C=Fl(U,m,!1,d)&&C,f)for(x=0;x<f.length;x++)U=d.g=f[x],C=Fl(U,m,!1,d)&&C}Pt.prototype.N=function(){if(Pt.aa.N.call(this),this.i){var c=this.i,d;for(d in c.g){for(var f=c.g[d],m=0;m<f.length;m++)Pl(f[m]);delete c.g[d],c.h--}}this.F=null},Pt.prototype.K=function(c,d,f,m){return this.i.add(String(c),d,!1,f,m)},Pt.prototype.L=function(c,d,f,m){return this.i.add(String(c),d,!0,f,m)};function Fl(c,d,f,m){if(d=c.i.g[String(d)],!d)return!0;d=d.concat();for(var C=!0,x=0;x<d.length;++x){var U=d[x];if(U&&!U.da&&U.capture==f){var Se=U.listener,Tt=U.ha||U.src;U.fa&&Eg(c.i,U),C=Se.call(Tt,m)!==!1&&C}}return C&&!m.defaultPrevented}function Z0(c,d,f){if(typeof c=="function")f&&(c=g(c,f));else if(c&&typeof c.handleEvent=="function")c=g(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(c,d||0)}function J0(c){c.g=Z0(()=>{c.g=null,c.i&&(c.i=!1,J0(c))},c.l);let d=c.h;c.h=null,c.m.apply(null,d)}class SP extends oi{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:J0(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function pc(c){oi.call(this),this.h=c,this.g={}}w(pc,oi);var X0=[];function eb(c){Ie(c.g,function(d,f){this.g.hasOwnProperty(f)&&Dg(d)},c),c.g={}}pc.prototype.N=function(){pc.aa.N.call(this),eb(this)},pc.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ag=a.JSON.stringify,AP=a.JSON.parse,RP=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function Rg(){}Rg.prototype.h=null;function tb(c){return c.h||(c.h=c.i())}function nb(){}var gc={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function xg(){kt.call(this,"d")}w(xg,kt);function Ng(){kt.call(this,"c")}w(Ng,kt);var eo={},rb=null;function Ll(){return rb=rb||new Pt}eo.La="serverreachability";function ib(c){kt.call(this,eo.La,c)}w(ib,kt);function mc(c){let d=Ll();Ht(d,new ib(d))}eo.STAT_EVENT="statevent";function ob(c,d){kt.call(this,eo.STAT_EVENT,c),this.stat=d}w(ob,kt);function qt(c){let d=Ll();Ht(d,new ob(d,c))}eo.Ma="timingevent";function sb(c,d){kt.call(this,eo.Ma,c),this.size=d}w(sb,kt);function yc(c,d){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},d)}function vc(){this.g=!0}vc.prototype.xa=function(){this.g=!1};function xP(c,d,f,m,C,x){c.info(function(){if(c.g)if(x)for(var U="",Se=x.split("&"),Tt=0;Tt<Se.length;Tt++){var we=Se[Tt].split("=");if(1<we.length){var Ot=we[0];we=we[1];var Ft=Ot.split("_");U=2<=Ft.length&&Ft[1]=="type"?U+(Ot+"="+we+"&"):U+(Ot+"=redacted&")}}else U=null;else U=x;return"XMLHTTP REQ ("+m+") [attempt "+C+"]: "+d+`
`+f+`
`+U})}function NP(c,d,f,m,C,x,U){c.info(function(){return"XMLHTTP RESP ("+m+") [ attempt "+C+"]: "+d+`
`+f+`
`+x+" "+U})}function gs(c,d,f,m){c.info(function(){return"XMLHTTP TEXT ("+d+"): "+kP(c,f)+(m?" "+m:"")})}function MP(c,d){c.info(function(){return"TIMEOUT: "+d})}vc.prototype.info=function(){};function kP(c,d){if(!c.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(c=0;c<f.length;c++)if(Array.isArray(f[c])){var m=f[c];if(!(2>m.length)){var C=m[1];if(Array.isArray(C)&&!(1>C.length)){var x=C[0];if(x!="noop"&&x!="stop"&&x!="close")for(var U=1;U<C.length;U++)C[U]=""}}}}return Ag(f)}catch{return d}}var Vl={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ab={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Mg;function jl(){}w(jl,Rg),jl.prototype.g=function(){return new XMLHttpRequest},jl.prototype.i=function(){return{}},Mg=new jl;function si(c,d,f,m){this.j=c,this.i=d,this.l=f,this.R=m||1,this.U=new pc(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new cb}function cb(){this.i=null,this.g="",this.h=!1}var ub={},kg={};function Pg(c,d,f){c.L=1,c.v=Hl(Ar(d)),c.m=f,c.P=!0,lb(c,null)}function lb(c,d){c.F=Date.now(),Ul(c),c.A=Ar(c.v);var f=c.A,m=c.R;Array.isArray(m)||(m=[String(m)]),Db(f.i,"t",m),c.C=0,f=c.j.J,c.h=new cb,c.g=$b(c.j,f?d:null,!c.m),0<c.O&&(c.M=new SP(g(c.Y,c,c.g),c.O)),d=c.U,f=c.g,m=c.ca;var C="readystatechange";Array.isArray(C)||(C&&(X0[0]=C.toString()),C=X0);for(var x=0;x<C.length;x++){var U=G0(f,C[x],m||d.handleEvent,!1,d.h||d);if(!U)break;d.g[U.key]=U}d=c.H?v(c.H):{},c.m?(c.u||(c.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,d)):(c.u="GET",c.g.ea(c.A,c.u,null,d)),mc(),xP(c.i,c.u,c.A,c.l,c.R,c.m)}si.prototype.ca=function(c){c=c.target;let d=this.M;d&&Rr(c)==3?d.j():this.Y(c)},si.prototype.Y=function(c){try{if(c==this.g)e:{let Ft=Rr(this.g);var d=this.g.Ba();let vs=this.g.Z();if(!(3>Ft)&&(Ft!=3||this.g&&(this.h.h||this.g.oa()||Nb(this.g)))){this.J||Ft!=4||d==7||(d==8||0>=vs?mc(3):mc(2)),Og(this);var f=this.g.Z();this.X=f;t:if(db(this)){var m=Nb(this.g);c="";var C=m.length,x=Rr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){to(this),_c(this);var U="";break t}this.h.i=new a.TextDecoder}for(d=0;d<C;d++)this.h.h=!0,c+=this.h.i.decode(m[d],{stream:!(x&&d==C-1)});m.length=0,this.h.g+=c,this.C=0,U=this.h.g}else U=this.g.oa();if(this.o=f==200,NP(this.i,this.u,this.A,this.l,this.R,Ft,f),this.o){if(this.T&&!this.K){t:{if(this.g){var Se,Tt=this.g;if((Se=Tt.g?Tt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!G(Se)){var we=Se;break t}}we=null}if(f=we)gs(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Fg(this,f);else{this.o=!1,this.s=3,qt(12),to(this),_c(this);break e}}if(this.P){f=!0;let Cn;for(;!this.J&&this.C<U.length;)if(Cn=PP(this,U),Cn==kg){Ft==4&&(this.s=4,qt(14),f=!1),gs(this.i,this.l,null,"[Incomplete Response]");break}else if(Cn==ub){this.s=4,qt(15),gs(this.i,this.l,U,"[Invalid Chunk]"),f=!1;break}else gs(this.i,this.l,Cn,null),Fg(this,Cn);if(db(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ft!=4||U.length!=0||this.h.h||(this.s=1,qt(16),f=!1),this.o=this.o&&f,!f)gs(this.i,this.l,U,"[Invalid Chunked Response]"),to(this),_c(this);else if(0<U.length&&!this.W){this.W=!0;var Ot=this.j;Ot.g==this&&Ot.ba&&!Ot.M&&(Ot.j.info("Great, no buffering proxy detected. Bytes received: "+U.length),$g(Ot),Ot.M=!0,qt(11))}}else gs(this.i,this.l,U,null),Fg(this,U);Ft==4&&to(this),this.o&&!this.J&&(Ft==4?Vb(this.j,this):(this.o=!1,Ul(this)))}else ZP(this.g),f==400&&0<U.indexOf("Unknown SID")?(this.s=3,qt(12)):(this.s=0,qt(13)),to(this),_c(this)}}}catch{}finally{}};function db(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function PP(c,d){var f=c.C,m=d.indexOf(`
`,f);return m==-1?kg:(f=Number(d.substring(f,m)),isNaN(f)?ub:(m+=1,m+f>d.length?kg:(d=d.slice(m,m+f),c.C=m+f,d)))}si.prototype.cancel=function(){this.J=!0,to(this)};function Ul(c){c.S=Date.now()+c.I,hb(c,c.I)}function hb(c,d){if(c.B!=null)throw Error("WatchDog timer not null");c.B=yc(g(c.ba,c),d)}function Og(c){c.B&&(a.clearTimeout(c.B),c.B=null)}si.prototype.ba=function(){this.B=null;let c=Date.now();0<=c-this.S?(MP(this.i,this.A),this.L!=2&&(mc(),qt(17)),to(this),this.s=2,_c(this)):hb(this,this.S-c)};function _c(c){c.j.G==0||c.J||Vb(c.j,c)}function to(c){Og(c);var d=c.M;d&&typeof d.ma=="function"&&d.ma(),c.M=null,eb(c.U),c.g&&(d=c.g,c.g=null,d.abort(),d.ma())}function Fg(c,d){try{var f=c.j;if(f.G!=0&&(f.g==c||Lg(f.h,c))){if(!c.K&&Lg(f.h,c)&&f.G==3){try{var m=f.Da.g.parse(d)}catch{m=null}if(Array.isArray(m)&&m.length==3){var C=m;if(C[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<c.F)Kl(f),Gl(f);else break e;Bg(f),qt(18)}}else f.za=C[1],0<f.za-f.T&&37500>C[2]&&f.F&&f.v==0&&!f.C&&(f.C=yc(g(f.Za,f),6e3));if(1>=gb(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else ro(f,11)}else if((c.K||f.g==c)&&Kl(f),!G(d))for(C=f.Da.g.parse(d),d=0;d<C.length;d++){let we=C[d];if(f.T=we[0],we=we[1],f.G==2)if(we[0]=="c"){f.K=we[1],f.ia=we[2];let Ot=we[3];Ot!=null&&(f.la=Ot,f.j.info("VER="+f.la));let Ft=we[4];Ft!=null&&(f.Aa=Ft,f.j.info("SVER="+f.Aa));let vs=we[5];vs!=null&&typeof vs=="number"&&0<vs&&(m=1.5*vs,f.L=m,f.j.info("backChannelRequestTimeoutMs_="+m)),m=f;let Cn=c.g;if(Cn){let Yl=Cn.g?Cn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Yl){var x=m.h;x.g||Yl.indexOf("spdy")==-1&&Yl.indexOf("quic")==-1&&Yl.indexOf("h2")==-1||(x.j=x.l,x.g=new Set,x.h&&(Vg(x,x.h),x.h=null))}if(m.D){let Hg=Cn.g?Cn.g.getResponseHeader("X-HTTP-Session-Id"):null;Hg&&(m.ya=Hg,Pe(m.I,m.D,Hg))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-c.F,f.j.info("Handshake RTT: "+f.R+"ms")),m=f;var U=c;if(m.qa=Bb(m,m.J?m.ia:null,m.W),U.K){mb(m.h,U);var Se=U,Tt=m.L;Tt&&(Se.I=Tt),Se.B&&(Og(Se),Ul(Se)),m.g=U}else Fb(m);0<f.i.length&&Wl(f)}else we[0]!="stop"&&we[0]!="close"||ro(f,7);else f.G==3&&(we[0]=="stop"||we[0]=="close"?we[0]=="stop"?ro(f,7):Ug(f):we[0]!="noop"&&f.l&&f.l.ta(we),f.v=0)}}mc(4)}catch{}}var OP=class{constructor(c,d){this.g=c,this.map=d}};function fb(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function pb(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function gb(c){return c.h?1:c.g?c.g.size:0}function Lg(c,d){return c.h?c.h==d:c.g?c.g.has(d):!1}function Vg(c,d){c.g?c.g.add(d):c.h=d}function mb(c,d){c.h&&c.h==d?c.h=null:c.g&&c.g.has(d)&&c.g.delete(d)}fb.prototype.cancel=function(){if(this.i=yb(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let c of this.g.values())c.cancel();this.g.clear()}};function yb(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let d=c.i;for(let f of c.g.values())d=d.concat(f.D);return d}return k(c.i)}function FP(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(u(c)){for(var d=[],f=c.length,m=0;m<f;m++)d.push(c[m]);return d}d=[],f=0;for(m in c)d[f++]=c[m];return d}function LP(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(u(c)||typeof c=="string"){var d=[];c=c.length;for(var f=0;f<c;f++)d.push(f);return d}d=[],f=0;for(let m in c)d[f++]=m;return d}}}function vb(c,d){if(c.forEach&&typeof c.forEach=="function")c.forEach(d,void 0);else if(u(c)||typeof c=="string")Array.prototype.forEach.call(c,d,void 0);else for(var f=LP(c),m=FP(c),C=m.length,x=0;x<C;x++)d.call(void 0,m[x],f&&f[x],c)}var _b=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function VP(c,d){if(c){c=c.split("&");for(var f=0;f<c.length;f++){var m=c[f].indexOf("="),C=null;if(0<=m){var x=c[f].substring(0,m);C=c[f].substring(m+1)}else x=c[f];d(x,C?decodeURIComponent(C.replace(/\+/g," ")):"")}}}function no(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof no){this.h=c.h,Bl(this,c.j),this.o=c.o,this.g=c.g,$l(this,c.s),this.l=c.l;var d=c.i,f=new wc;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),Eb(this,f),this.m=c.m}else c&&(d=String(c).match(_b))?(this.h=!1,Bl(this,d[1]||"",!0),this.o=Ec(d[2]||""),this.g=Ec(d[3]||"",!0),$l(this,d[4]),this.l=Ec(d[5]||"",!0),Eb(this,d[6]||"",!0),this.m=Ec(d[7]||"")):(this.h=!1,this.i=new wc(null,this.h))}no.prototype.toString=function(){var c=[],d=this.j;d&&c.push(Ic(d,Ib,!0),":");var f=this.g;return(f||d=="file")&&(c.push("//"),(d=this.o)&&c.push(Ic(d,Ib,!0),"@"),c.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&c.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&c.push("/"),c.push(Ic(f,f.charAt(0)=="/"?BP:UP,!0))),(f=this.i.toString())&&c.push("?",f),(f=this.m)&&c.push("#",Ic(f,HP)),c.join("")};function Ar(c){return new no(c)}function Bl(c,d,f){c.j=f?Ec(d,!0):d,c.j&&(c.j=c.j.replace(/:$/,""))}function $l(c,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);c.s=d}else c.s=null}function Eb(c,d,f){d instanceof wc?(c.i=d,qP(c.i,c.h)):(f||(d=Ic(d,$P)),c.i=new wc(d,c.h))}function Pe(c,d,f){c.i.set(d,f)}function Hl(c){return Pe(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Ec(c,d){return c?d?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Ic(c,d,f){return typeof c=="string"?(c=encodeURI(c).replace(d,jP),f&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function jP(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var Ib=/[#\/\?@]/g,UP=/[#\?:]/g,BP=/[#\?]/g,$P=/[#\?@]/g,HP=/#/g;function wc(c,d){this.h=this.g=null,this.i=c||null,this.j=!!d}function ai(c){c.g||(c.g=new Map,c.h=0,c.i&&VP(c.i,function(d,f){c.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}t=wc.prototype,t.add=function(c,d){ai(this),this.i=null,c=ms(this,c);var f=this.g.get(c);return f||this.g.set(c,f=[]),f.push(d),this.h+=1,this};function wb(c,d){ai(c),d=ms(c,d),c.g.has(d)&&(c.i=null,c.h-=c.g.get(d).length,c.g.delete(d))}function bb(c,d){return ai(c),d=ms(c,d),c.g.has(d)}t.forEach=function(c,d){ai(this),this.g.forEach(function(f,m){f.forEach(function(C){c.call(d,C,m,this)},this)},this)},t.na=function(){ai(this);let c=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let m=0;m<d.length;m++){let C=c[m];for(let x=0;x<C.length;x++)f.push(d[m])}return f},t.V=function(c){ai(this);let d=[];if(typeof c=="string")bb(this,c)&&(d=d.concat(this.g.get(ms(this,c))));else{c=Array.from(this.g.values());for(let f=0;f<c.length;f++)d=d.concat(c[f])}return d},t.set=function(c,d){return ai(this),this.i=null,c=ms(this,c),bb(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[d]),this.h+=1,this},t.get=function(c,d){return c?(c=this.V(c),0<c.length?String(c[0]):d):d};function Db(c,d,f){wb(c,d),0<f.length&&(c.i=null,c.g.set(ms(c,d),k(f)),c.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";let c=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var m=d[f];let x=encodeURIComponent(String(m)),U=this.V(m);for(m=0;m<U.length;m++){var C=x;U[m]!==""&&(C+="="+encodeURIComponent(String(U[m]))),c.push(C)}}return this.i=c.join("&")};function ms(c,d){return d=String(d),c.j&&(d=d.toLowerCase()),d}function qP(c,d){d&&!c.j&&(ai(c),c.i=null,c.g.forEach(function(f,m){var C=m.toLowerCase();m!=C&&(wb(this,m),Db(this,C,f))},c)),c.j=d}function zP(c,d){let f=new vc;if(a.Image){let m=new Image;m.onload=y(ci,f,"TestLoadImage: loaded",!0,d,m),m.onerror=y(ci,f,"TestLoadImage: error",!1,d,m),m.onabort=y(ci,f,"TestLoadImage: abort",!1,d,m),m.ontimeout=y(ci,f,"TestLoadImage: timeout",!1,d,m),a.setTimeout(function(){m.ontimeout&&m.ontimeout()},1e4),m.src=c}else d(!1)}function GP(c,d){let f=new vc,m=new AbortController,C=setTimeout(()=>{m.abort(),ci(f,"TestPingServer: timeout",!1,d)},1e4);fetch(c,{signal:m.signal}).then(x=>{clearTimeout(C),x.ok?ci(f,"TestPingServer: ok",!0,d):ci(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(C),ci(f,"TestPingServer: error",!1,d)})}function ci(c,d,f,m,C){try{C&&(C.onload=null,C.onerror=null,C.onabort=null,C.ontimeout=null),m(f)}catch{}}function WP(){this.g=new RP}function KP(c,d,f){let m=f||"";try{vb(c,function(C,x){let U=C;l(C)&&(U=Ag(C)),d.push(m+x+"="+encodeURIComponent(U))})}catch(C){throw d.push(m+"type="+encodeURIComponent("_badmap")),C}}function bc(c){this.l=c.Ub||null,this.j=c.eb||!1}w(bc,Rg),bc.prototype.g=function(){return new ql(this.l,this.j)},bc.prototype.i=(function(c){return function(){return c}})({});function ql(c,d){Pt.call(this),this.D=c,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}w(ql,Pt),t=ql.prototype,t.open=function(c,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=d,this.readyState=1,Tc(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(d.body=c),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Dc(this)),this.readyState=0},t.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Tc(this)),this.g&&(this.readyState=3,Tc(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Tb(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function Tb(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}t.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var d=c.value?c.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!c.done}))&&(this.response=this.responseText+=d)}c.done?Dc(this):Tc(this),this.readyState==3&&Tb(this)}},t.Ra=function(c){this.g&&(this.response=this.responseText=c,Dc(this))},t.Qa=function(c){this.g&&(this.response=c,Dc(this))},t.ga=function(){this.g&&Dc(this)};function Dc(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Tc(c)}t.setRequestHeader=function(c,d){this.u.append(c,d)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";let c=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,c.push(f[0]+": "+f[1]),f=d.next();return c.join(`\r
`)};function Tc(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(ql.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Cb(c){let d="";return Ie(c,function(f,m){d+=m,d+=":",d+=f,d+=`\r
`}),d}function jg(c,d,f){e:{for(m in f){var m=!1;break e}m=!0}m||(f=Cb(f),typeof c=="string"?f!=null&&encodeURIComponent(String(f)):Pe(c,d,f))}function $e(c){Pt.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}w($e,Pt);var QP=/^https?$/i,YP=["POST","PUT"];t=$e.prototype,t.Ha=function(c){this.J=c},t.ea=function(c,d,f,m){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);d=d?d.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Mg.g(),this.v=this.o?tb(this.o):tb(Mg),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(d,String(c),!0),this.B=!1}catch(x){Sb(this,x);return}if(c=f||"",f=new Map(this.headers),m)if(Object.getPrototypeOf(m)===Object.prototype)for(var C in m)f.set(C,m[C]);else if(typeof m.keys=="function"&&typeof m.get=="function")for(let x of m.keys())f.set(x,m.get(x));else throw Error("Unknown input type for opt_headers: "+String(m));m=Array.from(f.keys()).find(x=>x.toLowerCase()=="content-type"),C=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(YP,d,void 0))||m||C||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[x,U]of f)this.g.setRequestHeader(x,U);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{xb(this),this.u=!0,this.g.send(c),this.u=!1}catch(x){Sb(this,x)}};function Sb(c,d){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=d,c.m=5,Ab(c),zl(c)}function Ab(c){c.A||(c.A=!0,Ht(c,"complete"),Ht(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,Ht(this,"complete"),Ht(this,"abort"),zl(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),zl(this,!0)),$e.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Rb(this):this.bb())},t.bb=function(){Rb(this)};function Rb(c){if(c.h&&typeof s<"u"&&(!c.v[1]||Rr(c)!=4||c.Z()!=2)){if(c.u&&Rr(c)==4)Z0(c.Ea,0,c);else if(Ht(c,"readystatechange"),Rr(c)==4){c.h=!1;try{let U=c.Z();e:switch(U){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var m;if(m=U===0){var C=String(c.D).match(_b)[1]||null;!C&&a.self&&a.self.location&&(C=a.self.location.protocol.slice(0,-1)),m=!QP.test(C?C.toLowerCase():"")}f=m}if(f)Ht(c,"complete"),Ht(c,"success");else{c.m=6;try{var x=2<Rr(c)?c.g.statusText:""}catch{x=""}c.l=x+" ["+c.Z()+"]",Ab(c)}}finally{zl(c)}}}}function zl(c,d){if(c.g){xb(c);let f=c.g,m=c.v[0]?()=>{}:null;c.g=null,c.v=null,d||Ht(c,"ready");try{f.onreadystatechange=m}catch{}}}function xb(c){c.I&&(a.clearTimeout(c.I),c.I=null)}t.isActive=function(){return!!this.g};function Rr(c){return c.g?c.g.readyState:0}t.Z=function(){try{return 2<Rr(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(c){if(this.g){var d=this.g.responseText;return c&&d.indexOf(c)==0&&(d=d.substring(c.length)),AP(d)}};function Nb(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function ZP(c){let d={};c=(c.g&&2<=Rr(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let m=0;m<c.length;m++){if(G(c[m]))continue;var f=D(c[m]);let C=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let x=d[C]||[];d[C]=x,x.push(f)}b(d,function(m){return m.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Cc(c,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[c]||d}function Mb(c){this.Aa=0,this.i=[],this.j=new vc,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Cc("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Cc("baseRetryDelayMs",5e3,c),this.cb=Cc("retryDelaySeedMs",1e4,c),this.Wa=Cc("forwardChannelMaxRetries",2,c),this.wa=Cc("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new fb(c&&c.concurrentRequestLimit),this.Da=new WP,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Mb.prototype,t.la=8,t.G=1,t.connect=function(c,d,f,m){qt(0),this.W=c,this.H=d||{},f&&m!==void 0&&(this.H.OSID=f,this.H.OAID=m),this.F=this.X,this.I=Bb(this,null,this.W),Wl(this)};function Ug(c){if(kb(c),c.G==3){var d=c.U++,f=Ar(c.I);if(Pe(f,"SID",c.K),Pe(f,"RID",d),Pe(f,"TYPE","terminate"),Sc(c,f),d=new si(c,c.j,d),d.L=2,d.v=Hl(Ar(f)),f=!1,a.navigator&&a.navigator.sendBeacon)try{f=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&a.Image&&(new Image().src=d.v,f=!0),f||(d.g=$b(d.j,null),d.g.ea(d.v)),d.F=Date.now(),Ul(d)}Ub(c)}function Gl(c){c.g&&($g(c),c.g.cancel(),c.g=null)}function kb(c){Gl(c),c.u&&(a.clearTimeout(c.u),c.u=null),Kl(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function Wl(c){if(!pb(c.h)&&!c.s){c.s=!0;var d=c.Ga;lc||z0(),dc||(lc(),dc=!0),_g.add(d,c),c.B=0}}function JP(c,d){return gb(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=d.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=yc(g(c.Ga,c,d),jb(c,c.B)),c.B++,!0)}t.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;let C=new si(this,this.j,c),x=this.o;if(this.S&&(x?(x=v(x),I(x,this.S)):x=this.S),this.m!==null||this.O||(C.H=x,x=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var m=this.i[f];if("__data__"in m.map&&(m=m.map.__data__,typeof m=="string")){m=m.length;break t}m=void 0}if(m===void 0)break;if(d+=m,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=Ob(this,C,d),f=Ar(this.I),Pe(f,"RID",c),Pe(f,"CVER",22),this.D&&Pe(f,"X-HTTP-Session-Id",this.D),Sc(this,f),x&&(this.O?d="headers="+encodeURIComponent(String(Cb(x)))+"&"+d:this.m&&jg(f,this.m,x)),Vg(this.h,C),this.Ua&&Pe(f,"TYPE","init"),this.P?(Pe(f,"$req",d),Pe(f,"SID","null"),C.T=!0,Pg(C,f,null)):Pg(C,f,d),this.G=2}}else this.G==3&&(c?Pb(this,c):this.i.length==0||pb(this.h)||Pb(this))};function Pb(c,d){var f;d?f=d.l:f=c.U++;let m=Ar(c.I);Pe(m,"SID",c.K),Pe(m,"RID",f),Pe(m,"AID",c.T),Sc(c,m),c.m&&c.o&&jg(m,c.m,c.o),f=new si(c,c.j,f,c.B+1),c.m===null&&(f.H=c.o),d&&(c.i=d.D.concat(c.i)),d=Ob(c,f,1e3),f.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),Vg(c.h,f),Pg(f,m,d)}function Sc(c,d){c.H&&Ie(c.H,function(f,m){Pe(d,m,f)}),c.l&&vb({},function(f,m){Pe(d,m,f)})}function Ob(c,d,f){f=Math.min(c.i.length,f);var m=c.l?g(c.l.Na,c.l,c):null;e:{var C=c.i;let x=-1;for(;;){let U=["count="+f];x==-1?0<f?(x=C[0].g,U.push("ofs="+x)):x=0:U.push("ofs="+x);let Se=!0;for(let Tt=0;Tt<f;Tt++){let we=C[Tt].g,Ot=C[Tt].map;if(we-=x,0>we)x=Math.max(0,C[Tt].g-100),Se=!1;else try{KP(Ot,U,"req"+we+"_")}catch{m&&m(Ot)}}if(Se){m=U.join("&");break e}}}return c=c.i.splice(0,f),d.D=c,m}function Fb(c){if(!c.g&&!c.u){c.Y=1;var d=c.Fa;lc||z0(),dc||(lc(),dc=!0),_g.add(d,c),c.v=0}}function Bg(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=yc(g(c.Fa,c),jb(c,c.v)),c.v++,!0)}t.Fa=function(){if(this.u=null,Lb(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=yc(g(this.ab,this),c)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,qt(10),Gl(this),Lb(this))};function $g(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function Lb(c){c.g=new si(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var d=Ar(c.qa);Pe(d,"RID","rpc"),Pe(d,"SID",c.K),Pe(d,"AID",c.T),Pe(d,"CI",c.F?"0":"1"),!c.F&&c.ja&&Pe(d,"TO",c.ja),Pe(d,"TYPE","xmlhttp"),Sc(c,d),c.m&&c.o&&jg(d,c.m,c.o),c.L&&(c.g.I=c.L);var f=c.g;c=c.ia,f.L=1,f.v=Hl(Ar(d)),f.m=null,f.P=!0,lb(f,c)}t.Za=function(){this.C!=null&&(this.C=null,Gl(this),Bg(this),qt(19))};function Kl(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function Vb(c,d){var f=null;if(c.g==d){Kl(c),$g(c),c.g=null;var m=2}else if(Lg(c.h,d))f=d.D,mb(c.h,d),m=1;else return;if(c.G!=0){if(d.o)if(m==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var C=c.B;m=Ll(),Ht(m,new sb(m,f)),Wl(c)}else Fb(c);else if(C=d.s,C==3||C==0&&0<d.X||!(m==1&&JP(c,d)||m==2&&Bg(c)))switch(f&&0<f.length&&(d=c.h,d.i=d.i.concat(f)),C){case 1:ro(c,5);break;case 4:ro(c,10);break;case 3:ro(c,6);break;default:ro(c,2)}}}function jb(c,d){let f=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(f*=2),f*d}function ro(c,d){if(c.j.info("Error code "+d),d==2){var f=g(c.fb,c),m=c.Xa;let C=!m;m=new no(m||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Bl(m,"https"),Hl(m),C?zP(m.toString(),f):GP(m.toString(),f)}else qt(2);c.G=0,c.l&&c.l.sa(d),Ub(c),kb(c)}t.fb=function(c){c?(this.j.info("Successfully pinged google.com"),qt(2)):(this.j.info("Failed to ping google.com"),qt(1))};function Ub(c){if(c.G=0,c.ka=[],c.l){let d=yb(c.h);(d.length!=0||c.i.length!=0)&&(M(c.ka,d),M(c.ka,c.i),c.h.i.length=0,k(c.i),c.i.length=0),c.l.ra()}}function Bb(c,d,f){var m=f instanceof no?Ar(f):new no(f);if(m.g!="")d&&(m.g=d+"."+m.g),$l(m,m.s);else{var C=a.location;m=C.protocol,d=d?d+"."+C.hostname:C.hostname,C=+C.port;var x=new no(null);m&&Bl(x,m),d&&(x.g=d),C&&$l(x,C),f&&(x.l=f),m=x}return f=c.D,d=c.ya,f&&d&&Pe(m,f,d),Pe(m,"VER",c.la),Sc(c,m),m}function $b(c,d,f){if(d&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=c.Ca&&!c.pa?new $e(new bc({eb:f})):new $e(c.pa),d.Ha(c.J),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Hb(){}t=Hb.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Ql(){}Ql.prototype.g=function(c,d){return new on(c,d)};function on(c,d){Pt.call(this),this.g=new Mb(d),this.l=c,this.h=d&&d.messageUrlParams||null,c=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(c?c["X-WebChannel-Content-Type"]=d.messageContentType:c={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(c?c["X-WebChannel-Client-Profile"]=d.va:c={"X-WebChannel-Client-Profile":d.va}),this.g.S=c,(c=d&&d.Sb)&&!G(c)&&(this.g.m=c),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!G(d)&&(this.g.D=d,c=this.h,c!==null&&d in c&&(c=this.h,d in c&&delete c[d])),this.j=new ys(this)}w(on,Pt),on.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},on.prototype.close=function(){Ug(this.g)},on.prototype.o=function(c){var d=this.g;if(typeof c=="string"){var f={};f.__data__=c,c=f}else this.u&&(f={},f.__data__=Ag(c),c=f);d.i.push(new OP(d.Ya++,c)),d.G==3&&Wl(d)},on.prototype.N=function(){this.g.l=null,delete this.j,Ug(this.g),delete this.g,on.aa.N.call(this)};function qb(c){xg.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var d=c.__sm__;if(d){e:{for(let f in d){c=f;break e}c=void 0}(this.i=c)&&(c=this.i,d=d!==null&&c in d?d[c]:void 0),this.data=d}else this.data=c}w(qb,xg);function zb(){Ng.call(this),this.status=1}w(zb,Ng);function ys(c){this.g=c}w(ys,Hb),ys.prototype.ua=function(){Ht(this.g,"a")},ys.prototype.ta=function(c){Ht(this.g,new qb(c))},ys.prototype.sa=function(c){Ht(this.g,new zb)},ys.prototype.ra=function(){Ht(this.g,"b")},Ql.prototype.createWebChannel=Ql.prototype.g,on.prototype.send=on.prototype.o,on.prototype.open=on.prototype.m,on.prototype.close=on.prototype.close,RE=Zr.createWebChannelTransport=function(){return new Ql},AE=Zr.getStatEventTarget=function(){return Ll()},SE=Zr.Event=eo,Sf=Zr.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Vl.NO_ERROR=0,Vl.TIMEOUT=8,Vl.HTTP_ERROR=6,Ou=Zr.ErrorCode=Vl,ab.COMPLETE="complete",CE=Zr.EventType=ab,nb.EventType=gc,gc.OPEN="a",gc.CLOSE="b",gc.ERROR="c",gc.MESSAGE="d",Pt.prototype.listen=Pt.prototype.K,fa=Zr.WebChannel=nb,kH=Zr.FetchXmlHttpFactory=bc,$e.prototype.listenOnce=$e.prototype.L,$e.prototype.getLastError=$e.prototype.Ka,$e.prototype.getLastErrorCode=$e.prototype.Ba,$e.prototype.getStatus=$e.prototype.Z,$e.prototype.getResponseJson=$e.prototype.Oa,$e.prototype.getResponseText=$e.prototype.oa,$e.prototype.send=$e.prototype.ea,$e.prototype.setWithCredentials=$e.prototype.Ha,TE=Zr.XhrIo=$e}).apply(typeof Cf<"u"?Cf:typeof self<"u"?self:typeof window<"u"?window:{});var $R="@firebase/firestore",HR="4.8.0";var bt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};bt.UNAUTHENTICATED=new bt(null),bt.GOOGLE_CREDENTIALS=new bt("google-credentials-uid"),bt.FIRST_PARTY=new bt("first-party-uid"),bt.MOCK_USER=new bt("mock-user");var Fa="11.10.0";var Jo=new cr("@firebase/firestore");function pa(){return Jo.logLevel}function $(t,...e){if(Jo.logLevel<=pe.DEBUG){let n=e.map(Iw);Jo.debug(`Firestore (${Fa}): ${t}`,...n)}}function Xr(t,...e){if(Jo.logLevel<=pe.ERROR){let n=e.map(Iw);Jo.error(`Firestore (${Fa}): ${t}`,...n)}}function $i(t,...e){if(Jo.logLevel<=pe.WARN){let n=e.map(Iw);Jo.warn(`Firestore (${Fa}): ${t}`,...n)}}function Iw(t){if(typeof t=="string")return t;try{return(function(n){return JSON.stringify(n)})(t)}catch{return t}}function Y(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,Px(t,r,n)}function Px(t,e,n){let r=`FIRESTORE (${Fa}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Xr(r),new Error(r)}function Ce(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||Px(e,i,r)}function ne(t,e){return t}var O={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},B=class extends Qt{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var gr=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var Pf=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},PE=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(bt.UNAUTHENTICATED))}shutdown(){}},OE=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},FE=class{constructor(e){this.t=e,this.currentUser=bt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ce(this.o===void 0,42304);let r=this.i,i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve(),o=new gr;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new gr,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let u=o;e.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},a=u=>{$("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?a(u):($("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new gr)}},0),s()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?($("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ce(typeof r.accessToken=="string",31837,{l:r}),new Pf(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return Ce(e===null||typeof e=="string",2055,{h:e}),new bt(e)}},LE=class{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=bt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},VE=class{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new LE(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(bt.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Of=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},jE=class{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Yt(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Ce(this.o===void 0,3512);let r=o=>{o.error!=null&&$("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.m;return this.m=o.token,$("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{$("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.V.getImmediate({optional:!0});o?i(o):$("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Of(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ce(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Of(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function PH(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}function Ox(){return new TextEncoder}var Bu=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=PH(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+=e.charAt(i[o]%62))}return r}};function he(t,e){return t<e?-1:t>e?1:0}function UE(t,e){let n=0;for(;n<t.length&&n<e.length;){let r=t.codePointAt(n),i=e.codePointAt(n);if(r!==i){if(r<128&&i<128)return he(r,i);{let o=Ox(),s=OH(o.encode(qR(t,n)),o.encode(qR(e,n)));return s!==0?s:he(r,i)}}n+=r>65535?2:1}return he(t.length,e.length)}function qR(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function OH(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return he(t[n],e[n]);return he(t.length,e.length)}function Da(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}var zR="__name__",Ff=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&Y(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&Y(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let o=t.compareSegments(e.get(i),n.get(i));if(o!==0)return o}return he(e.length,n.length)}static compareSegments(e,n){let r=t.isNumericId(e),i=t.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?t.extractNumericId(e).compare(t.extractNumericId(n)):UE(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Yr.fromString(e.substring(4,e.length-2))}},Ue=class t extends Ff{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new B(O.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}},FH=/^[_a-zA-Z][_a-zA-Z0-9]*$/,pn=class t extends Ff{construct(e,n,r){return new t(e,n,r)}static isValidIdentifier(e){return FH.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===zR}static keyField(){return new t([zR])}static fromServerFormat(e){let n=[],r="",i=0,o=()=>{if(r.length===0)throw new B(O.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new B(O.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new B(O.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new B(O.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var K=class t{constructor(e){this.path=e}static fromPath(e){return new t(Ue.fromString(e))}static fromName(e){return new t(Ue.fromString(e).popFirst(5))}static empty(){return new t(Ue.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ue.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ue.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new Ue(e.slice()))}};function Fx(t,e,n){if(!n)throw new B(O.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function LH(t,e,n,r){if(e===!0&&r===!0)throw new B(O.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function GR(t){if(!K.isDocumentKey(t))throw new B(O.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function WR(t){if(K.isDocumentKey(t))throw new B(O.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Lx(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function hp(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=(function(r){return r.constructor?r.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Y(12329,{type:typeof t})}function Xo(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new B(O.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=hp(t);throw new B(O.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function ut(t,e){let n={typeString:t};return e&&(n.value=e),n}function Xu(t,e){if(!Lx(t))throw new B(O.INVALID_ARGUMENT,"JSON must be an object");let n;for(let r in e)if(e[r]){let i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}let s=t[r];if(i&&typeof s!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&s!==o.value){n=`Expected '${r}' field to equal '${o.value}'`;break}}if(n)throw new B(O.INVALID_ARGUMENT,n);return!0}var KR=-62135596800,QR=1e6,lt=class t{static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*QR);return new t(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new B(O.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new B(O.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<KR)throw new B(O.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new B(O.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/QR}_compareTo(e){return this.seconds===e.seconds?he(this.nanoseconds,e.nanoseconds):he(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:t._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Xu(e,t._jsonSchema))return new t(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-KR;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};lt._jsonSchemaVersion="firestore/timestamp/1.0",lt._jsonSchema={type:ut("string",lt._jsonSchemaVersion),seconds:ut("number"),nanoseconds:ut("number")};var ie=class t{static fromTimestamp(e){return new t(e)}static min(){return new t(new lt(0,0))}static max(){return new t(new lt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var $u=-1,BE=class{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}};BE.UNKNOWN_ID=-1;function VH(t,e){let n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=ie.fromTimestamp(r===1e9?new lt(n+1,0):new lt(n,r));return new es(i,K.empty(),e)}function jH(t){return new es(t.readTime,t.key,$u)}var es=class t{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new t(ie.min(),K.empty(),$u)}static max(){return new t(ie.max(),K.empty(),$u)}};function UH(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=K.comparator(t.documentKey,e.documentKey),n!==0?n:he(t.largestBatchId,e.largestBatchId))}var BH="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",$E=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};async function La(t){if(t.code!==O.FAILED_PRECONDITION||t.message!==BH)throw t;$("LocalStore","Unexpectedly lost primary lease")}var L=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Y(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,r)=>{n(e)})}static reject(e){return new t((n,r)=>{r(e)})}static waitFor(e){return new t((n,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&n()},u=>r(u))}),s=!0,o===i&&n()})}static or(e){let n=t.resolve(!1);for(let r of e)n=n.next(i=>i?t.resolve(i):r());return n}static forEach(e,n){let r=[];return e.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(e,n){return new t((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let u=0;u<o;u++){let l=u;n(e[l]).next(h=>{s[l]=h,++a,a===o&&r(s)},h=>i(h))}})}static doWhile(e,n){return new t((r,i)=>{let o=()=>{e()===!0?n().next(()=>{o()},i):r()};o()})}};function $H(t){let e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Va(t){return t.name==="IndexedDbTransactionError"}var ww=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this._e(i),this.ae=i=>r.writeSequenceNumber(i))}_e(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.ae&&this.ae(n),n}}t.ue=-1;return t})(),bw=-1;function fp(t){return t==null}function Hu(t){return t===0&&1/t==-1/0}function HH(t){return typeof t=="number"&&Number.isInteger(t)&&!Hu(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var Vx="";function qH(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=YR(e)),e=zH(t.get(n),e);return YR(e)}function zH(t,e){let n=e,r=t.length;for(let i=0;i<r;i++){let o=t.charAt(i);switch(o){case"\0":n+="";break;case Vx:n+="";break;default:n+=o}}return n}function YR(t){return t+Vx+""}var GH="remoteDocuments",jx="owner";var Ux="mutationQueues";var Bx="mutations";var $x="documentMutations",WH="remoteDocumentsV14";var Hx="remoteDocumentGlobal";var qx="targets";var zx="targetDocuments";var Gx="targetGlobal",Wx="collectionParents";var Kx="clientMetadata";var Qx="bundles";var Yx="namedQueries";var KH="indexConfiguration";var QH="indexState";var YH="indexEntries";var Zx="documentOverlays";var ZH="globals";var JH=[Ux,Bx,$x,GH,qx,jx,Gx,zx,Kx,Hx,Wx,Qx,Yx],lce=[...JH,Zx],XH=[Ux,Bx,$x,WH,qx,jx,Gx,zx,Kx,Hx,Wx,Qx,Yx,Zx],e3=XH,t3=[...e3,KH,QH,YH];var dce=[...t3,ZH];function ZR(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Wi(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Jx(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var ze=class t{constructor(e,n){this.comparator=e,this.root=n||mr.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,mr.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,mr.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new va(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new va(this.root,e,this.comparator,!1)}getReverseIterator(){return new va(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new va(this.root,e,this.comparator,!0)}},va=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},mr=class t{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=o??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new t(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Y(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Y(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw Y(27949);return e+(this.isRed()?0:1)}};mr.EMPTY=null,mr.RED=!0,mr.BLACK=!1;mr.EMPTY=new class{constructor(){this.size=0}get key(){throw Y(57766)}get value(){throw Y(16141)}get color(){throw Y(16727)}get left(){throw Y(29726)}get right(){throw Y(36894)}copy(e,n,r,i,o){return this}insert(e,n,r){return new mr(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Dt=class t{constructor(e){this.comparator=e,this.data=new ze(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Lf(this.data.getIterator())}getIteratorFrom(e){return new Lf(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},Lf=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Dn=class t{constructor(e){this.fields=e,e.sort(pn.comparator)}static empty(){return new t([])}unionWith(e){let n=new Dt(pn.comparator);for(let r of this.fields)n=n.add(r);for(let r of e)n=n.add(r);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Da(this.fields,e.fields,(n,r)=>n.isEqual(r))}};var Vf=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var Bt=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=(function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Vf("Invalid base64 string: "+o):o}})(e);return new t(n)}static fromUint8Array(e){let n=(function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o})(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return he(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Bt.EMPTY_BYTE_STRING=new Bt("");var n3=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ei(t){if(Ce(!!t,39018),typeof t=="string"){let e=0,n=n3.exec(t);if(Ce(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:je(t.seconds),nanos:je(t.nanos)}}function je(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ti(t){return typeof t=="string"?Bt.fromBase64String(t):Bt.fromUint8Array(t)}var Xx="server_timestamp",eN="__type__",tN="__previous_value__",nN="__local_write_time__";function Dw(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{})[eN])===null||n===void 0?void 0:n.stringValue)===Xx}function pp(t){let e=t.mapValue.fields[tN];return Dw(e)?pp(e):e}function qu(t){let e=ei(t.mapValue.fields[nN].timestampValue);return new lt(e.seconds,e.nanos)}var HE=class{constructor(e,n,r,i,o,s,a,u,l,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l,this.isUsingEmulator=h}},jf="(default)",Uf=class t{constructor(e,n){this.projectId=e,this.database=n||jf}static empty(){return new t("","")}get isDefaultDatabase(){return this.database===jf}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var Tw="__type__",rN="__max__",Af={mapValue:{fields:{__type__:{stringValue:rN}}}},Cw="__vector__",Ta="value";function Hi(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Dw(t)?4:oN(t)?9007199254740991:iN(t)?10:11:Y(28295,{value:t})}function _r(t,e){if(t===e)return!0;let n=Hi(t);if(n!==Hi(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return qu(t).isEqual(qu(e));case 3:return(function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=ei(i.timestampValue),a=ei(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(i,o){return ti(i.bytesValue).isEqual(ti(o.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(i,o){return je(i.geoPointValue.latitude)===je(o.geoPointValue.latitude)&&je(i.geoPointValue.longitude)===je(o.geoPointValue.longitude)})(t,e);case 2:return(function(i,o){if("integerValue"in i&&"integerValue"in o)return je(i.integerValue)===je(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=je(i.doubleValue),a=je(o.doubleValue);return s===a?Hu(s)===Hu(a):isNaN(s)&&isNaN(a)}return!1})(t,e);case 9:return Da(t.arrayValue.values||[],e.arrayValue.values||[],_r);case 10:case 11:return(function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(ZR(s)!==ZR(a))return!1;for(let u in s)if(s.hasOwnProperty(u)&&(a[u]===void 0||!_r(s[u],a[u])))return!1;return!0})(t,e);default:return Y(52216,{left:t})}}function zu(t,e){return(t.values||[]).find(n=>_r(n,e))!==void 0}function Ca(t,e){if(t===e)return 0;let n=Hi(t),r=Hi(e);if(n!==r)return he(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return he(t.booleanValue,e.booleanValue);case 2:return(function(o,s){let a=je(o.integerValue||o.doubleValue),u=je(s.integerValue||s.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1})(t,e);case 3:return JR(t.timestampValue,e.timestampValue);case 4:return JR(qu(t),qu(e));case 5:return UE(t.stringValue,e.stringValue);case 6:return(function(o,s){let a=ti(o),u=ti(s);return a.compareTo(u)})(t.bytesValue,e.bytesValue);case 7:return(function(o,s){let a=o.split("/"),u=s.split("/");for(let l=0;l<a.length&&l<u.length;l++){let h=he(a[l],u[l]);if(h!==0)return h}return he(a.length,u.length)})(t.referenceValue,e.referenceValue);case 8:return(function(o,s){let a=he(je(o.latitude),je(s.latitude));return a!==0?a:he(je(o.longitude),je(s.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return XR(t.arrayValue,e.arrayValue);case 10:return(function(o,s){var a,u,l,h;let p=o.fields||{},g=s.fields||{},y=(a=p[Ta])===null||a===void 0?void 0:a.arrayValue,w=(u=g[Ta])===null||u===void 0?void 0:u.arrayValue,k=he(((l=y?.values)===null||l===void 0?void 0:l.length)||0,((h=w?.values)===null||h===void 0?void 0:h.length)||0);return k!==0?k:XR(y,w)})(t.mapValue,e.mapValue);case 11:return(function(o,s){if(o===Af.mapValue&&s===Af.mapValue)return 0;if(o===Af.mapValue)return 1;if(s===Af.mapValue)return-1;let a=o.fields||{},u=Object.keys(a),l=s.fields||{},h=Object.keys(l);u.sort(),h.sort();for(let p=0;p<u.length&&p<h.length;++p){let g=UE(u[p],h[p]);if(g!==0)return g;let y=Ca(a[u[p]],l[h[p]]);if(y!==0)return y}return he(u.length,h.length)})(t.mapValue,e.mapValue);default:throw Y(23264,{le:n})}}function JR(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return he(t,e);let n=ei(t),r=ei(e),i=he(n.seconds,r.seconds);return i!==0?i:he(n.nanos,r.nanos)}function XR(t,e){let n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){let o=Ca(n[i],r[i]);if(o)return o}return he(n.length,r.length)}function Sa(t){return qE(t)}function qE(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){let r=ei(n);return`time(${r.seconds},${r.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return ti(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return K.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let r="[",i=!0;for(let o of n.values||[])i?i=!1:r+=",",r+=qE(o);return r+"]"})(t.arrayValue):"mapValue"in t?(function(n){let r=Object.keys(n.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${qE(n.fields[s])}`;return i+"}"})(t.mapValue):Y(61005,{value:t})}function Nf(t){switch(Hi(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=pp(t);return e?16+Nf(e):16;case 5:return 2*t.stringValue.length;case 6:return ti(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce((i,o)=>i+Nf(o),0)})(t.arrayValue);case 10:case 11:return(function(r){let i=0;return Wi(r.fields,(o,s)=>{i+=o.length+Nf(s)}),i})(t.mapValue);default:throw Y(13486,{value:t})}}function ex(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function zE(t){return!!t&&"integerValue"in t}function Sw(t){return!!t&&"arrayValue"in t}function tx(t){return!!t&&"nullValue"in t}function nx(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Mf(t){return!!t&&"mapValue"in t}function iN(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{})[Tw])===null||n===void 0?void 0:n.stringValue)===Cw}function Lu(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return Wi(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Lu(r)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Lu(t.arrayValue.values[n]);return e}return Object.assign({},t)}function oN(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===rN}var fce={mapValue:{fields:{[Tw]:{stringValue:Cw},[Ta]:{arrayValue:{}}}}};var fn=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Mf(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Lu(n)}setAll(e){let n=pn.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!n.isImmediateParentOf(a)){let u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}s?r[a.lastSegment()]=Lu(s):i.push(a.lastSegment())});let o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){let n=this.field(e.popLast());Mf(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return _r(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Mf(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Wi(n,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new t(Lu(this.value))}};function sN(t){let e=[];return Wi(t.fields,(n,r)=>{let i=new pn([n]);if(Mf(r)){let o=sN(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new Dn(e)}var zn=class t{constructor(e,n,r,i,o,s,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new t(e,0,ie.min(),ie.min(),ie.min(),fn.empty(),0)}static newFoundDocument(e,n,r,i){return new t(e,1,n,ie.min(),r,i,0)}static newNoDocument(e,n){return new t(e,2,n,ie.min(),ie.min(),fn.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,ie.min(),ie.min(),fn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ie.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=fn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=fn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ie.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Aa=class{constructor(e,n){this.position=e,this.inclusive=n}};function rx(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){let o=e[i],s=t.position[i];if(o.field.isKeyField()?r=K.comparator(K.fromName(s.referenceValue),n.key):r=Ca(s,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function ix(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!_r(t.position[n],e.position[n]))return!1;return!0}var ts=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function r3(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var Bf=class{},ct=class t extends Bf{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new WE(e,n,r):n==="array-contains"?new YE(e,r):n==="in"?new ZE(e,r):n==="not-in"?new JE(e,r):n==="array-contains-any"?new XE(e,r):new t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new KE(e,r):new QE(e,r)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Ca(n,this.value)):n!==null&&Hi(this.value)===Hi(n)&&this.matchesComparison(Ca(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Y(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Gn=class t extends Bf{constructor(e,n){super(),this.filters=e,this.op=n,this.he=null}static create(e,n){return new t(e,n)}matches(e){return aN(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}};function aN(t){return t.op==="and"}function cN(t){return i3(t)&&aN(t)}function i3(t){for(let e of t.filters)if(e instanceof Gn)return!1;return!0}function GE(t){if(t instanceof ct)return t.field.canonicalString()+t.op.toString()+Sa(t.value);if(cN(t))return t.filters.map(e=>GE(e)).join(",");{let e=t.filters.map(n=>GE(n)).join(",");return`${t.op}(${e})`}}function uN(t,e){return t instanceof ct?(function(r,i){return i instanceof ct&&r.op===i.op&&r.field.isEqual(i.field)&&_r(r.value,i.value)})(t,e):t instanceof Gn?(function(r,i){return i instanceof Gn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&uN(s,i.filters[a]),!0):!1})(t,e):void Y(19439)}function lN(t){return t instanceof ct?(function(n){return`${n.field.canonicalString()} ${n.op} ${Sa(n.value)}`})(t):t instanceof Gn?(function(n){return n.op.toString()+" {"+n.getFilters().map(lN).join(" ,")+"}"})(t):"Filter"}var WE=class extends ct{constructor(e,n,r){super(e,n,r),this.key=K.fromName(r.referenceValue)}matches(e){let n=K.comparator(e.key,this.key);return this.matchesComparison(n)}},KE=class extends ct{constructor(e,n){super(e,"in",n),this.keys=dN("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},QE=class extends ct{constructor(e,n){super(e,"not-in",n),this.keys=dN("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function dN(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>K.fromName(r.referenceValue))}var YE=class extends ct{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return Sw(n)&&zu(n.arrayValue,this.value)}},ZE=class extends ct{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&zu(this.value.arrayValue,n)}},JE=class extends ct{constructor(e,n){super(e,"not-in",n)}matches(e){if(zu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!zu(this.value.arrayValue,n)}},XE=class extends ct{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!Sw(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>zu(this.value.arrayValue,r))}};var eI=class{constructor(e,n=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.Pe=null}};function ox(t,e=null,n=[],r=[],i=null,o=null,s=null){return new eI(t,e,n,r,i,o,s)}function Aw(t){let e=ne(t);if(e.Pe===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>GE(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>(function(o){return o.field.canonicalString()+o.dir})(r)).join(","),fp(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Sa(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Sa(r)).join(",")),e.Pe=n}return e.Pe}function Rw(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!r3(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!uN(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!ix(t.startAt,e.startAt)&&ix(t.endAt,e.endAt)}function tI(t){return K.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}var qi=class{constructor(e,n=null,r=[],i=[],o=null,s="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=u,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}};function o3(t,e,n,r,i,o,s,a){return new qi(t,e,n,r,i,o,s,a)}function hN(t){return new qi(t)}function sx(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function fN(t){return t.collectionGroup!==null}function Vu(t){let e=ne(t);if(e.Te===null){e.Te=[];let n=new Set;for(let o of e.explicitOrderBy)e.Te.push(o),n.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new Dt(pn.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.Te.push(new ts(o,r))}),n.has(pn.keyField().canonicalString())||e.Te.push(new ts(pn.keyField(),r))}return e.Te}function yr(t){let e=ne(t);return e.Ie||(e.Ie=s3(e,Vu(t))),e.Ie}function s3(t,e){if(t.limitType==="F")return ox(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new ts(i.field,o)});let n=t.endAt?new Aa(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Aa(t.startAt.position,t.startAt.inclusive):null;return ox(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function nI(t,e){let n=t.filters.concat([e]);return new qi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function rI(t,e,n){return new qi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function gp(t,e){return Rw(yr(t),yr(e))&&t.limitType===e.limitType}function pN(t){return`${Aw(yr(t))}|lt:${t.limitType}`}function ga(t){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>lN(i)).join(", ")}]`),fp(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>(function(s){return`${s.field.canonicalString()} (${s.dir})`})(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Sa(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Sa(i)).join(",")),`Target(${r})`})(yr(t))}; limitType=${t.limitType})`}function mp(t,e){return e.isFoundDocument()&&(function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):K.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)})(t,e)&&(function(r,i){for(let o of Vu(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0})(t,e)&&(function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0})(t,e)&&(function(r,i){return!(r.startAt&&!(function(s,a,u){let l=rx(s,a,u);return s.inclusive?l<=0:l<0})(r.startAt,Vu(r),i)||r.endAt&&!(function(s,a,u){let l=rx(s,a,u);return s.inclusive?l>=0:l>0})(r.endAt,Vu(r),i))})(t,e)}function a3(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function gN(t){return(e,n)=>{let r=!1;for(let i of Vu(t)){let o=c3(i,e,n);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function c3(t,e,n){let r=t.field.isKeyField()?K.comparator(e.key,n.key):(function(o,s,a){let u=s.data.field(o),l=a.data.field(o);return u!==null&&l!==null?Ca(u,l):Y(42886)})(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Y(19790,{direction:t.dir})}}var ni=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Wi(this.inner,(n,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return Jx(this.inner)}size(){return this.innerSize}};var u3=new ze(K.comparator);function ri(){return u3}var mN=new ze(K.comparator);function Fu(...t){let e=mN;for(let n of t)e=e.insert(n.key,n);return e}function yN(t){let e=mN;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Yo(){return ju()}function vN(){return ju()}function ju(){return new ni(t=>t.toString(),(t,e)=>t.isEqual(e))}var l3=new ze(K.comparator),d3=new Dt(K.comparator);function ve(...t){let e=d3;for(let n of t)e=e.add(n);return e}var h3=new Dt(he);function f3(){return h3}function xw(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Hu(e)?"-0":e}}function _N(t){return{integerValue:""+t}}function p3(t,e){return HH(e)?_N(e):xw(t,e)}var Ra=class{constructor(){this._=void 0}};function g3(t,e,n){return t instanceof xa?(function(i,o){let s={fields:{[eN]:{stringValue:Xx},[nN]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&Dw(o)&&(o=pp(o)),o&&(s.fields[tN]=o),{mapValue:s}})(n,e):t instanceof ns?IN(t,e):t instanceof rs?wN(t,e):(function(i,o){let s=EN(i,o),a=ax(s)+ax(i.Ee);return zE(s)&&zE(i.Ee)?_N(a):xw(i.serializer,a)})(t,e)}function m3(t,e,n){return t instanceof ns?IN(t,e):t instanceof rs?wN(t,e):n}function EN(t,e){return t instanceof Na?(function(r){return zE(r)||(function(o){return!!o&&"doubleValue"in o})(r)})(e)?e:{integerValue:0}:null}var xa=class extends Ra{},ns=class extends Ra{constructor(e){super(),this.elements=e}};function IN(t,e){let n=bN(e);for(let r of t.elements)n.some(i=>_r(i,r))||n.push(r);return{arrayValue:{values:n}}}var rs=class extends Ra{constructor(e){super(),this.elements=e}};function wN(t,e){let n=bN(e);for(let r of t.elements)n=n.filter(i=>!_r(i,r));return{arrayValue:{values:n}}}var Na=class extends Ra{constructor(e,n){super(),this.serializer=e,this.Ee=n}};function ax(t){return je(t.integerValue||t.doubleValue)}function bN(t){return Sw(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function y3(t,e){return t.field.isEqual(e.field)&&(function(r,i){return r instanceof ns&&i instanceof ns||r instanceof rs&&i instanceof rs?Da(r.elements,i.elements,_r):r instanceof Na&&i instanceof Na?_r(r.Ee,i.Ee):r instanceof xa&&i instanceof xa})(t.transform,e.transform)}var iI=class{constructor(e,n){this.version=e,this.transformResults=n}},Jr=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function kf(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var Ma=class{};function DN(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Gu(t.key,Jr.none()):new is(t.key,t.data,Jr.none());{let n=t.data,r=fn.empty(),i=new Dt(pn.comparator);for(let o of e.fields)if(!i.has(o)){let s=n.field(o);s===null&&o.length>1&&(o=o.popLast(),s=n.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new Er(t.key,r,new Dn(i.toArray()),Jr.none())}}function v3(t,e,n){t instanceof is?(function(i,o,s){let a=i.value.clone(),u=ux(i.fieldTransforms,o,s.transformResults);a.setAll(u),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()})(t,e,n):t instanceof Er?(function(i,o,s){if(!kf(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=ux(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(TN(i)),u.setAll(a),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()})(t,e,n):(function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()})(0,e,n)}function Uu(t,e,n,r){return t instanceof is?(function(o,s,a,u){if(!kf(o.precondition,s))return a;let l=o.value.clone(),h=lx(o.fieldTransforms,u,s);return l.setAll(h),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null})(t,e,n,r):t instanceof Er?(function(o,s,a,u){if(!kf(o.precondition,s))return a;let l=lx(o.fieldTransforms,u,s),h=s.data;return h.setAll(TN(o)),h.setAll(l),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))})(t,e,n,r):(function(o,s,a){return kf(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a})(t,e,n)}function _3(t,e){let n=null;for(let r of t.fieldTransforms){let i=e.data.field(r.field),o=EN(r.transform,i||null);o!=null&&(n===null&&(n=fn.empty()),n.set(r.field,o))}return n||null}function cx(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Da(r,i,(o,s)=>y3(o,s))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var is=class extends Ma{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Er=class extends Ma{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function TN(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function ux(t,e,n){let r=new Map;Ce(t.length===n.length,32656,{Ae:n.length,Re:t.length});for(let i=0;i<n.length;i++){let o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,m3(s,a,n[i]))}return r}function lx(t,e,n){let r=new Map;for(let i of t){let o=i.transform,s=n.data.field(i.field);r.set(i.field,g3(o,s,e))}return r}var Gu=class extends Ma{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},oI=class extends Ma{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var sI=class{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&v3(o,e,r[i])}}applyToLocalView(e,n){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(n=Uu(r,e,n,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(n=Uu(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let r=vN();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=n.has(i.key)?null:a;let u=DN(s,a);u!==null&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(ie.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ve())}isEqual(e){return this.batchId===e.batchId&&Da(this.mutations,e.mutations,(n,r)=>cx(n,r))&&Da(this.baseMutations,e.baseMutations,(n,r)=>cx(n,r))}},aI=class t{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Ce(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let i=(function(){return l3})(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new t(e,n,r,i)}};var cI=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var uI=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var st,Ee;function E3(t){switch(t){case O.OK:return Y(64938);case O.CANCELLED:case O.UNKNOWN:case O.DEADLINE_EXCEEDED:case O.RESOURCE_EXHAUSTED:case O.INTERNAL:case O.UNAVAILABLE:case O.UNAUTHENTICATED:return!1;case O.INVALID_ARGUMENT:case O.NOT_FOUND:case O.ALREADY_EXISTS:case O.PERMISSION_DENIED:case O.FAILED_PRECONDITION:case O.ABORTED:case O.OUT_OF_RANGE:case O.UNIMPLEMENTED:case O.DATA_LOSS:return!0;default:return Y(15467,{code:t})}}function CN(t){if(t===void 0)return Xr("GRPC error has no .code"),O.UNKNOWN;switch(t){case st.OK:return O.OK;case st.CANCELLED:return O.CANCELLED;case st.UNKNOWN:return O.UNKNOWN;case st.DEADLINE_EXCEEDED:return O.DEADLINE_EXCEEDED;case st.RESOURCE_EXHAUSTED:return O.RESOURCE_EXHAUSTED;case st.INTERNAL:return O.INTERNAL;case st.UNAVAILABLE:return O.UNAVAILABLE;case st.UNAUTHENTICATED:return O.UNAUTHENTICATED;case st.INVALID_ARGUMENT:return O.INVALID_ARGUMENT;case st.NOT_FOUND:return O.NOT_FOUND;case st.ALREADY_EXISTS:return O.ALREADY_EXISTS;case st.PERMISSION_DENIED:return O.PERMISSION_DENIED;case st.FAILED_PRECONDITION:return O.FAILED_PRECONDITION;case st.ABORTED:return O.ABORTED;case st.OUT_OF_RANGE:return O.OUT_OF_RANGE;case st.UNIMPLEMENTED:return O.UNIMPLEMENTED;case st.DATA_LOSS:return O.DATA_LOSS;default:return Y(39323,{code:t})}}(Ee=st||(st={}))[Ee.OK=0]="OK",Ee[Ee.CANCELLED=1]="CANCELLED",Ee[Ee.UNKNOWN=2]="UNKNOWN",Ee[Ee.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ee[Ee.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ee[Ee.NOT_FOUND=5]="NOT_FOUND",Ee[Ee.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ee[Ee.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ee[Ee.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ee[Ee.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ee[Ee.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ee[Ee.ABORTED=10]="ABORTED",Ee[Ee.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ee[Ee.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ee[Ee.INTERNAL=13]="INTERNAL",Ee[Ee.UNAVAILABLE=14]="UNAVAILABLE",Ee[Ee.DATA_LOSS=15]="DATA_LOSS";var dx=null;var I3=new Yr([4294967295,4294967295],0);function hx(t){let e=Ox().encode(t),n=new DE;return n.update(e),new Uint8Array(n.digest())}function fx(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Yr([n,r],0),new Yr([i,o],0)]}var lI=class t{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Zo(`Invalid padding: ${n}`);if(r<0)throw new Zo(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Zo(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Zo(`Invalid padding when bitmap length is 0: ${n}`);this.fe=8*e.length-n,this.ge=Yr.fromNumber(this.fe)}pe(e,n,r){let i=e.add(n.multiply(Yr.fromNumber(r)));return i.compare(I3)===1&&(i=new Yr([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;let n=hx(e),[r,i]=fx(n);for(let o=0;o<this.hashCount;o++){let s=this.pe(r,i,o);if(!this.ye(s))return!1}return!0}static create(e,n,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new t(o,i,n);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.fe===0)return;let n=hx(e),[r,i]=fx(n);for(let o=0;o<this.hashCount;o++){let s=this.pe(r,i,o);this.we(s)}}we(e){let n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}},Zo=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var $f=class t{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){let i=new Map;return i.set(e,Wu.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new t(ie.min(),i,new ze(he),ri(),ve())}},Wu=class t{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new t(r,n,ve(),ve(),ve())}};var Ea=class{constructor(e,n,r,i){this.Se=e,this.removedTargetIds=n,this.key=r,this.be=i}},Hf=class{constructor(e,n){this.targetId=e,this.De=n}},qf=class{constructor(e,n,r=Bt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}},zf=class{constructor(){this.ve=0,this.Ce=px(),this.Fe=Bt.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=ve(),n=ve(),r=ve();return this.Ce.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Y(38017,{changeType:o})}}),new Wu(this.Fe,this.Me,e,n,r)}ke(){this.xe=!1,this.Ce=px()}qe(e,n){this.xe=!0,this.Ce=this.Ce.insert(e,n)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,Ce(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}},dI=class{constructor(e){this.We=e,this.Ge=new Map,this.ze=ri(),this.je=Rf(),this.Je=Rf(),this.He=new ze(he)}Ye(e){for(let n of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(n,e.be):this.Xe(n,e.key,e.be);for(let n of e.removedTargetIds)this.Xe(n,e.key,e.be)}et(e){this.forEachTarget(e,n=>{let r=this.tt(n);switch(e.state){case 0:this.nt(n)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(n);break;case 3:this.nt(n)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(n)&&(this.rt(n),r.Be(e.resumeToken));break;default:Y(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ge.forEach((r,i)=>{this.nt(i)&&n(i)})}it(e){let n=e.targetId,r=e.De.count,i=this.st(n);if(i){let o=i.target;if(tI(o))if(r===0){let s=new K(o.path);this.Xe(n,s,zn.newNoDocument(s,ie.min()))}else Ce(r===1,20013,{expectedCount:r});else{let s=this.ot(n);if(s!==r){let a=this._t(e),u=a?this.ut(a,e,s):1;if(u!==0){this.rt(n);let l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(n,l)}dx?.ct((function(h,p,g,y,w){var k,M,j,G,W,oe;let Xe={localCacheCount:h,existenceFilterCount:p.count,databaseId:g.database,projectId:g.projectId},Ie=p.unchangedNames;return Ie&&(Xe.bloomFilter={applied:w===0,hashCount:(k=Ie?.hashCount)!==null&&k!==void 0?k:0,bitmapLength:(G=(j=(M=Ie?.bits)===null||M===void 0?void 0:M.bitmap)===null||j===void 0?void 0:j.length)!==null&&G!==void 0?G:0,padding:(oe=(W=Ie?.bits)===null||W===void 0?void 0:W.padding)!==null&&oe!==void 0?oe:0,mightContain:b=>{var v;return(v=y?.mightContain(b))!==null&&v!==void 0&&v}}),Xe})(s,e.De,this.We.lt(),a,u))}}}}_t(e){let n=e.De.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n,s,a;try{s=ti(r).toUint8Array()}catch(u){if(u instanceof Vf)return $i("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new lI(s,i,o)}catch(u){return $i(u instanceof Zo?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.fe===0?null:a}ut(e,n,r){return n.De.count===r-this.ht(e,n.targetId)?0:2}ht(e,n){let r=this.We.getRemoteKeysForTarget(n),i=0;return r.forEach(o=>{let s=this.We.lt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Xe(n,o,null),i++)}),i}Pt(e){let n=new Map;this.Ge.forEach((o,s)=>{let a=this.st(s);if(a){if(o.current&&tI(a.target)){let u=new K(a.target.path);this.Tt(u).has(s)||this.It(s,u)||this.Xe(s,u,zn.newNoDocument(u,e))}o.Ne&&(n.set(s,o.Le()),o.ke())}});let r=ve();this.Je.forEach((o,s)=>{let a=!0;s.forEachWhile(u=>{let l=this.st(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.ze.forEach((o,s)=>s.setReadTime(e));let i=new $f(e,n,this.He,this.ze,r);return this.ze=ri(),this.je=Rf(),this.Je=Rf(),this.He=new ze(he),i}Ze(e,n){if(!this.nt(e))return;let r=this.It(e,n.key)?2:0;this.tt(e).qe(n.key,r),this.ze=this.ze.insert(n.key,n),this.je=this.je.insert(n.key,this.Tt(n.key).add(e)),this.Je=this.Je.insert(n.key,this.dt(n.key).add(e))}Xe(e,n,r){if(!this.nt(e))return;let i=this.tt(e);this.It(e,n)?i.qe(n,1):i.Qe(n),this.Je=this.Je.insert(n,this.dt(n).delete(e)),this.Je=this.Je.insert(n,this.dt(n).add(e)),r&&(this.ze=this.ze.insert(n,r))}removeTarget(e){this.Ge.delete(e)}ot(e){let n=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let n=this.Ge.get(e);return n||(n=new zf,this.Ge.set(e,n)),n}dt(e){let n=this.Je.get(e);return n||(n=new Dt(he),this.Je=this.Je.insert(e,n)),n}Tt(e){let n=this.je.get(e);return n||(n=new Dt(he),this.je=this.je.insert(e,n)),n}nt(e){let n=this.st(e)!==null;return n||$("WatchChangeAggregator","Detected inactive target",e),n}st(e){let n=this.Ge.get(e);return n&&n.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new zf),this.We.getRemoteKeysForTarget(e).forEach(n=>{this.Xe(e,n,null)})}It(e,n){return this.We.getRemoteKeysForTarget(e).has(n)}};function Rf(){return new ze(K.comparator)}function px(){return new ze(K.comparator)}var w3={asc:"ASCENDING",desc:"DESCENDING"},b3={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},D3={and:"AND",or:"OR"},hI=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function fI(t,e){return t.useProto3Json||fp(e)?e:{value:e}}function Gf(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function SN(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function T3(t,e){return Gf(t,e.toTimestamp())}function vr(t){return Ce(!!t,49232),ie.fromTimestamp((function(n){let r=ei(n);return new lt(r.seconds,r.nanos)})(t))}function Nw(t,e){return pI(t,e).canonicalString()}function pI(t,e){let n=(function(i){return new Ue(["projects",i.projectId,"databases",i.database])})(t).child("documents");return e===void 0?n:n.child(e)}function AN(t){let e=Ue.fromString(t);return Ce(kN(e),10190,{key:e.toString()}),e}function gI(t,e){return Nw(t.databaseId,e.path)}function xE(t,e){let n=AN(e);if(n.get(1)!==t.databaseId.projectId)throw new B(O.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new B(O.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new K(xN(n))}function RN(t,e){return Nw(t.databaseId,e)}function C3(t){let e=AN(t);return e.length===4?Ue.emptyPath():xN(e)}function mI(t){return new Ue(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function xN(t){return Ce(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function gx(t,e,n){return{name:gI(t,e),fields:n.value.mapValue.fields}}function S3(t,e){let n;if("targetChange"in e){e.targetChange;let r=(function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:Y(39313,{state:l})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=(function(l,h){return l.useProto3Json?(Ce(h===void 0||typeof h=="string",58123),Bt.fromBase64String(h||"")):(Ce(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),Bt.fromUint8Array(h||new Uint8Array))})(t,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&(function(l){let h=l.code===void 0?O.UNKNOWN:CN(l.code);return new B(h,l.message||"")})(s);n=new qf(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=xE(t,r.document.name),o=vr(r.document.updateTime),s=r.document.createTime?vr(r.document.createTime):ie.min(),a=new fn({mapValue:{fields:r.document.fields}}),u=zn.newFoundDocument(i,o,s,a),l=r.targetIds||[],h=r.removedTargetIds||[];n=new Ea(l,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=xE(t,r.document),o=r.readTime?vr(r.readTime):ie.min(),s=zn.newNoDocument(i,o),a=r.removedTargetIds||[];n=new Ea([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=xE(t,r.document),o=r.removedTargetIds||[];n=new Ea([],o,i,null)}else{if(!("filter"in e))return Y(11601,{At:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new uI(i,o),a=r.targetId;n=new Hf(a,s)}}return n}function A3(t,e){let n;if(e instanceof is)n={update:gx(t,e.key,e.value)};else if(e instanceof Gu)n={delete:gI(t,e.key)};else if(e instanceof Er)n={update:gx(t,e.key,e.data),updateMask:L3(e.fieldMask)};else{if(!(e instanceof oI))return Y(16599,{Rt:e.type});n={verify:gI(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>(function(o,s){let a=s.transform;if(a instanceof xa)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof ns)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof rs)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Na)return{fieldPath:s.field.canonicalString(),increment:a.Ee};throw Y(20930,{transform:s.transform})})(0,r))),e.precondition.isNone||(n.currentDocument=(function(i,o){return o.updateTime!==void 0?{updateTime:T3(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Y(27497)})(t,e.precondition)),n}function R3(t,e){return t&&t.length>0?(Ce(e!==void 0,14353),t.map(n=>(function(i,o){let s=i.updateTime?vr(i.updateTime):vr(o);return s.isEqual(ie.min())&&(s=vr(o)),new iI(s,i.transformResults||[])})(n,e))):[]}function x3(t,e){return{documents:[RN(t,e.path)]}}function N3(t,e){let n={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=RN(t,i);let o=(function(l){if(l.length!==0)return MN(Gn.create(l,"and"))})(e.filters);o&&(n.structuredQuery.where=o);let s=(function(l){if(l.length!==0)return l.map(h=>(function(g){return{field:ma(g.field),direction:P3(g.dir)}})(h))})(e.orderBy);s&&(n.structuredQuery.orderBy=s);let a=fI(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=(function(l){return{before:l.inclusive,values:l.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(l){return{before:!l.inclusive,values:l.position}})(e.endAt)),{Vt:n,parent:i}}function M3(t){let e=C3(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Ce(r===1,65062);let h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];n.where&&(o=(function(p){let g=NN(p);return g instanceof Gn&&cN(g)?g.getFilters():[g]})(n.where));let s=[];n.orderBy&&(s=(function(p){return p.map(g=>(function(w){return new ts(ya(w.field),(function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(w.direction))})(g))})(n.orderBy));let a=null;n.limit&&(a=(function(p){let g;return g=typeof p=="object"?p.value:p,fp(g)?null:g})(n.limit));let u=null;n.startAt&&(u=(function(p){let g=!!p.before,y=p.values||[];return new Aa(y,g)})(n.startAt));let l=null;return n.endAt&&(l=(function(p){let g=!p.before,y=p.values||[];return new Aa(y,g)})(n.endAt)),o3(e,i,s,o,a,"F",u,l)}function k3(t,e){let n=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Y(28987,{purpose:i})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function NN(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":let r=ya(n.unaryFilter.field);return ct.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=ya(n.unaryFilter.field);return ct.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=ya(n.unaryFilter.field);return ct.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=ya(n.unaryFilter.field);return ct.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Y(61313);default:return Y(60726)}})(t):t.fieldFilter!==void 0?(function(n){return ct.create(ya(n.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Y(58110);default:return Y(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return Gn.create(n.compositeFilter.filters.map(r=>NN(r)),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Y(1026)}})(n.compositeFilter.op))})(t):Y(30097,{filter:t})}function P3(t){return w3[t]}function O3(t){return b3[t]}function F3(t){return D3[t]}function ma(t){return{fieldPath:t.canonicalString()}}function ya(t){return pn.fromServerFormat(t.fieldPath)}function MN(t){return t instanceof ct?(function(n){if(n.op==="=="){if(nx(n.value))return{unaryFilter:{field:ma(n.field),op:"IS_NAN"}};if(tx(n.value))return{unaryFilter:{field:ma(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(nx(n.value))return{unaryFilter:{field:ma(n.field),op:"IS_NOT_NAN"}};if(tx(n.value))return{unaryFilter:{field:ma(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ma(n.field),op:O3(n.op),value:n.value}}})(t):t instanceof Gn?(function(n){let r=n.getFilters().map(i=>MN(i));return r.length===1?r[0]:{compositeFilter:{op:F3(n.op),filters:r}}})(t):Y(54877,{filter:t})}function L3(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function kN(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var Ku=class t{constructor(e,n,r,i,o=ie.min(),s=ie.min(),a=Bt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var yI=class{constructor(e){this.gt=e}};function V3(t){let e=M3({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?rI(e,e.limit,"L"):e}var Wf=class{constructor(){}bt(e,n){this.Dt(e,n),n.vt()}Dt(e,n){if("nullValue"in e)this.Ct(n,5);else if("booleanValue"in e)this.Ct(n,10),n.Ft(e.booleanValue?1:0);else if("integerValue"in e)this.Ct(n,15),n.Ft(je(e.integerValue));else if("doubleValue"in e){let r=je(e.doubleValue);isNaN(r)?this.Ct(n,13):(this.Ct(n,15),Hu(r)?n.Ft(0):n.Ft(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ct(n,20),typeof r=="string"&&(r=ei(r)),n.Mt(`${r.seconds||""}`),n.Ft(r.nanos||0)}else if("stringValue"in e)this.xt(e.stringValue,n),this.Ot(n);else if("bytesValue"in e)this.Ct(n,30),n.Nt(ti(e.bytesValue)),this.Ot(n);else if("referenceValue"in e)this.Bt(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ct(n,45),n.Ft(r.latitude||0),n.Ft(r.longitude||0)}else"mapValue"in e?oN(e)?this.Ct(n,Number.MAX_SAFE_INTEGER):iN(e)?this.Lt(e.mapValue,n):(this.kt(e.mapValue,n),this.Ot(n)):"arrayValue"in e?(this.qt(e.arrayValue,n),this.Ot(n)):Y(19022,{Qt:e})}xt(e,n){this.Ct(n,25),this.$t(e,n)}$t(e,n){n.Mt(e)}kt(e,n){let r=e.fields||{};this.Ct(n,55);for(let i of Object.keys(r))this.xt(i,n),this.Dt(r[i],n)}Lt(e,n){var r,i;let o=e.fields||{};this.Ct(n,53);let s=Ta,a=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.Ct(n,15),n.Ft(je(a)),this.xt(s,n),this.Dt(o[s],n)}qt(e,n){let r=e.values||[];this.Ct(n,50);for(let i of r)this.Dt(i,n)}Bt(e,n){this.Ct(n,37),K.fromName(e).path.forEach(r=>{this.Ct(n,60),this.$t(r,n)})}Ct(e,n){e.Ft(n)}Ot(e){e.Ft(2)}};Wf.Ut=new Wf;var vI=class{constructor(){this.Dn=new _I}addToCollectionParentIndex(e,n){return this.Dn.add(n),L.resolve()}getCollectionParents(e,n){return L.resolve(this.Dn.getEntries(n))}addFieldIndex(e,n){return L.resolve()}deleteFieldIndex(e,n){return L.resolve()}deleteAllFieldIndexes(e){return L.resolve()}createTargetIndexes(e,n){return L.resolve()}getDocumentsMatchingTarget(e,n){return L.resolve(null)}getIndexType(e,n){return L.resolve(0)}getFieldIndexes(e,n){return L.resolve([])}getNextCollectionGroupToUpdate(e){return L.resolve(null)}getMinOffset(e,n){return L.resolve(es.min())}getMinOffsetFromCollectionGroup(e,n){return L.resolve(es.min())}updateCollectionGroup(e,n,r){return L.resolve()}updateIndexEntries(e,n){return L.resolve()}},_I=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Dt(Ue.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Dt(Ue.comparator)).toArray()}};var pce=new Uint8Array(0);var mx={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},PN=41943040,bn=class t{static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}};bn.DEFAULT_COLLECTION_PERCENTILE=10,bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,bn.DEFAULT=new bn(PN,bn.DEFAULT_COLLECTION_PERCENTILE,bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),bn.DISABLED=new bn(-1,0,0);var Qu=class t{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new t(0)}static ur(){return new t(-1)}};var yx="LruGarbageCollector",j3=1048576;function vx([t,e],[n,r]){let i=he(t,n);return i===0?he(e,r):i}var EI=class{constructor(e){this.Tr=e,this.buffer=new Dt(vx),this.Ir=0}dr(){return++this.Ir}Er(e){let n=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(n);else{let r=this.buffer.last();vx(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}},II=class{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){$(yx,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Va(n)?$(yx,"Ignoring IndexedDB error during garbage collection: ",n):await La(n)}await this.Rr(3e5)})}},wI=class{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.mr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return L.resolve(ww.ue);let r=new EI(n);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.gr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?($("LruGarbageCollector","Garbage collection skipped; disabled"),L.resolve(mx)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?($("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),mx):this.pr(e,n))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,n){let r,i,o,s,a,u,l,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?($("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,s=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,a=Date.now(),this.removeTargets(e,r,n))).next(p=>(o=p,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(l=Date.now(),pa()<=pe.DEBUG&&$("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-h}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(u-a)+`ms
	Removed ${p} documents in `+(l-u)+`ms
Total Duration: ${l-h}ms`),L.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:p})))}};function U3(t,e){return new wI(t,e)}var bI=class{constructor(){this.changes=new ni(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,zn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?L.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var DI=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var TI=class{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Uu(r.mutation,i,Dn.empty(),lt.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ve()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ve()){let i=Yo();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(o=>{let s=Fu();return o.forEach((a,u)=>{s=s.insert(a,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,n){let r=Yo();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ve()))}populateOverlays(e,n,r){let i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{n.set(s,a)})})}computeViews(e,n,r,i){let o=ri(),s=ju(),a=(function(){return ju()})();return n.forEach((u,l)=>{let h=r.get(l.key);i.has(l.key)&&(h===void 0||h.mutation instanceof Er)?o=o.insert(l.key,l):h!==void 0?(s.set(l.key,h.mutation.getFieldMask()),Uu(h.mutation,l,h.mutation.getFieldMask(),lt.now())):s.set(l.key,Dn.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((l,h)=>s.set(l,h)),n.forEach((l,h)=>{var p;return a.set(l,new DI(h,(p=s.get(l))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,n){let r=ju(),i=new ze((s,a)=>s-a),o=ve();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(s=>{for(let a of s)a.keys().forEach(u=>{let l=n.get(u);if(l===null)return;let h=r.get(u)||Dn.empty();h=a.applyToLocalView(l,h),r.set(u,h);let p=(i.get(a.batchId)||ve()).add(u);i=i.insert(a.batchId,p)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let u=a.getNext(),l=u.key,h=u.value,p=vN();h.forEach(g=>{if(!o.has(g)){let y=DN(n.get(g),r.get(g));y!==null&&p.set(g,y),o=o.add(g)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,p))}return L.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return(function(s){return K.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):fN(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):L.resolve(Yo()),a=$u,u=o;return s.next(l=>L.forEach(l,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),o.get(h)?L.resolve():this.remoteDocumentCache.getEntry(e,h).next(g=>{u=u.insert(h,g)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,u,l,ve())).next(h=>({batchId:a,changes:yN(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new K(n)).next(r=>{let i=Fu();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){let o=n.collectionGroup,s=Fu();return this.indexManager.getCollectionParents(e,o).next(a=>L.forEach(a,u=>{let l=(function(p,g){return new qi(g,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)})(n,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((p,g)=>{s=s.insert(p,g)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i))).next(s=>{o.forEach((u,l)=>{let h=l.getKey();s.get(h)===null&&(s=s.insert(h,zn.newInvalidDocument(h)))});let a=Fu();return s.forEach((u,l)=>{let h=o.get(u);h!==void 0&&Uu(h.mutation,l,Dn.empty(),lt.now()),mp(n,l)&&(a=a.insert(u,l))}),a})}};var CI=class{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,n){return L.resolve(this.Br.get(n))}saveBundleMetadata(e,n){return this.Br.set(n.id,(function(i){return{id:i.id,version:i.version,createTime:vr(i.createTime)}})(n)),L.resolve()}getNamedQuery(e,n){return L.resolve(this.Lr.get(n))}saveNamedQuery(e,n){return this.Lr.set(n.name,(function(i){return{name:i.name,query:V3(i.bundledQuery),readTime:vr(i.readTime)}})(n)),L.resolve()}};var SI=class{constructor(){this.overlays=new ze(K.comparator),this.kr=new Map}getOverlay(e,n){return L.resolve(this.overlays.get(n))}getOverlays(e,n){let r=Yo();return L.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,o)=>{this.wt(e,n,o)}),L.resolve()}removeOverlaysForBatchId(e,n,r){let i=this.kr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.kr.delete(r)),L.resolve()}getOverlaysForCollection(e,n,r){let i=Yo(),o=n.length+1,s=new K(n.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let u=a.getNext().value,l=u.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return L.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new ze((l,h)=>l-h),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let h=o.get(l.largestBatchId);h===null&&(h=Yo(),o=o.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}let a=Yo(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,h)=>a.set(l,h)),!(a.size()>=i)););return L.resolve(a)}wt(e,n,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.kr.get(i.largestBatchId).delete(r.key);this.kr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new cI(n,r));let o=this.kr.get(n);o===void 0&&(o=ve(),this.kr.set(n,o)),this.kr.set(n,o.add(r.key))}};var AI=class{constructor(){this.sessionToken=Bt.EMPTY_BYTE_STRING}getSessionToken(e){return L.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,L.resolve()}};var Yu=class{constructor(){this.qr=new Dt(at.Qr),this.$r=new Dt(at.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,n){let r=new at(e,n);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Wr(new at(e,n))}Gr(e,n){e.forEach(r=>this.removeReference(r,n))}zr(e){let n=new K(new Ue([])),r=new at(n,e),i=new at(n,e+1),o=[];return this.$r.forEachInRange([r,i],s=>{this.Wr(s),o.push(s.key)}),o}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){let n=new K(new Ue([])),r=new at(n,e),i=new at(n,e+1),o=ve();return this.$r.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let n=new at(e,0),r=this.qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}},at=class{constructor(e,n){this.key=e,this.Hr=n}static Qr(e,n){return K.comparator(e.key,n.key)||he(e.Hr,n.Hr)}static Ur(e,n){return he(e.Hr,n.Hr)||K.comparator(e.key,n.key)}};var RI=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.er=1,this.Yr=new Dt(at.Qr)}checkEmpty(e){return L.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){let o=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new sI(o,n,r,i);this.mutationQueue.push(s);for(let a of i)this.Yr=this.Yr.add(new at(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return L.resolve(s)}lookupMutationBatch(e,n){return L.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=this.Xr(r),o=i<0?0:i;return L.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return L.resolve(this.mutationQueue.length===0?bw:this.er-1)}getAllMutationBatches(e){return L.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let r=new at(n,0),i=new at(n,Number.POSITIVE_INFINITY),o=[];return this.Yr.forEachInRange([r,i],s=>{let a=this.Zr(s.Hr);o.push(a)}),L.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Dt(he);return n.forEach(i=>{let o=new at(i,0),s=new at(i,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([o,s],a=>{r=r.add(a.Hr)})}),L.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,o=r;K.isDocumentKey(o)||(o=o.child(""));let s=new at(new K(o),0),a=new Dt(he);return this.Yr.forEachWhile(u=>{let l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.Hr)),!0)},s),L.resolve(this.ei(a))}ei(e){let n=[];return e.forEach(r=>{let i=this.Zr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Ce(this.ti(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return L.forEach(n.mutations,i=>{let o=new at(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,n){let r=new at(n,0),i=this.Yr.firstAfterOrEqual(r);return L.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,L.resolve()}ti(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){let n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var xI=class{constructor(e){this.ni=e,this.docs=(function(){return new ze(K.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let r=n.key,i=this.docs.get(r),o=i?i.size:0,s=this.ni(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let r=this.docs.get(n);return L.resolve(r?r.document.mutableCopy():zn.newInvalidDocument(n))}getEntries(e,n){let r=ri();return n.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():zn.newInvalidDocument(i))}),L.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=ri(),s=n.path,a=new K(s.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){let{key:l,value:{document:h}}=u.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||UH(jH(h),r)<=0||(i.has(h.key)||mp(n,h))&&(o=o.insert(h.key,h.mutableCopy()))}return L.resolve(o)}getAllFromCollectionGroup(e,n,r,i){Y(9500)}ri(e,n){return L.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new NI(this)}getSize(e){return L.resolve(this.size)}},NI=class extends bI{constructor(e){super(),this.Or=e}applyChanges(e){let n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Or.addEntry(e,i)):this.Or.removeEntry(r)}),L.waitFor(n)}getFromCache(e,n){return this.Or.getEntry(e,n)}getAllFromCache(e,n){return this.Or.getEntries(e,n)}};var MI=class{constructor(e){this.persistence=e,this.ii=new ni(n=>Aw(n),Rw),this.lastRemoteSnapshotVersion=ie.min(),this.highestTargetId=0,this.si=0,this.oi=new Yu,this.targetCount=0,this._i=Qu.ar()}forEachTarget(e,n){return this.ii.forEach((r,i)=>n(i)),L.resolve()}getLastRemoteSnapshotVersion(e){return L.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return L.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),L.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.si&&(this.si=n),L.resolve()}hr(e){this.ii.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this._i=new Qu(n),this.highestTargetId=n),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,n){return this.hr(n),this.targetCount+=1,L.resolve()}updateTargetData(e,n){return this.hr(n),L.resolve()}removeTargetData(e,n){return this.ii.delete(n.target),this.oi.zr(n.targetId),this.targetCount-=1,L.resolve()}removeTargets(e,n,r){let i=0,o=[];return this.ii.forEach((s,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.ii.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),L.waitFor(o).next(()=>i)}getTargetCount(e){return L.resolve(this.targetCount)}getTargetData(e,n){let r=this.ii.get(n)||null;return L.resolve(r)}addMatchingKeys(e,n,r){return this.oi.Kr(n,r),L.resolve()}removeMatchingKeys(e,n,r){this.oi.Gr(n,r);let i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),L.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.oi.zr(n),L.resolve()}getMatchingKeysForTargetId(e,n){let r=this.oi.Jr(n);return L.resolve(r)}containsKey(e,n){return L.resolve(this.oi.containsKey(n))}};var Kf=class{constructor(e,n){this.ai={},this.overlays={},this.ui=new ww(0),this.ci=!1,this.ci=!0,this.li=new AI,this.referenceDelegate=e(this),this.hi=new MI(this),this.indexManager=new vI,this.remoteDocumentCache=(function(i){return new xI(i)})(r=>this.referenceDelegate.Pi(r)),this.serializer=new yI(n),this.Ti=new CI(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new SI,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ai[e.toKey()];return r||(r=new RI(n,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,n,r){$("MemoryPersistence","Starting transaction:",e);let i=new kI(this.ui.next());return this.referenceDelegate.Ii(),r(i).next(o=>this.referenceDelegate.di(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ei(e,n){return L.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,n)))}},kI=class extends $E{constructor(e){super(),this.currentSequenceNumber=e}},PI=class t{constructor(e){this.persistence=e,this.Ai=new Yu,this.Ri=null}static Vi(e){return new t(e)}get mi(){if(this.Ri)return this.Ri;throw Y(60996)}addReference(e,n,r){return this.Ai.addReference(r,n),this.mi.delete(r.toString()),L.resolve()}removeReference(e,n,r){return this.Ai.removeReference(r,n),this.mi.add(r.toString()),L.resolve()}markPotentiallyOrphaned(e,n){return this.mi.add(n.toString()),L.resolve()}removeTarget(e,n){this.Ai.zr(n.targetId).forEach(i=>this.mi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(o=>this.mi.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}Ii(){this.Ri=new Set}di(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return L.forEach(this.mi,r=>{let i=K.fromPath(r);return this.fi(e,i).next(o=>{o||n.removeEntry(i,ie.min())})}).next(()=>(this.Ri=null,n.apply(e)))}updateLimboDocument(e,n){return this.fi(e,n).next(r=>{r?this.mi.delete(n.toString()):this.mi.add(n.toString())})}Pi(e){return 0}fi(e,n){return L.or([()=>L.resolve(this.Ai.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}},Qf=class t{constructor(e,n){this.persistence=e,this.gi=new ni(r=>qH(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=U3(this,n)}static Vi(e,n){return new t(e,n)}Ii(){}di(e){return L.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}mr(e){let n=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}yr(e){let n=0;return this.gr(e,r=>{n++}).next(()=>n)}gr(e,n){return L.forEach(this.gi,(r,i)=>this.Sr(e,r,i).next(o=>o?L.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ri(e,s=>this.Sr(e,s,n).next(a=>{a||(r++,o.removeEntry(s,ie.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.gi.set(n,e.currentSequenceNumber),L.resolve()}removeTarget(e,n){let r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),L.resolve()}removeReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),L.resolve()}updateLimboDocument(e,n){return this.gi.set(n,e.currentSequenceNumber),L.resolve()}Pi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Nf(e.data.value)),n}Sr(e,n,r){return L.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{let i=this.gi.get(n);return L.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var OI=class t{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Is=r,this.ds=i}static Es(e,n){let r=ve(),i=ve();for(let o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new t(e,n.fromCache,r,i)}};var FI=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var LI=class{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return gA()?8:$H(wt())>0?6:4})()}initialize(e,n){this.gs=e,this.indexManager=n,this.As=!0}getDocumentsMatchingQuery(e,n,r,i){let o={result:null};return this.ps(e,n).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ys(e,n,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new FI;return this.ws(e,n,s).next(a=>{if(o.result=a,this.Rs)return this.Ss(e,n,s,a.size)})}).next(()=>o.result)}Ss(e,n,r,i){return r.documentReadCount<this.Vs?(pa()<=pe.DEBUG&&$("QueryEngine","SDK will not create cache indexes for query:",ga(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),L.resolve()):(pa()<=pe.DEBUG&&$("QueryEngine","Query:",ga(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.fs*i?(pa()<=pe.DEBUG&&$("QueryEngine","The SDK decides to create cache indexes for query:",ga(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,yr(n))):L.resolve())}ps(e,n){if(sx(n))return L.resolve(null);let r=yr(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=rI(n,null,"F"),r=yr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=ve(...o);return this.gs.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{let l=this.bs(n,a);return this.Ds(n,l,s,u.readTime)?this.ps(e,rI(n,null,"F")):this.vs(e,l,n,u)}))})))}ys(e,n,r,i){return sx(n)||i.isEqual(ie.min())?L.resolve(null):this.gs.getDocuments(e,r).next(o=>{let s=this.bs(n,o);return this.Ds(n,s,r,i)?L.resolve(null):(pa()<=pe.DEBUG&&$("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ga(n)),this.vs(e,s,n,VH(i,$u)).next(a=>a))})}bs(e,n){let r=new Dt(gN(e));return n.forEach((i,o)=>{mp(e,o)&&(r=r.add(o))}),r}Ds(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;let o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}ws(e,n,r){return pa()<=pe.DEBUG&&$("QueryEngine","Using full collection scan to execute query:",ga(n)),this.gs.getDocumentsMatchingQuery(e,n,es.min(),r)}vs(e,n,r,i){return this.gs.getDocumentsMatchingQuery(e,r,i).next(o=>(n.forEach(s=>{o=o.insert(s.key,s)}),o))}};var Mw="LocalStore",B3=3e8,VI=class{constructor(e,n,r,i){this.persistence=e,this.Cs=n,this.serializer=i,this.Fs=new ze(he),this.Ms=new ni(o=>Aw(o),Rw),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new TI(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Fs))}};function $3(t,e,n,r){return new VI(t,e,n,r)}async function ON(t,e){let n=ne(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n.Ns(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],u=ve();for(let l of i){s.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}for(let l of o){a.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}return n.localDocuments.getDocuments(r,u).next(l=>({Bs:l,removedBatchIds:s,addedBatchIds:a}))})})}function H3(t,e){let n=ne(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=n.Os.newChangeBuffer({trackRemovals:!0});return(function(a,u,l,h){let p=l.batch,g=p.keys(),y=L.resolve();return g.forEach(w=>{y=y.next(()=>h.getEntry(u,w)).next(k=>{let M=l.docVersions.get(w);Ce(M!==null,48541),k.version.compareTo(M)<0&&(p.applyToRemoteDocument(k,l),k.isValidDocument()&&(k.setReadTime(l.commitVersion),h.addEntry(k)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(u,p))})(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(a){let u=ve();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u})(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function FN(t){let e=ne(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.hi.getLastRemoteSnapshotVersion(n))}function q3(t,e){let n=ne(t),r=e.snapshotVersion,i=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=n.Os.newChangeBuffer({trackRemovals:!0});i=n.Fs;let a=[];e.targetChanges.forEach((h,p)=>{let g=i.get(p);if(!g)return;a.push(n.hi.removeMatchingKeys(o,h.removedDocuments,p).next(()=>n.hi.addMatchingKeys(o,h.addedDocuments,p)));let y=g.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?y=y.withResumeToken(Bt.EMPTY_BYTE_STRING,ie.min()).withLastLimboFreeSnapshotVersion(ie.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,r)),i=i.insert(p,y),(function(k,M,j){return k.resumeToken.approximateByteSize()===0||M.snapshotVersion.toMicroseconds()-k.snapshotVersion.toMicroseconds()>=B3?!0:j.addedDocuments.size+j.modifiedDocuments.size+j.removedDocuments.size>0})(g,y,h)&&a.push(n.hi.updateTargetData(o,y))});let u=ri(),l=ve();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(o,h))}),a.push(z3(o,s,e.documentUpdates).next(h=>{u=h.Ls,l=h.ks})),!r.isEqual(ie.min())){let h=n.hi.getLastRemoteSnapshotVersion(o).next(p=>n.hi.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(h)}return L.waitFor(a).next(()=>s.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,u,l)).next(()=>u)}).then(o=>(n.Fs=i,o))}function z3(t,e,n){let r=ve(),i=ve();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let s=ri();return n.forEach((a,u)=>{let l=o.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(ie.min())?(e.removeEntry(a,u.readTime),s=s.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),s=s.insert(a,u)):$(Mw,"Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{Ls:s,ks:i}})}function G3(t,e){let n=ne(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=bw),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function W3(t,e){let n=ne(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.hi.getTargetData(r,e).next(o=>o?(i=o,L.resolve(i)):n.hi.allocateTargetId(r).next(s=>(i=new Ku(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.hi.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=n.Fs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(r.targetId,r),n.Ms.set(e,r.targetId)),r})}async function jI(t,e,n){let r=ne(t),i=r.Fs.get(e),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i))}catch(s){if(!Va(s))throw s;$(Mw,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(i.target)}function _x(t,e,n){let r=ne(t),i=ie.min(),o=ve();return r.persistence.runTransaction("Execute query","readwrite",s=>(function(u,l,h){let p=ne(u),g=p.Ms.get(h);return g!==void 0?L.resolve(p.Fs.get(g)):p.hi.getTargetData(l,h)})(r,s,yr(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(s,a.targetId).next(u=>{o=u})}).next(()=>r.Cs.getDocumentsMatchingQuery(s,e,n?i:ie.min(),n?o:ve())).next(a=>(K3(r,a3(e),a),{documents:a,qs:o})))}function K3(t,e,n){let r=t.xs.get(e)||ie.min();n.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.xs.set(e,r)}var Yf=class{constructor(){this.activeTargetIds=f3()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var UI=class{constructor(){this.Fo=new Yf,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,n,r){this.Mo[e]=n}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new Yf,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var BI=class{xo(e){}shutdown(){}};var Ex="ConnectivityMonitor",Zf=class{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){$(Ex,"Network connectivity changed: AVAILABLE");for(let e of this.ko)e(0)}Lo(){$(Ex,"Network connectivity changed: UNAVAILABLE");for(let e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var xf=null;function $I(){return xf===null?xf=(function(){return 268435456+Math.round(2147483648*Math.random())})():xf++,"0x"+xf.toString(16)}var NE="RestConnection",Q3={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},HI=class{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.$o=n+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.Ko=this.databaseId.database===jf?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,n,r,i,o){let s=$I(),a=this.Go(e,n.toUriEncodedString());$(NE,`Sending RPC '${e}' ${s}:`,a,r);let u={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(u,i,o);let{host:l}=new URL(a),h=Bn(l);return this.jo(e,a,u,r,h).then(p=>($(NE,`Received RPC '${e}' ${s}: `,p),p),p=>{throw $i(NE,`RPC '${e}' ${s} failed with error: `,p,"url: ",a,"request:",r),p})}Jo(e,n,r,i,o,s){return this.Wo(e,n,r,i,o)}zo(e,n,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Fa})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}Go(e,n){let r=Q3[e];return`${this.$o}/v1/${n}:${r}`}terminate(){}};var qI=class{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}};var jt="WebChannelConnection",zI=class extends HI{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,n,r,i,o){let s=$I();return new Promise((a,u)=>{let l=new TE;l.setWithCredentials(!0),l.listenOnce(CE.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Ou.NO_ERROR:let p=l.getResponseJson();$(jt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(p)),a(p);break;case Ou.TIMEOUT:$(jt,`RPC '${e}' ${s} timed out`),u(new B(O.DEADLINE_EXCEEDED,"Request time out"));break;case Ou.HTTP_ERROR:let g=l.getStatus();if($(jt,`RPC '${e}' ${s} failed with status:`,g,"response text:",l.getResponseText()),g>0){let y=l.getResponseJson();Array.isArray(y)&&(y=y[0]);let w=y?.error;if(w&&w.status&&w.message){let k=(function(j){let G=j.toLowerCase().replace(/_/g,"-");return Object.values(O).indexOf(G)>=0?G:O.UNKNOWN})(w.status);u(new B(k,w.message))}else u(new B(O.UNKNOWN,"Server responded with status "+l.getStatus()))}else u(new B(O.UNAVAILABLE,"Connection failed."));break;default:Y(9055,{c_:e,streamId:s,l_:l.getLastErrorCode(),h_:l.getLastError()})}}finally{$(jt,`RPC '${e}' ${s} completed.`)}});let h=JSON.stringify(i);$(jt,`RPC '${e}' ${s} sending request:`,i),l.send(n,"POST",h,r,15)})}P_(e,n,r){let i=$I(),o=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=RE(),a=AE(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.zo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;let h=o.join("");$(jt,`Creating RPC '${e}' stream ${i}: ${h}`,u);let p=s.createWebChannel(h,u);this.T_(p);let g=!1,y=!1,w=new qI({Ho:M=>{y?$(jt,`Not sending because RPC '${e}' stream ${i} is closed:`,M):(g||($(jt,`Opening RPC '${e}' stream ${i} transport.`),p.open(),g=!0),$(jt,`RPC '${e}' stream ${i} sending:`,M),p.send(M))},Yo:()=>p.close()}),k=(M,j,G)=>{M.listen(j,W=>{try{G(W)}catch(oe){setTimeout(()=>{throw oe},0)}})};return k(p,fa.EventType.OPEN,()=>{y||($(jt,`RPC '${e}' stream ${i} transport opened.`),w.s_())}),k(p,fa.EventType.CLOSE,()=>{y||(y=!0,$(jt,`RPC '${e}' stream ${i} transport closed`),w.__(),this.I_(p))}),k(p,fa.EventType.ERROR,M=>{y||(y=!0,$i(jt,`RPC '${e}' stream ${i} transport errored. Name:`,M.name,"Message:",M.message),w.__(new B(O.UNAVAILABLE,"The operation could not be completed")))}),k(p,fa.EventType.MESSAGE,M=>{var j;if(!y){let G=M.data[0];Ce(!!G,16349);let W=G,oe=W?.error||((j=W[0])===null||j===void 0?void 0:j.error);if(oe){$(jt,`RPC '${e}' stream ${i} received error:`,oe);let Xe=oe.status,Ie=(function(E){let I=st[E];if(I!==void 0)return CN(I)})(Xe),b=oe.message;Ie===void 0&&(Ie=O.INTERNAL,b="Unknown error status: "+Xe+" with message "+oe.message),y=!0,w.__(new B(Ie,b)),p.close()}else $(jt,`RPC '${e}' stream ${i} received:`,G),w.a_(G)}}),k(a,SE.STAT_EVENT,M=>{M.stat===Sf.PROXY?$(jt,`RPC '${e}' stream ${i} detected buffering proxy`):M.stat===Sf.NOPROXY&&$(jt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{w.o_()},0),w}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(n=>n===e)}};function ME(){return typeof document<"u"?document:null}function yp(t){return new hI(t,!0)}var Jf=class{constructor(e,n,r=1e3,i=1.5,o=6e4){this.Fi=e,this.timerId=n,this.d_=r,this.E_=i,this.A_=o,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();let n=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,n-r);i>0&&$("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}};var Ix="PersistentStream",Xf=class{constructor(e,n,r,i,o,s,a,u){this.Fi=e,this.w_=r,this.S_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new Jf(e,n)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():n&&n.code===O.RESOURCE_EXHAUSTED?(Xr(n.toString()),Xr("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):n&&n.code===O.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(n)}U_(){}auth(){this.state=1;let e=this.K_(this.b_),n=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.b_===n&&this.W_(r,i)},r=>{e(()=>{let i=new B(O.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(i)})})}W_(e,n){let r=this.K_(this.b_);this.stream=this.z_(e,n),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(i=>{r(()=>this.G_(i))}),this.stream.onMessage(i=>{r(()=>++this.C_==1?this.j_(i):this.onNext(i))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return $(Ix,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return n=>{this.Fi.enqueueAndForget(()=>this.b_===e?n():($(Ix,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},GI=class extends Xf{constructor(e,n,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}z_(e,n){return this.connection.P_("Listen",e,n)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();let n=S3(this.serializer,e),r=(function(o){if(!("targetChange"in o))return ie.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?ie.min():s.readTime?vr(s.readTime):ie.min()})(e);return this.listener.J_(n,r)}H_(e){let n={};n.database=mI(this.serializer),n.addTarget=(function(o,s){let a,u=s.target;if(a=tI(u)?{documents:x3(o,u)}:{query:N3(o,u).Vt},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=SN(o,s.resumeToken);let l=fI(o,s.expectedCount);l!==null&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(ie.min())>0){a.readTime=Gf(o,s.snapshotVersion.toTimestamp());let l=fI(o,s.expectedCount);l!==null&&(a.expectedCount=l)}return a})(this.serializer,e);let r=k3(this.serializer,e);r&&(n.labels=r),this.k_(n)}Y_(e){let n={};n.database=mI(this.serializer),n.removeTarget=e,this.k_(n)}},WI=class extends Xf{constructor(e,n,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,n){return this.connection.P_("Write",e,n)}j_(e){return Ce(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ce(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){Ce(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();let n=R3(e.writeResults,e.commitTime),r=vr(e.commitTime);return this.listener.ta(r,n)}na(){let e={};e.database=mI(this.serializer),this.k_(e)}X_(e){let n={streamToken:this.lastStreamToken,writes:e.map(r=>A3(this.serializer,r))};this.k_(n)}};var KI=class{},QI=class extends KI{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ra=!1}ia(){if(this.ra)throw new B(O.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Wo(e,pI(n,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===O.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new B(O.UNKNOWN,o.toString())})}Jo(e,n,r,i,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Jo(e,pI(n,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===O.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new B(O.UNKNOWN,s.toString())})}terminate(){this.ra=!0,this.connection.terminate()}},YI=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Xr(n),this._a=!1):$("OnlineStateTracker",n)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}};var os="RemoteStore",ZI=class{constructor(e,n,r,i,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=o,this.Ea.xo(s=>{r.enqueueAndForget(async()=>{cs(this)&&($(os,"Restarting streams for network reachability change."),await(async function(u){let l=ne(u);l.Ia.add(4),await el(l),l.Aa.set("Unknown"),l.Ia.delete(4),await vp(l)})(this))})}),this.Aa=new YI(r,i)}};async function vp(t){if(cs(t))for(let e of t.da)await e(!0)}async function el(t){for(let e of t.da)await e(!1)}function LN(t,e){let n=ne(t);n.Ta.has(e.targetId)||(n.Ta.set(e.targetId,e),Fw(n)?Ow(n):ja(n).x_()&&Pw(n,e))}function kw(t,e){let n=ne(t),r=ja(n);n.Ta.delete(e),r.x_()&&VN(n,e),n.Ta.size===0&&(r.x_()?r.B_():cs(n)&&n.Aa.set("Unknown"))}function Pw(t,e){if(t.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ie.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ja(t).H_(e)}function VN(t,e){t.Ra.$e(e),ja(t).Y_(e)}function Ow(t){t.Ra=new dI({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>t.Ta.get(e)||null,lt:()=>t.datastore.serializer.databaseId}),ja(t).start(),t.Aa.aa()}function Fw(t){return cs(t)&&!ja(t).M_()&&t.Ta.size>0}function cs(t){return ne(t).Ia.size===0}function jN(t){t.Ra=void 0}async function Y3(t){t.Aa.set("Online")}async function Z3(t){t.Ta.forEach((e,n)=>{Pw(t,e)})}async function J3(t,e){jN(t),Fw(t)?(t.Aa.la(e),Ow(t)):t.Aa.set("Unknown")}async function X3(t,e,n){if(t.Aa.set("Online"),e instanceof qf&&e.state===2&&e.cause)try{await(async function(i,o){let s=o.cause;for(let a of o.targetIds)i.Ta.has(a)&&(await i.remoteSyncer.rejectListen(a,s),i.Ta.delete(a),i.Ra.removeTarget(a))})(t,e)}catch(r){$(os,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await ep(t,r)}else if(e instanceof Ea?t.Ra.Ye(e):e instanceof Hf?t.Ra.it(e):t.Ra.et(e),!n.isEqual(ie.min()))try{let r=await FN(t.localStore);n.compareTo(r)>=0&&await(function(o,s){let a=o.Ra.Pt(s);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){let h=o.Ta.get(l);h&&o.Ta.set(l,h.withResumeToken(u.resumeToken,s))}}),a.targetMismatches.forEach((u,l)=>{let h=o.Ta.get(u);if(!h)return;o.Ta.set(u,h.withResumeToken(Bt.EMPTY_BYTE_STRING,h.snapshotVersion)),VN(o,u);let p=new Ku(h.target,u,l,h.sequenceNumber);Pw(o,p)}),o.remoteSyncer.applyRemoteEvent(a)})(t,n)}catch(r){$(os,"Failed to raise snapshot:",r),await ep(t,r)}}async function ep(t,e,n){if(!Va(e))throw e;t.Ia.add(1),await el(t),t.Aa.set("Offline"),n||(n=()=>FN(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{$(os,"Retrying IndexedDB access"),await n(),t.Ia.delete(1),await vp(t)})}function UN(t,e){return e().catch(n=>ep(t,n,e))}async function _p(t){let e=ne(t),n=zi(e),r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:bw;for(;e4(e);)try{let i=await G3(e.localStore,r);if(i===null){e.Pa.length===0&&n.B_();break}r=i.batchId,t4(e,i)}catch(i){await ep(e,i)}BN(e)&&$N(e)}function e4(t){return cs(t)&&t.Pa.length<10}function t4(t,e){t.Pa.push(e);let n=zi(t);n.x_()&&n.Z_&&n.X_(e.mutations)}function BN(t){return cs(t)&&!zi(t).M_()&&t.Pa.length>0}function $N(t){zi(t).start()}async function n4(t){zi(t).na()}async function r4(t){let e=zi(t);for(let n of t.Pa)e.X_(n.mutations)}async function i4(t,e,n){let r=t.Pa.shift(),i=aI.from(r,e,n);await UN(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await _p(t)}async function o4(t,e){e&&zi(t).Z_&&await(async function(r,i){if((function(s){return E3(s)&&s!==O.ABORTED})(i.code)){let o=r.Pa.shift();zi(r).N_(),await UN(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),await _p(r)}})(t,e),BN(t)&&$N(t)}async function wx(t,e){let n=ne(t);n.asyncQueue.verifyOperationInProgress(),$(os,"RemoteStore received new credentials");let r=cs(n);n.Ia.add(3),await el(n),r&&n.Aa.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ia.delete(3),await vp(n)}async function s4(t,e){let n=ne(t);e?(n.Ia.delete(2),await vp(n)):e||(n.Ia.add(2),await el(n),n.Aa.set("Unknown"))}function ja(t){return t.Va||(t.Va=(function(n,r,i){let o=ne(n);return o.ia(),new GI(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(t.datastore,t.asyncQueue,{Zo:Y3.bind(null,t),e_:Z3.bind(null,t),n_:J3.bind(null,t),J_:X3.bind(null,t)}),t.da.push(async e=>{e?(t.Va.N_(),Fw(t)?Ow(t):t.Aa.set("Unknown")):(await t.Va.stop(),jN(t))})),t.Va}function zi(t){return t.ma||(t.ma=(function(n,r,i){let o=ne(n);return o.ia(),new WI(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),e_:n4.bind(null,t),n_:o4.bind(null,t),ea:r4.bind(null,t),ta:i4.bind(null,t)}),t.da.push(async e=>{e?(t.ma.N_(),await _p(t)):(await t.ma.stop(),t.Pa.length>0&&($(os,`Stopping write stream with ${t.Pa.length} pending writes`),t.Pa=[]))})),t.ma}var JI=class t{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new gr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){let s=Date.now()+r,a=new t(e,n,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new B(O.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function Lw(t,e){if(Xr("AsyncQueue",`${e}: ${t}`),Va(t))return new B(O.UNAVAILABLE,`${e}: ${t}`);throw t}var tp=class t{static emptySet(e){return new t(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||K.comparator(n.key,r.key):(n,r)=>K.comparator(n.key,r.key),this.keyedMap=Fu(),this.sortedSet=new ze(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}};var np=class{constructor(){this.fa=new ze(K.comparator)}track(e){let n=e.doc.key,r=this.fa.get(n);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(n,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(n):e.type===1&&r.type===2?this.fa=this.fa.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):Y(63341,{At:e,ga:r}):this.fa=this.fa.insert(n,e)}pa(){let e=[];return this.fa.inorderTraversal((n,r)=>{e.push(r)}),e}},ka=class t{constructor(e,n,r,i,o,s,a,u,l){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,n,r,i,o){let s=[];return n.forEach(a=>{s.push({type:0,doc:a})}),new t(e,n,tp.emptySet(n),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&gp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}};var XI=class{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}},ew=class{constructor(){this.queries=bx(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(n,r){let i=ne(n),o=i.queries;i.queries=bx(),o.forEach((s,a)=>{for(let u of a.wa)u.onError(r)})})(this,new B(O.ABORTED,"Firestore shutting down"))}};function bx(){return new ni(t=>pN(t),gp)}async function a4(t,e){let n=ne(t),r=3,i=e.query,o=n.queries.get(i);o?!o.Sa()&&e.ba()&&(r=2):(o=new XI,r=e.ba()?0:1);try{switch(r){case 0:o.ya=await n.onListen(i,!0);break;case 1:o.ya=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(s){let a=Lw(s,`Initialization of query '${ga(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,o),o.wa.push(e),e.va(n.onlineState),o.ya&&e.Ca(o.ya)&&Vw(n)}async function c4(t,e){let n=ne(t),r=e.query,i=3,o=n.queries.get(r);if(o){let s=o.wa.indexOf(e);s>=0&&(o.wa.splice(s,1),o.wa.length===0?i=e.ba()?0:1:!o.Sa()&&e.ba()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function u4(t,e){let n=ne(t),r=!1;for(let i of e){let o=i.query,s=n.queries.get(o);if(s){for(let a of s.wa)a.Ca(i)&&(r=!0);s.ya=i}}r&&Vw(n)}function l4(t,e,n){let r=ne(t),i=r.queries.get(e);if(i)for(let o of i.wa)o.onError(n);r.queries.delete(e)}function Vw(t){t.Da.forEach(e=>{e.next()})}var tw,Dx;(Dx=tw||(tw={})).Fa="default",Dx.Cache="cache";var nw=class{constructor(e,n,r){this.query=e,this.Ma=n,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new ka(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),n=!0):this.Ba(e,this.onlineState)&&(this.La(e),n=!0),this.Oa=e,n}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let n=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),n=!0),n}Ba(e,n){if(!e.fromCache||!this.ba())return!0;let r=n!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Na(e){if(e.docChanges.length>0)return!0;let n=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}La(e){e=ka.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==tw.Cache}};var rp=class{constructor(e){this.key=e}},ip=class{constructor(e){this.key=e}},rw=class{constructor(e,n){this.query=e,this.Ha=n,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=ve(),this.mutatedKeys=ve(),this.Xa=gN(e),this.eu=new tp(this.Xa)}get tu(){return this.Ha}nu(e,n){let r=n?n.ru:new np,i=n?n.eu:this.eu,o=n?n.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let g=i.get(h),y=mp(this.query,p)?p:null,w=!!g&&this.mutatedKeys.has(g.key),k=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations),M=!1;g&&y?g.data.isEqual(y.data)?w!==k&&(r.track({type:3,doc:y}),M=!0):this.iu(g,y)||(r.track({type:2,doc:y}),M=!0,(u&&this.Xa(y,u)>0||l&&this.Xa(y,l)<0)&&(a=!0)):!g&&y?(r.track({type:0,doc:y}),M=!0):g&&!y&&(r.track({type:1,doc:g}),M=!0,(u||l)&&(a=!0)),M&&(y?(s=s.add(y),o=k?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let h=this.query.limitType==="F"?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{eu:s,ru:r,Ds:a,mutatedKeys:o}}iu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){let o=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;let s=e.ru.pa();s.sort((h,p)=>(function(y,w){let k=M=>{switch(M){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Y(20277,{At:M})}};return k(y)-k(w)})(h.type,p.type)||this.Xa(h.doc,p.doc)),this.su(r),i=i!=null&&i;let a=n&&!i?this.ou():[],u=this.Za.size===0&&this.current&&!i?1:0,l=u!==this.Ya;return this.Ya=u,s.length!==0||l?{snapshot:new ka(this.query,e.eu,o,s,e.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:a}:{_u:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new np,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}ou(){if(!this.current)return[];let e=this.Za;this.Za=ve(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});let n=[];return e.forEach(r=>{this.Za.has(r)||n.push(new ip(r))}),this.Za.forEach(r=>{e.has(r)||n.push(new rp(r))}),n}uu(e){this.Ha=e.qs,this.Za=ve();let n=this.nu(e.documents);return this.applyChanges(n,!0)}cu(){return ka.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}},jw="SyncEngine",iw=class{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}},ow=class{constructor(e){this.key=e,this.lu=!1}},sw=class{constructor(e,n,r,i,o,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.hu={},this.Pu=new ni(a=>pN(a),gp),this.Tu=new Map,this.Iu=new Set,this.du=new ze(K.comparator),this.Eu=new Map,this.Au=new Yu,this.Ru={},this.Vu=new Map,this.mu=Qu.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}};async function d4(t,e,n=!0){let r=KN(t),i,o=r.Pu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.cu()):i=await HN(r,e,n,!0),i}async function h4(t,e){let n=KN(t);await HN(n,e,!0,!1)}async function HN(t,e,n,r){let i=await W3(t.localStore,yr(e)),o=i.targetId,s=t.sharedClientState.addLocalQueryTarget(o,n),a;return r&&(a=await f4(t,e,o,s==="current",i.resumeToken)),t.isPrimaryClient&&n&&LN(t.remoteStore,i),a}async function f4(t,e,n,r,i){t.gu=(p,g,y)=>(async function(k,M,j,G){let W=M.view.nu(j);W.Ds&&(W=await _x(k.localStore,M.query,!1).then(({documents:b})=>M.view.nu(b,W)));let oe=G&&G.targetChanges.get(M.targetId),Xe=G&&G.targetMismatches.get(M.targetId)!=null,Ie=M.view.applyChanges(W,k.isPrimaryClient,oe,Xe);return Cx(k,M.targetId,Ie._u),Ie.snapshot})(t,p,g,y);let o=await _x(t.localStore,e,!0),s=new rw(e,o.qs),a=s.nu(o.documents),u=Wu.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),l=s.applyChanges(a,t.isPrimaryClient,u);Cx(t,n,l._u);let h=new iw(e,n,s);return t.Pu.set(e,h),t.Tu.has(n)?t.Tu.get(n).push(e):t.Tu.set(n,[e]),l.snapshot}async function p4(t,e,n){let r=ne(t),i=r.Pu.get(e),o=r.Tu.get(i.targetId);if(o.length>1)return r.Tu.set(i.targetId,o.filter(s=>!gp(s,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await jI(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&kw(r.remoteStore,i.targetId),aw(r,i.targetId)}).catch(La)):(aw(r,i.targetId),await jI(r.localStore,i.targetId,!0))}async function g4(t,e){let n=ne(t),r=n.Pu.get(e),i=n.Tu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),kw(n.remoteStore,r.targetId))}async function m4(t,e,n){let r=b4(t);try{let i=await(function(s,a){let u=ne(s),l=lt.now(),h=a.reduce((y,w)=>y.add(w.key),ve()),p,g;return u.persistence.runTransaction("Locally write mutations","readwrite",y=>{let w=ri(),k=ve();return u.Os.getEntries(y,h).next(M=>{w=M,w.forEach((j,G)=>{G.isValidDocument()||(k=k.add(j))})}).next(()=>u.localDocuments.getOverlayedDocuments(y,w)).next(M=>{p=M;let j=[];for(let G of a){let W=_3(G,p.get(G.key).overlayedDocument);W!=null&&j.push(new Er(G.key,W,sN(W.value.mapValue),Jr.exists(!0)))}return u.mutationQueue.addMutationBatch(y,l,j,a)}).next(M=>{g=M;let j=M.applyToLocalDocumentSet(p,k);return u.documentOverlayCache.saveOverlays(y,M.batchId,j)})}).then(()=>({batchId:g.batchId,changes:yN(p)}))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(s,a,u){let l=s.Ru[s.currentUser.toKey()];l||(l=new ze(he)),l=l.insert(a,u),s.Ru[s.currentUser.toKey()]=l})(r,i.batchId,n),await tl(r,i.changes),await _p(r.remoteStore)}catch(i){let o=Lw(i,"Failed to persist write");n.reject(o)}}async function qN(t,e){let n=ne(t);try{let r=await q3(n.localStore,e);e.targetChanges.forEach((i,o)=>{let s=n.Eu.get(o);s&&(Ce(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.lu=!0:i.modifiedDocuments.size>0?Ce(s.lu,14607):i.removedDocuments.size>0&&(Ce(s.lu,42227),s.lu=!1))}),await tl(n,r,e)}catch(r){await La(r)}}function Tx(t,e,n){let r=ne(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.Pu.forEach((o,s)=>{let a=s.view.va(e);a.snapshot&&i.push(a.snapshot)}),(function(s,a){let u=ne(s);u.onlineState=a;let l=!1;u.queries.forEach((h,p)=>{for(let g of p.wa)g.va(a)&&(l=!0)}),l&&Vw(u)})(r.eventManager,e),i.length&&r.hu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function y4(t,e,n){let r=ne(t);r.sharedClientState.updateQueryState(e,"rejected",n);let i=r.Eu.get(e),o=i&&i.key;if(o){let s=new ze(K.comparator);s=s.insert(o,zn.newNoDocument(o,ie.min()));let a=ve().add(o),u=new $f(ie.min(),new Map,new ze(he),s,a);await qN(r,u),r.du=r.du.remove(o),r.Eu.delete(e),Uw(r)}else await jI(r.localStore,e,!1).then(()=>aw(r,e,n)).catch(La)}async function v4(t,e){let n=ne(t),r=e.batch.batchId;try{let i=await H3(n.localStore,e);GN(n,r,null),zN(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await tl(n,i)}catch(i){await La(i)}}async function _4(t,e,n){let r=ne(t);try{let i=await(function(s,a){let u=ne(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return u.mutationQueue.lookupMutationBatch(l,a).next(p=>(Ce(p!==null,37113),h=p.keys(),u.mutationQueue.removeMutationBatch(l,p))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,h,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>u.localDocuments.getDocuments(l,h))})})(r.localStore,e);GN(r,e,n),zN(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await tl(r,i)}catch(i){await La(i)}}function zN(t,e){(t.Vu.get(e)||[]).forEach(n=>{n.resolve()}),t.Vu.delete(e)}function GN(t,e,n){let r=ne(t),i=r.Ru[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Ru[r.currentUser.toKey()]=i}}function aw(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let r of t.Tu.get(e))t.Pu.delete(r),n&&t.hu.pu(r,n);t.Tu.delete(e),t.isPrimaryClient&&t.Au.zr(e).forEach(r=>{t.Au.containsKey(r)||WN(t,r)})}function WN(t,e){t.Iu.delete(e.path.canonicalString());let n=t.du.get(e);n!==null&&(kw(t.remoteStore,n),t.du=t.du.remove(e),t.Eu.delete(n),Uw(t))}function Cx(t,e,n){for(let r of n)r instanceof rp?(t.Au.addReference(r.key,e),E4(t,r)):r instanceof ip?($(jw,"Document no longer in limbo: "+r.key),t.Au.removeReference(r.key,e),t.Au.containsKey(r.key)||WN(t,r.key)):Y(19791,{yu:r})}function E4(t,e){let n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Iu.has(r)||($(jw,"New document in limbo: "+n),t.Iu.add(r),Uw(t))}function Uw(t){for(;t.Iu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){let e=t.Iu.values().next().value;t.Iu.delete(e);let n=new K(Ue.fromString(e)),r=t.mu.next();t.Eu.set(r,new ow(n)),t.du=t.du.insert(n,r),LN(t.remoteStore,new Ku(yr(hN(n.path)),r,"TargetPurposeLimboResolution",ww.ue))}}async function tl(t,e,n){let r=ne(t),i=[],o=[],s=[];r.Pu.isEmpty()||(r.Pu.forEach((a,u)=>{s.push(r.gu(u,e,n).then(l=>{var h;if((l||n)&&r.isPrimaryClient){let p=l?!l.fromCache:(h=n?.targetChanges.get(u.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(l){i.push(l);let p=OI.Es(u.targetId,l);o.push(p)}}))}),await Promise.all(s),r.hu.J_(i),await(async function(u,l){let h=ne(u);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>L.forEach(l,g=>L.forEach(g.Is,y=>h.persistence.referenceDelegate.addReference(p,g.targetId,y)).next(()=>L.forEach(g.ds,y=>h.persistence.referenceDelegate.removeReference(p,g.targetId,y)))))}catch(p){if(!Va(p))throw p;$(Mw,"Failed to update sequence numbers: "+p)}for(let p of l){let g=p.targetId;if(!p.fromCache){let y=h.Fs.get(g),w=y.snapshotVersion,k=y.withLastLimboFreeSnapshotVersion(w);h.Fs=h.Fs.insert(g,k)}}})(r.localStore,o))}async function I4(t,e){let n=ne(t);if(!n.currentUser.isEqual(e)){$(jw,"User change. New user:",e.toKey());let r=await ON(n.localStore,e);n.currentUser=e,(function(o,s){o.Vu.forEach(a=>{a.forEach(u=>{u.reject(new B(O.CANCELLED,s))})}),o.Vu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await tl(n,r.Bs)}}function w4(t,e){let n=ne(t),r=n.Eu.get(e);if(r&&r.lu)return ve().add(r.key);{let i=ve(),o=n.Tu.get(e);if(!o)return i;for(let s of o){let a=n.Pu.get(s);i=i.unionWith(a.view.tu)}return i}}function KN(t){let e=ne(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=qN.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=w4.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=y4.bind(null,e),e.hu.J_=u4.bind(null,e.eventManager),e.hu.pu=l4.bind(null,e.eventManager),e}function b4(t){let e=ne(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=v4.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=_4.bind(null,e),e}var QN=(()=>{class t{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(n){this.serializer=yp(n.databaseInfo.databaseId),this.sharedClientState=this.bu(n),this.persistence=this.Du(n),await this.persistence.start(),this.localStore=this.vu(n),this.gcScheduler=this.Cu(n,this.localStore),this.indexBackfillerScheduler=this.Fu(n,this.localStore)}Cu(n,r){return null}Fu(n,r){return null}vu(n){return $3(this.persistence,new LI,n.initialUser,this.serializer)}Du(n){return new Kf(PI.Vi,this.serializer)}bu(n){return new UI}async terminate(){var n,r;(n=this.gcScheduler)===null||n===void 0||n.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}return t.provider={build:()=>new t},t})(),cw=class extends QN{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,n){Ce(this.persistence.referenceDelegate instanceof Qf,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new II(r,e.asyncQueue,n)}Du(e){let n=this.cacheSizeBytes!==void 0?bn.withCacheSize(this.cacheSizeBytes):bn.DEFAULT;return new Kf(r=>Qf.Vi(r,n),this.serializer)}};var D4=(()=>{class t{async initialize(n,r){this.localStore||(this.localStore=n.localStore,this.sharedClientState=n.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!n.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Tx(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=I4.bind(null,this.syncEngine),await s4(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(n){return(function(){return new ew})()}createDatastore(n){let r=yp(n.databaseInfo.databaseId),i=(function(s){return new zI(s)})(n.databaseInfo);return(function(s,a,u,l){return new QI(s,a,u,l)})(n.authCredentials,n.appCheckCredentials,i,r)}createRemoteStore(n){return(function(i,o,s,a,u){return new ZI(i,o,s,a,u)})(this.localStore,this.datastore,n.asyncQueue,r=>Tx(this.syncEngine,r,0),(function(){return Zf.C()?new Zf:new BI})())}createSyncEngine(n,r){return(function(o,s,a,u,l,h,p){let g=new sw(o,s,a,u,l,h);return p&&(g.fu=!0),g})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,n.initialUser,n.maxConcurrentLimboResolutions,r)}async terminate(){var n,r;await(async function(o){let s=ne(o);$(os,"RemoteStore shutting down."),s.Ia.add(5),await el(s),s.Ea.shutdown(),s.Aa.set("Unknown")})(this.remoteStore),(n=this.datastore)===null||n===void 0||n.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()}}return t.provider={build:()=>new t},t})();var uw=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):Xr("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,n){setTimeout(()=>{this.muted||e(n)},0)}};var Gi="FirestoreClient",lw=class{constructor(e,n,r,i,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=bt.UNAUTHENTICATED,this.clientId=Bu.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,async s=>{$(Gi,"Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>($(Gi,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new gr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let r=Lw(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}};async function kE(t,e){t.asyncQueue.verifyOperationInProgress(),$(Gi,"Initializing OfflineComponentProvider");let n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await ON(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>{$i("Terminating Firestore due to IndexedDb database deletion"),t.terminate().then(()=>{$("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(i=>{$i("Terminating Firestore due to IndexedDb database deletion failed",i)})}),t._offlineComponents=e}async function Sx(t,e){t.asyncQueue.verifyOperationInProgress();let n=await T4(t);$(Gi,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>wx(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>wx(e.remoteStore,i)),t._onlineComponents=e}async function T4(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){$(Gi,"Using user provided OfflineComponentProvider");try{await kE(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!(function(i){return i.name==="FirebaseError"?i.code===O.FAILED_PRECONDITION||i.code===O.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(n))throw n;$i("Error using user provided cache. Falling back to memory cache: "+n),await kE(t,new QN)}}else $(Gi,"Using default OfflineComponentProvider"),await kE(t,new cw(void 0));return t._offlineComponents}async function YN(t){return t._onlineComponents||(t._uninitializedComponentsProvider?($(Gi,"Using user provided OnlineComponentProvider"),await Sx(t,t._uninitializedComponentsProvider._online)):($(Gi,"Using default OnlineComponentProvider"),await Sx(t,new D4))),t._onlineComponents}function C4(t){return YN(t).then(e=>e.syncEngine)}async function S4(t){let e=await YN(t),n=e.eventManager;return n.onListen=d4.bind(null,e.syncEngine),n.onUnlisten=p4.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=h4.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=g4.bind(null,e.syncEngine),n}function A4(t,e,n={}){let r=new gr;return t.asyncQueue.enqueueAndForget(async()=>(function(o,s,a,u,l){let h=new uw({next:g=>{h.Ou(),s.enqueueAndForget(()=>c4(o,p)),g.fromCache&&u.source==="server"?l.reject(new B(O.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(g)},error:g=>l.reject(g)}),p=new nw(a,h,{includeMetadataChanges:!0,ka:!0});return a4(o,p)})(await S4(t),t.asyncQueue,e,n,r)),r.promise}function ZN(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var Ax=new Map;var JN="firestore.googleapis.com",Rx=!0,op=class{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new B(O.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=JN,this.ssl=Rx}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:Rx;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=PN;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<j3)throw new B(O.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}LH("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ZN((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),(function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new B(O.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new B(O.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new B(O.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Pa=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new op({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new B(O.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new B(O.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new op(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new PE;switch(r.type){case"firstParty":return new VE(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new B(O.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){let r=Ax.get(n);r&&($("ComponentProvider","Removing Datastore"),Ax.delete(n),r.terminate())})(this),Promise.resolve()}};function XN(t,e,n,r={}){var i;t=Xo(t,Pa);let o=Bn(e),s=t._getSettings(),a=Object.assign(Object.assign({},s),{emulatorOptions:t._getEmulatorOptions()}),u=`${e}:${n}`;o&&(aa(`https://${u}`),ca("Firestore",!0)),s.host!==JN&&s.host!==u&&$i("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let l=Object.assign(Object.assign({},s),{host:u,ssl:o,emulatorOptions:r});if(!ar(l,a)&&(t._setSettings(l),r.mockUserToken)){let h,p;if(typeof r.mockUserToken=="string")h=r.mockUserToken,p=bt.MOCK_USER;else{h=Xh(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);let g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new B(O.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new bt(g)}t._authCredentials=new OE(new Pf(h,p))}}var ss=class t{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},Ut=class t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Vi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}toJSON(){return{type:t._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Xu(n,t._jsonSchema))return new t(e,r||null,new K(Ue.fromString(n.referencePath)))}};Ut._jsonSchemaVersion="firestore/documentReference/1.0",Ut._jsonSchema={type:ut("string",Ut._jsonSchemaVersion),referencePath:ut("string")};var Vi=class t extends ss{constructor(e,n,r){super(e,n,hN(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Ut(this.firestore,null,new K(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function eM(t,e,...n){if(t=ke(t),Fx("collection","path",e),t instanceof Pa){let r=Ue.fromString(e,...n);return WR(r),new Vi(t,null,r)}{if(!(t instanceof Ut||t instanceof Vi))throw new B(O.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(Ue.fromString(e,...n));return WR(r),new Vi(t.firestore,null,r)}}function Bw(t,e,...n){if(t=ke(t),arguments.length===1&&(e=Bu.newId()),Fx("doc","path",e),t instanceof Pa){let r=Ue.fromString(e,...n);return GR(r),new Ut(t,null,new K(r))}{if(!(t instanceof Ut||t instanceof Vi))throw new B(O.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(Ue.fromString(e,...n));return GR(r),new Ut(t.firestore,t instanceof Vi?t.converter:null,new K(r))}}var xx="AsyncQueue",sp=class{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new Jf(this,"async_queue_retry"),this.oc=()=>{let r=ME();r&&$(xx,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;let n=ME();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;let n=ME();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});let n=new gr;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!Va(e))throw e;$(xx,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){let n=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,Xr("INTERNAL UNHANDLED ERROR: ",Nx(r)),r}).then(r=>(this.nc=!1,r))));return this._c=n,n}enqueueAfterDelay(e,n,r){this.ac(),this.sc.indexOf(e)>-1&&(n=0);let i=JI.createAndSchedule(this,e,n,r,o=>this.lc(o));return this.ec.push(i),i}ac(){this.tc&&Y(47125,{hc:Nx(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(let n of this.ec)if(n.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this.ec)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){let n=this.ec.indexOf(e);this.ec.splice(n,1)}};function Nx(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}var as=class extends Pa{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new sp,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new sp(e),this._firestoreClient=void 0,await e}}};function tM(t,e){let n=typeof t=="object"?t:zr(),r=typeof t=="string"?t:e||jf,i=Mi(n,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=Jh("firestore");o&&XN(i,...o)}return i}function nM(t){if(t._terminated)throw new B(O.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||R4(t),t._firestoreClient}function R4(t){var e,n,r;let i=t._freezeSettings(),o=(function(a,u,l,h){return new HE(a,u,l,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,ZN(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)})(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new lw(t._authCredentials,t._appCheckCredentials,t._queue,o,t._componentsProvider&&(function(a){let u=a?._online.build();return{_offline:a?._offline.build(u),_online:u}})(t._componentsProvider))}var ji=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(Bt.fromBase64String(e))}catch(n){throw new B(O.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(Bt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:t._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Xu(e,t._jsonSchema))return t.fromBase64String(e.bytes)}};ji._jsonSchemaVersion="firestore/bytes/1.0",ji._jsonSchema={type:ut("string",ji._jsonSchemaVersion),bytes:ut("string")};var Oa=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new B(O.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new pn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Zu=class{constructor(e){this._methodName=e}};var Ui=class t{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new B(O.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new B(O.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return he(this._lat,e._lat)||he(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:t._jsonSchemaVersion}}static fromJSON(e){if(Xu(e,t._jsonSchema))return new t(e.latitude,e.longitude)}};Ui._jsonSchemaVersion="firestore/geoPoint/1.0",Ui._jsonSchema={type:ut("string",Ui._jsonSchemaVersion),latitude:ut("number"),longitude:ut("number")};var Bi=class t{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:t._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Xu(e,t._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new t(e.vectorValues);throw new B(O.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};Bi._jsonSchemaVersion="firestore/vectorValue/1.0",Bi._jsonSchema={type:ut("string",Bi._jsonSchemaVersion),vectorValues:ut("object")};var x4=/^__.*__$/,dw=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Er(e,this.data,this.fieldMask,n,this.fieldTransforms):new is(e,this.data,n,this.fieldTransforms)}},ap=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Er(e,this.data,this.fieldMask,n,this.fieldTransforms)}};function rM(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Y(40011,{Ec:t})}}var hw=class t{constructor(e,n,r,i,o,s){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Ac(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Rc({path:r,mc:!1});return i.fc(e),i}gc(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Rc({path:r,mc:!1});return i.Ac(),i}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return up(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(rM(this.Ec)&&x4.test(e))throw this.wc('Document fields cannot begin and end with "__"')}},fw=class{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||yp(e)}Dc(e,n,r,i=!1){return new hw({Ec:e,methodName:n,bc:r,path:pn.emptyPath(),mc:!1,Sc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function $w(t){let e=t._freezeSettings(),n=yp(t._databaseId);return new fw(t._databaseId,!!e.ignoreUndefinedProperties,n)}function N4(t,e,n,r,i,o={}){let s=t.Dc(o.merge||o.mergeFields?2:0,e,n,i);Hw("Data must be an object, but it was:",s,r);let a=iM(r,s),u,l;if(o.merge)u=new Dn(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let h=[];for(let p of o.mergeFields){let g=pw(e,p,n);if(!s.contains(g))throw new B(O.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);sM(h,g)||h.push(g)}u=new Dn(h),l=s.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,l=s.fieldTransforms;return new dw(new fn(a),u,l)}var cp=class t extends Zu{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof t}};function M4(t,e,n,r){let i=t.Dc(1,e,n);Hw("Data must be an object, but it was:",i,r);let o=[],s=fn.empty();Wi(r,(u,l)=>{let h=qw(e,u,n);l=ke(l);let p=i.gc(h);if(l instanceof cp)o.push(h);else{let g=nl(l,p);g!=null&&(o.push(h),s.set(h,g))}});let a=new Dn(o);return new ap(s,a,i.fieldTransforms)}function k4(t,e,n,r,i,o){let s=t.Dc(1,e,n),a=[pw(e,r,n)],u=[i];if(o.length%2!=0)throw new B(O.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<o.length;g+=2)a.push(pw(e,o[g])),u.push(o[g+1]);let l=[],h=fn.empty();for(let g=a.length-1;g>=0;--g)if(!sM(l,a[g])){let y=a[g],w=u[g];w=ke(w);let k=s.gc(y);if(w instanceof cp)l.push(y);else{let M=nl(w,k);M!=null&&(l.push(y),h.set(y,M))}}let p=new Dn(l);return new ap(h,p,s.fieldTransforms)}function P4(t,e,n,r=!1){return nl(n,t.Dc(r?4:3,e))}function nl(t,e){if(oM(t=ke(t)))return Hw("Unsupported field value:",e,t),iM(t,e);if(t instanceof Zu)return(function(r,i){if(!rM(i.Ec))throw i.wc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.wc(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(r,i){let o=[],s=0;for(let a of r){let u=nl(a,i.yc(s));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}})(t,e)}return(function(r,i){if((r=ke(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return p3(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=lt.fromDate(r);return{timestampValue:Gf(i.serializer,o)}}if(r instanceof lt){let o=new lt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Gf(i.serializer,o)}}if(r instanceof Ui)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ji)return{bytesValue:SN(i.serializer,r._byteString)};if(r instanceof Ut){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.wc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Nw(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Bi)return(function(s,a){return{mapValue:{fields:{[Tw]:{stringValue:Cw},[Ta]:{arrayValue:{values:s.toArray().map(l=>{if(typeof l!="number")throw a.wc("VectorValues must only contain numeric values.");return xw(a.serializer,l)})}}}}}})(r,i);throw i.wc(`Unsupported field value: ${hp(r)}`)})(t,e)}function iM(t,e){let n={};return Jx(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Wi(t,(r,i)=>{let o=nl(i,e.Vc(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function oM(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof lt||t instanceof Ui||t instanceof ji||t instanceof Ut||t instanceof Zu||t instanceof Bi)}function Hw(t,e,n){if(!oM(n)||!Lx(n)){let r=hp(n);throw r==="an object"?e.wc(t+" a custom object"):e.wc(t+" "+r)}}function pw(t,e,n){if((e=ke(e))instanceof Oa)return e._internalPath;if(typeof e=="string")return qw(t,e);throw up("Field path arguments must be of type string or ",t,!1,void 0,n)}var O4=new RegExp("[~\\*/\\[\\]]");function qw(t,e,n){if(e.search(O4)>=0)throw up(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Oa(...e.split("."))._internalPath}catch{throw up(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function up(t,e,n,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new B(O.INVALID_ARGUMENT,a+t+u)}function sM(t,e){return t.some(n=>n.isEqual(e))}var lp=class{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Ut(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new gw(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(zw("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},gw=class extends lp{data(){return super.data()}};function zw(t,e){return typeof e=="string"?qw(t,e):e instanceof Oa?e._internalPath:e._delegate._internalPath}function F4(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new B(O.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Ju=class{},dp=class extends Ju{};function aM(t,e,...n){let r=[];e instanceof Ju&&r.push(e),r=r.concat(n),(function(o){let s=o.filter(u=>u instanceof yw).length,a=o.filter(u=>u instanceof mw).length;if(s>1||s>0&&a>0)throw new B(O.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(let i of r)t=i._apply(t);return t}var mw=class t extends dp{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=this._parse(e);return uM(e._query,n),new ss(e.firestore,e.converter,nI(e._query,n))}_parse(e){let n=$w(e.firestore);return(function(o,s,a,u,l,h,p){let g;if(l.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new B(O.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){kx(p,h);let w=[];for(let k of p)w.push(Mx(u,o,k));g={arrayValue:{values:w}}}else g=Mx(u,o,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||kx(p,h),g=P4(a,s,p,h==="in"||h==="not-in");return ct.create(l,h,g)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}};var yw=class t extends Ju{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new t(e,n)}_parse(e){let n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Gn.create(n,this._getOperator())}_apply(e){let n=this._parse(e);return n.getFilters().length===0?e:((function(i,o){let s=i,a=o.getFlattenedFilters();for(let u of a)uM(s,u),s=nI(s,u)})(e._query,n),new ss(e.firestore,e.converter,nI(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var vw=class t extends dp{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new t(e,n)}_apply(e){let n=(function(i,o,s){if(i.startAt!==null)throw new B(O.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new B(O.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ts(o,s)})(e._query,this._field,this._direction);return new ss(e.firestore,e.converter,(function(i,o){let s=i.explicitOrderBy.concat([o]);return new qi(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)})(e._query,n))}};function cM(t,e="asc"){let n=e,r=zw("orderBy",t);return vw._create(r,n)}function Mx(t,e,n){if(typeof(n=ke(n))=="string"){if(n==="")throw new B(O.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!fN(e)&&n.indexOf("/")!==-1)throw new B(O.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);let r=e.path.child(Ue.fromString(n));if(!K.isDocumentKey(r))throw new B(O.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return ex(t,new K(r))}if(n instanceof Ut)return ex(t,n._key);throw new B(O.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${hp(n)}.`)}function kx(t,e){if(!Array.isArray(t)||t.length===0)throw new B(O.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function uM(t,e){let n=(function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null})(t.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new B(O.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new B(O.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}var _w=class{convertValue(e,n="none"){switch(Hi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return je(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ti(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Y(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let r={};return Wi(e,(i,o)=>{r[i]=this.convertValue(o,n)}),r}convertVectorValue(e){var n,r,i;let o=(i=(r=(n=e.fields)===null||n===void 0?void 0:n[Ta].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>je(s.doubleValue));return new Bi(o)}convertGeoPoint(e){return new Ui(je(e.latitude),je(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":let r=pp(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(qu(e));default:return null}}convertTimestamp(e){let n=ei(e);return new lt(n.seconds,n.nanos)}convertDocumentKey(e,n){let r=Ue.fromString(e);Ce(kN(r),9688,{name:e});let i=new Uf(r.get(1),r.get(3)),o=new K(r.popFirst(5));return i.isEqual(n)||Xr(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}};function L4(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}var _a=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Ia=class t extends lp{constructor(e,n,r,i,o,s){super(e,n,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new wa(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let r=this._document.data.field(zw("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new B(O.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,n={};return n.type=t._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}};Ia._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ia._jsonSchema={type:ut("string",Ia._jsonSchemaVersion),bundleSource:ut("string","DocumentSnapshot"),bundleName:ut("string"),bundle:ut("string")};var wa=class extends Ia{data(e={}){return super.data(e)}},ba=class t{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new _a(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new wa(this._firestore,this._userDataWriter,r.key,r,new _a(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new B(O.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let u=new wa(i._firestore,i._userDataWriter,a.doc.key,a.doc,new _a(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let u=new wa(i._firestore,i._userDataWriter,a.doc.key,a.doc,new _a(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,h=-1;return a.type!==0&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),h=s.indexOf(a.doc.key)),{type:V4(a.type),doc:u,oldIndex:l,newIndex:h}})}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new B(O.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=t._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Bu.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let n=[],r=[],i=[];return this.docs.forEach(o=>{o._document!==null&&(n.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function V4(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Y(61501,{type:t})}}ba._jsonSchemaVersion="firestore/querySnapshot/1.0",ba._jsonSchema={type:ut("string",ba._jsonSchemaVersion),bundleSource:ut("string","QuerySnapshot"),bundleName:ut("string"),bundle:ut("string")};var Ew=class extends _w{constructor(e){super(),this.firestore=e}convertBytes(e){return new ji(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ut(this.firestore,null,n)}};function lM(t){t=Xo(t,ss);let e=Xo(t.firestore,as),n=nM(e),r=new Ew(e);return F4(t._query),A4(n,t._query).then(i=>new ba(e,r,t,i))}function dM(t,e,n,...r){t=Xo(t,Ut);let i=Xo(t.firestore,as),o=$w(i),s;return s=typeof(e=ke(e))=="string"||e instanceof Oa?k4(o,"updateDoc",t._key,e,n,r):M4(o,"updateDoc",t._key,e),Gw(i,[s.toMutation(t._key,Jr.exists(!0))])}function hM(t){return Gw(Xo(t.firestore,as),[new Gu(t._key,Jr.none())])}function fM(t,e){let n=Xo(t.firestore,as),r=Bw(t),i=L4(t.converter,e);return Gw(n,[N4($w(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Jr.exists(!1))]).then(()=>r)}function Gw(t,e){return(function(r,i){let o=new gr;return r.asyncQueue.enqueueAndForget(async()=>m4(await C4(r),i,o)),o.promise})(nM(t),e)}(function(e,n=!0){(function(i){Fa=i})(lr),hn(new Nt("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new as(new FE(r.getProvider("auth-internal")),new jE(s,r.getProvider("app-check-internal")),(function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new B(O.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Uf(l.options.projectId,h)})(s,i),s);return o=Object.assign({useFetchStreams:n},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),Me($R,HR,e),Me($R,HR,"esm2017")})();var us=class{constructor(e){return e}},pM="firestore",Ww=class{constructor(){return ki(pM)}};var Kw=new q("angularfire2.firestore-instances");function j4(t,e){let n=qo(pM,t,e);return n&&new us(n)}function U4(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new us(r)}}var B4={provide:Ww,deps:[[new vt,Kw]]},$4={provide:us,useFactory:j4,deps:[[new vt,Kw],$n]};function gM(t,...e){return Me("angularfire",dr.full,"fst"),Gt([$4,B4,{provide:Kw,useFactory:U4(t),multi:!0,deps:[be,Oe,hr,Gr,[new vt,Qo],[new vt,Oi],...e]}])}var mM=Ve(fM,!0,2);var Qw=Ve(eM,!0,2);var yM=Ve(hM,!0,2);var Yw=Ve(Bw,!0,2);var vM=Ve(lM,!0);var _M=Ve(tM,!0);var EM=Ve(cM,!0,2),IM=Ve(aM,!0,2);var wM=Ve(dM,!0,2);var RM="firebasestorage.googleapis.com",xM="storageBucket",H4=120*1e3,q4=600*1e3;var Ge=class t extends Qt{constructor(e,n,r=0){super(Zw(e),`Firebase Storage: ${n} (${Zw(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,t.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Zw(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}},Je=(function(t){return t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment",t})(Je||{});function Zw(t){return"storage/"+t}function r0(){let t="An unknown error occurred, please check the error payload for server response.";return new Ge(Je.UNKNOWN,t)}function z4(t){return new Ge(Je.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function G4(t){return new Ge(Je.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function W4(){let t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Ge(Je.UNAUTHENTICATED,t)}function K4(){return new Ge(Je.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function Q4(t){return new Ge(Je.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function Y4(){return new Ge(Je.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Z4(){return new Ge(Je.CANCELED,"User canceled the upload/download.")}function J4(t){return new Ge(Je.INVALID_URL,"Invalid URL '"+t+"'.")}function X4(t){return new Ge(Je.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function e6(){return new Ge(Je.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+xM+"' property when initializing the app?")}function t6(){return new Ge(Je.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function n6(){return new Ge(Je.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function r6(t){return new Ge(Je.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Jw(t){return new Ge(Je.INVALID_ARGUMENT,t)}function NM(){return new Ge(Je.APP_DELETED,"The Firebase app was deleted.")}function i6(t){return new Ge(Je.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function il(t,e){return new Ge(Je.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function rl(t){throw new Ge(Je.INTERNAL_ERROR,"Internal error: "+t)}var Wn=class t{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){let e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=t.makeFromUrl(e,n)}catch{return new t(e,"")}if(r.path==="")return r;throw X4(e)}static makeFromUrl(e,n){let r=null,i="([A-Za-z0-9.\\-_]+)";function o(oe){oe.path.charAt(oe.path.length-1)==="/"&&(oe.path_=oe.path_.slice(0,-1))}let s="(/(.*))?$",a=new RegExp("^gs://"+i+s,"i"),u={bucket:1,path:3};function l(oe){oe.path_=decodeURIComponent(oe.path)}let h="v[A-Za-z0-9_]+",p=n.replace(/[.]/g,"\\."),g="(/([^?#]*).*)?$",y=new RegExp(`^https?://${p}/${h}/b/${i}/o${g}`,"i"),w={bucket:1,path:3},k=n===RM?"(?:storage.googleapis.com|storage.cloud.google.com)":n,M="([^?#]*)",j=new RegExp(`^https?://${k}/${i}/${M}`,"i"),W=[{regex:a,indices:u,postModify:o},{regex:y,indices:w,postModify:l},{regex:j,indices:{bucket:1,path:2},postModify:l}];for(let oe=0;oe<W.length;oe++){let Xe=W[oe],Ie=Xe.regex.exec(e);if(Ie){let b=Ie[Xe.indices.bucket],v=Ie[Xe.indices.path];v||(v=""),r=new t(b,v),Xe.postModify(r);break}}if(r==null)throw J4(e);return r}},Xw=class{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}};function o6(t,e,n){let r=1,i=null,o=null,s=!1,a=0;function u(){return a===2}let l=!1;function h(...M){l||(l=!0,e.apply(null,M))}function p(M){i=setTimeout(()=>{i=null,t(y,u())},M)}function g(){o&&clearTimeout(o)}function y(M,...j){if(l){g();return}if(M){g(),h.call(null,M,...j);return}if(u()||s){g(),h.call(null,M,...j);return}r<64&&(r*=2);let W;a===1?(a=2,W=0):W=(r+Math.random())*1e3,p(W)}let w=!1;function k(M){w||(w=!0,g(),!l&&(i!==null?(M||(a=2),clearTimeout(i),p(0)):M||(a=1)))}return p(0),o=setTimeout(()=>{s=!0,k(!0)},n),k}function s6(t){t(!1)}function a6(t){return t!==void 0}function c6(t){return typeof t=="object"&&!Array.isArray(t)}function i0(t){return typeof t=="string"||t instanceof String}function bM(t){return o0()&&t instanceof Blob}function o0(){return typeof Blob<"u"}function DM(t,e,n,r){if(r<e)throw Jw(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw Jw(`Invalid value for '${t}'. Expected ${n} or less.`)}function bp(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function MM(t){let e=encodeURIComponent,n="?";for(let r in t)if(t.hasOwnProperty(r)){let i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var Ba=(function(t){return t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT",t})(Ba||{});function u6(t,e){let n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,o=e.indexOf(t)!==-1;return n||i||o}var e0=class{constructor(e,n,r,i,o,s,a,u,l,h,p,g=!0,y=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=o,this.additionalRetryCodes_=s,this.callback_=a,this.errorCallback_=u,this.timeout_=l,this.progressCallback_=h,this.connectionFactory_=p,this.retry=g,this.isUsingEmulator=y,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((w,k)=>{this.resolve_=w,this.reject_=k,this.start_()})}start_(){let e=(r,i)=>{if(i){r(!1,new Ua(!1,null,!0));return}let o=this.connectionFactory_();this.pendingConnection_=o;let s=a=>{let u=a.loaded,l=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,l)};this.progressCallback_!==null&&o.addUploadProgressListener(s),o.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(s),this.pendingConnection_=null;let a=o.getErrorCode()===Ba.NO_ERROR,u=o.getStatus();if(!a||u6(u,this.additionalRetryCodes_)&&this.retry){let h=o.getErrorCode()===Ba.ABORT;r(!1,new Ua(!1,null,h));return}let l=this.successCodes_.indexOf(u)!==-1;r(!0,new Ua(l,o))})},n=(r,i)=>{let o=this.resolve_,s=this.reject_,a=i.connection;if(i.wasSuccessCode)try{let u=this.callback_(a,a.getResponse());a6(u)?o(u):o()}catch(u){s(u)}else if(a!==null){let u=r0();u.serverResponse=a.getErrorText(),this.errorCallback_?s(this.errorCallback_(a,u)):s(u)}else if(i.canceled){let u=this.appDelete_?NM():Z4();s(u)}else{let u=Y4();s(u)}};this.canceled_?n(!1,new Ua(!1,null,!0)):this.backoffId_=o6(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&s6(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}},Ua=class{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}};function l6(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function d6(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function h6(t,e){e&&(t["X-Firebase-GMPID"]=e)}function f6(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function p6(t,e,n,r,i,o,s=!0,a=!1){let u=MM(t.urlParams),l=t.url+u,h=Object.assign({},t.headers);return h6(h,e),l6(h,n),d6(h,o),f6(h,r),new e0(l,t.method,h,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,s,a)}function g6(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function m6(...t){let e=g6();if(e!==void 0){let n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(o0())return new Blob(t);throw new Ge(Je.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function y6(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}function v6(t){if(typeof atob>"u")throw r6("base-64");return atob(t)}var Ir={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},ol=class{constructor(e,n){this.data=e,this.contentType=n||null}};function _6(t,e){switch(t){case Ir.RAW:return new ol(kM(e));case Ir.BASE64:case Ir.BASE64URL:return new ol(PM(t,e));case Ir.DATA_URL:return new ol(I6(e),w6(e))}throw r0()}function kM(t){let e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{let o=r,s=t.charCodeAt(++n);r=65536|(o&1023)<<10|s&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function E6(t){let e;try{e=decodeURIComponent(t)}catch{throw il(Ir.DATA_URL,"Malformed data URL.")}return kM(e)}function PM(t,e){switch(t){case Ir.BASE64:{let i=e.indexOf("-")!==-1,o=e.indexOf("_")!==-1;if(i||o)throw il(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Ir.BASE64URL:{let i=e.indexOf("+")!==-1,o=e.indexOf("/")!==-1;if(i||o)throw il(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=v6(e)}catch(i){throw i.message.includes("polyfill")?i:il(t,"Invalid character found")}let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}var Ip=class{constructor(e){this.base64=!1,this.contentType=null;let n=e.match(/^data:([^,]+)?,/);if(n===null)throw il(Ir.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");let r=n[1]||null;r!=null&&(this.base64=b6(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}};function I6(t){let e=new Ip(t);return e.base64?PM(Ir.BASE64,e.rest):E6(e.rest)}function w6(t){return new Ip(t).contentType}function b6(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}var wp=class t{constructor(e,n){let r=0,i="";bM(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(bM(this.data_)){let r=this.data_,i=y6(r,e,n);return i===null?null:new t(i)}else{let r=new Uint8Array(this.data_.buffer,e,n-e);return new t(r,!0)}}static getBlob(...e){if(o0()){let n=e.map(r=>r instanceof t?r.data_:r);return new t(m6.apply(null,n))}else{let n=e.map(s=>i0(s)?_6(Ir.RAW,s).data:s.data_),r=0;n.forEach(s=>{r+=s.byteLength});let i=new Uint8Array(r),o=0;return n.forEach(s=>{for(let a=0;a<s.length;a++)i[o++]=s[a]}),new t(i,!0)}}uploadData(){return this.data_}};function OM(t){let e;try{e=JSON.parse(t)}catch{return null}return c6(e)?e:null}function D6(t){if(t.length===0)return null;let e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function T6(t,e){let n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function FM(t){let e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}function C6(t,e){return e}var Mt=class{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||C6}},Ep=null;function S6(t){return!i0(t)||t.length<2?t:FM(t)}function LM(){if(Ep)return Ep;let t=[];t.push(new Mt("bucket")),t.push(new Mt("generation")),t.push(new Mt("metageneration")),t.push(new Mt("name","fullPath",!0));function e(o,s){return S6(s)}let n=new Mt("name");n.xform=e,t.push(n);function r(o,s){return s!==void 0?Number(s):s}let i=new Mt("size");return i.xform=r,t.push(i),t.push(new Mt("timeCreated")),t.push(new Mt("updated")),t.push(new Mt("md5Hash",null,!0)),t.push(new Mt("cacheControl",null,!0)),t.push(new Mt("contentDisposition",null,!0)),t.push(new Mt("contentEncoding",null,!0)),t.push(new Mt("contentLanguage",null,!0)),t.push(new Mt("contentType",null,!0)),t.push(new Mt("metadata","customMetadata",!0)),Ep=t,Ep}function A6(t,e){function n(){let r=t.bucket,i=t.fullPath,o=new Wn(r,i);return e._makeStorageReference(o)}Object.defineProperty(t,"ref",{get:n})}function R6(t,e,n){let r={};r.type="file";let i=n.length;for(let o=0;o<i;o++){let s=n[o];r[s.local]=s.xform(r,e[s.server])}return A6(r,t),r}function VM(t,e,n){let r=OM(e);return r===null?null:R6(t,r,n)}function x6(t,e,n,r){let i=OM(e);if(i===null||!i0(i.downloadTokens))return null;let o=i.downloadTokens;if(o.length===0)return null;let s=encodeURIComponent;return o.split(",").map(l=>{let h=t.bucket,p=t.fullPath,g="/b/"+s(h)+"/o/"+s(p),y=bp(g,n,r),w=MM({alt:"media",token:l});return y+w})[0]}function N6(t,e){let n={},r=e.length;for(let i=0;i<r;i++){let o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}var sl=class{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}};function jM(t){if(!t)throw r0()}function M6(t,e){function n(r,i){let o=VM(t,i,e);return jM(o!==null),o}return n}function k6(t,e){function n(r,i){let o=VM(t,i,e);return jM(o!==null),x6(o,i,t.host,t._protocol)}return n}function UM(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=K4():i=W4():n.getStatus()===402?i=G4(t.bucket):n.getStatus()===403?i=Q4(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function BM(t){let e=UM(t);function n(r,i){let o=e(r,i);return r.getStatus()===404&&(o=z4(t.path)),o.serverResponse=i.serverResponse,o}return n}function P6(t,e,n){let r=e.fullServerUrl(),i=bp(r,t.host,t._protocol),o="GET",s=t.maxOperationRetryTime,a=new sl(i,o,k6(t,n),s);return a.errorHandler=BM(e),a}function O6(t,e){let n=e.fullServerUrl(),r=bp(n,t.host,t._protocol),i="DELETE",o=t.maxOperationRetryTime;function s(u,l){}let a=new sl(r,i,s,o);return a.successCodes=[200,204],a.errorHandler=BM(e),a}function F6(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function L6(t,e,n){let r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=F6(null,e)),r}function V6(t,e,n,r,i){let o=e.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"};function a(){let W="";for(let oe=0;oe<2;oe++)W=W+Math.random().toString().slice(2);return W}let u=a();s["Content-Type"]="multipart/related; boundary="+u;let l=L6(e,r,i),h=N6(l,n),p="--"+u+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+h+`\r
--`+u+`\r
Content-Type: `+l.contentType+`\r
\r
`,g=`\r
--`+u+"--",y=wp.getBlob(p,r,g);if(y===null)throw t6();let w={name:l.fullPath},k=bp(o,t.host,t._protocol),M="POST",j=t.maxUploadRetryTime,G=new sl(k,M,M6(t,n),j);return G.urlParams=w,G.headers=s,G.body=y.uploadData(),G.errorHandler=UM(e),G}var Tue=256*1024;var TM=null,t0=class{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Ba.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Ba.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Ba.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i,o){if(this.sent_)throw rl("cannot .send() more than once");if(Bn(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),o!==void 0)for(let s in o)o.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,o[s].toString());return i!==void 0?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw rl("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw rl("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw rl("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw rl("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}},n0=class extends t0{initXhr(){this.xhr_.responseType="text"}};function s0(){return TM?TM():new n0}var $a=class t{constructor(e,n){this._service=e,n instanceof Wn?this._location=n:this._location=Wn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new t(e,n)}get root(){let e=new Wn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return FM(this._location.path)}get storage(){return this._service}get parent(){let e=D6(this._location.path);if(e===null)return null;let n=new Wn(this._location.bucket,e);return new t(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw i6(e)}};function j6(t,e,n){t._throwIfRoot("uploadBytes");let r=V6(t.storage,t._location,LM(),new wp(e,!0),n);return t.storage.makeRequestWithTokens(r,s0).then(i=>({metadata:i,ref:t}))}function U6(t){t._throwIfRoot("getDownloadURL");let e=P6(t.storage,t._location,LM());return t.storage.makeRequestWithTokens(e,s0).then(n=>{if(n===null)throw n6();return n})}function B6(t){t._throwIfRoot("deleteObject");let e=O6(t.storage,t._location);return t.storage.makeRequestWithTokens(e,s0)}function $6(t,e){let n=T6(t._location.path,e),r=new Wn(t._location.bucket,n);return new $a(t.storage,r)}function H6(t){return/^[A-Za-z]+:\/\//.test(t)}function q6(t,e){return new $a(t,e)}function $M(t,e){if(t instanceof al){let n=t;if(n._bucket==null)throw e6();let r=new $a(n,n._bucket);return e!=null?$M(r,e):r}else return e!==void 0?$6(t,e):t}function z6(t,e){if(e&&H6(e)){if(t instanceof al)return q6(t,e);throw Jw("To use ref(service, url), the first argument must be a Storage instance.")}else return $M(t,e)}function CM(t,e){let n=e?.[xM];return n==null?null:Wn.makeFromBucketSpec(n,t)}function G6(t,e,n,r={}){t.host=`${e}:${n}`;let i=Bn(e);i&&(aa(`https://${t.host}/b`),ca("Storage",!0)),t._isUsingEmulator=!0,t._protocol=i?"https":"http";let{mockUserToken:o}=r;o&&(t._overrideAuthToken=typeof o=="string"?o:Xh(o,t.app.options.projectId))}var al=class{constructor(e,n,r,i,o,s=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=o,this._isUsingEmulator=s,this._bucket=null,this._host=RM,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=H4,this._maxUploadRetryTime=q4,this._requests=new Set,i!=null?this._bucket=Wn.makeFromBucketSpec(i,this._host):this._bucket=CM(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Wn.makeFromBucketSpec(this._url,e):this._bucket=CM(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){DM("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){DM("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;let e=this._authProvider.getImmediate({optional:!0});if(e){let n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(Yt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new $a(this,e)}_makeRequest(e,n,r,i,o=!0){if(this._deleted)return new Xw(NM());{let s=p6(e,this._appId,r,i,n,this._firebaseVersion,o,this._isUsingEmulator);return this._requests.add(s),s.getPromise().then(()=>this._requests.delete(s),()=>this._requests.delete(s)),s}}async makeRequestWithTokens(e,n){let[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}},SM="@firebase/storage",AM="0.13.14";var HM="storage";function qM(t,e,n){return t=ke(t),j6(t,e,n)}function zM(t){return t=ke(t),U6(t)}function GM(t){return t=ke(t),B6(t)}function WM(t,e){return t=ke(t),z6(t,e)}function KM(t=zr(),e){t=ke(t);let r=Mi(t,HM).getImmediate({identifier:e}),i=Jh("storage");return i&&QM(r,...i),r}function QM(t,e,n,r={}){G6(t,e,n,r)}function W6(t,{instanceIdentifier:e}){let n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new al(n,r,i,e,lr)}function K6(){hn(new Nt(HM,W6,"PUBLIC").setMultipleInstances(!0)),Me(SM,AM,""),Me(SM,AM,"esm2017")}K6();var ls=class{constructor(e){return e}},YM="storage",a0=class{constructor(){return ki(YM)}};var c0=new q("angularfire2.storage-instances");function Q6(t,e){let n=qo(YM,t,e);return n&&new ls(n)}function Y6(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new ls(r)}}var Z6={provide:a0,deps:[[new vt,c0]]},J6={provide:ls,useFactory:Q6,deps:[[new vt,c0],$n]};function ZM(t,...e){return Me("angularfire",dr.full,"gcs"),Gt([J6,Z6,{provide:c0,useFactory:Y6(t),multi:!0,deps:[be,Oe,hr,Gr,[new vt,Qo],[new vt,Oi],...e]}])}var JM=Ve(GM,!0,2);var XM=Ve(zM,!0);var ek=Ve(KM,!0);var u0=Ve(WM,!0,2);var tk=Ve(qM,!0);var nk={production:!1,firebase:{apiKey:"AIzaSyAaQQwHu7R_uw3kXjhbUqolzm41lnU1c0w",authDomain:"portfolio-443ad.firebaseapp.com",databaseURL:"https://portfolio-443ad-default-rtdb.firebaseio.com",projectId:"portfolio-443ad",storageBucket:"portfolio-443ad.firebasestorage.app",messagingSenderId:"180253201705",appId:"1:180253201705:web:2bf986e86130e00e3bd338",measurementId:"G-0VGGB8KVBD"}};var ae="primary",El=Symbol("RouteTitle"),p0=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function fs(t){return new p0(t)}function lk(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=t[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function X6(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!wr(t[n],e[n]))return!1;return!0}function wr(t,e){let n=t?g0(t):void 0,r=e?g0(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!dk(t[i],e[i]))return!1;return!0}function g0(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function dk(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,o)=>r[o]===i)}else return t===e}function hk(t){return t.length>0?t[t.length-1]:null}function ii(t){return lm(t)?t:Ti(t)?Be(Promise.resolve(t)):X(t)}var eq={exact:pk,subset:gk},fk={exact:tq,subset:nq,ignored:()=>!0};function rk(t,e,n){return eq[n.paths](t.root,e.root,n.matrixParams)&&fk[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function tq(t,e){return wr(t,e)}function pk(t,e,n){if(!ds(t.segments,e.segments)||!Cp(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!pk(t.children[r],e.children[r],n))return!1;return!0}function nq(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>dk(t[n],e[n]))}function gk(t,e,n){return mk(t,e,e.segments,n)}function mk(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!ds(i,n)||e.hasChildren()||!Cp(i,n,r))}else if(t.segments.length===n.length){if(!ds(t.segments,n)||!Cp(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!gk(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),o=n.slice(t.segments.length);return!ds(t.segments,i)||!Cp(t.segments,i,r)||!t.children[ae]?!1:mk(t.children[ae],e,o,r)}}function Cp(t,e,n){return e.every((r,i)=>fk[n](t[i].parameters,r.parameters))}var Dr=class{root;queryParams;fragment;_queryParamMap;constructor(e=new De([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=fs(this.queryParams),this._queryParamMap}toString(){return oq.serialize(this)}},De=class{segments;children;parent=null;constructor(e,n){this.segments=e,this.children=n,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Sp(this)}},Ki=class{path;parameters;_parameterMap;constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=fs(this.parameters),this._parameterMap}toString(){return vk(this)}};function rq(t,e){return ds(t,e)&&t.every((n,r)=>wr(n.parameters,e[r].parameters))}function ds(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function iq(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===ae&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==ae&&(n=n.concat(e(i,r)))}),n}var ec=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=z({token:t,factory:()=>new ps,providedIn:"root"})}return t})(),ps=class{parse(e){let n=new y0(e);return new Dr(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${cl(e.root,!0)}`,r=cq(e.queryParams),i=typeof e.fragment=="string"?`#${sq(e.fragment)}`:"";return`${n}${r}${i}`}},oq=new ps;function Sp(t){return t.segments.map(e=>vk(e)).join("/")}function cl(t,e){if(!t.hasChildren())return Sp(t);if(e){let n=t.children[ae]?cl(t.children[ae],!1):"",r=[];return Object.entries(t.children).forEach(([i,o])=>{i!==ae&&r.push(`${i}:${cl(o,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=iq(t,(r,i)=>i===ae?[cl(t.children[ae],!1)]:[`${i}:${cl(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[ae]!=null?`${Sp(t)}/${n[0]}`:`${Sp(t)}/(${n.join("//")})`}}function yk(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Dp(t){return yk(t).replace(/%3B/gi,";")}function sq(t){return encodeURI(t)}function m0(t){return yk(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Ap(t){return decodeURIComponent(t)}function ik(t){return Ap(t.replace(/\+/g,"%20"))}function vk(t){return`${m0(t.path)}${aq(t.parameters)}`}function aq(t){return Object.entries(t).map(([e,n])=>`;${m0(e)}=${m0(n)}`).join("")}function cq(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${Dp(n)}=${Dp(i)}`).join("&"):`${Dp(n)}=${Dp(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var uq=/^[^\/()?;#]+/;function l0(t){let e=t.match(uq);return e?e[0]:""}var lq=/^[^\/()?;=#]+/;function dq(t){let e=t.match(lq);return e?e[0]:""}var hq=/^[^=?&#]+/;function fq(t){let e=t.match(hq);return e?e[0]:""}var pq=/^[^&#]+/;function gq(t){let e=t.match(pq);return e?e[0]:""}var y0=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new De([],{}):new De([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[ae]=new De(e,n)),r}parseSegment(){let e=l0(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new H(4009,!1);return this.capture(e),new Ki(Ap(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=dq(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=l0(this.remaining);i&&(r=i,this.capture(r))}e[Ap(n)]=Ap(r)}parseQueryParam(e){let n=fq(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let s=gq(this.remaining);s&&(r=s,this.capture(r))}let i=ik(n),o=ik(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=l0(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new H(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=ae);let s=this.parseChildren();n[o]=Object.keys(s).length===1?s[ae]:new De([],s),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new H(4011,!1)}};function _k(t){return t.segments.length>0?new De([],{[ae]:t}):t}function Ek(t){let e={};for(let[r,i]of Object.entries(t.children)){let o=Ek(i);if(r===ae&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let n=new De(t.segments,e);return mq(n)}function mq(t){if(t.numberOfChildren===1&&t.children[ae]){let e=t.children[ae];return new De(t.segments.concat(e.segments),e.children)}return t}function Qi(t){return t instanceof Dr}function Ik(t,e,n=null,r=null){let i=wk(t);return bk(i,e,n,r)}function wk(t){let e;function n(o){let s={};for(let u of o.children){let l=n(u);s[u.outlet]=l}let a=new De(o.url,s);return o===t&&(e=a),a}let r=n(t.root),i=_k(r);return e??i}function bk(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return d0(i,i,i,n,r);let o=yq(e);if(o.toRoot())return d0(i,i,new De([],{}),n,r);let s=vq(o,i,t),a=s.processChildren?ll(s.segmentGroup,s.index,o.commands):Tk(s.segmentGroup,s.index,o.commands);return d0(i,s.segmentGroup,a,n,r)}function Rp(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function hl(t){return typeof t=="object"&&t!=null&&t.outlets}function d0(t,e,n,r,i){let o={};r&&Object.entries(r).forEach(([u,l])=>{o[u]=Array.isArray(l)?l.map(h=>`${h}`):`${l}`});let s;t===e?s=n:s=Dk(t,e,n);let a=_k(Ek(s));return new Dr(a,o,i)}function Dk(t,e,n){let r={};return Object.entries(t.children).forEach(([i,o])=>{o===e?r[i]=n:r[i]=Dk(o,e,n)}),new De(t.segments,r)}var xp=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&Rp(r[0]))throw new H(4003,!1);let i=r.find(hl);if(i&&i!==hk(r))throw new H(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function yq(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new xp(!0,0,t);let e=0,n=!1,r=t.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([u,l])=>{a[u]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,u)=>{u==0&&a==="."||(u==0&&a===""?n=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new xp(n,e,r)}var za=class{segmentGroup;processChildren;index;constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function vq(t,e,n){if(t.isAbsolute)return new za(e,!0,0);if(!n)return new za(e,!1,NaN);if(n.parent===null)return new za(n,!0,0);let r=Rp(t.commands[0])?0:1,i=n.segments.length-1+r;return _q(n,i,t.numberOfDoubleDots)}function _q(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new H(4005,!1);i=r.segments.length}return new za(r,!1,i-o)}function Eq(t){return hl(t[0])?t[0].outlets:{[ae]:t}}function Tk(t,e,n){if(t??=new De([],{}),t.segments.length===0&&t.hasChildren())return ll(t,e,n);let r=Iq(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let o=new De(t.segments.slice(0,r.pathIndex),{});return o.children[ae]=new De(t.segments.slice(r.pathIndex),t.children),ll(o,0,i)}else return r.match&&i.length===0?new De(t.segments,{}):r.match&&!t.hasChildren()?v0(t,e,n):r.match?ll(t,0,i):v0(t,e,n)}function ll(t,e,n){if(n.length===0)return new De(t.segments,{});{let r=Eq(n),i={};if(Object.keys(r).some(o=>o!==ae)&&t.children[ae]&&t.numberOfChildren===1&&t.children[ae].segments.length===0){let o=ll(t.children[ae],e,n);return new De(t.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=Tk(t.children[o],e,s))}),Object.entries(t.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new De(t.segments,i)}}function Iq(t,e,n){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;let s=t.segments[i],a=n[r];if(hl(a))break;let u=`${a}`,l=r<n.length-1?n[r+1]:null;if(i>0&&u===void 0)break;if(u&&l&&typeof l=="object"&&l.outlets===void 0){if(!sk(u,l,s))return o;r+=2}else{if(!sk(u,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function v0(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let o=n[i];if(hl(o)){let u=wq(o.outlets);return new De(r,u)}if(i===0&&Rp(n[0])){let u=t.segments[e];r.push(new Ki(u.path,ok(n[0]))),i++;continue}let s=hl(o)?o.outlets[ae]:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&Rp(a)?(r.push(new Ki(s,ok(a))),i+=2):(r.push(new Ki(s,{})),i++)}return new De(r,{})}function wq(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=v0(new De([],{}),0,r))}),e}function ok(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function sk(t,e,n){return t==n.path&&wr(e,n.parameters)}var Ga="imperative",pt=(function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t})(pt||{}),mn=class{id;url;constructor(e,n){this.id=e,this.url=n}},Yi=class extends mn{type=pt.NavigationStart;navigationTrigger;restoredState;constructor(e,n,r="imperative",i=null){super(e,n),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Tn=class extends mn{urlAfterRedirects;type=pt.NavigationEnd;constructor(e,n,r){super(e,n),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Zt=(function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t[t.Aborted=4]="Aborted",t})(Zt||{}),Ka=(function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t})(Ka||{}),br=class extends mn{reason;code;type=pt.NavigationCancel;constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Tr=class extends mn{reason;code;type=pt.NavigationSkipped;constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i}},Qa=class extends mn{error;target;type=pt.NavigationError;constructor(e,n,r,i){super(e,n),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},fl=class extends mn{urlAfterRedirects;state;type=pt.RoutesRecognized;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Np=class extends mn{urlAfterRedirects;state;type=pt.GuardsCheckStart;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Mp=class extends mn{urlAfterRedirects;state;shouldActivate;type=pt.GuardsCheckEnd;constructor(e,n,r,i,o){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},kp=class extends mn{urlAfterRedirects;state;type=pt.ResolveStart;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Pp=class extends mn{urlAfterRedirects;state;type=pt.ResolveEnd;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Op=class{route;type=pt.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Fp=class{route;type=pt.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Lp=class{snapshot;type=pt.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Vp=class{snapshot;type=pt.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},jp=class{snapshot;type=pt.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Up=class{snapshot;type=pt.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Ya=class{routerEvent;position;anchor;type=pt.Scroll;constructor(e,n,r){this.routerEvent=e,this.position=n,this.anchor=r}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},pl=class{},Za=class{url;navigationBehaviorOptions;constructor(e,n){this.url=e,this.navigationBehaviorOptions=n}};function bq(t){return!(t instanceof pl)&&!(t instanceof Za)}function Dq(t,e){return t.providers&&!t._injector&&(t._injector=au(t.providers,e,`Route: ${t.path}`)),t._injector??e}function Kn(t){return t.outlet||ae}function Tq(t,e){let n=t.filter(r=>Kn(r)===e);return n.push(...t.filter(r=>Kn(r)!==e)),n}function tc(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var Bp=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return tc(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new nc(this.rootInjector)}},nc=(()=>{class t{rootInjector;contexts=new Map;constructor(n){this.rootInjector=n}onChildOutletCreated(n,r){let i=this.getOrCreateContext(n);i.outlet=r,this.contexts.set(n,i)}onChildOutletDestroyed(n){let r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new Bp(this.rootInjector),this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}static \u0275fac=function(r){return new(r||t)(se(nt))};static \u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),$p=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=_0(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=_0(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=E0(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return E0(e,this._root).map(n=>n.value)}};function _0(t,e){if(t===e.value)return e;for(let n of e.children){let r=_0(t,n);if(r)return r}return null}function E0(t,e){if(t===e.value)return[e];for(let n of e.children){let r=E0(t,n);if(r.length)return r.unshift(e),r}return[]}var gn=class{value;children;constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function qa(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var gl=class extends $p{snapshot;constructor(e,n){super(e),this.snapshot=n,A0(this,e)}toString(){return this.snapshot.toString()}};function Ck(t){let e=Cq(t),n=new Ct([new Ki("",{})]),r=new Ct({}),i=new Ct({}),o=new Ct({}),s=new Ct(""),a=new Qn(n,r,o,s,i,ae,t,e.root);return a.snapshot=e.root,new gl(new gn(a,[]),e)}function Cq(t){let e={},n={},r={},o=new hs([],e,r,"",n,ae,t,null,{});return new ml("",new gn(o,[]))}var Qn=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,n,r,i,o,s,a,u){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(me(l=>l[El]))??X(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(me(e=>fs(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(me(e=>fs(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Hp(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:V(V({},e.params),t.params),data:V(V({},e.data),t.data),resolve:V(V(V(V({},t.data),e.data),i?.data),t._resolvedData)}:r={params:V({},t.params),data:V({},t.data),resolve:V(V({},t.data),t._resolvedData??{})},i&&Ak(i)&&(r.resolve[El]=i.title),r}var hs=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[El]}constructor(e,n,r,i,o,s,a,u,l){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=fs(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=fs(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},ml=class extends $p{url;constructor(e,n){super(n),this.url=e,A0(this,n)}toString(){return Sk(this._root)}};function A0(t,e){e.value._routerState=t,e.children.forEach(n=>A0(t,n))}function Sk(t){let e=t.children.length>0?` { ${t.children.map(Sk).join(", ")} } `:"";return`${t.value}${e}`}function h0(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,wr(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),wr(e.params,n.params)||t.paramsSubject.next(n.params),X6(e.url,n.url)||t.urlSubject.next(n.url),wr(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function I0(t,e){let n=wr(t.params,e.params)&&rq(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||I0(t.parent,e.parent))}function Ak(t){return typeof t.title=="string"||t.title===null}var Rk=new q(""),Il=(()=>{class t{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=ae;activateEvents=new Qe;deactivateEvents=new Qe;attachEvents=new Qe;detachEvents=new Qe;routerOutletData=BS(void 0);parentContexts=R(nc);location=R(Oo);changeDetector=R(Ai);inputBinder=R(Wp,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(n){if(n.name){let{firstChange:r,previousValue:i}=n.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new H(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new H(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new H(4012,!1);this.location.detach();let n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){let n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new H(4013,!1);this._activatedRoute=n;let i=this.location,s=n.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new w0(n,a,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:u,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||t)};static \u0275dir=ot({type:t,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[or]})}return t})(),w0=class{route;childContexts;parent;outletData;constructor(e,n,r,i){this.route=e,this.childContexts=n,this.parent=r,this.outletData=i}get(e,n){return e===Qn?this.route:e===nc?this.childContexts:e===Rk?this.outletData:this.parent.get(e,n)}},Wp=new q("");var R0=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275cmp=Ye({type:t,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&qe(0,"router-outlet")},dependencies:[Il],encapsulation:2})}return t})();function x0(t){let e=t.children&&t.children.map(x0),n=e?Z(V({},t),{children:e}):V({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==ae&&(n.component=R0),n}function Sq(t,e,n){let r=yl(t,e._root,n?n._root:void 0);return new gl(r,e)}function yl(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=Aq(t,e,n);return new gn(r,i)}else{if(t.shouldAttach(e.value)){let o=t.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>yl(t,a)),s}}let r=Rq(e.value),i=e.children.map(o=>yl(t,o));return new gn(r,i)}}function Aq(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return yl(t,r,i);return yl(t,r)})}function Rq(t){return new Qn(new Ct(t.url),new Ct(t.params),new Ct(t.queryParams),new Ct(t.fragment),new Ct(t.data),t.outlet,t.component,t)}var Ja=class{redirectTo;navigationBehaviorOptions;constructor(e,n){this.redirectTo=e,this.navigationBehaviorOptions=n}},xk="ngNavigationCancelingError";function qp(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=Qi(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=Nk(!1,Zt.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function Nk(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[xk]=!0,n.cancellationCode=e,n}function xq(t){return Mk(t)&&Qi(t.url)}function Mk(t){return!!t&&t[xk]}var Nq=(t,e,n,r)=>me(i=>(new b0(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),b0=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,n,r,i,o){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),h0(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=qa(n);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,n,s.children)}else this.deactivateChildRoutes(e,n,r);else o&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=qa(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=qa(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=qa(n);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new Up(o.value.snapshot))}),e.children.length&&this.forwardEvent(new Vp(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(h0(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,s.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),h0(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},zp=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Wa=class{component;route;constructor(e,n){this.component=e,this.route=n}};function Mq(t,e,n){let r=t._root,i=e?e._root:null;return ul(r,i,n,[r.value])}function kq(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function rc(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!Am(t)?t:e.get(t):r}function ul(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=qa(e);return t.children.forEach(s=>{Pq(s,o[s.value.outlet],n,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>dl(a,n.getContext(s),i)),i}function Pq(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let u=Oq(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new zp(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?ul(t,e,a?a.children:null,r,i):ul(t,e,n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Wa(a.outlet.component,s))}else s&&dl(e,a,i),i.canActivateChecks.push(new zp(r)),o.component?ul(t,null,a?a.children:null,r,i):ul(t,null,n,r,i);return i}function Oq(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!ds(t.url,e.url);case"pathParamsOrQueryParamsChange":return!ds(t.url,e.url)||!wr(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!I0(t,e)||!wr(t.queryParams,e.queryParams);case"paramsChange":default:return!I0(t,e)}}function dl(t,e,n){let r=qa(t),i=t.value;Object.entries(r).forEach(([o,s])=>{i.component?e?dl(s,e.children.getContext(o),n):dl(s,null,n):dl(s,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new Wa(e.outlet.component,i)):n.canDeactivateChecks.push(new Wa(null,i)):n.canDeactivateChecks.push(new Wa(null,i))}function wl(t){return typeof t=="function"}function Fq(t){return typeof t=="boolean"}function Lq(t){return t&&wl(t.canLoad)}function Vq(t){return t&&wl(t.canActivate)}function jq(t){return t&&wl(t.canActivateChild)}function Uq(t){return t&&wl(t.canDeactivate)}function Bq(t){return t&&wl(t.canMatch)}function kk(t){return t instanceof xr||t?.name==="EmptyError"}var Tp=Symbol("INITIAL_VALUE");function Xa(){return en(t=>Nd(t.map(e=>e.pipe(Mr(1),pm(Tp)))).pipe(me(e=>{for(let n of e)if(n!==!0){if(n===Tp)return Tp;if(n===!1||$q(n))return n}return!0}),an(e=>e!==Tp),Mr(1)))}function $q(t){return Qi(t)||t instanceof Ja}function Hq(t,e){return tt(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return s.length===0&&o.length===0?X(Z(V({},n),{guardsResult:!0})):qq(s,r,i,t).pipe(tt(a=>a&&Fq(a)?zq(r,o,t,e):X(a)),me(a=>Z(V({},n),{guardsResult:a})))})}function qq(t,e,n,r){return Be(t).pipe(tt(i=>Yq(i.component,i.route,n,e,r)),kr(i=>i!==!0,!0))}function zq(t,e,n,r){return Be(e).pipe(ho(i=>Ls(Wq(i.route.parent,r),Gq(i.route,r),Qq(t,i.path,n),Kq(t,i.route,n))),kr(i=>i!==!0,!0))}function Gq(t,e){return t!==null&&e&&e(new jp(t)),X(!0)}function Wq(t,e){return t!==null&&e&&e(new Lp(t)),X(!0)}function Kq(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return X(!0);let i=r.map(o=>Nc(()=>{let s=tc(e)??n,a=rc(o,s),u=Vq(a)?a.canActivate(e,t):ht(s,()=>a(e,t));return ii(u).pipe(kr())}));return X(i).pipe(Xa())}function Qq(t,e,n){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>kq(s)).filter(s=>s!==null).map(s=>Nc(()=>{let a=s.guards.map(u=>{let l=tc(s.node)??n,h=rc(u,l),p=jq(h)?h.canActivateChild(r,t):ht(l,()=>h(r,t));return ii(p).pipe(kr())});return X(a).pipe(Xa())}));return X(o).pipe(Xa())}function Yq(t,e,n,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return X(!0);let s=o.map(a=>{let u=tc(e)??i,l=rc(a,u),h=Uq(l)?l.canDeactivate(t,e,n,r):ht(u,()=>l(t,e,n,r));return ii(h).pipe(kr())});return X(s).pipe(Xa())}function Zq(t,e,n,r){let i=e.canLoad;if(i===void 0||i.length===0)return X(!0);let o=i.map(s=>{let a=rc(s,t),u=Lq(a)?a.canLoad(e,n):ht(t,()=>a(e,n));return ii(u)});return X(o).pipe(Xa(),Pk(r))}function Pk(t){return rm(gt(e=>{if(typeof e!="boolean")throw qp(t,e)}),me(e=>e===!0))}function Jq(t,e,n,r){let i=e.canMatch;if(!i||i.length===0)return X(!0);let o=i.map(s=>{let a=rc(s,t),u=Bq(a)?a.canMatch(e,n):ht(t,()=>a(e,n));return ii(u)});return X(o).pipe(Xa(),Pk(r))}var vl=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},_l=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function Ha(t){return Os(new vl(t))}function Xq(t){return Os(new H(4e3,!1))}function ez(t){return Os(Nk(!1,Zt.GuardRejected))}var D0=class{urlSerializer;urlTree;constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return X(r);if(i.numberOfChildren>1||!i.children[ae])return Xq(`${e.redirectTo}`);i=i.children[ae]}}applyRedirectCommands(e,n,r,i,o){return tz(n,i,o).pipe(me(s=>{if(s instanceof Dr)throw new _l(s);let a=this.applyRedirectCreateUrlTree(s,this.urlSerializer.parse(s),e,r);if(s[0]==="/")throw new _l(a);return a}))}applyRedirectCreateUrlTree(e,n,r,i){let o=this.createSegmentGroup(e,n.root,r,i);return new Dr(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=n[a]}else r[i]=o}),r}createSegmentGroup(e,n,r,i){let o=this.createSegments(e,n.segments,r,i),s={};return Object.entries(n.children).forEach(([a,u])=>{s[a]=this.createSegmentGroup(e,u,r,i)}),new De(o,s)}createSegments(e,n,r,i){return n.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new H(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}};function tz(t,e,n){if(typeof t=="string")return X(t);let r=t,{queryParams:i,fragment:o,routeConfig:s,url:a,outlet:u,params:l,data:h,title:p}=e;return ii(ht(n,()=>r({params:l,data:h,queryParams:i,fragment:o,routeConfig:s,url:a,outlet:u,title:p})))}var T0={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function nz(t,e,n,r,i){let o=Ok(t,e,n);return o.matched?(r=Dq(e,r),Jq(r,e,n,i).pipe(me(s=>s===!0?o:V({},T0)))):X(o)}function Ok(t,e,n){if(e.path==="**")return rz(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?V({},T0):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||lk)(n,t,e);if(!i)return V({},T0);let o={};Object.entries(i.posParams??{}).forEach(([a,u])=>{o[a]=u.path});let s=i.consumed.length>0?V(V({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function rz(t){return{matched:!0,parameters:t.length>0?hk(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function ak(t,e,n,r){return n.length>0&&sz(t,n,r)?{segmentGroup:new De(e,oz(r,new De(n,t.children))),slicedSegments:[]}:n.length===0&&az(t,n,r)?{segmentGroup:new De(t.segments,iz(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new De(t.segments,t.children),slicedSegments:n}}function iz(t,e,n,r){let i={};for(let o of n)if(Kp(t,e,o)&&!r[Kn(o)]){let s=new De([],{});i[Kn(o)]=s}return V(V({},r),i)}function oz(t,e){let n={};n[ae]=e;for(let r of t)if(r.path===""&&Kn(r)!==ae){let i=new De([],{});n[Kn(r)]=i}return n}function sz(t,e,n){return n.some(r=>Kp(t,e,r)&&Kn(r)!==ae)}function az(t,e,n){return n.some(r=>Kp(t,e,r))}function Kp(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function cz(t,e,n){return e.length===0&&!t.children[n]}var C0=class{};function uz(t,e,n,r,i,o,s="emptyOnly"){return new S0(t,e,n,r,i,s,o).recognize()}var lz=31,S0=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,n,r,i,o,s,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new D0(this.urlSerializer,this.urlTree)}noMatchError(e){return new H(4002,`'${e.segmentGroup}'`)}recognize(){let e=ak(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(me(({children:n,rootSnapshot:r})=>{let i=new gn(r,n),o=new ml("",i),s=Ik(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let n=new hs([],Object.freeze({}),Object.freeze(V({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),ae,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,ae,n).pipe(me(r=>({children:r,rootSnapshot:n})),Nr(r=>{if(r instanceof _l)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof vl?this.noMatchError(r):r}))}processSegmentGroup(e,n,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r,o):this.processSegment(e,n,r,r.segments,i,!0,o).pipe(me(s=>s instanceof gn?[s]:[]))}processChildren(e,n,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return Be(o).pipe(ho(s=>{let a=r.children[s],u=Tq(n,s);return this.processSegmentGroup(e,u,a,s,i)}),fm((s,a)=>(s.push(...a),s)),hi(null),hm(),tt(s=>{if(s===null)return Ha(r);let a=Fk(s);return dz(a),X(a)}))}processSegment(e,n,r,i,o,s,a){return Be(n).pipe(ho(u=>this.processSegmentAgainstRoute(u._injector??e,n,u,r,i,o,s,a).pipe(Nr(l=>{if(l instanceof vl)return X(null);throw l}))),kr(u=>!!u),Nr(u=>{if(kk(u))return cz(r,i,o)?X(new C0):Ha(r);throw u}))}processSegmentAgainstRoute(e,n,r,i,o,s,a,u){return Kn(r)!==s&&(s===ae||!Kp(i,o,r))?Ha(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,u):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,o,s,u):Ha(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,o,s,a){let{matched:u,parameters:l,consumedSegments:h,positionalParamSegments:p,remainingSegments:g}=Ok(n,i,o);if(!u)return Ha(n);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>lz&&(this.allowRedirects=!1));let y=new hs(o,l,Object.freeze(V({},this.urlTree.queryParams)),this.urlTree.fragment,ck(i),Kn(i),i.component??i._loadedComponent??null,i,uk(i)),w=Hp(y,a,this.paramsInheritanceStrategy);return y.params=Object.freeze(w.params),y.data=Object.freeze(w.data),this.applyRedirects.applyRedirectCommands(h,i.redirectTo,p,y,e).pipe(en(M=>this.applyRedirects.lineralizeSegments(i,M)),tt(M=>this.processSegment(e,r,n,M.concat(g),s,!1,a)))}matchSegmentAgainstRoute(e,n,r,i,o,s){let a=nz(n,r,i,e,this.urlSerializer);return r.path==="**"&&(n.children={}),a.pipe(en(u=>u.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(en(({routes:l})=>{let h=r._loadedInjector??e,{parameters:p,consumedSegments:g,remainingSegments:y}=u,w=new hs(g,p,Object.freeze(V({},this.urlTree.queryParams)),this.urlTree.fragment,ck(r),Kn(r),r.component??r._loadedComponent??null,r,uk(r)),k=Hp(w,s,this.paramsInheritanceStrategy);w.params=Object.freeze(k.params),w.data=Object.freeze(k.data);let{segmentGroup:M,slicedSegments:j}=ak(n,g,y,l);if(j.length===0&&M.hasChildren())return this.processChildren(h,l,M,w).pipe(me(W=>new gn(w,W)));if(l.length===0&&j.length===0)return X(new gn(w,[]));let G=Kn(r)===o;return this.processSegment(h,l,M,j,G?ae:o,!0,w).pipe(me(W=>new gn(w,W instanceof gn?[W]:[])))}))):Ha(n)))}getChildConfig(e,n,r){return n.children?X({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?X({routes:n._loadedRoutes,injector:n._loadedInjector}):Zq(e,n,r,this.urlSerializer).pipe(tt(i=>i?this.configLoader.loadChildren(e,n).pipe(gt(o=>{n._loadedRoutes=o.routes,n._loadedInjector=o.injector})):ez(n))):X({routes:[],injector:e})}};function dz(t){t.sort((e,n)=>e.value.outlet===ae?-1:n.value.outlet===ae?1:e.value.outlet.localeCompare(n.value.outlet))}function hz(t){let e=t.value.routeConfig;return e&&e.path===""}function Fk(t){let e=[],n=new Set;for(let r of t){if(!hz(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=Fk(r.children);e.push(new gn(r.value,i))}return e.filter(r=>!n.has(r))}function ck(t){return t.data||{}}function uk(t){return t.resolve||{}}function fz(t,e,n,r,i,o){return tt(s=>uz(t,e,n,r,s.extractedUrl,i,o).pipe(me(({state:a,tree:u})=>Z(V({},s),{targetSnapshot:a,urlAfterRedirects:u}))))}function pz(t,e){return tt(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return X(n);let o=new Set(i.map(u=>u.route)),s=new Set;for(let u of o)if(!s.has(u))for(let l of Lk(u))s.add(l);let a=0;return Be(s).pipe(ho(u=>o.has(u)?gz(u,r,t,e):(u.data=Hp(u,u.parent,t).resolve,X(void 0))),gt(()=>a++),Vs(1),tt(u=>a===s.size?X(n):Jt))})}function Lk(t){let e=t.children.map(n=>Lk(n)).flat();return[t,...e]}function gz(t,e,n,r){let i=t.routeConfig,o=t._resolve;return i?.title!==void 0&&!Ak(i)&&(o[El]=i.title),Nc(()=>(t.data=Hp(t,t.parent,n).resolve,mz(o,t,e,r).pipe(me(s=>(t._resolvedData=s,t.data=V(V({},t.data),s),null)))))}function mz(t,e,n,r){let i=g0(t);if(i.length===0)return X({});let o={};return Be(i).pipe(tt(s=>yz(t[s],e,n,r).pipe(kr(),gt(a=>{if(a instanceof Ja)throw qp(new ps,a);o[s]=a}))),Vs(1),me(()=>o),Nr(s=>kk(s)?Jt:Os(s)))}function yz(t,e,n,r){let i=tc(e)??r,o=rc(t,i),s=o.resolve?o.resolve(e,n):ht(i,()=>o(e,n));return ii(s)}function f0(t){return en(e=>{let n=t(e);return n?Be(n).pipe(me(()=>e)):X(e)})}var N0=(()=>{class t{buildTitle(n){let r,i=n.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===ae);return r}getResolvedTitleForRoute(n){return n.data[El]}static \u0275fac=function(r){return new(r||t)};static \u0275prov=z({token:t,factory:()=>R(Vk),providedIn:"root"})}return t})(),Vk=(()=>{class t extends N0{title;constructor(n){super(),this.title=n}updateTitle(n){let r=this.buildTitle(n);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||t)(se(oA))};static \u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),ic=new q("",{providedIn:"root",factory:()=>({})}),bl=new q(""),jk=(()=>{class t{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=R(Uv);loadComponent(n,r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return X(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=ii(ht(n,()=>r.loadComponent())).pipe(me(Bk),en($k),gt(s=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s}),Mc(()=>{this.componentLoaders.delete(r)})),o=new Ns(i,()=>new We).pipe(xs());return this.componentLoaders.set(r,o),o}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return X({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=Uk(r,this.compiler,n,this.onLoadEndListener).pipe(Mc(()=>{this.childrenLoaders.delete(r)})),s=new Ns(o,()=>new We).pipe(xs());return this.childrenLoaders.set(r,s),s}static \u0275fac=function(r){return new(r||t)};static \u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Uk(t,e,n,r){return ii(ht(n,()=>t.loadChildren())).pipe(me(Bk),en($k),tt(i=>i instanceof Uh||Array.isArray(i)?X(i):Be(e.compileModuleAsync(i))),me(i=>{r&&r(t);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(n).injector,s=o.get(bl,[],{optional:!0,self:!0}).flat()),{routes:s.map(x0),injector:o}}))}function vz(t){return t&&typeof t=="object"&&"default"in t}function Bk(t){return vz(t)?t.default:t}function $k(t){return X(t)}var Qp=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=z({token:t,factory:()=>R(_z),providedIn:"root"})}return t})(),_z=(()=>{class t{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}static \u0275fac=function(r){return new(r||t)};static \u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Hk=new q("");var qk=new q(""),M0=(()=>{class t{currentNavigation=Ae(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=null;events=new We;transitionAbortWithErrorSubject=new We;configLoader=R(jk);environmentInjector=R(nt);destroyRef=R(kn);urlSerializer=R(ec);rootContexts=R(nc);location=R(Uo);inputBindingEnabled=R(Wp,{optional:!0})!==null;titleStrategy=R(N0);options=R(ic,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=R(Qp);createViewTransition=R(Hk,{optional:!0});navigationErrorHandler=R(qk,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>X(void 0);rootComponentType=null;destroyed=!1;constructor(){let n=i=>this.events.next(new Op(i)),r=i=>this.events.next(new Fp(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=n,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(n){let r=++this.navigationId;It(()=>{this.transitions?.next(Z(V({},n),{extractedUrl:this.urlHandlingStrategy.extract(n.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,abortController:new AbortController,id:r}))})}setupNavigations(n){return this.transitions=new Ct(null),this.transitions.pipe(an(r=>r!==null),en(r=>{let i=!1;return X(r).pipe(en(o=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",Zt.SupersededByNewNavigation),Jt;this.currentTransition=r,this.currentNavigation.set({id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,targetBrowserUrl:typeof o.extras.browserUrl=="string"?this.urlSerializer.parse(o.extras.browserUrl):o.extras.browserUrl,trigger:o.source,extras:o.extras,previousNavigation:this.lastSuccessfulNavigation?Z(V({},this.lastSuccessfulNavigation),{previousNavigation:null}):null,abort:()=>o.abortController.abort()});let s=!n.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),a=o.extras.onSameUrlNavigation??n.onSameUrlNavigation;if(!s&&a!=="reload")return this.events.next(new Tr(o.id,this.urlSerializer.serialize(o.rawUrl),"",Ka.IgnoredSameUrlNavigation)),o.resolve(!1),Jt;if(this.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return X(o).pipe(en(u=>(this.events.next(new Yi(u.id,this.urlSerializer.serialize(u.extractedUrl),u.source,u.restoredState)),u.id!==this.navigationId?Jt:Promise.resolve(u))),fz(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,this.paramsInheritanceStrategy),gt(u=>{r.targetSnapshot=u.targetSnapshot,r.urlAfterRedirects=u.urlAfterRedirects,this.currentNavigation.update(h=>(h.finalUrl=u.urlAfterRedirects,h));let l=new fl(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(l)}));if(s&&this.urlHandlingStrategy.shouldProcessUrl(o.currentRawUrl)){let{id:u,extractedUrl:l,source:h,restoredState:p,extras:g}=o,y=new Yi(u,this.urlSerializer.serialize(l),h,p);this.events.next(y);let w=Ck(this.rootComponentType).snapshot;return this.currentTransition=r=Z(V({},o),{targetSnapshot:w,urlAfterRedirects:l,extras:Z(V({},g),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.update(k=>(k.finalUrl=l,k)),X(r)}else return this.events.next(new Tr(o.id,this.urlSerializer.serialize(o.extractedUrl),"",Ka.IgnoredByUrlHandlingStrategy)),o.resolve(!1),Jt}),gt(o=>{let s=new Np(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(s)}),me(o=>(this.currentTransition=r=Z(V({},o),{guards:Mq(o.targetSnapshot,o.currentSnapshot,this.rootContexts)}),r)),Hq(this.environmentInjector,o=>this.events.next(o)),gt(o=>{if(r.guardsResult=o.guardsResult,o.guardsResult&&typeof o.guardsResult!="boolean")throw qp(this.urlSerializer,o.guardsResult);let s=new Mp(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(s)}),an(o=>o.guardsResult?!0:(this.cancelNavigationTransition(o,"",Zt.GuardRejected),!1)),f0(o=>{if(o.guards.canActivateChecks.length!==0)return X(o).pipe(gt(s=>{let a=new kp(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),en(s=>{let a=!1;return X(s).pipe(pz(this.paramsInheritanceStrategy,this.environmentInjector),gt({next:()=>a=!0,complete:()=>{a||this.cancelNavigationTransition(s,"",Zt.NoDataFromResolver)}}))}),gt(s=>{let a=new Pp(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}))}),f0(o=>{let s=a=>{let u=[];if(a.routeConfig?.loadComponent){let l=tc(a)??this.environmentInjector;u.push(this.configLoader.loadComponent(l,a.routeConfig).pipe(gt(h=>{a.component=h}),me(()=>{})))}for(let l of a.children)u.push(...s(l));return u};return Nd(s(o.targetSnapshot.root)).pipe(hi(null),Mr(1))}),f0(()=>this.afterPreactivation()),en(()=>{let{currentSnapshot:o,targetSnapshot:s}=r,a=this.createViewTransition?.(this.environmentInjector,o.root,s.root);return a?Be(a).pipe(me(()=>r)):X(r)}),me(o=>{let s=Sq(n.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return this.currentTransition=r=Z(V({},o),{targetRouterState:s}),this.currentNavigation.update(a=>(a.targetRouterState=s,a)),r}),gt(()=>{this.events.next(new pl)}),Nq(this.rootContexts,n.routeReuseStrategy,o=>this.events.next(o),this.inputBindingEnabled),Mr(1),kd(new ce(o=>{let s=r.abortController.signal,a=()=>o.next();return s.addEventListener("abort",a),()=>s.removeEventListener("abort",a)}).pipe(an(()=>!i&&!r.targetRouterState),gt(()=>{this.cancelNavigationTransition(r,r.abortController.signal.reason+"",Zt.Aborted)}))),gt({next:o=>{i=!0,this.lastSuccessfulNavigation=It(this.currentNavigation),this.events.next(new Tn(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects))),this.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{i=!0}}),kd(this.transitionAbortWithErrorSubject.pipe(gt(o=>{throw o}))),Mc(()=>{i||this.cancelNavigationTransition(r,"",Zt.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),Nr(o=>{if(this.destroyed)return r.resolve(!1),Jt;if(i=!0,Mk(o))this.events.next(new br(r.id,this.urlSerializer.serialize(r.extractedUrl),o.message,o.cancellationCode)),xq(o)?this.events.next(new Za(o.url,o.navigationBehaviorOptions)):r.resolve(!1);else{let s=new Qa(r.id,this.urlSerializer.serialize(r.extractedUrl),o,r.targetSnapshot??void 0);try{let a=ht(this.environmentInjector,()=>this.navigationErrorHandler?.(s));if(a instanceof Ja){let{message:u,cancellationCode:l}=qp(this.urlSerializer,a);this.events.next(new br(r.id,this.urlSerializer.serialize(r.extractedUrl),u,l)),this.events.next(new Za(a.redirectTo,a.navigationBehaviorOptions))}else throw this.events.next(s),o}catch(a){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(a)}}return Jt}))}))}cancelNavigationTransition(n,r,i){let o=new br(n.id,this.urlSerializer.serialize(n.extractedUrl),r,i);this.events.next(o),n.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let n=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=It(this.currentNavigation),i=r?.targetBrowserUrl??r?.extractedUrl;return n.toString()!==i?.toString()&&!r?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||t)};static \u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Ez(t){return t!==Ga}var zk=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=z({token:t,factory:()=>R(Iz),providedIn:"root"})}return t})(),Gp=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},Iz=(()=>{class t extends Gp{static \u0275fac=(()=>{let n;return function(i){return(n||(n=wi(t)))(i||t)}})();static \u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Gk=(()=>{class t{urlSerializer=R(ec);options=R(ic,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=R(Uo);urlHandlingStrategy=R(Qp);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new Dr;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:n,initialUrl:r,targetBrowserUrl:i}){let o=n!==void 0?this.urlHandlingStrategy.merge(n,r):r,s=i??o;return s instanceof Dr?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:n,finalUrl:r,initialUrl:i}){r&&n?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=n):this.rawUrlTree=i}routerState=Ck(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:n}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n??this.rawUrlTree)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=z({token:t,factory:()=>R(wz),providedIn:"root"})}return t})(),wz=(()=>{class t extends Gk{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(n){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{n(r.url,r.state,"popstate")})})}handleRouterEvent(n,r){n instanceof Yi?this.updateStateMemento():n instanceof Tr?this.commitTransition(r):n instanceof fl?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):n instanceof pl?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):n instanceof br&&n.code!==Zt.SupersededByNewNavigation&&n.code!==Zt.Redirect?this.restoreHistory(r):n instanceof Qa?this.restoreHistory(r,!0):n instanceof Tn&&(this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId)}setBrowserUrl(n,{extras:r,id:i}){let{replaceUrl:o,state:s}=r;if(this.location.isCurrentPathEqualTo(n)||o){let a=this.browserPageId,u=V(V({},s),this.generateNgRouterState(i,a));this.location.replaceState(n,"",u)}else{let a=V(V({},s),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(n,"",a)}}restoreHistory(n,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===n.finalUrl&&o===0&&(this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return this.canceledNavigationResolution==="computed"?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}static \u0275fac=(()=>{let n;return function(i){return(n||(n=wi(t)))(i||t)}})();static \u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function k0(t,e){t.events.pipe(an(n=>n instanceof Tn||n instanceof br||n instanceof Qa||n instanceof Tr),me(n=>n instanceof Tn||n instanceof Tr?0:(n instanceof br?n.code===Zt.Redirect||n.code===Zt.SupersededByNewNavigation:!1)?2:1),an(n=>n!==2),Mr(1)).subscribe(()=>{e()})}var bz={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Dz={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},$t=(()=>{class t{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=R(Mv);stateManager=R(Gk);options=R(ic,{optional:!0})||{};pendingTasks=R(rr);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=R(M0);urlSerializer=R(ec);location=R(Uo);urlHandlingStrategy=R(Qp);injector=R(nt);_events=new We;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=R(zk);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=R(bl,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!R(Wp,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:n=>{this.console.warn(n)}}),this.subscribeToNavigationEvents()}eventsSubscription=new He;subscribeToNavigationEvents(){let n=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=It(this.navigationTransitions.currentNavigation);if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof br&&r.code!==Zt.Redirect&&r.code!==Zt.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Tn)this.navigated=!0;else if(r instanceof Za){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),u=V({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||Ez(i.source)},s);this.scheduleNavigation(a,Ga,null,u,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}bq(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Ga,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((n,r,i)=>{this.navigateToSyncWithBrowser(n,i,r)})}navigateToSyncWithBrowser(n,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let u=V({},i);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(o.state=u)}let a=this.parseUrl(n);this.scheduleNavigation(a,r,s,o).catch(u=>{this.disposed||this.injector.get(Wt)(u)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return It(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(x0),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:u}=r,l=u?this.currentUrlTree.fragment:s,h=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":h=V(V({},this.currentUrlTree.queryParams),o);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=o||null}h!==null&&(h=this.removeEmptyProps(h));let p;try{let g=i?i.snapshot:this.routerState.snapshot.root;p=wk(g)}catch{(typeof n[0]!="string"||n[0][0]!=="/")&&(n=[]),p=this.currentUrlTree.root}return bk(p,n,h,l??null)}navigateByUrl(n,r={skipLocationChange:!1}){let i=Qi(n)?n:this.parseUrl(n),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,Ga,null,r)}navigate(n,r={skipLocationChange:!1}){return Tz(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){try{return this.urlSerializer.parse(n)}catch{return this.urlSerializer.parse("/")}}isActive(n,r){let i;if(r===!0?i=V({},bz):r===!1?i=V({},Dz):i=r,Qi(n))return rk(this.currentUrlTree,n,i);let o=this.parseUrl(n);return rk(this.currentUrlTree,o,i)}removeEmptyProps(n){return Object.entries(n).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(n,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,u,l;s?(a=s.resolve,u=s.reject,l=s.promise):l=new Promise((p,g)=>{a=p,u=g});let h=this.pendingTasks.add();return k0(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:o,resolve:a,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(p=>Promise.reject(p))}static \u0275fac=function(r){return new(r||t)};static \u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Tz(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new H(4008,!1)}var Zi=(()=>{class t{router;route;tabIndexAttribute;renderer;el;locationStrategy;reactiveHref=Ae(null);get href(){return It(this.reactiveHref)}set href(n){this.reactiveHref.set(n)}target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new We;applicationErrorHandler=R(Wt);options=R(ic,{optional:!0});constructor(n,r,i,o,s,a){this.router=n,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=a,this.reactiveHref.set(R(new zh("href"),{optional:!0}));let u=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=u==="a"||u==="area"||!!(typeof customElements=="object"&&customElements.get(u)?.observedAttributes?.includes?.("href")),this.isAnchorElement?this.setTabIndexIfNotOnNativeEl("0"):this.subscribeToNavigationEventsIfNecessary()}subscribeToNavigationEventsIfNecessary(){if(this.subscription!==void 0||!this.isAnchorElement)return;let n=this.preserveFragment,r=i=>i==="merge"||i==="preserve";n||=r(this.queryParamsHandling),n||=!this.queryParamsHandling&&!r(this.options?.defaultQueryParamsHandling),n&&(this.subscription=this.router.events.subscribe(i=>{i instanceof Tn&&this.updateHref()}))}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(n){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",n)}ngOnChanges(n){this.isAnchorElement&&(this.updateHref(),this.subscribeToNavigationEventsIfNecessary()),this.onChanges.next(this)}routerLinkInput=null;set routerLink(n){n==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(Qi(n)?this.routerLinkInput=n:this.routerLinkInput=Array.isArray(n)?n:[n],this.setTabIndexIfNotOnNativeEl("0"))}onClick(n,r,i,o,s){let a=this.urlTree;if(a===null||this.isAnchorElement&&(n!==0||r||i||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let u={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,u)?.catch(l=>{this.applicationErrorHandler(l)}),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let n=this.urlTree;this.reactiveHref.set(n!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(n))??"":null)}applyAttributeValue(n,r){let i=this.renderer,o=this.el.nativeElement;r!==null?i.setAttribute(o,n,r):i.removeAttribute(o,n)}get urlTree(){return this.routerLinkInput===null?null:Qi(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||t)(ye($t),ye(Qn),ou("tabindex"),ye(sr),ye(tn),ye(jo))};static \u0275dir=ot({type:t,selectors:[["","routerLink",""]],hostVars:2,hostBindings:function(r,i){r&1&&Le("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),r&2&&Si("href",i.reactiveHref(),hv)("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",Ri],skipLocationChange:[2,"skipLocationChange","skipLocationChange",Ri],replaceUrl:[2,"replaceUrl","replaceUrl",Ri],routerLink:"routerLink"},features:[or]})}return t})(),P0=(()=>{class t{router;element;renderer;cdr;link;links;classes=[];routerEventsSubscription;linkInputChangesSubscription;_isActive=!1;get isActive(){return this._isActive}routerLinkActiveOptions={exact:!1};ariaCurrentWhenActive;isActiveChange=new Qe;constructor(n,r,i,o,s){this.router=n,this.element=r,this.renderer=i,this.cdr=o,this.link=s,this.routerEventsSubscription=n.events.subscribe(a=>{a instanceof Tn&&this.update()})}ngAfterContentInit(){X(this.links.changes,X(null)).pipe(Fs()).subscribe(n=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();let n=[...this.links.toArray(),this.link].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=Be(n).pipe(Fs()).subscribe(r=>{this._isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(n){let r=Array.isArray(n)?n:n.split(" ");this.classes=r.filter(i=>!!i)}ngOnChanges(n){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{let n=this.hasActiveLinks();this.classes.forEach(r=>{n?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),n&&this.ariaCurrentWhenActive!==void 0?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this._isActive!==n&&(this._isActive=n,this.cdr.markForCheck(),this.isActiveChange.emit(n))})}isLinkActive(n){let r=Cz(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return i=>{let o=i.urlTree;return o?n.isActive(o,r):!1}}hasActiveLinks(){let n=this.isLinkActive(this.router);return this.link&&n(this.link)||this.links.some(n)}static \u0275fac=function(r){return new(r||t)(ye($t),ye(tn),ye(sr),ye(Ai),ye(Zi,8))};static \u0275dir=ot({type:t,selectors:[["","routerLinkActive",""]],contentQueries:function(r,i,o){if(r&1&&Lv(o,Zi,5),r&2){let s;Vv(s=jv())&&(i.links=s)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[or]})}return t})();function Cz(t){return!!t.paths}var Wk=new q(""),Sz=(()=>{class t{urlSerializer;transitions;viewportScroller;zone;options;routerEventsSubscription;scrollEventsSubscription;lastId=0;lastSource=Ga;restoredId=0;store={};constructor(n,r,i,o,s={}){this.urlSerializer=n,this.transitions=r,this.viewportScroller=i,this.zone=o,this.options=s,s.scrollPositionRestoration||="disabled",s.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof Yi?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=n.navigationTrigger,this.restoredId=n.restoredState?n.restoredState.navigationId:0):n instanceof Tn?(this.lastId=n.id,this.scheduleScrollEvent(n,this.urlSerializer.parse(n.urlAfterRedirects).fragment)):n instanceof Tr&&n.code===Ka.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(n,this.urlSerializer.parse(n.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof Ya&&(n.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(n.position):n.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(n.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(n,r){this.zone.runOutsideAngular(async()=>{await new Promise(i=>{setTimeout(i),typeof requestAnimationFrame<"u"&&requestAnimationFrame(i)}),this.zone.run(()=>{this.transitions.events.next(new Ya(n,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static \u0275fac=function(r){Cv()};static \u0275prov=z({token:t,factory:t.\u0275fac})}return t})();function O0(t,...e){return Gt([{provide:bl,multi:!0,useValue:t},[],{provide:Qn,useFactory:Az,deps:[$t]},{provide:Bh,multi:!0,useFactory:xz},e.map(n=>n.\u0275providers)])}function Az(t){return t.routerState.root}function Rz(t,e){return{\u0275kind:t,\u0275providers:e}}function F0(t={}){return Rz(4,[{provide:Wk,useFactory:()=>{let n=R(YS),r=R(be),i=R(M0),o=R(ec);return new Sz(o,i,n,r,t)}}])}function xz(){let t=R(Oe);return e=>{let n=t.get(Ci);if(e!==n.components[0])return;let r=t.get($t),i=t.get(Nz);t.get(Mz)===1&&r.initialNavigation(),t.get(kz,null,{optional:!0})?.setUpPreloading(),t.get(Wk,null,{optional:!0})?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var Nz=new q("",{factory:()=>new We}),Mz=new q("",{providedIn:"root",factory:()=>1});var kz=new q("");var rn=class t{theme=Ae("dark");themeClasses=Kt(()=>this.theme()==="dark"?"bg-gray-900 text-white":"bg-gray-50 text-gray-900");toggleText=Kt(()=>this.theme()==="dark"?"\u2600\uFE0F Light":"\u{1F319} Dark");isDark=Kt(()=>this.theme()==="dark");toggleTheme(){this.theme.set(this.theme()==="light"?"dark":"light")}get currentTheme(){return this.theme()}getTheme(){return this.theme()}static \u0275fac=function(n){return new(n||t)};static \u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"})};var Cr=class t{firestore=R(us);storage=R(ls);projects=Ae([]);loading=Ae(!1);error=Ae(null);publishedProjects=Kt(()=>this.projects().filter(e=>e.published));draftProjects=Kt(()=>this.projects().filter(e=>!e.published));get allProjects(){return this.projects()}get isLoading(){return this.loading()}get hasError(){return this.error()}async loadProjects(){this.loading.set(!0),this.error.set(null);try{let e=Qw(this.firestore,"projects"),n=IM(e,EM("createdAt","desc")),i=(await vM(n)).docs.map(o=>{let s=o.data();console.log("Raw Firestore data:",s);let a=Z(V({id:o.id},s),{createdAt:s.createdAt?.toDate?s.createdAt.toDate():s.createdAt,updatedAt:s.updatedAt?.toDate?s.updatedAt.toDate():s.updatedAt});return console.log("Processed project:",a),a});this.projects.set(i)}catch(e){this.error.set("Failed to load projects"),console.error("Error loading projects:",e)}finally{this.loading.set(!1)}}async addProject(e){this.loading.set(!0),this.error.set(null);try{let n=new Date,r=Z(V({},e),{createdAt:n,updatedAt:n});console.log("Saving project to Firestore:",r);let i=Qw(this.firestore,"projects"),o=await mM(i,r);console.log("Project saved with ID:",o.id);let s=V({id:o.id},r);return this.projects.update(a=>[s,...a]),o.id}catch(n){throw this.error.set("Failed to add project"),console.error("Error adding project:",n),n}finally{this.loading.set(!1)}}async updateProject(e,n){this.loading.set(!0),this.error.set(null);try{let r=Yw(this.firestore,"projects",e),i=Z(V({},n),{updatedAt:new Date});await wM(r,i),this.projects.update(o=>o.map(s=>s.id===e?V(V({},s),i):s))}catch(r){throw this.error.set("Failed to update project"),console.error("Error updating project:",r),r}finally{this.loading.set(!1)}}async deleteProject(e){this.loading.set(!0),this.error.set(null);try{let n=this.projects().find(i=>i.id===e);n?.images&&n.images.length>0&&await this.deleteProjectImages(n.images);let r=Yw(this.firestore,"projects",e);await yM(r),this.projects.update(i=>i.filter(o=>o.id!==e))}catch(n){throw this.error.set("Failed to delete project"),console.error("Error deleting project:",n),n}finally{this.loading.set(!1)}}async uploadImages(e){console.log("Starting upload of",e.length,"files");let n=e.map(async(i,o)=>{let a=`${Date.now()}_${i.name}`,u=u0(this.storage,`projects/${a}`);console.log(`Uploading file ${o+1}:`,a);try{let l=await tk(u,i),h=await XM(l.ref);return console.log(`Upload successful for ${a}:`,h),console.log("URL starts with http:",h.startsWith("http")),h}catch(l){throw console.error("Error uploading image:",l),l}}),r=await Promise.all(n);return console.log("All uploads completed:",r),r}async deleteProjectImages(e){let n=e.map(async r=>{try{let i=u0(this.storage,r);await JM(i)}catch(i){console.error("Error deleting image:",i)}});await Promise.all(n)}static \u0275fac=function(n){return new(n||t)};static \u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"})};var Yp=class t{emoji="\u2728";label="";dark=!1;static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Ye({type:t,selectors:[["app-skill-card"]],inputs:{emoji:"emoji",label:"label",dark:"dark"},decls:5,vars:6,consts:[[1,"text-2xl","mb-1"]],template:function(n,r){n&1&&(Fo(0,"div")(1,"div",0),F(2),Lo(),Fo(3,"h3"),F(4),Lo()()),n&2&&(P(r.dark?"bg-gray-800 p-4 rounded-md text-center hover:bg-gray-700 transition-all duration-200 hover:-translate-y-0.5":"bg-white p-4 rounded-md text-center hover:bg-gray-50 transition-all duration-200 shadow-sm hover:shadow-md hover:-translate-y-0.5"),T(2),ft(r.emoji),T(),P(r.dark?"text-white font-medium text-sm sm:text-base":"text-gray-900 font-medium text-sm sm:text-base"),T(),ft(r.label))},encapsulation:2})};var Pz=(t,e)=>e.id;function Oz(t,e){if(t&1&&(A(0,"div")(1,"p",26),F(2,"No projects published yet."),N(),A(3,"p",27),F(4,"Check back soon for amazing projects!"),N()()),t&2){let n=fe();P(n.isDark()?"text-center text-gray-400":"text-center text-gray-500")}}function Fz(t,e){if(t&1&&(A(0,"div",28),qe(1,"img",35),N()),t&2){let n=fe().$implicit;T(),le("src",n.images[0],nn)("alt",n.title)}}function Lz(t,e){if(t&1&&(A(0,"div",29)(1,"div"),F(2,"\u{1F4C1}"),N()()),t&2){let n=fe(3);T(),P((n.isDark(),"text-white text-3xl"))}}function Vz(t,e){if(t&1&&(A(0,"span",32),F(1),N()),t&2){let n=e.$implicit;T(),ft(n)}}function jz(t,e){if(t&1&&(A(0,"a",36),F(1,"Demo"),N()),t&2){let n=fe().$implicit,r=fe(2);P(r.isDark()?"text-blue-400 hover:text-blue-300":"text-blue-600 hover:text-blue-500"),le("href",n.links.demo,nn)}}function Uz(t,e){if(t&1&&(A(0,"a",36),F(1,"GitHub"),N()),t&2){let n=fe().$implicit,r=fe(2);P(r.isDark()?"text-gray-400 hover:text-gray-300":"text-gray-600 hover:text-gray-500"),le("href",n.links.repo,nn)}}function Bz(t,e){if(t&1&&(A(0,"a",36),F(1,"Live"),N()),t&2){let n=fe().$implicit,r=fe(2);P(r.isDark()?"text-green-400 hover:text-green-300":"text-green-600 hover:text-green-500"),le("href",n.links.live,nn)}}function $z(t,e){if(t&1&&(A(0,"div"),xe(1,Fz,2,2,"div",28)(2,Lz,3,2,"div",29),A(3,"div",30)(4,"h3"),F(5),N(),A(6,"p"),F(7),N(),A(8,"div",31),Vn(9,Vz,2,1,"span",32,uu),N(),A(11,"div",33),xe(12,jz,2,3,"a",34),xe(13,Uz,2,3,"a",34),xe(14,Bz,2,3,"a",34),N()()()),t&2){let n=e.$implicit,r=fe(2);P(r.isDark()?"bg-gray-800 rounded-md overflow-hidden hover:bg-gray-700 transition-all duration-200 hover:-translate-y-0.5":"bg-white rounded-md overflow-hidden hover:bg-gray-50 transition-all duration-200 shadow hover:shadow-md hover:-translate-y-0.5"),T(),Ne(n.images&&n.images.length>0?1:2),T(3),P(r.isDark()?"text-lg font-semibold text-white mb-1.5":"text-lg font-semibold text-gray-900 mb-1.5"),T(),ft(n.title),T(),P(r.isDark()?"text-gray-400 mb-3 text-sm":"text-gray-500 mb-3 text-sm"),T(),ft(n.description),T(2),jn(n.tags),T(3),Ne(n.links.demo?12:-1),T(),Ne(n.links.repo?13:-1),T(),Ne(n.links.live?14:-1)}}function Hz(t,e){if(t&1&&(A(0,"div",22),Vn(1,$z,15,12,"div",21,Pz),N()),t&2){let n=fe();T(),jn(n.publishedProjects)}}var Zp=class t{themeService=R(rn);projectsService=R(Cr);ngOnInit(){this.projectsService.loadProjects()}isDark(){return this.themeService.isDark()}get publishedProjects(){return console.log(this.projectsService.publishedProjects()),this.projectsService.publishedProjects()}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Ye({type:t,selectors:[["app-home"]],decls:49,vars:32,consts:[[1,"container","mx-auto","px-4","sm:px-6","py-12","sm:py-16","lg:py-20"],[1,"max-w-4xl","mx-auto","text-center"],[1,"text-blue-600"],[1,"flex","flex-col","sm:flex-row","gap-3","sm:gap-4","justify-center","px-4"],["href","#projects",1,"bg-blue-600","hover:bg-blue-700","text-white","px-6","sm:px-8","py-3","rounded-lg","font-semibold","transition-colors","text-center"],["href","#contact"],["id","skills",1,"container","mx-auto","px-4","sm:px-6","py-12","sm:py-16","lg:py-20","scroll-mt-24"],[1,"max-w-6xl","mx-auto"],[1,"grid","grid-cols-3","sm:grid-cols-4","md:grid-cols-6","gap-3","sm:gap-4"],["emoji","\u{1F170}\uFE0F","label","Angular",3,"dark"],["emoji","\u{1F7E2}","label","Node.js",3,"dark"],["emoji","\u{1F525}","label","Firebase",3,"dark"],["emoji","\u{1F7E1}","label","JavaScript",3,"dark"],["emoji","\u269B\uFE0F","label","React.js",3,"dark"],["emoji","\u{1F9F1}","label","Laravel",3,"dark"],["emoji","\u{1F418}","label","PHP",3,"dark"],["emoji","\u{1F42C}","label","MySQL",3,"dark"],["emoji","\u{1F517}","label","REST APIs",3,"dark"],["emoji","\u{1F9E9}","label","jQuery",3,"dark"],["emoji","\u26A1\uFE0F","label","AJAX",3,"dark"],["id","projects",1,"container","mx-auto","px-4","sm:px-6","py-12","sm:py-16","lg:py-20","scroll-mt-24"],[3,"class"],[1,"grid","grid-cols-1","sm:grid-cols-2","lg:grid-cols-3","gap-4","sm:gap-6"],["id","contact",1,"container","mx-auto","px-4","sm:px-6","py-12","sm:py-16","lg:py-20"],["href","mailto:khaledalhoussein3@gmail.com",1,"bg-blue-600","hover:bg-blue-700","text-white","px-6","sm:px-8","py-3","rounded-lg","font-semibold","transition-colors","text-center"],["href","https://github.com/khaleds961","target","_blank"],[1,"text-lg","mb-4"],[1,"text-sm"],[1,"h-36","sm:h-40","bg-gradient-to-br","from-blue-500","to-purple-600","flex","items-center","justify-center","overflow-hidden"],[1,"h-36","sm:h-40","bg-gradient-to-br","from-blue-500","to-purple-600","flex","items-center","justify-center"],[1,"p-4"],[1,"flex","flex-wrap","gap-2","mb-4"],[1,"bg-blue-600","text-white","px-2.5","py-0.5","rounded-full","text-xs"],[1,"flex","gap-3","text-sm"],["target","_blank",3,"href","class"],[1,"w-full","h-full","object-cover","transition-transform","duration-300","hover:scale-[1.03]",3,"src","alt"],["target","_blank",3,"href"]],template:function(n,r){n&1&&(A(0,"div")(1,"section",0)(2,"div",1)(3,"h1"),F(4," Hi, I'm "),A(5,"span",2),F(6,"Khaled"),N()(),A(7,"p"),F(8," Full Stack Developer "),N(),A(9,"p"),F(10," I create beautiful, functional web applications with modern technologies. Passionate about clean code and user experience. "),N(),A(11,"div",3)(12,"a",4),F(13," View My Work "),N(),A(14,"a",5),F(15," Get In Touch "),N()()()(),A(16,"section",6)(17,"div",7)(18,"h2"),F(19,"Skills & Technologies"),N(),A(20,"div",8),qe(21,"app-skill-card",9)(22,"app-skill-card",10)(23,"app-skill-card",11)(24,"app-skill-card",12)(25,"app-skill-card",13)(26,"app-skill-card",14)(27,"app-skill-card",15)(28,"app-skill-card",16)(29,"app-skill-card",17)(30,"app-skill-card",18)(31,"app-skill-card",19),N()()(),A(32,"section",20)(33,"div",7)(34,"h2"),F(35,"Featured Projects"),N(),xe(36,Oz,5,2,"div",21)(37,Hz,3,0,"div",22),N()(),A(38,"section",23)(39,"div",1)(40,"h2"),F(41,"Let's Work Together"),N(),A(42,"p"),F(43," I'm always interested in new opportunities and exciting projects. "),N(),A(44,"div",3)(45,"a",24),F(46," Send Email "),N(),A(47,"a",25),F(48," View GitHub "),N()()()()()),n&2&&(P(r.isDark()?"min-h-screen bg-gradient-to-br from-gray-900 via-gray-800 to-black":"min-h-screen bg-gradient-to-br from-gray-50 via-white to-gray-100"),T(3),P(r.isDark()?"text-3xl sm:text-4xl md:text-5xl lg:text-7xl font-bold text-white mb-4 sm:mb-6":"text-3xl sm:text-4xl md:text-5xl lg:text-7xl font-bold text-gray-900 mb-4 sm:mb-6"),T(4),P(r.isDark()?"text-lg sm:text-xl md:text-2xl text-gray-300 mb-6 sm:mb-8":"text-lg sm:text-xl md:text-2xl text-gray-600 mb-6 sm:mb-8"),T(2),P(r.isDark()?"text-base sm:text-lg text-gray-400 mb-8 sm:mb-12 max-w-2xl mx-auto px-4":"text-base sm:text-lg text-gray-500 mb-8 sm:mb-12 max-w-2xl mx-auto px-4"),T(5),P(r.isDark()?"border border-gray-600 hover:border-gray-500 text-gray-300 hover:text-white px-6 sm:px-8 py-3 rounded-lg font-semibold transition-colors text-center":"border border-gray-400 hover:border-gray-500 text-gray-600 hover:text-gray-900 px-6 sm:px-8 py-3 rounded-lg font-semibold transition-colors text-center"),T(4),P(r.isDark()?"text-xl sm:text-2xl md:text-3xl font-bold text-white text-center mb-6 sm:mb-10":"text-xl sm:text-2xl md:text-3xl font-bold text-gray-900 text-center mb-6 sm:mb-10"),T(3),le("dark",r.isDark()),T(),le("dark",r.isDark()),T(),le("dark",r.isDark()),T(),le("dark",r.isDark()),T(),le("dark",r.isDark()),T(),le("dark",r.isDark()),T(),le("dark",r.isDark()),T(),le("dark",r.isDark()),T(),le("dark",r.isDark()),T(),le("dark",r.isDark()),T(),le("dark",r.isDark()),T(3),P(r.isDark()?"text-2xl sm:text-3xl font-bold text-white text-center mb-6 sm:mb-10":"text-2xl sm:text-3xl font-bold text-gray-900 text-center mb-6 sm:mb-10"),T(2),Ne(r.publishedProjects.length===0?36:37),T(4),P(r.isDark()?"text-2xl sm:text-3xl md:text-4xl font-bold text-white mb-6 sm:mb-8":"text-2xl sm:text-3xl md:text-4xl font-bold text-gray-900 mb-6 sm:mb-8"),T(2),P(r.isDark()?"text-base sm:text-lg text-gray-400 mb-8 sm:mb-12 px-4":"text-base sm:text-lg text-gray-500 mb-8 sm:mb-12 px-4"),T(5),P(r.isDark()?"border border-gray-600 hover:border-gray-500 text-gray-300 hover:text-white px-6 sm:px-8 py-3 rounded-lg font-semibold transition-colors text-center":"border border-gray-400 hover:border-gray-500 text-gray-600 hover:text-gray-900 px-6 sm:px-8 py-3 rounded-lg font-semibold transition-colors text-center"))},dependencies:[Yp],encapsulation:2})};var qz=t=>({backgroundColor:t}),Jp=class t{dark=!1;title="";value="";color="#2563eb";icon="";static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Ye({type:t,selectors:[["app-stat-card"]],inputs:{dark:"dark",title:"title",value:"value",color:"color",icon:"icon"},decls:10,vars:12,consts:[[1,"flex","items-center"],[1,"p-3","rounded-lg",3,"ngStyle"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6","text-white"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2"],[1,"ml-4"]],template:function(n,r){n&1&&(A(0,"div")(1,"div",0)(2,"div",1),Ks(),A(3,"svg",2),qe(4,"path",3),N()(),Qs(),A(5,"div",4)(6,"p"),F(7),N(),A(8,"p"),F(9),N()()()()),n&2&&(P(r.dark?"bg-gray-800 p-6 rounded-lg":"bg-white p-6 rounded-lg shadow-md"),T(2),le("ngStyle",hu(10,qz,r.color)),T(2),Si("d",r.icon),T(2),P(r.dark?"text-gray-400 text-sm":"text-gray-600 text-sm"),T(),ft(r.title),T(),P(r.dark?"text-2xl font-bold text-white":"text-2xl font-bold text-gray-900"),T(),ft(r.value))},dependencies:[e_],encapsulation:2})};var zz=t=>["/admin/edit",t],Gz=(t,e)=>e.id;function Wz(t,e){if(t&1&&(A(0,"tr")(1,"td",12),F(2," Loading projects... "),N()()),t&2){let n=fe();T(),P(n.isDark()?"px-6 py-8 text-center text-gray-400":"px-6 py-8 text-center text-gray-500")}}function Kz(t,e){if(t&1&&(A(0,"tr")(1,"td",12),F(2," Error loading projects "),N()()),t&2){let n=fe();T(),P(n.isDark()?"px-6 py-8 text-center text-red-400":"px-6 py-8 text-center text-red-500")}}function Qz(t,e){if(t&1&&(A(0,"tr")(1,"td",12),F(2," No projects yet. "),A(3,"a",13),F(4,"Create your first project"),N()()()),t&2){let n=fe();T(),P(n.isDark()?"px-6 py-8 text-center text-gray-400":"px-6 py-8 text-center text-gray-500")}}function Yz(t,e){if(t&1&&qe(0,"img",16),t&2){let n=fe().$implicit;le("src",n.images[0],nn)("alt",n.title)}}function Zz(t,e){t&1&&(A(0,"div",17)(1,"span",24),F(2,"\u{1F4C1}"),N()())}function Jz(t,e){t&1&&(A(0,"span",19),F(1,"Published"),N())}function Xz(t,e){t&1&&(A(0,"span",20),F(1,"Draft"),N())}function eG(t,e){if(t&1){let n=sa();A(0,"tr")(1,"td",14)(2,"div",15),xe(3,Yz,1,2,"img",16)(4,Zz,3,0,"div",17),A(5,"div",18)(6,"div"),F(7),N(),A(8,"div"),F(9),N()()()(),A(10,"td",14),xe(11,Jz,2,0,"span",19)(12,Xz,2,0,"span",20),N(),A(13,"td"),F(14),N(),A(15,"td",21)(16,"a",22),F(17,"Edit"),N(),A(18,"button",23),Le("click",function(){let i=To(n).$implicit,o=fe(2);return Co(o.deleteProject(i.id))}),F(19,"Delete"),N()()()}if(t&2){let n=e.$implicit,r=fe(2);T(3),Ne(n.images&&n.images.length>0?3:4),T(3),P(r.isDark()?"text-sm font-medium text-white":"text-sm font-medium text-gray-900"),T(),ft(n.title),T(),P(r.isDark()?"text-sm text-gray-400":"text-sm text-gray-500"),T(),ft(n.tags.join(", ")),T(2),Ne(n.published?11:12),T(2),P(r.isDark()?"px-6 py-4 whitespace-nowrap text-sm text-gray-400":"px-6 py-4 whitespace-nowrap text-sm text-gray-500"),T(),In(" ",r.formatDate(n.createdAt)||"Unknown"," "),T(2),P(r.isDark()?"text-blue-400 hover:text-blue-300 mr-3":"text-blue-600 hover:text-blue-500 mr-3"),le("routerLink",hu(16,zz,n.id)),T(2),P(r.isDark()?"text-red-400 hover:text-red-300":"text-red-600 hover:text-red-500")}}function tG(t,e){if(t&1&&Vn(0,eG,20,18,"tr",null,Gz),t&2){let n=fe();jn(n.allProjects)}}var Xp=class t{themeService=R(rn);projectsService=R(Cr);ngOnInit(){this.projectsService.loadProjects()}isDark(){return this.themeService.isDark()}get allProjects(){return this.projectsService.allProjects}get publishedProjects(){return this.projectsService.publishedProjects()}get draftProjects(){return this.projectsService.draftProjects()}get isLoading(){return this.projectsService.isLoading}get hasError(){return this.projectsService.hasError}formatDate(e){try{let n;return e&&typeof e.toDate=="function"?n=e.toDate():e instanceof Date?n=e:e&&typeof e=="string"?n=new Date(e):e&&typeof e=="number"?n=new Date(e):n=new Date,isNaN(n.getTime())?"Invalid Date":n.toLocaleDateString()}catch(n){return console.error("Error formatting date:",n,e),"Invalid Date"}}async deleteProject(e){confirm("Are you sure you want to delete this project?")&&await this.projectsService.deleteProject(e)}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Ye({type:t,selectors:[["app-dashboard"]],decls:38,vars:35,consts:[[1,"container","mx-auto","px-6","py-8"],[1,"flex","items-center","justify-between"],[1,"flex","gap-4"],["routerLink","/admin/add"],[1,"container","mx-auto","px-4","sm:px-6","py-6","sm:py-8"],[1,"grid","grid-cols-1","sm:grid-cols-2","lg:grid-cols-3","gap-4","sm:gap-6","mb-6","sm:mb-8"],["title","Total Projects","color","#2563eb","icon","M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10",3,"dark","value"],["title","Published","color","#16a34a","icon","M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z",3,"dark","value"],["title","Drafts","color","#ca8a04","icon","M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z",3,"dark","value"],[1,"overflow-x-auto"],[1,"w-full"],[1,"divide-y"],["colspan","4"],["routerLink","/admin/add",1,"text-blue-600","hover:text-blue-500"],[1,"px-6","py-4","whitespace-nowrap"],[1,"flex","items-center"],[1,"h-10","w-10","rounded-lg","object-cover",3,"src","alt"],[1,"h-10","w-10","bg-gradient-to-br","from-blue-500","to-purple-600","rounded-lg","flex","items-center","justify-center"],[1,"ml-4"],[1,"inline-flex","px-2","py-1","text-xs","font-semibold","rounded-full","bg-green-100","text-green-800"],[1,"inline-flex","px-2","py-1","text-xs","font-semibold","rounded-full","bg-yellow-100","text-yellow-800"],[1,"px-6","py-4","whitespace-nowrap","text-sm","font-medium"],[3,"routerLink"],[3,"click"],[1,"text-white","text-xs"]],template:function(n,r){n&1&&(A(0,"div")(1,"div")(2,"div",0)(3,"div",1)(4,"div")(5,"h1"),F(6,"Admin Dashboard"),N(),A(7,"p"),F(8,"Manage your portfolio projects"),N()(),A(9,"div",2)(10,"a",3),F(11," + Add Project "),N()()()()(),A(12,"div",4)(13,"div",5),qe(14,"app-stat-card",6)(15,"app-stat-card",7)(16,"app-stat-card",8),N(),A(17,"div")(18,"div")(19,"h2"),F(20,"Recent Projects"),N()(),A(21,"div",9)(22,"table",10)(23,"thead")(24,"tr")(25,"th"),F(26,"Project"),N(),A(27,"th"),F(28,"Status"),N(),A(29,"th"),F(30,"Created"),N(),A(31,"th"),F(32,"Actions"),N()()(),A(33,"tbody",11),xe(34,Wz,3,2,"tr")(35,Kz,3,2,"tr")(36,Qz,5,2,"tr")(37,tG,2,0),N()()()()()()),n&2&&(P(r.isDark()?"min-h-screen bg-gradient-to-br from-gray-900 via-gray-800 to-black":"min-h-screen bg-gradient-to-br from-gray-50 via-white to-gray-100"),T(),P(r.isDark()?"bg-gray-800 border-b border-gray-700":"bg-white border-b border-gray-200"),T(4),P(r.isDark()?"text-3xl font-bold text-white":"text-3xl font-bold text-gray-900"),T(2),P(r.isDark()?"text-gray-400 mt-2":"text-gray-600 mt-2"),T(3),P((r.isDark(),"bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-lg font-semibold transition-colors")),T(4),le("dark",r.isDark())("value",r.allProjects.length),T(),le("dark",r.isDark())("value",r.publishedProjects.length),T(),le("dark",r.isDark())("value",r.draftProjects.length),T(),P(r.isDark()?"bg-gray-800 rounded-lg overflow-hidden":"bg-white rounded-lg shadow-md overflow-hidden"),T(),P(r.isDark()?"px-6 py-4 border-b border-gray-700":"px-6 py-4 border-b border-gray-200"),T(),P(r.isDark()?"text-xl font-semibold text-white":"text-xl font-semibold text-gray-900"),T(4),P(r.isDark()?"bg-gray-700":"bg-gray-50"),T(2),P(r.isDark()?"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider":"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"),T(2),P(r.isDark()?"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider":"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"),T(2),P(r.isDark()?"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider":"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"),T(2),P(r.isDark()?"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider":"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"),T(2),P(r.isDark()?"divide-gray-700":"divide-gray-200"),T(),Ne(r.isLoading?34:r.hasError?35:r.allProjects.length===0?36:37))},dependencies:[Zi,Jp],encapsulation:2})};var nP=(()=>{class t{_renderer;_elementRef;onChange=n=>{};onTouched=()=>{};constructor(n,r){this._renderer=n,this._elementRef=r}setProperty(n,r){this._renderer.setProperty(this._elementRef.nativeElement,n,r)}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}setDisabledState(n){this.setProperty("disabled",n)}static \u0275fac=function(r){return new(r||t)(ye(sr),ye(tn))};static \u0275dir=ot({type:t})}return t})(),rP=(()=>{class t extends nP{static \u0275fac=(()=>{let n;return function(i){return(n||(n=wi(t)))(i||t)}})();static \u0275dir=ot({type:t,features:[Ln]})}return t})(),j0=new q(""),nG={provide:j0,useExisting:Zn(()=>xl),multi:!0},xl=(()=>{class t extends rP{writeValue(n){this.setProperty("checked",n)}static \u0275fac=(()=>{let n;return function(i){return(n||(n=wi(t)))(i||t)}})();static \u0275dir=ot({type:t,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(r,i){r&1&&Le("change",function(s){return i.onChange(s.target.checked)})("blur",function(){return i.onTouched()})},standalone:!1,features:[Vo([nG]),Ln]})}return t})(),rG={provide:j0,useExisting:Zn(()=>cc),multi:!0};function iG(){let t=wn()?wn().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}var oG=new q(""),cc=(()=>{class t extends nP{_compositionMode;_composing=!1;constructor(n,r,i){super(n,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!iG())}writeValue(n){let r=n??"";this.setProperty("value",r)}_handleInput(n){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(n)}_compositionStart(){this._composing=!0}_compositionEnd(n){this._composing=!1,this._compositionMode&&this.onChange(n)}static \u0275fac=function(r){return new(r||t)(ye(sr),ye(tn),ye(oG,8))};static \u0275dir=ot({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&Le("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},standalone:!1,features:[Vo([rG]),Ln]})}return t})();function sG(t){return t==null||aG(t)===0}function aG(t){return t==null?null:Array.isArray(t)||typeof t=="string"?t.length:t instanceof Set?t.size:null}var U0=new q(""),iP=new q("");function cG(t){return sG(t.value)?{required:!0}:null}function Kk(t){return null}function oP(t){return t!=null}function sP(t){return Ti(t)?Be(t):t}function aP(t){let e={};return t.forEach(n=>{e=n!=null?V(V({},e),n):e}),Object.keys(e).length===0?null:e}function cP(t,e){return e.map(n=>n(t))}function uG(t){return!t.validate}function uP(t){return t.map(e=>uG(e)?e:n=>e.validate(n))}function lG(t){if(!t)return null;let e=t.filter(oP);return e.length==0?null:function(n){return aP(cP(n,e))}}function B0(t){return t!=null?lG(uP(t)):null}function dG(t){if(!t)return null;let e=t.filter(oP);return e.length==0?null:function(n){let r=cP(n,e).map(sP);return dm(r).pipe(me(aP))}}function $0(t){return t!=null?dG(uP(t)):null}function Qk(t,e){return t===null?[e]:Array.isArray(t)?[...t,e]:[t,e]}function hG(t){return t._rawValidators}function fG(t){return t._rawAsyncValidators}function L0(t){return t?Array.isArray(t)?t:[t]:[]}function tg(t,e){return Array.isArray(t)?t.includes(e):t===e}function Yk(t,e){let n=L0(e);return L0(t).forEach(i=>{tg(n,i)||n.push(i)}),n}function Zk(t,e){return L0(e).filter(n=>!tg(t,n))}var ng=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=B0(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=$0(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return this.control?this.control.hasError(e,n):!1}getError(e,n){return this.control?this.control.getError(e,n):null}},ac=class extends ng{name;get formDirective(){return null}get path(){return null}},Rl=class extends ng{_parent=null;name=null;valueAccessor=null},rg=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},pG={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},jde=Z(V({},pG),{"[class.ng-submitted]":"isSubmitted"}),cg=(()=>{class t extends rg{constructor(n){super(n)}static \u0275fac=function(r){return new(r||t)(ye(Rl,2))};static \u0275dir=ot({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&du("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[Ln]})}return t})(),ug=(()=>{class t extends rg{constructor(n){super(n)}static \u0275fac=function(r){return new(r||t)(ye(ac,10))};static \u0275dir=ot({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&du("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},standalone:!1,features:[Ln]})}return t})();var Dl="VALID",eg="INVALID",oc="PENDING",Tl="DISABLED",Ji=class{},ig=class extends Ji{value;source;constructor(e,n){super(),this.value=e,this.source=n}},Sl=class extends Ji{pristine;source;constructor(e,n){super(),this.pristine=e,this.source=n}},Al=class extends Ji{touched;source;constructor(e,n){super(),this.touched=e,this.source=n}},sc=class extends Ji{status;source;constructor(e,n){super(),this.status=e,this.source=n}},V0=class extends Ji{source;constructor(e){super(),this.source=e}},og=class extends Ji{source;constructor(e){super(),this.source=e}};function lP(t){return(lg(t)?t.validators:t)||null}function gG(t){return Array.isArray(t)?B0(t):t||null}function dP(t,e){return(lg(e)?e.asyncValidators:t)||null}function mG(t){return Array.isArray(t)?$0(t):t||null}function lg(t){return t!=null&&!Array.isArray(t)&&typeof t=="object"}function yG(t,e,n){let r=t.controls;if(!(e?Object.keys(r):r).length)throw new H(1e3,"");if(!r[n])throw new H(1001,"")}function vG(t,e,n){t._forEachChild((r,i)=>{if(n[i]===void 0)throw new H(1002,"")})}var sg=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,n){this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return It(this.statusReactive)}set status(e){It(()=>this.statusReactive.set(e))}_status=Kt(()=>this.statusReactive());statusReactive=Ae(void 0);get valid(){return this.status===Dl}get invalid(){return this.status===eg}get pending(){return this.status==oc}get disabled(){return this.status===Tl}get enabled(){return this.status!==Tl}errors;get pristine(){return It(this.pristineReactive)}set pristine(e){It(()=>this.pristineReactive.set(e))}_pristine=Kt(()=>this.pristineReactive());pristineReactive=Ae(!0);get dirty(){return!this.pristine}get touched(){return It(this.touchedReactive)}set touched(e){It(()=>this.touchedReactive.set(e))}_touched=Kt(()=>this.touchedReactive());touchedReactive=Ae(!1);get untouched(){return!this.touched}_events=new We;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(Yk(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Yk(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Zk(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Zk(e,this._rawAsyncValidators))}hasValidator(e){return tg(this._rawValidators,e)}hasAsyncValidator(e){return tg(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let n=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(Z(V({},e),{sourceControl:r})),n&&e.emitEvent!==!1&&this._events.next(new Al(!0,r))}markAllAsDirty(e={}){this.markAsDirty({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsDirty(e))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsTouched(e))}markAsUntouched(e={}){let n=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),n&&e.emitEvent!==!1&&this._events.next(new Al(!1,r))}markAsDirty(e={}){let n=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(Z(V({},e),{sourceControl:r})),n&&e.emitEvent!==!1&&this._events.next(new Sl(!1,r))}markAsPristine(e={}){let n=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),n&&e.emitEvent!==!1&&this._events.next(new Sl(!0,r))}markAsPending(e={}){this.status=oc;let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new sc(this.status,n)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(Z(V({},e),{sourceControl:n}))}disable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=Tl,this.errors=null,this._forEachChild(i=>{i.disable(Z(V({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new ig(this.value,r)),this._events.next(new sc(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Z(V({},e),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=Dl,this._forEachChild(r=>{r.enable(Z(V({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Z(V({},e),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,n){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},n),this._parent._updateTouched({},n))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Dl||this.status===oc)&&this._runAsyncValidator(r,e.emitEvent)}let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new ig(this.value,n)),this._events.next(new sc(this.status,n)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(Z(V({},e),{sourceControl:n}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Tl:Dl}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,n){if(this.asyncValidator){this.status=oc,this._hasOwnPendingAsyncValidator={emitEvent:n!==!1,shouldHaveEmitted:e!==!1};let r=sP(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:n,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(n.emitEvent!==!1,this,n.shouldHaveEmitted)}get(e){let n=e;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(e,n){let r=n?this.get(n):this;return r&&r.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,n,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new sc(this.status,n)),this._parent&&this._parent._updateControlsErrors(e,n,r)}_initObservables(){this.valueChanges=new Qe,this.statusChanges=new Qe}_calculateStatus(){return this._allControlsDisabled()?Tl:this.errors?eg:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(oc)?oc:this._anyControlsHaveStatus(eg)?eg:Dl}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,n){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,n),i&&this._events.next(new Sl(this.pristine,n))}_updateTouched(e={},n){this.touched=this._anyControlsTouched(),this._events.next(new Al(this.touched,n)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,n)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){lg(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let n=this._parent&&this._parent.dirty;return!e&&!!n&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=gG(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=mG(this._rawAsyncValidators)}},ag=class extends sg{constructor(e,n,r){super(lP(n),dP(r,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(e,n){return this.controls[e]?this.controls[e]:(this.controls[e]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(e,n,r={}){this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(e,n,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],n&&this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,n={}){vG(this,!0,e),Object.keys(e).forEach(r=>{yG(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e={},n={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n,this),this._updateTouched(n,this),this.updateValueAndValidity(n),n?.emitEvent!==!1&&this._events.next(new og(this))}getRawValue(){return this._reduceChildren({},(e,n,r)=>(e[r]=n.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(n,r)=>r._syncPendingControls()?!0:n);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(n=>{let r=this.controls[n];r&&e(r,n)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[n,r]of Object.entries(this.controls))if(this.contains(n)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(n,r,i)=>((r.enabled||this.disabled)&&(n[i]=r.value),n))}_reduceChildren(e,n){let r=e;return this._forEachChild((i,o)=>{r=n(r,i,o)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var H0=new q("",{providedIn:"root",factory:()=>q0}),q0="always";function _G(t,e){return[...e.path,t]}function hP(t,e,n=q0){fP(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||n==="always")&&e.valueAccessor.setDisabledState?.(t.disabled),IG(t,e),bG(t,e),wG(t,e),EG(t,e)}function Jk(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function EG(t,e){if(e.valueAccessor.setDisabledState){let n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}function fP(t,e){let n=hG(t);e.validator!==null?t.setValidators(Qk(n,e.validator)):typeof n=="function"&&t.setValidators([n]);let r=fG(t);e.asyncValidator!==null?t.setAsyncValidators(Qk(r,e.asyncValidator)):typeof r=="function"&&t.setAsyncValidators([r]);let i=()=>t.updateValueAndValidity();Jk(e._rawValidators,i),Jk(e._rawAsyncValidators,i)}function IG(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,t.updateOn==="change"&&pP(t,e)})}function wG(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,t.updateOn==="blur"&&t._pendingChange&&pP(t,e),t.updateOn!=="submit"&&t.markAsTouched()})}function pP(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function bG(t,e){let n=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}function DG(t,e){t==null,fP(t,e)}function TG(t,e){if(!t.hasOwnProperty("model"))return!1;let n=t.model;return n.isFirstChange()?!0:!Object.is(e,n.currentValue)}function CG(t){return Object.getPrototypeOf(t.constructor)===rP}function SG(t,e){t._syncPendingControls(),e.forEach(n=>{let r=n.control;r.updateOn==="submit"&&r._pendingChange&&(n.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function AG(t,e){if(!e)return null;Array.isArray(e);let n,r,i;return e.forEach(o=>{o.constructor===cc?n=o:CG(o)?r=o:i=o}),i||r||n||null}var RG={provide:ac,useExisting:Zn(()=>Nl)},Cl=Promise.resolve(),Nl=(()=>{class t extends ac{callSetDisabledState;get submitted(){return It(this.submittedReactive)}_submitted=Kt(()=>this.submittedReactive());submittedReactive=Ae(!1);_directives=new Set;form;ngSubmit=new Qe;options;constructor(n,r,i){super(),this.callSetDisabledState=i,this.form=new ag({},B0(n),$0(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(n){Cl.then(()=>{let r=this._findContainer(n.path);n.control=r.registerControl(n.name,n.control),hP(n.control,n,this.callSetDisabledState),n.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(n)})}getControl(n){return this.form.get(n.path)}removeControl(n){Cl.then(()=>{let r=this._findContainer(n.path);r&&r.removeControl(n.name),this._directives.delete(n)})}addFormGroup(n){Cl.then(()=>{let r=this._findContainer(n.path),i=new ag({});DG(i,n),r.registerControl(n.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(n){Cl.then(()=>{let r=this._findContainer(n.path);r&&r.removeControl(n.name)})}getFormGroup(n){return this.form.get(n.path)}updateModel(n,r){Cl.then(()=>{this.form.get(n.path).setValue(r)})}setValue(n){this.control.setValue(n)}onSubmit(n){return this.submittedReactive.set(!0),SG(this.form,this._directives),this.ngSubmit.emit(n),this.form._events.next(new V0(this.control)),n?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(n=void 0){this.form.reset(n),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(n){return n.pop(),n.length?this.form.get(n):this.form}static \u0275fac=function(r){return new(r||t)(ye(U0,10),ye(iP,10),ye(H0,8))};static \u0275dir=ot({type:t,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){r&1&&Le("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[Vo([RG]),Ln]})}return t})();function Xk(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function eP(t){return typeof t=="object"&&t!==null&&Object.keys(t).length===2&&"value"in t&&"disabled"in t}var xG=class extends sg{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,n,r){super(lP(n),dP(r,n)),this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),lg(n)&&(n.nonNullable||n.initialValueIsDefault)&&(eP(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1,n?.emitEvent!==!1&&this._events.next(new og(this))}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Xk(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Xk(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){eP(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var NG={provide:Rl,useExisting:Zn(()=>Ml)},tP=Promise.resolve(),Ml=(()=>{class t extends Rl{_changeDetectorRef;callSetDisabledState;control=new xG;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new Qe;constructor(n,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this._parent=n,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=AG(this,o)}ngOnChanges(n){if(this._checkForErrors(),!this._registered||"name"in n){if(this._registered&&(this._checkName(),this.formDirective)){let r=n.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in n&&this._updateDisabled(n),TG(n,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){hP(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(n){tP.then(()=>{this.control.setValue(n,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(n){let r=n.isDisabled.currentValue,i=r!==0&&Ri(r);tP.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(n){return this._parent?_G(n,this._parent):[n]}static \u0275fac=function(r){return new(r||t)(ye(ac,9),ye(U0,10),ye(iP,10),ye(j0,10),ye(Ai,8),ye(H0,8))};static \u0275dir=ot({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[Vo([NG]),Ln,or]})}return t})();var dg=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275dir=ot({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return t})();var MG=(()=>{class t{_validator=Kk;_onChange;_enabled;ngOnChanges(n){if(this.inputName in n){let r=this.normalizeInput(n[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):Kk,this._onChange&&this._onChange()}}validate(n){return this._validator(n)}registerOnValidatorChange(n){this._onChange=n}enabled(n){return n!=null}static \u0275fac=function(r){return new(r||t)};static \u0275dir=ot({type:t,features:[or]})}return t})();var kG={provide:U0,useExisting:Zn(()=>kl),multi:!0};var kl=(()=>{class t extends MG{required;inputName="required";normalizeInput=Ri;createValidator=n=>cG;enabled(n){return n}static \u0275fac=(()=>{let n;return function(i){return(n||(n=wi(t)))(i||t)}})();static \u0275dir=ot({type:t,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){r&2&&Si("required",i._enabled?"":null)},inputs:{required:"required"},standalone:!1,features:[Vo([kG]),Ln]})}return t})();var PG=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=Di({type:t});static \u0275inj=Fr({})}return t})();var hg=(()=>{class t{static withConfig(n){return{ngModule:t,providers:[{provide:H0,useValue:n.callSetDisabledState??q0}]}}static \u0275fac=function(r){return new(r||t)};static \u0275mod=Di({type:t});static \u0275inj=Fr({imports:[PG]})}return t})();var OG=(t,e)=>e.name;function FG(t,e){if(t&1&&(A(0,"div",20),qe(1,"img",21),A(2,"p"),F(3),N()()),t&2){let n=e.$implicit,r=fe(2);T(),P(r.isDark()?"border-gray-600":"border-gray-300"),le("src",n.url,nn)("alt",n.name),T(),P(r.isDark()?"text-xs text-gray-400 mt-1 truncate":"text-xs text-gray-500 mt-1 truncate"),T(),ft(n.name)}}function LG(t,e){if(t&1&&(A(0,"div",13)(1,"h4"),F(2,"Selected Images:"),N(),A(3,"div",8),Vn(4,FG,4,7,"div",20,OG),N()()),t&2){let n=fe();T(),P(n.isDark()?"text-sm font-medium text-white mb-2":"text-sm font-medium text-gray-700 mb-2"),T(3),jn(n.imagePreviews)}}function VG(t,e){if(t&1&&(A(0,"div",16),F(1),N()),t&2){let n=fe();T(),In(" ",n.error()," ")}}function jG(t,e){t&1&&F(0," Creating... ")}function UG(t,e){t&1&&F(0," Create Project ")}var fg=class t{themeService=R(rn);projectsService=R(Cr);router=R($t);project={title:"",description:"",tags:[],links:{},images:[],published:!1};tagsInput="";error=Ae(null);imagePreviews=[];isDark(){return this.themeService.isDark()}async onSubmit(){this.error.set(null),this.project.tags=this.tagsInput.split(",").map(e=>e.trim()).filter(e=>e.length>0);try{if(this.imagePreviews.length>0){let e=this.getSelectedFiles();if(console.log("Files to upload:",e),e.length>0){let n=await this.projectsService.uploadImages(e);console.log("Uploaded image URLs:",n),this.project.images=n.filter(r=>r.startsWith("http")),console.log("Final images array:",this.project.images)}}else this.project.images=[];console.log("Project data before saving:",this.project),await this.projectsService.addProject(this.project),this.router.navigateByUrl("/admin")}catch(e){console.error("Error creating project:",e),this.error.set("Failed to create project. Please try again.")}}onImageChange(e){let n=e.target.files;n&&n.length>0&&(this.imagePreviews=Array.from(n).map(r=>({name:r.name,url:URL.createObjectURL(r),file:r})),this.project.images=[])}getSelectedFiles(){return this.imagePreviews.map(e=>e.file)}goBack(){this.router.navigateByUrl("/admin")}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Ye({type:t,selectors:[["app-add-project"]],decls:56,vars:55,consts:[[1,"container","mx-auto","px-4","sm:px-6","py-6","sm:py-8"],[1,"max-w-2xl","mx-auto"],[1,"mb-6","sm:mb-8"],[3,"ngSubmit"],[1,"mb-6"],["type","text","name","title","required","","placeholder","Enter project title",3,"ngModelChange","ngModel"],["name","description","rows","4","required","","placeholder","Describe your project...",3,"ngModelChange","ngModel"],["type","text","name","tags","placeholder","React, Angular, Node.js, etc.",3,"ngModelChange","ngModel"],[1,"grid","grid-cols-1","sm:grid-cols-2","lg:grid-cols-3","gap-4"],["type","url","name","demo","placeholder","https://demo.example.com",3,"ngModelChange","ngModel"],["type","url","name","repo","placeholder","https://github.com/user/repo",3,"ngModelChange","ngModel"],["type","url","name","live","placeholder","https://live.example.com",3,"ngModelChange","ngModel"],["type","file","multiple","","accept","image/*",3,"change"],[1,"mt-4"],[1,"flex","items-center"],["type","checkbox","name","published",1,"mr-3",3,"ngModelChange","ngModel"],[1,"mb-6","p-4","bg-red-100","border","border-red-400","text-red-700","rounded"],[1,"flex","flex-col","sm:flex-row","gap-3","sm:gap-4"],["type","submit",1,"bg-blue-600","hover:bg-blue-700","disabled:bg-gray-400","text-white","px-6","py-2","rounded-lg","font-semibold","transition-colors","flex-1","sm:flex-none",3,"disabled"],["type","button",3,"click"],[1,"relative"],[1,"w-full","h-32","object-cover","rounded-lg","border",3,"src","alt"]],template:function(n,r){n&1&&(A(0,"div")(1,"div",0)(2,"div",1)(3,"div",2)(4,"h1"),F(5,"Add New Project"),N(),A(6,"p"),F(7,"Create a new project for your portfolio"),N()(),A(8,"form",3),Le("ngSubmit",function(){return r.onSubmit()}),A(9,"div",4)(10,"label"),F(11,"Project Title"),N(),A(12,"input",5),Et("ngModelChange",function(o){return xt(r.project.title,o)||(r.project.title=o),o}),N()(),A(13,"div",4)(14,"label"),F(15,"Description"),N(),A(16,"textarea",6),Et("ngModelChange",function(o){return xt(r.project.description,o)||(r.project.description=o),o}),N()(),A(17,"div",4)(18,"label"),F(19,"Tags (comma-separated)"),N(),A(20,"input",7),Et("ngModelChange",function(o){return xt(r.tagsInput,o)||(r.tagsInput=o),o}),N()(),A(21,"div",4)(22,"h3"),F(23,"Project Links"),N(),A(24,"div",8)(25,"div")(26,"label"),F(27,"Demo URL"),N(),A(28,"input",9),Et("ngModelChange",function(o){return xt(r.project.links.demo,o)||(r.project.links.demo=o),o}),N()(),A(29,"div")(30,"label"),F(31,"Repository URL"),N(),A(32,"input",10),Et("ngModelChange",function(o){return xt(r.project.links.repo,o)||(r.project.links.repo=o),o}),N()(),A(33,"div")(34,"label"),F(35,"Live URL"),N(),A(36,"input",11),Et("ngModelChange",function(o){return xt(r.project.links.live,o)||(r.project.links.live=o),o}),N()()()(),A(37,"div",4)(38,"label"),F(39,"Project Images"),N(),A(40,"input",12),Le("change",function(o){return r.onImageChange(o)}),N(),A(41,"p"),F(42,"Select multiple images for your project"),N(),xe(43,LG,6,2,"div",13),N(),A(44,"div",4)(45,"label",14)(46,"input",15),Et("ngModelChange",function(o){return xt(r.project.published,o)||(r.project.published=o),o}),N(),A(47,"span"),F(48,"Publish this project (make it visible on the public site)"),N()()(),xe(49,VG,2,1,"div",16),A(50,"div",17)(51,"button",18),xe(52,jG,1,0)(53,UG,1,0),N(),A(54,"button",19),Le("click",function(){return r.goBack()}),F(55," Cancel "),N()()()()()()),n&2&&(P(r.isDark()?"min-h-screen bg-gradient-to-br from-gray-900 via-gray-800 to-black":"min-h-screen bg-gradient-to-br from-gray-50 via-white to-gray-100"),T(4),P(r.isDark()?"text-2xl sm:text-3xl font-bold text-white mb-2":"text-2xl sm:text-3xl font-bold text-gray-900 mb-2"),T(2),P(r.isDark()?"text-sm sm:text-base text-gray-400":"text-sm sm:text-base text-gray-600"),T(2),P(r.isDark()?"bg-gray-800 p-4 sm:p-6 rounded-lg":"bg-white p-4 sm:p-6 rounded-lg shadow-md"),T(2),P(r.isDark()?"block text-sm font-medium text-white mb-2":"block text-sm font-medium text-gray-700 mb-2"),T(2),P(r.isDark()?"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500":"w-full px-3 py-2 bg-white border border-gray-300 rounded-md text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500"),_t("ngModel",r.project.title),T(2),P(r.isDark()?"block text-sm font-medium text-white mb-2":"block text-sm font-medium text-gray-700 mb-2"),T(2),P(r.isDark()?"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500":"w-full px-3 py-2 bg-white border border-gray-300 rounded-md text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500"),_t("ngModel",r.project.description),T(2),P(r.isDark()?"block text-sm font-medium text-white mb-2":"block text-sm font-medium text-gray-700 mb-2"),T(2),P(r.isDark()?"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500":"w-full px-3 py-2 bg-white border border-gray-300 rounded-md text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500"),_t("ngModel",r.tagsInput),T(2),P(r.isDark()?"text-lg font-medium text-white mb-4":"text-lg font-medium text-gray-900 mb-4"),T(4),P(r.isDark()?"block text-sm font-medium text-white mb-2":"block text-sm font-medium text-gray-700 mb-2"),T(2),P(r.isDark()?"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500":"w-full px-3 py-2 bg-white border border-gray-300 rounded-md text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500"),_t("ngModel",r.project.links.demo),T(2),P(r.isDark()?"block text-sm font-medium text-white mb-2":"block text-sm font-medium text-gray-700 mb-2"),T(2),P(r.isDark()?"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500":"w-full px-3 py-2 bg-white border border-gray-300 rounded-md text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500"),_t("ngModel",r.project.links.repo),T(2),P(r.isDark()?"block text-sm font-medium text-white mb-2":"block text-sm font-medium text-gray-700 mb-2"),T(2),P(r.isDark()?"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500":"w-full px-3 py-2 bg-white border border-gray-300 rounded-md text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500"),_t("ngModel",r.project.links.live),T(2),P(r.isDark()?"block text-sm font-medium text-white mb-2":"block text-sm font-medium text-gray-700 mb-2"),T(2),P(r.isDark()?"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-blue-600 file:text-white hover:file:bg-blue-700":"w-full px-3 py-2 bg-white border border-gray-300 rounded-md text-gray-900 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-blue-600 file:text-white hover:file:bg-blue-700"),T(),P(r.isDark()?"text-sm text-gray-400 mt-1":"text-sm text-gray-500 mt-1"),T(2),Ne(r.imagePreviews.length>0?43:-1),T(3),_t("ngModel",r.project.published),T(),P(r.isDark()?"text-white":"text-gray-900"),T(2),Ne(r.error()?49:-1),T(2),le("disabled",r.projectsService.isLoading),T(),Ne(r.projectsService.isLoading?52:53),T(2),P(r.isDark()?"bg-gray-700 hover:bg-gray-600 text-white px-6 py-2 rounded-lg font-semibold transition-colors flex-1 sm:flex-none":"bg-gray-200 hover:bg-gray-300 text-gray-900 px-6 py-2 rounded-lg font-semibold transition-colors flex-1 sm:flex-none"))},dependencies:[hg,dg,cc,xl,cg,ug,kl,Ml,Nl],encapsulation:2})};var BG=(t,e)=>e.name;function $G(t,e){if(t&1&&(A(0,"div",21),qe(1,"img",22),A(2,"p"),F(3,"Current Image"),N()()),t&2){let n=e.$implicit,r=fe(2);T(),P(r.isDark()?"border-gray-600":"border-gray-300"),le("src",n,nn)("alt","Project image"),T(),P(r.isDark()?"text-xs text-gray-400 mt-1 truncate":"text-xs text-gray-500 mt-1 truncate")}}function HG(t,e){if(t&1&&(A(0,"div",13)(1,"h4"),F(2,"Current Images:"),N(),A(3,"div",20),Vn(4,$G,4,6,"div",21,uu),N(),A(6,"p"),F(7,"Select new images above to replace current ones"),N()()),t&2){let n=fe();T(),P(n.isDark()?"text-sm font-medium text-white mb-2":"text-sm font-medium text-gray-700 mb-2"),T(3),jn(n.project.images),T(2),P(n.isDark()?"text-xs text-gray-400 mt-2":"text-xs text-gray-500 mt-2")}}function qG(t,e){if(t&1&&(A(0,"div",21),qe(1,"img",22),A(2,"p"),F(3),N()()),t&2){let n=e.$implicit,r=fe(2);T(),P(r.isDark()?"border-gray-600":"border-gray-300"),le("src",n.url,nn)("alt",n.name),T(),P(r.isDark()?"text-xs text-gray-400 mt-1 truncate":"text-xs text-gray-500 mt-1 truncate"),T(),ft(n.name)}}function zG(t,e){if(t&1&&(A(0,"div",13)(1,"h4"),F(2,"New Images:"),N(),A(3,"div",20),Vn(4,qG,4,7,"div",21,BG),N()()),t&2){let n=fe();T(),P(n.isDark()?"text-sm font-medium text-white mb-2":"text-sm font-medium text-gray-700 mb-2"),T(3),jn(n.imagePreviews)}}function GG(t,e){if(t&1&&(A(0,"div",16),F(1),N()),t&2){let n=fe();T(),In(" ",n.error()," ")}}function WG(t,e){t&1&&F(0," Updating... ")}function KG(t,e){t&1&&F(0," Update Project ")}var pg=class t{themeService=R(rn);projectsService=R(Cr);router=R($t);route=R(Qn);project={id:"",title:"",description:"",tags:[],links:{},images:[],published:!1,createdAt:new Date,updatedAt:new Date};tagsInput="";error=Ae(null);imagePreviews=[];ngOnInit(){let e=this.route.snapshot.paramMap.get("id");if(e){let n=this.projectsService.allProjects.find(r=>r.id===e);n?(this.project=V({},n),this.tagsInput=n.tags.join(", "),n.images&&n.images.length>0&&console.log("Existing project images:",n.images)):this.router.navigateByUrl("/admin")}}isDark(){return this.themeService.isDark()}async onSubmit(){this.error.set(null),this.project.tags=this.tagsInput.split(",").map(e=>e.trim()).filter(e=>e.length>0);try{if(this.imagePreviews.length>0){let e=this.getSelectedFiles();if(console.log("Files to upload:",e),e.length>0){let n=await this.projectsService.uploadImages(e);console.log("Uploaded image URLs:",n),this.project.images=n.filter(r=>r.startsWith("http")),console.log("Final images array:",this.project.images)}}console.log("Project data before updating:",this.project),await this.projectsService.updateProject(this.project.id,this.project),this.router.navigateByUrl("/admin")}catch(e){console.error("Error updating project:",e),this.error.set("Failed to update project. Please try again.")}}onImageChange(e){let n=e.target.files;n&&n.length>0&&(this.imagePreviews=Array.from(n).map(r=>({name:r.name,url:URL.createObjectURL(r),file:r})),this.project.images=[])}getSelectedFiles(){return this.imagePreviews.map(e=>e.file)}goBack(){this.router.navigateByUrl("/admin")}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Ye({type:t,selectors:[["app-edit-project"]],decls:57,vars:56,consts:[[1,"container","mx-auto","px-6","py-8"],[1,"max-w-2xl","mx-auto"],[1,"mb-8"],[3,"ngSubmit"],[1,"mb-6"],["type","text","name","title","required","","placeholder","Enter project title",3,"ngModelChange","ngModel"],["name","description","rows","4","required","","placeholder","Describe your project...",3,"ngModelChange","ngModel"],["type","text","name","tags","placeholder","React, Angular, Node.js, etc.",3,"ngModelChange","ngModel"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-4"],["type","url","name","demo","placeholder","https://demo.example.com",3,"ngModelChange","ngModel"],["type","url","name","repo","placeholder","https://github.com/user/repo",3,"ngModelChange","ngModel"],["type","url","name","live","placeholder","https://live.example.com",3,"ngModelChange","ngModel"],["type","file","multiple","","accept","image/*",3,"change"],[1,"mt-4"],[1,"flex","items-center"],["type","checkbox","name","published",1,"mr-3",3,"ngModelChange","ngModel"],[1,"mb-6","p-4","bg-red-100","border","border-red-400","text-red-700","rounded"],[1,"flex","gap-4"],["type","submit",1,"bg-blue-600","hover:bg-blue-700","disabled:bg-gray-400","text-white","px-6","py-2","rounded-lg","font-semibold","transition-colors",3,"disabled"],["type","button",3,"click"],[1,"grid","grid-cols-2","md:grid-cols-3","gap-4"],[1,"relative"],[1,"w-full","h-32","object-cover","rounded-lg","border",3,"src","alt"]],template:function(n,r){n&1&&(A(0,"div")(1,"div",0)(2,"div",1)(3,"div",2)(4,"h1"),F(5,"Edit Project"),N(),A(6,"p"),F(7,"Update your project details"),N()(),A(8,"form",3),Le("ngSubmit",function(){return r.onSubmit()}),A(9,"div",4)(10,"label"),F(11,"Project Title"),N(),A(12,"input",5),Et("ngModelChange",function(o){return xt(r.project.title,o)||(r.project.title=o),o}),N()(),A(13,"div",4)(14,"label"),F(15,"Description"),N(),A(16,"textarea",6),Et("ngModelChange",function(o){return xt(r.project.description,o)||(r.project.description=o),o}),N()(),A(17,"div",4)(18,"label"),F(19,"Tags (comma-separated)"),N(),A(20,"input",7),Et("ngModelChange",function(o){return xt(r.tagsInput,o)||(r.tagsInput=o),o}),N()(),A(21,"div",4)(22,"h3"),F(23,"Project Links"),N(),A(24,"div",8)(25,"div")(26,"label"),F(27,"Demo URL"),N(),A(28,"input",9),Et("ngModelChange",function(o){return xt(r.project.links.demo,o)||(r.project.links.demo=o),o}),N()(),A(29,"div")(30,"label"),F(31,"Repository URL"),N(),A(32,"input",10),Et("ngModelChange",function(o){return xt(r.project.links.repo,o)||(r.project.links.repo=o),o}),N()(),A(33,"div")(34,"label"),F(35,"Live URL"),N(),A(36,"input",11),Et("ngModelChange",function(o){return xt(r.project.links.live,o)||(r.project.links.live=o),o}),N()()()(),A(37,"div",4)(38,"label"),F(39,"Project Images"),N(),A(40,"input",12),Le("change",function(o){return r.onImageChange(o)}),N(),A(41,"p"),F(42,"Select multiple images for your project"),N(),xe(43,HG,8,4,"div",13),xe(44,zG,6,2,"div",13),N(),A(45,"div",4)(46,"label",14)(47,"input",15),Et("ngModelChange",function(o){return xt(r.project.published,o)||(r.project.published=o),o}),N(),A(48,"span"),F(49,"Publish this project (make it visible on the public site)"),N()()(),xe(50,GG,2,1,"div",16),A(51,"div",17)(52,"button",18),xe(53,WG,1,0)(54,KG,1,0),N(),A(55,"button",19),Le("click",function(){return r.goBack()}),F(56," Cancel "),N()()()()()()),n&2&&(P(r.isDark()?"min-h-screen bg-gradient-to-br from-gray-900 via-gray-800 to-black":"min-h-screen bg-gradient-to-br from-gray-50 via-white to-gray-100"),T(4),P(r.isDark()?"text-3xl font-bold text-white mb-2":"text-3xl font-bold text-gray-900 mb-2"),T(2),P(r.isDark()?"text-gray-400":"text-gray-600"),T(2),P(r.isDark()?"bg-gray-800 p-6 rounded-lg":"bg-white p-6 rounded-lg shadow-md"),T(2),P(r.isDark()?"block text-sm font-medium text-white mb-2":"block text-sm font-medium text-gray-700 mb-2"),T(2),P(r.isDark()?"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500":"w-full px-3 py-2 bg-white border border-gray-300 rounded-md text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500"),_t("ngModel",r.project.title),T(2),P(r.isDark()?"block text-sm font-medium text-white mb-2":"block text-sm font-medium text-gray-700 mb-2"),T(2),P(r.isDark()?"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500":"w-full px-3 py-2 bg-white border border-gray-300 rounded-md text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500"),_t("ngModel",r.project.description),T(2),P(r.isDark()?"block text-sm font-medium text-white mb-2":"block text-sm font-medium text-gray-700 mb-2"),T(2),P(r.isDark()?"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500":"w-full px-3 py-2 bg-white border border-gray-300 rounded-md text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500"),_t("ngModel",r.tagsInput),T(2),P(r.isDark()?"text-lg font-medium text-white mb-4":"text-lg font-medium text-gray-900 mb-4"),T(4),P(r.isDark()?"block text-sm font-medium text-white mb-2":"block text-sm font-medium text-gray-700 mb-2"),T(2),P(r.isDark()?"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500":"w-full px-3 py-2 bg-white border border-gray-300 rounded-md text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500"),_t("ngModel",r.project.links.demo),T(2),P(r.isDark()?"block text-sm font-medium text-white mb-2":"block text-sm font-medium text-gray-700 mb-2"),T(2),P(r.isDark()?"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500":"w-full px-3 py-2 bg-white border border-gray-300 rounded-md text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500"),_t("ngModel",r.project.links.repo),T(2),P(r.isDark()?"block text-sm font-medium text-white mb-2":"block text-sm font-medium text-gray-700 mb-2"),T(2),P(r.isDark()?"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500":"w-full px-3 py-2 bg-white border border-gray-300 rounded-md text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500"),_t("ngModel",r.project.links.live),T(2),P(r.isDark()?"block text-sm font-medium text-white mb-2":"block text-sm font-medium text-gray-700 mb-2"),T(2),P(r.isDark()?"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-blue-600 file:text-white hover:file:bg-blue-700":"w-full px-3 py-2 bg-white border border-gray-300 rounded-md text-gray-900 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-blue-600 file:text-white hover:file:bg-blue-700"),T(),P(r.isDark()?"text-sm text-gray-400 mt-1":"text-sm text-gray-500 mt-1"),T(2),Ne(r.project.images&&r.project.images.length>0&&r.imagePreviews.length===0?43:-1),T(),Ne(r.imagePreviews.length>0?44:-1),T(3),_t("ngModel",r.project.published),T(),P(r.isDark()?"text-white":"text-gray-900"),T(2),Ne(r.error()?50:-1),T(2),le("disabled",r.projectsService.isLoading),T(),Ne(r.projectsService.isLoading?53:54),T(2),P(r.isDark()?"bg-gray-700 hover:bg-gray-600 text-white px-6 py-2 rounded-lg font-semibold transition-colors":"bg-gray-200 hover:bg-gray-300 text-gray-900 px-6 py-2 rounded-lg font-semibold transition-colors"))},dependencies:[hg,dg,cc,xl,cg,ug,kl,Ml,Nl],encapsulation:2})};var Xi=class t{auth=R(Ko);user=Ae(null);isAuthed=Kt(()=>!!this.user());constructor(){LR(this.auth,e=>this.user.set(e))}async signInWithGoogle(){let e=new pE;await VR(this.auth,e)}async signOut(){await jR(this.auth)}static \u0275fac=function(n){return new(n||t)};static \u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"})};var QG=["khaledalhoussein3@gmail.com"],gg=()=>{let t=R(Xi),e=R($t),n=t.user();return n&&QG.includes(n.email||"")?!0:(e.navigateByUrl("/"),!1)};var mg=class t{auth=R(Xi);router=R($t);async ngOnInit(){try{if(this.auth.isAuthed()){await this.router.navigateByUrl("/");return}await this.auth.signInWithGoogle()}catch(e){console.error("Sign-in failed:",e)}finally{await this.router.navigateByUrl("/")}}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Ye({type:t,selectors:[["app-signin"]],decls:4,vars:0,consts:[[1,"min-h-screen","flex","items-center","justify-center"],[1,"text-center"],[1,"text-lg","text-gray-600"]],template:function(n,r){n&1&&(Fo(0,"div",0)(1,"div",1)(2,"p",2),F(3,"Signing you in..."),Lo()()())},encapsulation:2})};var mP=[{path:"",component:Zp},{path:"signin",component:mg},{path:"admin",component:Xp,canActivate:[gg]},{path:"admin/add",component:fg,canActivate:[gg]},{path:"admin/edit/:id",component:pg,canActivate:[gg]}];var yP={providers:[fy(),$v(),O0(mP,F0({anchorScrolling:"enabled",scrollPositionRestoration:"enabled"})),FA(()=>LA(nk.firebase)),OR(()=>FR()),gM(()=>_M()),ZM(()=>ek())]};var vP=()=>({exact:!0});function YG(t,e){if(t&1&&(A(0,"a",16),F(1," Sign in "),N()),t&2){let n=fe();P(n.isDark()?"text-gray-300 hover:text-white px-3 py-2 rounded-md text-sm font-medium transition-colors":"text-gray-600 hover:text-gray-900 px-3 py-2 rounded-md text-sm font-medium transition-colors")}}function ZG(t,e){if(t&1&&(A(0,"a",17),F(1," Admin "),N()),t&2){let n=fe();P(n.isDark()?"text-gray-300 hover:text-white px-3 py-2 rounded-md text-sm font-medium transition-colors":"text-gray-600 hover:text-gray-900 px-3 py-2 rounded-md text-sm font-medium transition-colors")}}function JG(t,e){if(t&1){let n=sa();A(0,"button",18),Le("click",function(){To(n);let i=fe();return Co(i.auth.signOut())}),F(1,"Sign out"),N()}}function XG(t,e){if(t&1&&(A(0,"a",16),F(1," Sign in "),N()),t&2){let n=fe();P(n.isDark()?"text-gray-300 hover:text-white block px-3 py-2 rounded-md text-base font-medium":"text-gray-600 hover:text-gray-900 block px-3 py-2 rounded-md text-base font-medium")}}function e5(t,e){if(t&1&&(A(0,"a",17),F(1," Admin "),N()),t&2){let n=fe();P(n.isDark()?"text-gray-300 hover:text-white block px-3 py-2 rounded-md text-base font-medium":"text-gray-600 hover:text-gray-900 block px-3 py-2 rounded-md text-base font-medium")}}function t5(t,e){if(t&1){let n=sa();A(0,"button",19),Le("click",function(){To(n);let i=fe();return Co(i.auth.signOut())}),F(1,"Sign out"),N()}}var yg=class t{themeService=R(rn);auth=R(Xi);router=R($t);mobileMenuOpen=!1;constructor(){qv(()=>{let e=this.auth.isAuthed(),n=this.router.url;!e&&n.startsWith("/admin")&&this.router.navigateByUrl("/")})}toggleMobileMenu(){this.mobileMenuOpen=!this.mobileMenuOpen}isDark(){return this.themeService.isDark()}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Ye({type:t,selectors:[["app-nav"]],decls:35,vars:42,consts:[[1,"max-w-7xl","mx-auto","px-4","sm:px-6","lg:px-8"],[1,"flex","justify-between","items-center","h-16"],[1,"flex","items-center"],["routerLink","/"],[1,"hidden","md:flex","items-center","space-x-2","lg:space-x-4"],["routerLink","/","routerLinkActive","text-blue-600",3,"routerLinkActiveOptions"],["routerLink","/",3,"fragment"],["routerLink","/signin",3,"class"],["routerLink","/admin","routerLinkActive","text-blue-600",3,"class"],[3,"click"],[1,"bg-red-600","hover:bg-red-700","text-white","px-3","py-2","rounded-md","text-sm","font-medium","transition-colors"],[1,"md:hidden"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-6","w-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 6h16M4 12h16M4 18h16"],[1,"px-2","pt-2","pb-3","space-y-1","sm:px-3","border-t"],[1,"bg-red-600","hover:bg-red-700","text-white","block","w-full","text-left","px-3","py-2","rounded-md","text-base","font-medium"],["routerLink","/signin"],["routerLink","/admin","routerLinkActive","text-blue-600"],[1,"bg-red-600","hover:bg-red-700","text-white","px-3","py-2","rounded-md","text-sm","font-medium","transition-colors",3,"click"],[1,"bg-red-600","hover:bg-red-700","text-white","block","w-full","text-left","px-3","py-2","rounded-md","text-base","font-medium",3,"click"]],template:function(n,r){n&1&&(A(0,"nav")(1,"div",0)(2,"div",1)(3,"div",2)(4,"a",3),F(5,"Portfolio"),N()(),A(6,"div",4)(7,"a",5),F(8," Home "),N(),A(9,"a",6),F(10," Skills "),N(),A(11,"a",6),F(12," Projects "),N(),xe(13,YG,2,2,"a",7),xe(14,ZG,2,2,"a",8),A(15,"button",9),Le("click",function(){return r.themeService.toggleTheme()}),F(16),N(),xe(17,JG,2,0,"button",10),N(),A(18,"div",11)(19,"button",9),Le("click",function(){return r.toggleMobileMenu()}),Ks(),A(20,"svg",12),qe(21,"path",13),N()()()(),Qs(),A(22,"div")(23,"div",14)(24,"a",5),F(25," Home "),N(),A(26,"a",6),F(27," Skills "),N(),A(28,"a",6),F(29," Projects "),N(),xe(30,XG,2,2,"a",7),xe(31,e5,2,2,"a",8),A(32,"button",9),Le("click",function(){return r.themeService.toggleTheme()}),F(33),N(),xe(34,t5,2,0,"button",15),N()()()()),n&2&&(P(r.isDark()?"bg-gray-900 shadow-lg border-b border-gray-800":"bg-white shadow-sm border-b border-gray-200"),T(4),P(r.isDark()?"text-lg sm:text-xl font-bold text-white":"text-lg sm:text-xl font-bold text-gray-900"),T(3),P(r.isDark()?"text-gray-300 hover:text-white px-3 py-2 rounded-md text-sm font-medium transition-colors":"text-gray-600 hover:text-gray-900 px-3 py-2 rounded-md text-sm font-medium transition-colors"),le("routerLinkActiveOptions",$h(40,vP)),T(2),P(r.isDark()?"text-gray-300 hover:text-white px-3 py-2 rounded-md text-sm font-medium transition-colors":"text-gray-600 hover:text-gray-900 px-3 py-2 rounded-md text-sm font-medium transition-colors"),le("fragment","skills"),T(2),P(r.isDark()?"text-gray-300 hover:text-white px-3 py-2 rounded-md text-sm font-medium transition-colors":"text-gray-600 hover:text-gray-900 px-3 py-2 rounded-md text-sm font-medium transition-colors"),le("fragment","projects"),T(2),Ne(r.auth.isAuthed()?-1:13),T(),Ne(r.auth.isAuthed()?14:-1),T(),P(r.isDark()?"text-gray-300 hover:text-white px-3 py-2 rounded-md text-sm font-medium transition-colors":"text-gray-600 hover:text-gray-900 px-3 py-2 rounded-md text-sm font-medium transition-colors"),T(),In(" ",r.themeService.toggleText()," "),T(),Ne(r.auth.isAuthed()?17:-1),T(2),P(r.isDark()?"text-gray-300 hover:text-white p-2 rounded-md":"text-gray-600 hover:text-gray-900 p-2 rounded-md"),T(3),P(r.mobileMenuOpen?"md:hidden":"hidden"),T(),P(r.isDark()?"border-gray-700":"border-gray-200"),T(),P(r.isDark()?"text-gray-300 hover:text-white block px-3 py-2 rounded-md text-base font-medium":"text-gray-600 hover:text-gray-900 block px-3 py-2 rounded-md text-base font-medium"),le("routerLinkActiveOptions",$h(41,vP)),T(2),P(r.isDark()?"text-gray-300 hover:text-white block px-3 py-2 rounded-md text-base font-medium":"text-gray-600 hover:text-gray-900 block px-3 py-2 rounded-md text-base font-medium"),le("fragment","skills"),T(2),P(r.isDark()?"text-gray-300 hover:text-white block px-3 py-2 rounded-md text-base font-medium":"text-gray-600 hover:text-gray-900 block px-3 py-2 rounded-md text-base font-medium"),le("fragment","projects"),T(2),Ne(r.auth.isAuthed()?-1:30),T(),Ne(r.auth.isAuthed()?31:-1),T(),P(r.isDark()?"text-gray-300 hover:text-white block w-full text-left px-3 py-2 rounded-md text-base font-medium":"text-gray-600 hover:text-gray-900 block w-full text-left px-3 py-2 rounded-md text-base font-medium"),T(),In(" ",r.themeService.toggleText()," "),T(),Ne(r.auth.isAuthed()?34:-1))},dependencies:[Zi,P0],encapsulation:2})};var vg=class t{title=Ae("portfolio");themeService=R(rn);static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Ye({type:t,selectors:[["app-root"]],decls:4,vars:2,consts:[[1,"min-h-screen"]],template:function(n,r){n&1&&(A(0,"div"),qe(1,"app-nav"),A(2,"main",0),qe(3,"router-outlet"),N()()),n&2&&P(r.themeService.themeClasses())},dependencies:[Il,yg],encapsulation:2})};d_(vg,yP).catch(t=>console.error(t));
